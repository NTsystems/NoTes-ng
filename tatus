[1mdiff --git a/assets/css/footer.css b/assets/css/footer.css[m
[1mindex 45ca39b..0db6d5d 100644[m
[1m--- a/assets/css/footer.css[m
[1m+++ b/assets/css/footer.css[m
[36m@@ -3,7 +3,7 @@[m
   bottom: 0;[m
   width: 100%;[m
   /* Set the fixed height of the footer here */[m
[31m-  height: 60px;[m
[32m+[m[32m  height: 30px;[m
   background-color: #f5f5f5;[m
   font-size: 150%;[m
[31m-}[m
\ No newline at end of file[m
[32m+[m[32m}[m
[1mdiff --git a/bower.json b/bower.json[m
[1mindex 18f4b4a..fc9c6b3 100644[m
[1m--- a/bower.json[m
[1m+++ b/bower.json[m
[36m@@ -15,10 +15,10 @@[m
     "tests"[m
   ],[m
   "dependencies": {[m
[31m-    "angular": "~1.4.0",[m
[31m-    "jquery": "~2.1.4",[m
[31m-    "bootstrap": "~3.3.4",[m
[31m-    "angular-ui-router": "~0.2.15",[m
[31m-    "angular-xeditable": "~0.1.9"[m
[32m+[m[32m    "angular": "1.4.0",[m
[32m+[m[32m    "jquery": "2.1.4",[m
[32m+[m[32m    "angular-ui-router": "0.2.15",[m
[32m+[m[32m    "angular-xeditable": "0.1.9",[m
[32m+[m[32m    "bootstrap": "3.3.2"[m
   }[m
 }[m
[1mdiff --git a/dist/notes.css b/dist/notes.css[m
[1mindex fddeaf8..31882d2 100644[m
[1m--- a/dist/notes.css[m
[1m+++ b/dist/notes.css[m
[36m@@ -1,5 +1,12 @@[m
 /*![m
[31m- * Bootstrap v3.3.4 (http://getbootstrap.com)[m
[32m+[m[32mangular-xeditable - 0.1.9[m
[32m+[m[32mEdit-in-place for angular.js[m
[32m+[m[32mBuild date: 2015-03-26[m[41m [m
[32m+[m[32m*/[m
[32m+[m
[32m+[m[32m.editable-wrap{display:inline-block;white-space:nowrap;margin:0}.editable-wrap .editable-controls,.editable-wrap .editable-error{margin-bottom:0}.editable-wrap .editable-controls>input,.editable-wrap .editable-controls>select,.editable-wrap .editable-controls>textarea{margin-bottom:0}.editable-wrap .editable-input{display:inline-block}.editable-buttons{display:inline-block;vertical-align:top}.editable-buttons button{margin-left:5px}.editable-input.editable-has-buttons{width:auto}.editable-bstime .editable-input input[type=text]{width:46px}.editable-bstime .well-small{margin-bottom:0;padding:10px}.editable-range output{display:inline-block;min-width:30px;vertical-align:top;text-align:center}.editable-color input[type=color]{width:50px}.editable-checkbox label span,.editable-checklist label span,.editable-radiolist label span{margin-left:7px;margin-right:10px}.editable-hide{display:none!important}.editable-click,a.editable-click{text-decoration:none;color:#428bca;border-bottom:dashed 1px #428bca}.editable-click:hover,a.editable-click:hover{text-decoration:none;color:#2a6496;border-bottom-color:#2a6496}.editable-empty,.editable-empty:hover,.editable-empty:focus,a.editable-empty,a.editable-empty:hover,a.editable-empty:focus{font-style:italic;color:#D14;text-decoration:none}[m
[32m+[m[32m/*![m
[32m+[m[32m * Bootstrap v3.3.2 (http://getbootstrap.com)[m
  * Copyright 2011-2015 Twitter, Inc.[m
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
  */[m
[36m@@ -958,24 +965,12 @@[m [mth {[m
 .glyphicon-bitcoin:before {[m
   content: "\e227";[m
 }[m
[31m-.glyphicon-btc:before {[m
[31m-  content: "\e227";[m
[31m-}[m
[31m-.glyphicon-xbt:before {[m
[31m-  content: "\e227";[m
[31m-}[m
 .glyphicon-yen:before {[m
   content: "\00a5";[m
 }[m
[31m-.glyphicon-jpy:before {[m
[31m-  content: "\00a5";[m
[31m-}[m
 .glyphicon-ruble:before {[m
   content: "\20bd";[m
 }[m
[31m-.glyphicon-rub:before {[m
[31m-  content: "\20bd";[m
[31m-}[m
 .glyphicon-scale:before {[m
   content: "\e230";[m
 }[m
[36m@@ -1173,9 +1168,6 @@[m [mhr {[m
   overflow: visible;[m
   clip: auto;[m
 }[m
[31m-[role="button"] {[m
[31m-  cursor: pointer;[m
[31m-}[m
 h1,[m
 h2,[m
 h3,[m
[36m@@ -2579,13 +2571,10 @@[m [moutput {[m
 .form-control[disabled],[m
 .form-control[readonly],[m
 fieldset[disabled] .form-control {[m
[32m+[m[32m  cursor: not-allowed;[m
   background-color: #eee;[m
   opacity: 1;[m
 }[m
[31m-.form-control[disabled],[m
[31m-fieldset[disabled] .form-control {[m
[31m-  cursor: not-allowed;[m
[31m-}[m
 textarea.form-control {[m
   height: auto;[m
 }[m
[36m@@ -2652,7 +2641,6 @@[m [minput[type="search"] {[m
 }[m
 .radio-inline,[m
 .checkbox-inline {[m
[31m-  position: relative;[m
   display: inline-block;[m
   padding-left: 20px;[m
   margin-bottom: 0;[m
[36m@@ -2686,7 +2674,6 @@[m [mfieldset[disabled] .checkbox label {[m
   cursor: not-allowed;[m
 }[m
 .form-control-static {[m
[31m-  min-height: 34px;[m
   padding-top: 7px;[m
   padding-bottom: 7px;[m
   margin-bottom: 0;[m
[36m@@ -2728,7 +2715,6 @@[m [mselect[multiple].form-group-sm .form-control {[m
 }[m
 .form-group-sm .form-control-static {[m
   height: 30px;[m
[31m-  min-height: 32px;[m
   padding: 5px 10px;[m
   font-size: 12px;[m
   line-height: 1.5;[m
[36m@@ -2765,7 +2751,6 @@[m [mselect[multiple].form-group-lg .form-control {[m
 }[m
 .form-group-lg .form-control-static {[m
   height: 46px;[m
[31m-  min-height: 38px;[m
   padding: 10px 16px;[m
   font-size: 18px;[m
   line-height: 1.3333333;[m
[36m@@ -3387,9 +3372,11 @@[m [minput[type="button"].btn-block {[m
 }[m
 .collapse {[m
   display: none;[m
[32m+[m[32m  visibility: hidden;[m
 }[m
 .collapse.in {[m
   display: block;[m
[32m+[m[32m  visibility: visible;[m
 }[m
 tr.collapse.in {[m
   display: table-row;[m
[36m@@ -3417,7 +3404,7 @@[m [mtbody.collapse.in {[m
   height: 0;[m
   margin-left: 2px;[m
   vertical-align: middle;[m
[31m-  border-top: 4px dashed;[m
[32m+[m[32m  border-top: 4px solid;[m
   border-right: 4px solid transparent;[m
   border-left: 4px solid transparent;[m
 }[m
[36m@@ -4057,9 +4044,11 @@[m [mselect[multiple].input-group-sm > .input-group-btn > .btn {[m
 }[m
 .tab-content > .tab-pane {[m
   display: none;[m
[32m+[m[32m  visibility: hidden;[m
 }[m
 .tab-content > .active {[m
   display: block;[m
[32m+[m[32m  visibility: visible;[m
 }[m
 .nav-tabs .dropdown-menu {[m
   margin-top: -1px;[m
[36m@@ -4106,6 +4095,7 @@[m [mselect[multiple].input-group-sm > .input-group-btn > .btn {[m
     height: auto !important;[m
     padding-bottom: 0;[m
     overflow: visible !important;[m
[32m+[m[32m    visibility: visible !important;[m
   }[m
   .navbar-collapse.in {[m
     overflow-y: visible;[m
[36m@@ -4830,8 +4820,7 @@[m [ma.label:focus {[m
   position: relative;[m
   top: -1px;[m
 }[m
[31m-.btn-xs .badge,[m
[31m-.btn-group-xs > .btn .badge {[m
[32m+[m[32m.btn-xs .badge {[m
   top: 0;[m
   padding: 1px 5px;[m
 }[m
[36m@@ -5663,10 +5652,10 @@[m [ma.list-group-item-danger.active:focus {[m
   height: 100%;[m
   border: 0;[m
 }[m
[31m-.embed-responsive-16by9 {[m
[32m+[m[32m.embed-responsive.embed-responsive-16by9 {[m
   padding-bottom: 56.25%;[m
 }[m
[31m-.embed-responsive-4by3 {[m
[32m+[m[32m.embed-responsive.embed-responsive-4by3 {[m
   padding-bottom: 75%;[m
 }[m
 .well {[m
[36m@@ -5725,7 +5714,7 @@[m [mbutton.close {[m
   right: 0;[m
   bottom: 0;[m
   left: 0;[m
[31m-  z-index: 1050;[m
[32m+[m[32m  z-index: 1040;[m
   display: none;[m
   overflow: hidden;[m
   -webkit-overflow-scrolling: touch;[m
[36m@@ -5768,12 +5757,10 @@[m [mbutton.close {[m
           box-shadow: 0 3px 9px rgba(0, 0, 0, .5);[m
 }[m
 .modal-backdrop {[m
[31m-  position: fixed;[m
[32m+[m[32m  position: absolute;[m
   top: 0;[m
   right: 0;[m
[31m-  bottom: 0;[m
   left: 0;[m
[31m-  z-index: 1040;[m
   background-color: #000;[m
 }[m
 .modal-backdrop.fade {[m
[36m@@ -5848,6 +5835,7 @@[m [mbutton.close {[m
   font-size: 12px;[m
   font-weight: normal;[m
   line-height: 1.4;[m
[32m+[m[32m  visibility: visible;[m
   filter: alpha(opacity=0);[m
   opacity: 0;[m
 }[m
[36m@@ -6367,6 +6355,7 @@[m [mbutton.close {[m
 }[m
 .hidden {[m
   display: none !important;[m
[32m+[m[32m  visibility: hidden !important;[m
 }[m
 .affix {[m
   position: fixed;[m
[36m@@ -6582,11 +6571,3 @@[m [mbutton.close {[m
   }[m
 }[m
 /*# sourceMappingURL=bootstrap.css.map */[m
[31m-[m
[31m-/*![m
[31m-angular-xeditable - 0.1.9[m
[31m-Edit-in-place for angular.js[m
[31m-Build date: 2015-03-26 [m
[31m-*/[m
[31m-[m
[31m-.editable-wrap{display:inline-block;white-space:nowrap;margin:0}.editable-wrap .editable-controls,.editable-wrap .editable-error{margin-bottom:0}.editable-wrap .editable-controls>input,.editable-wrap .editable-controls>select,.editable-wrap .editable-controls>textarea{margin-bottom:0}.editable-wrap .editable-input{display:inline-block}.editable-buttons{display:inline-block;vertical-align:top}.editable-buttons button{margin-left:5px}.editable-input.editable-has-buttons{width:auto}.editable-bstime .editable-input input[type=text]{width:46px}.editable-bstime .well-small{margin-bottom:0;padding:10px}.editable-range output{display:inline-block;min-width:30px;vertical-align:top;text-align:center}.editable-color input[type=color]{width:50px}.editable-checkbox label span,.editable-checklist label span,.editable-radiolist label span{margin-left:7px;margin-right:10px}.editable-hide{display:none!important}.editable-click,a.editable-click{text-decoration:none;color:#428bca;border-bottom:dashed 1px #428bca}.editable-click:hover,a.editable-click:hover{text-decoration:none;color:#2a6496;border-bottom-color:#2a6496}.editable-empty,.editable-empty:hover,.editable-empty:focus,a.editable-empty,a.editable-empty:hover,a.editable-empty:focus{font-style:italic;color:#D14;text-decoration:none}[m
\ No newline at end of file[m
[1mdiff --git a/dist/notes.js b/dist/notes.js[m
[1mindex d48ea19..c7407c7 100644[m
[1m--- a/dist/notes.js[m
[1m+++ b/dist/notes.js[m
[36m@@ -1,5 +1,5 @@[m
 /**[m
[31m- * @license AngularJS v1.4.1[m
[32m+[m[32m * @license AngularJS v1.4.0[m
  * (c) 2010-2015 Google, Inc. http://angularjs.org[m
  * License: MIT[m
  */[m
[36m@@ -57,7 +57,7 @@[m [mfunction minErr(module, ErrorConstructor) {[m
       return match;[m
     });[m
 [m
[31m-    message += '\nhttp://errors.angularjs.org/1.4.1/' +[m
[32m+[m[32m    message += '\nhttp://errors.angularjs.org/1.4.0/' +[m
       (module ? module + '/' : '') + code;[m
 [m
     for (i = SKIP_INDEXES, paramPrefix = '?'; i < templateArgs.length; i++, paramPrefix = '&') {[m
[36m@@ -864,18 +864,9 @@[m [mfunction copy(source, destination, stackSource, stackDest) {[m
 [m
   if (!destination) {[m
     destination = source;[m
[31m-    if (isObject(source)) {[m
[31m-      var index;[m
[31m-      if (stackSource && (index = stackSource.indexOf(source)) !== -1) {[m
[31m-        return stackDest[index];[m
[31m-      }[m
[31m-[m
[31m-      // TypedArray, Date and RegExp have specific copy functionality and must be[m
[31m-      // pushed onto the stack before returning.[m
[31m-      // Array and other objects create the base object and recurse to copy child[m
[31m-      // objects. The array/object will be pushed onto the stack when recursed.[m
[32m+[m[32m    if (source) {[m
       if (isArray(source)) {[m
[31m-        return copy(source, [], stackSource, stackDest);[m
[32m+[m[32m        destination = copy(source, [], stackSource, stackDest);[m
       } else if (isTypedArray(source)) {[m
         destination = new source.constructor(source);[m
       } else if (isDate(source)) {[m
[36m@@ -883,14 +874,9 @@[m [mfunction copy(source, destination, stackSource, stackDest) {[m
       } else if (isRegExp(source)) {[m
         destination = new RegExp(source.source, source.toString().match(/[^\/]*$/)[0]);[m
         destination.lastIndex = source.lastIndex;[m
[31m-      } else {[m
[32m+[m[32m      } else if (isObject(source)) {[m
         var emptyObject = Object.create(getPrototypeOf(source));[m
[31m-        return copy(source, emptyObject, stackSource, stackDest);[m
[31m-      }[m
[31m-[m
[31m-      if (stackDest) {[m
[31m-        stackSource.push(source);[m
[31m-        stackDest.push(destination);[m
[32m+[m[32m        destination = copy(source, emptyObject, stackSource, stackDest);[m
       }[m
     }[m
   } else {[m
[36m@@ -901,6 +887,9 @@[m [mfunction copy(source, destination, stackSource, stackDest) {[m
     stackDest = stackDest || [];[m
 [m
     if (isObject(source)) {[m
[32m+[m[32m      var index = stackSource.indexOf(source);[m
[32m+[m[32m      if (index !== -1) return stackDest[index];[m
[32m+[m
       stackSource.push(source);[m
       stackDest.push(destination);[m
     }[m
[36m@@ -909,7 +898,12 @@[m [mfunction copy(source, destination, stackSource, stackDest) {[m
     if (isArray(source)) {[m
       destination.length = 0;[m
       for (var i = 0; i < source.length; i++) {[m
[31m-        destination.push(copy(source[i], null, stackSource, stackDest));[m
[32m+[m[32m        result = copy(source[i], null, stackSource, stackDest);[m
[32m+[m[32m        if (isObject(source[i])) {[m
[32m+[m[32m          stackSource.push(source[i]);[m
[32m+[m[32m          stackDest.push(result);[m
[32m+[m[32m        }[m
[32m+[m[32m        destination.push(result);[m
       }[m
     } else {[m
       var h = destination.$$hashKey;[m
[36m@@ -923,20 +917,20 @@[m [mfunction copy(source, destination, stackSource, stackDest) {[m
       if (isBlankObject(source)) {[m
         // createMap() fast path --- Safe to avoid hasOwnProperty check because prototype chain is empty[m
         for (key in source) {[m
[31m-          destination[key] = copy(source[key], null, stackSource, stackDest);[m
[32m+[m[32m          putValue(key, source[key], destination, stackSource, stackDest);[m
         }[m
       } else if (source && typeof source.hasOwnProperty === 'function') {[m
         // Slow path, which must rely on hasOwnProperty[m
         for (key in source) {[m
           if (source.hasOwnProperty(key)) {[m
[31m-            destination[key] = copy(source[key], null, stackSource, stackDest);[m
[32m+[m[32m            putValue(key, source[key], destination, stackSource, stackDest);[m
           }[m
         }[m
       } else {[m
         // Slowest path --- hasOwnProperty can't be called as a method[m
         for (key in source) {[m
           if (hasOwnProperty.call(source, key)) {[m
[31m-            destination[key] = copy(source[key], null, stackSource, stackDest);[m
[32m+[m[32m            putValue(key, source[key], destination, stackSource, stackDest);[m
           }[m
         }[m
       }[m
[36m@@ -944,6 +938,16 @@[m [mfunction copy(source, destination, stackSource, stackDest) {[m
     }[m
   }[m
   return destination;[m
[32m+[m
[32m+[m[32m  function putValue(key, val, destination, stackSource, stackDest) {[m
[32m+[m[32m    // No context allocation, trivial outer scope, easily inlined[m
[32m+[m[32m    var result = copy(val, null, stackSource, stackDest);[m
[32m+[m[32m    if (isObject(val)) {[m
[32m+[m[32m      stackSource.push(val);[m
[32m+[m[32m      stackDest.push(result);[m
[32m+[m[32m    }[m
[32m+[m[32m    destination[key] = result;[m
[32m+[m[32m  }[m
 }[m
 [m
 /**[m
[36m@@ -2001,7 +2005,7 @@[m [mfunction setupModuleLoader(window) {[m
            * @description[m
            * See {@link auto.$provide#provider $provide.provider()}.[m
            */[m
[31m-          provider: invokeLaterAndSetModuleName('$provide', 'provider'),[m
[32m+[m[32m          provider: invokeLater('$provide', 'provider'),[m
 [m
           /**[m
            * @ngdoc method[m
[36m@@ -2012,7 +2016,7 @@[m [mfunction setupModuleLoader(window) {[m
            * @description[m
            * See {@link auto.$provide#factory $provide.factory()}.[m
            */[m
[31m-          factory: invokeLaterAndSetModuleName('$provide', 'factory'),[m
[32m+[m[32m          factory: invokeLater('$provide', 'factory'),[m
 [m
           /**[m
            * @ngdoc method[m
[36m@@ -2023,7 +2027,7 @@[m [mfunction setupModuleLoader(window) {[m
            * @description[m
            * See {@link auto.$provide#service $provide.service()}.[m
            */[m
[31m-          service: invokeLaterAndSetModuleName('$provide', 'service'),[m
[32m+[m[32m          service: invokeLater('$provide', 'service'),[m
 [m
           /**[m
            * @ngdoc method[m
[36m@@ -2058,7 +2062,7 @@[m [mfunction setupModuleLoader(window) {[m
            * @description[m
            * See {@link auto.$provide#decorator $provide.decorator()}.[m
            */[m
[31m-          decorator: invokeLaterAndSetModuleName('$provide', 'decorator'),[m
[32m+[m[32m          decorator: invokeLater('$provide', 'decorator'),[m
 [m
           /**[m
            * @ngdoc method[m
[36m@@ -2092,7 +2096,7 @@[m [mfunction setupModuleLoader(window) {[m
            * See {@link ng.$animateProvider#register $animateProvider.register()} and[m
            * {@link ngAnimate ngAnimate module} for more information.[m
            */[m
[31m-          animation: invokeLaterAndSetModuleName('$animateProvider', 'register'),[m
[32m+[m[32m          animation: invokeLater('$animateProvider', 'register'),[m
 [m
           /**[m
            * @ngdoc method[m
[36m@@ -2110,7 +2114,7 @@[m [mfunction setupModuleLoader(window) {[m
            * (`myapp_subsection_filterx`).[m
            * </div>[m
            */[m
[31m-          filter: invokeLaterAndSetModuleName('$filterProvider', 'register'),[m
[32m+[m[32m          filter: invokeLater('$filterProvider', 'register'),[m
 [m
           /**[m
            * @ngdoc method[m
[36m@@ -2122,7 +2126,7 @@[m [mfunction setupModuleLoader(window) {[m
            * @description[m
            * See {@link ng.$controllerProvider#register $controllerProvider.register()}.[m
            */[m
[31m-          controller: invokeLaterAndSetModuleName('$controllerProvider', 'register'),[m
[32m+[m[32m          controller: invokeLater('$controllerProvider', 'register'),[m
 [m
           /**[m
            * @ngdoc method[m
[36m@@ -2135,7 +2139,7 @@[m [mfunction setupModuleLoader(window) {[m
            * @description[m
            * See {@link ng.$compileProvider#directive $compileProvider.directive()}.[m
            */[m
[31m-          directive: invokeLaterAndSetModuleName('$compileProvider', 'directive'),[m
[32m+[m[32m          directive: invokeLater('$compileProvider', 'directive'),[m
 [m
           /**[m
            * @ngdoc method[m
[36m@@ -2185,19 +2189,6 @@[m [mfunction setupModuleLoader(window) {[m
             return moduleInstance;[m
           };[m
         }[m
[31m-[m
[31m-        /**[m
[31m-         * @param {string} provider[m
[31m-         * @param {string} method[m
[31m-         * @returns {angular.Module}[m
[31m-         */[m
[31m-        function invokeLaterAndSetModuleName(provider, method) {[m
[31m-          return function(recipeName, factoryFunction) {[m
[31m-            if (factoryFunction && isFunction(factoryFunction)) factoryFunction.$$moduleName = name;[m
[31m-            invokeQueue.push([provider, method, arguments]);[m
[31m-            return moduleInstance;[m
[31m-          };[m
[31m-        }[m
       });[m
     };[m
   });[m
[36m@@ -2341,11 +2332,11 @@[m [mfunction toDebugString(obj) {[m
  * - `codeName` â€“ `{string}` â€“ Code name of the release, such as "jiggling-armfat".[m
  */[m
 var version = {[m
[31m-  full: '1.4.1',    // all of these placeholder strings will be replaced by grunt's[m
[32m+[m[32m  full: '1.4.0',    // all of these placeholder strings will be replaced by grunt's[m
   major: 1,    // package task[m
   minor: 4,[m
[31m-  dot: 1,[m
[31m-  codeName: 'hyperionic-illumination'[m
[32m+[m[32m  dot: 0,[m
[32m+[m[32m  codeName: 'jaracimrman-existence'[m
 };[m
 [m
 [m
[36m@@ -2671,13 +2662,6 @@[m [mfunction jqLiteAcceptsData(node) {[m
   return nodeType === NODE_TYPE_ELEMENT || !nodeType || nodeType === NODE_TYPE_DOCUMENT;[m
 }[m
 [m
[31m-function jqLiteHasData(node) {[m
[31m-  for (var key in jqCache[node.ng339]) {[m
[31m-    return true;[m
[31m-  }[m
[31m-  return false;[m
[31m-}[m
[31m-[m
 function jqLiteBuildFragment(html, context) {[m
   var tmp, tag, wrap,[m
       fragment = context.createDocumentFragment(),[m
[36m@@ -3052,8 +3036,7 @@[m [mfunction getAliasedAttrName(element, name) {[m
 [m
 forEach({[m
   data: jqLiteData,[m
[31m-  removeData: jqLiteRemoveData,[m
[31m-  hasData: jqLiteHasData[m
[32m+[m[32m  removeData: jqLiteRemoveData[m
 }, function(fn, name) {[m
   JQLite[name] = fn;[m
 });[m
[36m@@ -4262,7 +4245,7 @@[m [mfunction createInjector(modulesToLoad, strictDi) {[m
           }));[m
 [m
 [m
[31m-  forEach(loadModules(modulesToLoad), function(fn) { if (fn) instanceInjector.invoke(fn); });[m
[32m+[m[32m  forEach(loadModules(modulesToLoad), function(fn) { instanceInjector.invoke(fn || noop); });[m
 [m
   return instanceInjector;[m
 [m
[36m@@ -5485,7 +5468,7 @@[m [mfunction Browser(window, document, $log, $sniffer) {[m
         // Do the assignment again so that those two variables are referentially identical.[m
         lastHistoryState = cachedState;[m
       } else {[m
[31m-        if (!sameBase || reloadLocation) {[m
[32m+[m[32m        if (!sameBase) {[m
           reloadLocation = url;[m
         }[m
         if (replace) {[m
[36m@@ -6491,16 +6474,13 @@[m [mfunction $TemplateCacheProvider() {[m
  *   * `controller` - the directive's required controller instance(s) - Instances are shared[m
  *     among all directives, which allows the directives to use the controllers as a communication[m
  *     channel. The exact value depends on the directive's `require` property:[m
[31m- *       * no controller(s) required: the directive's own controller, or `undefined` if it doesn't have one[m
  *       * `string`: the controller instance[m
  *       * `array`: array of controller instances[m
[32m+[m[32m *       * no controller(s) required: `undefined`[m
  *[m
  *     If a required controller cannot be found, and it is optional, the instance is `null`,[m
  *     otherwise the {@link error:$compile:ctreq Missing Required Controller} error is thrown.[m
  *[m
[31m- *     Note that you can also require the directive's own controller - it will be made available like[m
[31m- *     like any other controller.[m
[31m- *[m
  *   * `transcludeFn` - A transclude linking function pre-bound to the correct transclusion scope.[m
  *     This is the same as the `$transclude`[m
  *     parameter of directive controllers, see there for details.[m
[36m@@ -6947,7 +6927,6 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
                 if (isObject(bindings.isolateScope)) {[m
                   directive.$$isolateBindings = bindings.isolateScope;[m
                 }[m
[31m-                directive.$$moduleName = directiveFactory.$$moduleName;[m
                 directives.push(directive);[m
               } catch (e) {[m
                 $exceptionHandler(e);[m
[36m@@ -7519,7 +7498,8 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
 [m
             if (nodeLinkFn.transcludeOnThisElement) {[m
               childBoundTranscludeFn = createBoundTranscludeFn([m
[31m-                  scope, nodeLinkFn.transclude, parentBoundTranscludeFn);[m
[32m+[m[32m                  scope, nodeLinkFn.transclude, parentBoundTranscludeFn,[m
[32m+[m[32m                  nodeLinkFn.elementTranscludeOnThisElement);[m
 [m
             } else if (!nodeLinkFn.templateOnThisElement && parentBoundTranscludeFn) {[m
               childBoundTranscludeFn = parentBoundTranscludeFn;[m
[36m@@ -7541,7 +7521,7 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
       }[m
     }[m
 [m
[31m-    function createBoundTranscludeFn(scope, transcludeFn, previousBoundTranscludeFn) {[m
[32m+[m[32m    function createBoundTranscludeFn(scope, transcludeFn, previousBoundTranscludeFn, elementTransclusion) {[m
 [m
       var boundTranscludeFn = function(transcludedScope, cloneFn, controllers, futureParentElement, containingScope) {[m
 [m
[36m@@ -7640,13 +7620,6 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
           }[m
           break;[m
         case NODE_TYPE_TEXT: /* Text Node */[m
[31m-          if (msie === 11) {[m
[31m-            // Workaround for #11781[m
[31m-            while (node.parentNode && node.nextSibling && node.nextSibling.nodeType === NODE_TYPE_TEXT) {[m
[31m-              node.nodeValue = node.nodeValue + node.nextSibling.nodeValue;[m
[31m-              node.parentNode.removeChild(node.nextSibling);[m
[31m-            }[m
[31m-          }[m
           addTextInterpolateDirective(directives, node.nodeValue);[m
           break;[m
         case NODE_TYPE_COMMENT: /* Comment */[m
[36m@@ -7939,6 +7912,7 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
 [m
       nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;[m
       nodeLinkFn.transcludeOnThisElement = hasTranscludeDirective;[m
[32m+[m[32m      nodeLinkFn.elementTranscludeOnThisElement = hasElementTranscludeDirective;[m
       nodeLinkFn.templateOnThisElement = hasTemplate;[m
       nodeLinkFn.transclude = childTranscludeFn;[m
 [m
[36m@@ -8099,12 +8073,9 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
           for (i in elementControllers) {[m
             controller = elementControllers[i];[m
             var controllerResult = controller();[m
[31m-[m
             if (controllerResult !== controller.instance) {[m
[31m-              // If the controller constructor has a return value, overwrite the instance[m
[31m-              // from setupControllers and update the element data[m
               controller.instance = controllerResult;[m
[31m-              $element.data('$' + i + 'Controller', controllerResult);[m
[32m+[m[32m              $element.data('$' + directive.name + 'Controller', controllerResult);[m
               if (controller === controllerForBindings) {[m
                 // Remove and re-install bindToController bindings[m
                 thisLinkFn.$$destroyBindings();[m
[36m@@ -8404,18 +8375,11 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
       return a.index - b.index;[m
     }[m
 [m
[31m-    function assertNoDuplicate(what, previousDirective, directive, element) {[m
[31m-[m
[31m-      function wrapModuleNameIfDefined(moduleName) {[m
[31m-        return moduleName ?[m
[31m-          (' (module: ' + moduleName + ')') :[m
[31m-          '';[m
[31m-      }[m
 [m
[32m+[m[32m    function assertNoDuplicate(what, previousDirective, directive, element) {[m
       if (previousDirective) {[m
[31m-        throw $compileMinErr('multidir', 'Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}',[m
[31m-            previousDirective.name, wrapModuleNameIfDefined(previousDirective.$$moduleName),[m
[31m-            directive.name, wrapModuleNameIfDefined(directive.$$moduleName), what, startingTag(element));[m
[32m+[m[32m        throw $compileMinErr('multidir', 'Multiple directives [{0}, {1}] asking for {2} on: {3}',[m
[32m+[m[32m            previousDirective.name, directive.name, what, startingTag(element));[m
       }[m
     }[m
 [m
[36m@@ -8596,28 +8560,26 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
       var fragment = document.createDocumentFragment();[m
       fragment.appendChild(firstElementToRemove);[m
 [m
[31m-      if (jqLite.hasData(firstElementToRemove)) {[m
[31m-        // Copy over user data (that includes Angular's $scope etc.). Don't copy private[m
[31m-        // data here because there's no public interface in jQuery to do that and copying over[m
[31m-        // event listeners (which is the main use of private data) wouldn't work anyway.[m
[31m-        jqLite(newNode).data(jqLite(firstElementToRemove).data());[m
[31m-[m
[31m-        // Remove data of the replaced element. We cannot just call .remove()[m
[31m-        // on the element it since that would deallocate scope that is needed[m
[31m-        // for the new node. Instead, remove the data "manually".[m
[31m-        if (!jQuery) {[m
[31m-          delete jqLite.cache[firstElementToRemove[jqLite.expando]];[m
[31m-        } else {[m
[31m-          // jQuery 2.x doesn't expose the data storage. Use jQuery.cleanData to clean up after[m
[31m-          // the replaced element. The cleanData version monkey-patched by Angular would cause[m
[31m-          // the scope to be trashed and we do need the very same scope to work with the new[m
[31m-          // element. However, we cannot just cache the non-patched version and use it here as[m
[31m-          // that would break if another library patches the method after Angular does (one[m
[31m-          // example is jQuery UI). Instead, set a flag indicating scope destroying should be[m
[31m-          // skipped this one time.[m
[31m-          skipDestroyOnNextJQueryCleanData = true;[m
[31m-          jQuery.cleanData([firstElementToRemove]);[m
[31m-        }[m
[32m+[m[32m      // Copy over user data (that includes Angular's $scope etc.). Don't copy private[m
[32m+[m[32m      // data here because there's no public interface in jQuery to do that and copying over[m
[32m+[m[32m      // event listeners (which is the main use of private data) wouldn't work anyway.[m
[32m+[m[32m      jqLite(newNode).data(jqLite(firstElementToRemove).data());[m
[32m+[m
[32m+[m[32m      // Remove data of the replaced element. We cannot just call .remove()[m
[32m+[m[32m      // on the element it since that would deallocate scope that is needed[m
[32m+[m[32m      // for the new node. Instead, remove the data "manually".[m
[32m+[m[32m      if (!jQuery) {[m
[32m+[m[32m        delete jqLite.cache[firstElementToRemove[jqLite.expando]];[m
[32m+[m[32m      } else {[m
[32m+[m[32m        // jQuery 2.x doesn't expose the data storage. Use jQuery.cleanData to clean up after[m
[32m+[m[32m        // the replaced element. The cleanData version monkey-patched by Angular would cause[m
[32m+[m[32m        // the scope to be trashed and we do need the very same scope to work with the new[m
[32m+[m[32m        // element. However, we cannot just cache the non-patched version and use it here as[m
[32m+[m[32m        // that would break if another library patches the method after Angular does (one[m
[32m+[m[32m        // example is jQuery UI). Instead, set a flag indicating scope destroying should be[m
[32m+[m[32m        // skipped this one time.[m
[32m+[m[32m        skipDestroyOnNextJQueryCleanData = true;[m
[32m+[m[32m        jQuery.cleanData([firstElementToRemove]);[m
       }[m
 [m
       for (var k = 1, kk = elementsToRemove.length; k < kk; k++) {[m
[36m@@ -8658,19 +8620,9 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
         lastValue,[m
         parentGet, parentSet, compare;[m
 [m
[31m-        if (!hasOwnProperty.call(attrs, attrName)) {[m
[31m-          // In the case of user defined a binding with the same name as a method in Object.prototype but didn't set[m
[31m-          // the corresponding attribute. We need to make sure subsequent code won't access to the prototype function[m
[31m-          attrs[attrName] = undefined;[m
[31m-        }[m
[31m-[m
         switch (mode) {[m
 [m
           case '@':[m
[31m-            if (!attrs[attrName] && !optional) {[m
[31m-              destination[scopeName] = undefined;[m
[31m-            }[m
[31m-[m
             attrs.$observe(attrName, function(value) {[m
               destination[scopeName] = value;[m
             });[m
[36m@@ -8687,7 +8639,6 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
               return;[m
             }[m
             parentGet = $parse(attrs[attrName]);[m
[31m-[m
             if (parentGet.literal) {[m
               compare = equals;[m
             } else {[m
[36m@@ -8726,6 +8677,9 @@[m [mfunction $CompileProvider($provide, $$sanitizeUriProvider) {[m
             break;[m
 [m
           case '&':[m
[32m+[m[32m            // Don't assign Object.prototype method to scope[m
[32m+[m[32m            if (!attrs.hasOwnProperty(attrName) && optional) break;[m
[32m+[m
             parentGet = $parse(attrs[attrName]);[m
 [m
             // Don't assign noop to destination if expression is not valid[m
[36m@@ -9126,17 +9080,13 @@[m [mfunction $HttpParamSerializerProvider() {[m
    * @name $httpParamSerializer[m
    * @description[m
    *[m
[31m-   * Default {@link $http `$http`} params serializer that converts objects to strings[m
[32m+[m[32m   * Default $http params serializer that converts objects to a part of a request URL[m
    * according to the following rules:[m
[31m-   *[m
    * * `{'foo': 'bar'}` results in `foo=bar`[m
    * * `{'foo': Date.now()}` results in `foo=2015-04-01T09%3A50%3A49.262Z` (`toISOString()` and encoded representation of a Date object)[m
    * * `{'foo': ['bar', 'baz']}` results in `foo=bar&foo=baz` (repeated key for each array element)[m
    * * `{'foo': {'bar':'baz'}}` results in `foo=%7B%22bar%22%3A%22baz%22%7D"` (stringified and encoded representation of an object)[m
[31m-   *[m
[31m-   * Note that serializer will sort the request parameters alphabetically.[m
    * */[m
[31m-[m
   this.$get = function() {[m
     return function ngParamSerializer(params) {[m
       if (!params) return '';[m
[36m@@ -9163,43 +9113,7 @@[m [mfunction $HttpParamSerializerJQLikeProvider() {[m
    * @name $httpParamSerializerJQLike[m
    * @description[m
    *[m
[31m-   * Alternative {@link $http `$http`} params serializer that follows[m
[31m-   * jQuery's [`param()`](http://api.jquery.com/jquery.param/) method logic.[m
[31m-   * The serializer will also sort the params alphabetically.[m
[31m-   *[m
[31m-   * To use it for serializing `$http` request parameters, set it as the `paramSerializer` property:[m
[31m-   *[m
[31m-   * ```js[m
[31m-   * $http({[m
[31m-   *   url: myUrl,[m
[31m-   *   method: 'GET',[m
[31m-   *   params: myParams,[m
[31m-   *   paramSerializer: '$httpParamSerializerJQLike'[m
[31m-   * });[m
[31m-   * ```[m
[31m-   *[m
[31m-   * It is also possible to set it as the default `paramSerializer` in the[m
[31m-   * {@link $httpProvider#defaults `$httpProvider`}.[m
[31m-   *[m
[31m-   * Additionally, you can inject the serializer and use it explicitly, for example to serialize[m
[31m-   * form data for submission:[m
[31m-   *[m
[31m-   * ```js[m
[31m-   * .controller(function($http, $httpParamSerializerJQLike) {[m
[31m-   *   //...[m
[31m-   *[m
[31m-   *   $http({[m
[31m-   *     url: myUrl,[m
[31m-   *     method: 'POST',[m
[31m-   *     data: $httpParamSerializerJQLike(myData),[m
[31m-   *     headers: {[m
[31m-   *       'Content-Type': 'application/x-www-form-urlencoded'[m
[31m-   *     }[m
[31m-   *   });[m
[31m-   *[m
[31m-   * });[m
[31m-   * ```[m
[31m-   *[m
[32m+[m[32m   * Alternative $http params serializer that follows jQuery's [`param()`](http://api.jquery.com/jquery.param/) method logic.[m
    * */[m
   this.$get = function() {[m
     return function jQueryLikeParamSerializer(params) {[m
[36m@@ -9373,11 +9287,10 @@[m [mfunction $HttpProvider() {[m
    *     - **`defaults.headers.put`**[m
    *     - **`defaults.headers.patch`**[m
    *[m
[31m-   *[m
[31m-   * - **`defaults.paramSerializer`** - `{string|function(Object<string,string>):string}` - A function[m
[31m-   *  used to the prepare string representation of request parameters (specified as an object).[m
[31m-   *  If specified as string, it is interpreted as a function registered with the {@link auto.$injector $injector}.[m
[31m-   *  Defaults to {@link ng.$httpParamSerializer $httpParamSerializer}.[m
[32m+[m[32m   * - **`defaults.paramSerializer`** - {string|function(Object<string,string>):string} - A function used to prepare string representation[m
[32m+[m[32m   * of request parameters (specified as an object).[m
[32m+[m[32m   * If specified as string, it is interpreted as a function registered with the {@link auto.$injector $injector}.[m
[32m+[m[32m   * Defaults to {@link ng.$httpParamSerializer $httpParamSerializer}.[m
    *[m
    **/[m
   var defaults = this.defaults = {[m
[36m@@ -9843,17 +9756,15 @@[m [mfunction $HttpProvider() {[m
      * properties of either $httpProvider.defaults at config-time, $http.defaults at run-time,[m
      * or the per-request config object.[m
      *[m
[31m-     * In order to prevent collisions in environments where multiple Angular apps share the[m
[31m-     * same domain or subdomain, we recommend that each application uses unique cookie name.[m
[31m-     *[m
      *[m
      * @param {object} config Object describing the request to be made and how it should be[m
      *    processed. The object has following properties:[m
      *[m
      *    - **method** â€“ `{string}` â€“ HTTP method (e.g. 'GET', 'POST', etc)[m
      *    - **url** â€“ `{string}` â€“ Absolute or relative URL of the resource that is being requested.[m
[31m-     *    - **params** â€“ `{Object.<string|Object>}` â€“ Map of strings or objects which will be serialized[m
[31m-     *      with the `paramSerializer` and appended as GET parameters.[m
[32m+[m[32m     *    - **params** â€“ `{Object.<string|Object>}` â€“ Map of strings or objects which will be turned[m
[32m+[m[32m     *      to `?key1=value1&key2=value2` after the url. If the value is not a string, it will be[m
[32m+[m[32m     *      JSONified.[m
      *    - **data** â€“ `{string|Object}` â€“ Data to be sent as the request message data.[m
      *    - **headers** â€“ `{Object}` â€“ Map of strings or functions which return strings representing[m
      *      HTTP headers to send to the server. If the return value of a function is null, the[m
[36m@@ -9871,14 +9782,10 @@[m [mfunction $HttpProvider() {[m
      *      transform function or an array of such functions. The transform function takes the http[m
      *      response body, headers and status and returns its transformed (typically deserialized) version.[m
      *      See {@link ng.$http#overriding-the-default-transformations-per-request[m
[31m-     *      Overriding the Default TransformationjqLiks}[m
[31m-     *    - **paramSerializer** - `{string|function(Object<string,string>):string}` - A function used to[m
[31m-     *      prepare the string representation of request parameters (specified as an object).[m
[31m-     *      If specified as string, it is interpreted as function registered with the[m
[31m-     *      {@link $injector $injector}, which means you can create your own serializer[m
[31m-     *      by registering it as a {@link auto.$provide#service service}.[m
[31m-     *      The default serializer is the {@link $httpParamSerializer $httpParamSerializer};[m
[31m-     *      alternatively, you can use the {@link $httpParamSerializerJQLike $httpParamSerializerJQLike}[m
[32m+[m[32m     *      Overriding the Default Transformations}[m
[32m+[m[32m     *    - **paramSerializer** - {string|function(Object<string,string>):string} - A function used to prepare string representation[m
[32m+[m[32m     *      of request parameters (specified as an object).[m
[32m+[m[32m     *      Is specified as string, it is interpreted as function registered in with the {$injector}.[m
      *    - **cache** â€“ `{boolean|Cache}` â€“ If true, a default $http cache will be used to cache the[m
      *      GET request, otherwise if a cache instance built with[m
      *      {@link ng.$cacheFactory $cacheFactory}, this cache will be used for[m
[36m@@ -13306,10 +13213,8 @@[m [mASTCompiler.prototype = {[m
               nameId.name = ast.property.name;[m
             }[m
           }[m
[31m-        }, function() {[m
[31m-          self.assign(intoId, 'undefined');[m
[32m+[m[32m          recursionFn(intoId);[m
         });[m
[31m-        recursionFn(intoId);[m
       }, !!create);[m
       break;[m
     case AST.CallExpression:[m
[36m@@ -13347,10 +13252,8 @@[m [mASTCompiler.prototype = {[m
             }[m
             expression = self.ensureSafeObject(expression);[m
             self.assign(intoId, expression);[m
[31m-          }, function() {[m
[31m-            self.assign(intoId, 'undefined');[m
[32m+[m[32m            recursionFn(intoId);[m
           });[m
[31m-          recursionFn(intoId);[m
         });[m
       }[m
       break;[m
[36m@@ -14733,19 +14636,6 @@[m [mfunction qFactory(nextTick, exceptionHandler) {[m
 [m
   /**[m
    * @ngdoc method[m
[31m-   * @name $q#resolve[m
[31m-   * @kind function[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Alias of {@link ng.$q#when when} to maintain naming consistency with ES6.[m
[31m-   *[m
[31m-   * @param {*} value Value or a promise[m
[31m-   * @returns {Promise} Returns a promise of the passed value or promise[m
[31m-   */[m
[31m-  var resolve = when;[m
[31m-[m
[31m-  /**[m
[31m-   * @ngdoc method[m
    * @name $q#all[m
    * @kind function[m
    *[m
[36m@@ -14812,7 +14702,6 @@[m [mfunction qFactory(nextTick, exceptionHandler) {[m
   $Q.defer = defer;[m
   $Q.reject = reject;[m
   $Q.when = when;[m
[31m-  $Q.resolve = resolve;[m
   $Q.all = all;[m
 [m
   return $Q;[m
[36m@@ -18122,11 +18011,9 @@[m [mfunction $FilterProvider($provide) {[m
  *     `{name: {first: 'John', last: 'Doe'}}` will **not** be matched by `{name: 'John'}`, but[m
  *     **will** be matched by `{$: 'John'}`.[m
  *[m
[31m- *   - `function(value, index, array)`: A predicate function can be used to write arbitrary filters.[m
[31m- *     The function is called for each element of the array, with the element, its index, and[m
[31m- *     the entire array itself as arguments.[m
[31m- *[m
[31m- *     The final result is an array of those elements that the predicate returned true for.[m
[32m+[m[32m *   - `function(value, index)`: A predicate function can be used to write arbitrary filters. The[m
[32m+[m[32m *     function is called for each element of `array`. The final result is an array of those[m
[32m+[m[32m *     elements that the predicate returned true for.[m
  *[m
  * @param {function(actual, expected)|true|undefined} comparator Comparator which is used in[m
  *     determining if the expected value (from the filter expression) and actual value (from[m
[36m@@ -18427,10 +18314,9 @@[m [mfunction currencyFilter($locale) {[m
  * @description[m
  * Formats a number as text.[m
  *[m
[31m- * If the input is null or undefined, it will just be returned.[m
[31m- * If the input is infinite (Infinity/-Infinity) the Infinity symbol 'âˆž' is returned.[m
  * If the input is not a number an empty string is returned.[m
  *[m
[32m+[m[32m * If the input is an infinite (Infinity/-Infinity) the Infinity symbol 'âˆž' is returned.[m
  *[m
  * @param {number|string} number Number to format.[m
  * @param {(number|string)=} fractionSize Number of decimal places to round the number to.[m
[36m@@ -19059,7 +18945,7 @@[m [mfunction limitToFilter() {[m
  * @description[m
  * Orders a specified `array` by the `expression` predicate. It is ordered alphabetically[m
  * for strings and numerically for numbers. Note: if you notice numbers are not being sorted[m
[31m- * as expected, make sure they are actually being saved as numbers and not strings.[m
[32m+[m[32m * correctly, make sure they are actually being saved as numbers and not strings.[m
  *[m
  * @param {Array} array The array to sort.[m
  * @param {function(*)|string|Array.<(function(*)|string)>=} expression A predicate to be[m
[36m@@ -19134,40 +19020,19 @@[m [mfunction limitToFilter() {[m
                   {name:'Mike', phone:'555-4321', age:21},[m
                   {name:'Adam', phone:'555-5678', age:35},[m
                   {name:'Julie', phone:'555-8765', age:29}];[m
[31m-             $scope.predicate = 'age';[m
[31m-             $scope.reverse = true;[m
[31m-             $scope.order = function(predicate) {[m
[31m-               $scope.reverse = ($scope.predicate === predicate) ? !$scope.reverse : false;[m
[31m-               $scope.predicate = predicate;[m
[31m-             };[m
[32m+[m[32m             $scope.predicate = '-age';[m
            }]);[m
        </script>[m
[31m-       <style type="text/css">[m
[31m-         .sortorder:after {[m
[31m-           content: '\25b2';[m
[31m-         }[m
[31m-         .sortorder.reverse:after {[m
[31m-           content: '\25bc';[m
[31m-         }[m
[31m-       </style>[m
        <div ng-controller="ExampleController">[m
          <pre>Sorting predicate = {{predicate}}; reverse = {{reverse}}</pre>[m
          <hr/>[m
          [ <a href="" ng-click="predicate=''">unsorted</a> ][m
          <table class="friend">[m
            <tr>[m
[31m-             <th>[m
[31m-               <a href="" ng-click="order('name')">Name</a>[m
[31m-               <span class="sortorder" ng-show="predicate === 'name'" ng-class="{reverse:reverse}"></span>[m
[31m-             </th>[m
[31m-             <th>[m
[31m-               <a href="" ng-click="order('phone')">Phone Number</a>[m
[31m-               <span class="sortorder" ng-show="predicate === 'phone'" ng-class="{reverse:reverse}"></span>[m
[31m-             </th>[m
[31m-             <th>[m
[31m-               <a href="" ng-click="order('age')">Age</a>[m
[31m-               <span class="sortorder" ng-show="predicate === 'age'" ng-class="{reverse:reverse}"></span>[m
[31m-             </th>[m
[32m+[m[32m             <th><a href="" ng-click="predicate = 'name'; reverse=false">Name</a>[m
[32m+[m[32m                 (<a href="" ng-click="predicate = '-name'; reverse=false">^</a>)</th>[m
[32m+[m[32m             <th><a href="" ng-click="predicate = 'phone'; reverse=!reverse">Phone Number</a></th>[m
[32m+[m[32m             <th><a href="" ng-click="predicate = 'age'; reverse=!reverse">Age</a></th>[m
            </tr>[m
            <tr ng-repeat="friend in friends | orderBy:predicate:reverse">[m
              <td>{{friend.name}}</td>[m
[36m@@ -20330,7 +20195,7 @@[m [mvar ngFormDirective = formDirectiveFactory(true);[m
 var ISO_DATE_REGEXP = /\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/;[m
 var URL_REGEXP = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;[m
 var EMAIL_REGEXP = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;[m
[31m-var NUMBER_REGEXP = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;[m
[32m+[m[32mvar NUMBER_REGEXP = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;[m
 var DATE_REGEXP = /^(\d{4})-(\d{2})-(\d{2})$/;[m
 var DATETIMELOCAL_REGEXP = /^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;[m
 var WEEK_REGEXP = /^(\d{4})-W(\d\d)$/;[m
[36m@@ -20929,16 +20794,6 @@[m [mvar inputType = {[m
    * error docs for more information and an example of how to convert your model if necessary.[m
    * </div>[m
    *[m
[31m-   * ## Issues with HTML5 constraint validation[m
[31m-   *[m
[31m-   * In browsers that follow the[m
[31m-   * [HTML5 specification](https://html.spec.whatwg.org/multipage/forms.html#number-state-%28type=number%29),[m
[31m-   * `input[number]` does not work as expected with {@link ngModelOptions `ngModelOptions.allowInvalid`}.[m
[31m-   * If a non-number is entered in the input, the browser will report the value as an empty string,[m
[31m-   * which means the view / model values in `ngModel` and subsequently the scope value[m
[31m-   * will also be an empty string.[m
[31m-   *[m
[31m-   *[m
    * @param {string} ngModel Assignable angular expression to data-bind to.[m
    * @param {string=} name Property name of the form under which the control is published.[m
    * @param {string=} min Sets the `min` validation error key if the value entered is less than `min`.[m
[36m@@ -22475,7 +22330,7 @@[m [mfunction classDirective(name, selector) {[m
  * @example Example that demonstrates basic bindings via ngClass directive.[m
    <example>[m
      <file name="index.html">[m
[31m-       <p ng-class="{strike: deleted, bold: important, 'has-error': error}">Map Syntax Example</p>[m
[32m+[m[32m       <p ng-class="{strike: deleted, bold: important, red: error}">Map Syntax Example</p>[m
        <label>[m
           <input type="checkbox" ng-model="deleted">[m
           deleted (apply "strike" class)[m
[36m@@ -22486,7 +22341,7 @@[m [mfunction classDirective(name, selector) {[m
        </label><br>[m
        <label>[m
           <input type="checkbox" ng-model="error">[m
[31m-          error (apply "has-error" class)[m
[32m+[m[32m          error (apply "red" class)[m
        </label>[m
        <hr>[m
        <p ng-class="style">Using String Syntax</p>[m
[36m@@ -22515,10 +22370,6 @@[m [mfunction classDirective(name, selector) {[m
        .red {[m
            color: red;[m
        }[m
[31m-       .has-error {[m
[31m-           color: red;[m
[31m-           background-color: yellow;[m
[31m-       }[m
        .orange {[m
            color: orange;[m
        }[m
[36m@@ -22529,13 +22380,13 @@[m [mfunction classDirective(name, selector) {[m
        it('should let you toggle the class', function() {[m
 [m
          expect(ps.first().getAttribute('class')).not.toMatch(/bold/);[m
[31m-         expect(ps.first().getAttribute('class')).not.toMatch(/has-error/);[m
[32m+[m[32m         expect(ps.first().getAttribute('class')).not.toMatch(/red/);[m
 [m
          element(by.model('important')).click();[m
          expect(ps.first().getAttribute('class')).toMatch(/bold/);[m
 [m
          element(by.model('error')).click();[m
[31m-         expect(ps.first().getAttribute('class')).toMatch(/has-error/);[m
[32m+[m[32m         expect(ps.first().getAttribute('class')).toMatch(/red/);[m
        });[m
 [m
        it('should let you toggle string example', function() {[m
[36m@@ -25369,7 +25220,7 @@[m [mvar DEFAULT_REGEXP = /(\s+|^)default(\s+|$)/;[m
  *   - `debounce`: integer value which contains the debounce model update value in milliseconds. A[m
  *     value of 0 triggers an immediate update. If an object is supplied instead, you can specify a[m
  *     custom value for each event. For example:[m
[31m- *     `ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }"`[m
[32m+[m[32m *     `ng-model-options="{ updateOn: 'default blur', debounce: {'default': 500, 'blur': 0} }"`[m
  *   - `allowInvalid`: boolean value which indicates that the model can be set with values that did[m
  *     not validate correctly instead of the default behavior of setting the model to undefined.[m
  *   - `getterSetter`: boolean value which determines whether or not to treat functions bound to[m
[36m@@ -25619,9 +25470,7 @@[m [mfunction addSetValidityMethod(context) {[m
 function isObjectEmpty(obj) {[m
   if (obj) {[m
     for (var prop in obj) {[m
[31m-      if (obj.hasOwnProperty(prop)) {[m
[31m-        return false;[m
[31m-      }[m
[32m+[m[32m      return false;[m
     }[m
   }[m
   return true;[m
[36m@@ -25964,7 +25813,6 @@[m [mvar ngOptionsDirective = ['$compile', '$parse', function($compile, $parse) {[m
         values = values || [];[m
 [m
         Object.keys(values).forEach(function getWatchable(key) {[m
[31m-          if (key.charAt(0) === '$') return;[m
           var locals = getLocals(values[key], key);[m
           var selectValue = getTrackByValueFn(values[key], locals);[m
           watchedArray.push(selectValue);[m
[36m@@ -26368,7 +26216,8 @@[m [mvar ngOptionsDirective = ['$compile', '$parse', function($compile, $parse) {[m
         // Check to see if the value has changed due to the update to the options[m
         if (!ngModelCtrl.$isEmpty(previousValue)) {[m
           var nextValue = selectCtrl.readValue();[m
[31m-          if (ngOptions.trackBy ? !equals(previousValue, nextValue) : previousValue !== nextValue) {[m
[32m+[m[32m          if (ngOptions.trackBy && !equals(previousValue, nextValue) ||[m
[32m+[m[32m                previousValue !== nextValue) {[m
             ngModelCtrl.$setViewValue(nextValue);[m
             ngModelCtrl.$render();[m
           }[m
[36m@@ -26716,15 +26565,6 @@[m [mvar ngPluralizeDirective = ['$locale', '$interpolate', '$log', function($locale,[m
  *    </div>[m
  * ```[m
  *[m
[31m- * <div class="alert alert-warning">[m
[31m- * **Note:** `track by` must always be the last expression:[m
[31m- * </div>[m
[31m- * ```[m
[31m- * <div ng-repeat="model in collection | orderBy: 'id' as filtered_result track by model.id">[m
[31m- *     {{model.name}}[m
[31m- * </div>[m
[31m- * ```[m
[31m- *[m
  * # Special repeat start and end points[m
  * To repeat a series of elements instead of just one parent element, ngRepeat (as well as other ng directives) supports extending[m
  * the range of the repeater by defining explicit start and end points by using **ng-repeat-start** and **ng-repeat-end** respectively.[m
[36m@@ -26796,9 +26636,8 @@[m [mvar ngPluralizeDirective = ['$locale', '$interpolate', '$log', function($locale,[m
  *     which can be used to associate the objects in the collection with the DOM elements. If no tracking expression[m
  *     is specified, ng-repeat associates elements by identity. It is an error to have[m
  *     more than one tracking expression value resolve to the same key. (This would mean that two distinct objects are[m
[31m- *     mapped to the same DOM element, which is not possible.)[m
[31m- *[m
[31m- *     Note that the tracking expression must come last, after any filters, and the alias expression.[m
[32m+[m[32m *     mapped to the same DOM element, which is not possible.)  If filters are used in the expression, they should be[m
[32m+[m[32m *     applied before the tracking expression.[m
  *[m
  *     For example: `item in items` is equivalent to `item in items track by $id(item)`. This implies that the DOM elements[m
  *     will be associated by item identity in the array.[m
[36m@@ -37503,8918 +37342,8907 @@[m [mreturn jQuery;[m
 [m
 }));[m
 [m
[31m-/*![m
[31m- * Bootstrap v3.3.4 (http://getbootstrap.com)[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m/**[m
[32m+[m[32m * State-based routing for AngularJS[m
[32m+[m[32m * @version v0.2.15[m
[32m+[m[32m * @link http://angular-ui.github.com/[m
[32m+[m[32m * @license MIT License, http://www.opensource.org/licenses/MIT[m
  */[m
 [m
[31m-if (typeof jQuery === 'undefined') {[m
[31m-  throw new Error('Bootstrap\'s JavaScript requires jQuery')[m
[32m+[m[32m/* commonjs package manager support (eg componentjs) */[m
[32m+[m[32mif (typeof module !== "undefined" && typeof exports !== "undefined" && module.exports === exports){[m
[32m+[m[32m  module.exports = 'ui.router';[m
 }[m
 [m
[31m-+function ($) {[m
[31m-  'use strict';[m
[31m-  var version = $.fn.jquery.split(' ')[0].split('.')[m
[31m-  if ((version[0] < 2 && version[1] < 9) || (version[0] == 1 && version[1] == 9 && version[2] < 1)) {[m
[31m-    throw new Error('Bootstrap\'s JavaScript requires jQuery version 1.9.1 or higher')[m
[31m-  }[m
[31m-}(jQuery);[m
[31m-[m
[31m-/* ========================================================================[m
[31m- * Bootstrap: transition.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#transitions[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
[31m-[m
[31m-[m
[31m-+function ($) {[m
[31m-  'use strict';[m
[32m+[m[32m(function (window, angular, undefined) {[m
[32m+[m[32m/*jshint globalstrict:true*/[m
[32m+[m[32m/*global angular:false*/[m
[32m+[m[32m'use strict';[m
 [m
[31m-  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)[m
[31m-  // ============================================================[m
[32m+[m[32mvar isDefined = angular.isDefined,[m
[32m+[m[32m    isFunction = angular.isFunction,[m
[32m+[m[32m    isString = angular.isString,[m
[32m+[m[32m    isObject = angular.isObject,[m
[32m+[m[32m    isArray = angular.isArray,[m
[32m+[m[32m    forEach = angular.forEach,[m
[32m+[m[32m    extend = angular.extend,[m
[32m+[m[32m    copy = angular.copy;[m
 [m
[31m-  function transitionEnd() {[m
[31m-    var el = document.createElement('bootstrap')[m
[32m+[m[32mfunction inherit(parent, extra) {[m
[32m+[m[32m  return extend(new (extend(function() {}, { prototype: parent }))(), extra);[m
[32m+[m[32m}[m
 [m
[31m-    var transEndEventNames = {[m
[31m-      WebkitTransition : 'webkitTransitionEnd',[m
[31m-      MozTransition    : 'transitionend',[m
[31m-      OTransition      : 'oTransitionEnd otransitionend',[m
[31m-      transition       : 'transitionend'[m
[32m+[m[32mfunction merge(dst) {[m
[32m+[m[32m  forEach(arguments, function(obj) {[m
[32m+[m[32m    if (obj !== dst) {[m
[32m+[m[32m      forEach(obj, function(value, key) {[m
[32m+[m[32m        if (!dst.hasOwnProperty(key)) dst[key] = value;[m
[32m+[m[32m      });[m
     }[m
[32m+[m[32m  });[m
[32m+[m[32m  return dst;[m
[32m+[m[32m}[m
 [m
[31m-    for (var name in transEndEventNames) {[m
[31m-      if (el.style[name] !== undefined) {[m
[31m-        return { end: transEndEventNames[name] }[m
[31m-      }[m
[31m-    }[m
[32m+[m[32m/**[m
[32m+[m[32m * Finds the common ancestor path between two states.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} first The first state.[m
[32m+[m[32m * @param {Object} second The second state.[m
[32m+[m[32m * @return {Array} Returns an array of state names in descending order, not including the root.[m
[32m+[m[32m */[m
[32m+[m[32mfunction ancestors(first, second) {[m
[32m+[m[32m  var path = [];[m
 [m
[31m-    return false // explicit for ie8 (  ._.)[m
[32m+[m[32m  for (var n in first.path) {[m
[32m+[m[32m    if (first.path[n] !== second.path[n]) break;[m
[32m+[m[32m    path.push(first.path[n]);[m
   }[m
[32m+[m[32m  return path;[m
[32m+[m[32m}[m
 [m
[31m-  // http://blog.alexmaccaw.com/css-transitions[m
[31m-  $.fn.emulateTransitionEnd = function (duration) {[m
[31m-    var called = false[m
[31m-    var $el = this[m
[31m-    $(this).one('bsTransitionEnd', function () { called = true })[m
[31m-    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }[m
[31m-    setTimeout(callback, duration)[m
[31m-    return this[m
[32m+[m[32m/**[m
[32m+[m[32m * IE8-safe wrapper for `Object.keys()`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} object A JavaScript object.[m
[32m+[m[32m * @return {Array} Returns the keys of the object as an array.[m
[32m+[m[32m */[m
[32m+[m[32mfunction objectKeys(object) {[m
[32m+[m[32m  if (Object.keys) {[m
[32m+[m[32m    return Object.keys(object);[m
   }[m
[32m+[m[32m  var result = [];[m
 [m
[31m-  $(function () {[m
[31m-    $.support.transition = transitionEnd()[m
[31m-[m
[31m-    if (!$.support.transition) return[m
[31m-[m
[31m-    $.event.special.bsTransitionEnd = {[m
[31m-      bindType: $.support.transition.end,[m
[31m-      delegateType: $.support.transition.end,[m
[31m-      handle: function (e) {[m
[31m-        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)[m
[31m-      }[m
[31m-    }[m
[31m-  })[m
[31m-[m
[31m-}(jQuery);[m
[31m-[m
[31m-/* ========================================================================[m
[31m- * Bootstrap: alert.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#alerts[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
[31m-[m
[31m-[m
[31m-+function ($) {[m
[31m-  'use strict';[m
[31m-[m
[31m-  // ALERT CLASS DEFINITION[m
[31m-  // ======================[m
[32m+[m[32m  forEach(object, function(val, key) {[m
[32m+[m[32m    result.push(key);[m
[32m+[m[32m  });[m
[32m+[m[32m  return result;[m
[32m+[m[32m}[m
 [m
[31m-  var dismiss = '[data-dismiss="alert"]'[m
[31m-  var Alert   = function (el) {[m
[31m-    $(el).on('click', dismiss, this.close)[m
[32m+[m[32m/**[m
[32m+[m[32m * IE8-safe wrapper for `Array.prototype.indexOf()`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Array} array A JavaScript array.[m
[32m+[m[32m * @param {*} value A value to search the array for.[m
[32m+[m[32m * @return {Number} Returns the array index value of `value`, or `-1` if not present.[m
[32m+[m[32m */[m
[32m+[m[32mfunction indexOf(array, value) {[m
[32m+[m[32m  if (Array.prototype.indexOf) {[m
[32m+[m[32m    return array.indexOf(value, Number(arguments[2]) || 0);[m
   }[m
[32m+[m[32m  var len = array.length >>> 0, from = Number(arguments[2]) || 0;[m
[32m+[m[32m  from = (from < 0) ? Math.ceil(from) : Math.floor(from);[m
 [m
[31m-  Alert.VERSION = '3.3.4'[m
[31m-[m
[31m-  Alert.TRANSITION_DURATION = 150[m
[31m-[m
[31m-  Alert.prototype.close = function (e) {[m
[31m-    var $this    = $(this)[m
[31m-    var selector = $this.attr('data-target')[m
[31m-[m
[31m-    if (!selector) {[m
[31m-      selector = $this.attr('href')[m
[31m-      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7[m
[31m-    }[m
[31m-[m
[31m-    var $parent = $(selector)[m
[31m-[m
[31m-    if (e) e.preventDefault()[m
[31m-[m
[31m-    if (!$parent.length) {[m
[31m-      $parent = $this.closest('.alert')[m
[31m-    }[m
[32m+[m[32m  if (from < 0) from += len;[m
 [m
[31m-    $parent.trigger(e = $.Event('close.bs.alert'))[m
[32m+[m[32m  for (; from < len; from++) {[m
[32m+[m[32m    if (from in array && array[from] === value) return from;[m
[32m+[m[32m  }[m
[32m+[m[32m  return -1;[m
[32m+[m[32m}[m
 [m
[31m-    if (e.isDefaultPrevented()) return[m
[32m+[m[32m/**[m
[32m+[m[32m * Merges a set of parameters with all parameters inherited between the common parents of the[m
[32m+[m[32m * current state and a given destination state.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} currentParams The value of the current state parameters ($stateParams).[m
[32m+[m[32m * @param {Object} newParams The set of parameters which will be composited with inherited params.[m
[32m+[m[32m * @param {Object} $current Internal definition of object representing the current state.[m
[32m+[m[32m * @param {Object} $to Internal definition of object representing state to transition to.[m
[32m+[m[32m */[m
[32m+[m[32mfunction inheritParams(currentParams, newParams, $current, $to) {[m
[32m+[m[32m  var parents = ancestors($current, $to), parentParams, inherited = {}, inheritList = [];[m
 [m
[31m-    $parent.removeClass('in')[m
[32m+[m[32m  for (var i in parents) {[m
[32m+[m[32m    if (!parents[i].params) continue;[m
[32m+[m[32m    parentParams = objectKeys(parents[i].params);[m
[32m+[m[32m    if (!parentParams.length) continue;[m
 [m
[31m-    function removeElement() {[m
[31m-      // detach from parent, fire event then clean up data[m
[31m-      $parent.detach().trigger('closed.bs.alert').remove()[m
[32m+[m[32m    for (var j in parentParams) {[m
[32m+[m[32m      if (indexOf(inheritList, parentParams[j]) >= 0) continue;[m
[32m+[m[32m      inheritList.push(parentParams[j]);[m
[32m+[m[32m      inherited[parentParams[j]] = currentParams[parentParams[j]];[m
     }[m
[31m-[m
[31m-    $.support.transition && $parent.hasClass('fade') ?[m
[31m-      $parent[m
[31m-        .one('bsTransitionEnd', removeElement)[m
[31m-        .emulateTransitionEnd(Alert.TRANSITION_DURATION) :[m
[31m-      removeElement()[m
   }[m
[32m+[m[32m  return extend({}, inherited, newParams);[m
[32m+[m[32m}[m
 [m
[32m+[m[32m/**[m
[32m+[m[32m * Performs a non-strict comparison of the subset of two objects, defined by a list of keys.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} a The first object.[m
[32m+[m[32m * @param {Object} b The second object.[m
[32m+[m[32m * @param {Array} keys The list of keys within each object to compare. If the list is empty or not specified,[m
[32m+[m[32m *                     it defaults to the list of keys in `a`.[m
[32m+[m[32m * @return {Boolean} Returns `true` if the keys match, otherwise `false`.[m
[32m+[m[32m */[m
[32m+[m[32mfunction equalForKeys(a, b, keys) {[m
[32m+[m[32m  if (!keys) {[m
[32m+[m[32m    keys = [];[m
[32m+[m[32m    for (var n in a) keys.push(n); // Used instead of Object.keys() for IE8 compatibility[m
[32m+[m[32m  }[m
 [m
[31m-  // ALERT PLUGIN DEFINITION[m
[31m-  // =======================[m
[31m-[m
[31m-  function Plugin(option) {[m
[31m-    return this.each(function () {[m
[31m-      var $this = $(this)[m
[31m-      var data  = $this.data('bs.alert')[m
[31m-[m
[31m-      if (!data) $this.data('bs.alert', (data = new Alert(this)))[m
[31m-      if (typeof option == 'string') data[option].call($this)[m
[31m-    })[m
[32m+[m[32m  for (var i=0; i<keys.length; i++) {[m
[32m+[m[32m    var k = keys[i];[m
[32m+[m[32m    if (a[k] != b[k]) return false; // Not '===', values aren't necessarily normalized[m
   }[m
[32m+[m[32m  return true;[m
[32m+[m[32m}[m
 [m
[31m-  var old = $.fn.alert[m
[32m+[m[32m/**[m
[32m+[m[32m * Returns the subset of an object, based on a list of keys.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Array} keys[m
[32m+[m[32m * @param {Object} values[m
[32m+[m[32m * @return {Boolean} Returns a subset of `values`.[m
[32m+[m[32m */[m
[32m+[m[32mfunction filterByKeys(keys, values) {[m
[32m+[m[32m  var filtered = {};[m
 [m
[31m-  $.fn.alert             = Plugin[m
[31m-  $.fn.alert.Constructor = Alert[m
[32m+[m[32m  forEach(keys, function (name) {[m
[32m+[m[32m    filtered[name] = values[name];[m
[32m+[m[32m  });[m
[32m+[m[32m  return filtered;[m
[32m+[m[32m}[m
 [m
[32m+[m[32m// like _.indexBy[m
[32m+[m[32m// when you know that your index values will be unique, or you want last-one-in to win[m
[32m+[m[32mfunction indexBy(array, propName) {[m
[32m+[m[32m  var result = {};[m
[32m+[m[32m  forEach(array, function(item) {[m
[32m+[m[32m    result[item[propName]] = item;[m
[32m+[m[32m  });[m
[32m+[m[32m  return result;[m
[32m+[m[32m}[m
 [m
[31m-  // ALERT NO CONFLICT[m
[31m-  // =================[m
[32m+[m[32m// extracted from underscore.js[m
[32m+[m[32m// Return a copy of the object only containing the whitelisted properties.[m
[32m+[m[32mfunction pick(obj) {[m
[32m+[m[32m  var copy = {};[m
[32m+[m[32m  var keys = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));[m
[32m+[m[32m  forEach(keys, function(key) {[m
[32m+[m[32m    if (key in obj) copy[key] = obj[key];[m
[32m+[m[32m  });[m
[32m+[m[32m  return copy;[m
[32m+[m[32m}[m
 [m
[31m-  $.fn.alert.noConflict = function () {[m
[31m-    $.fn.alert = old[m
[31m-    return this[m
[32m+[m[32m// extracted from underscore.js[m
[32m+[m[32m// Return a copy of the object omitting the blacklisted properties.[m
[32m+[m[32mfunction omit(obj) {[m
[32m+[m[32m  var copy = {};[m
[32m+[m[32m  var keys = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));[m
[32m+[m[32m  for (var key in obj) {[m
[32m+[m[32m    if (indexOf(keys, key) == -1) copy[key] = obj[key];[m
   }[m
[32m+[m[32m  return copy;[m
[32m+[m[32m}[m
 [m
[32m+[m[32mfunction pluck(collection, key) {[m
[32m+[m[32m  var result = isArray(collection) ? [] : {};[m
 [m
[31m-  // ALERT DATA-API[m
[31m-  // ==============[m
[32m+[m[32m  forEach(collection, function(val, i) {[m
[32m+[m[32m    result[i] = isFunction(key) ? key(val) : val[key];[m
[32m+[m[32m  });[m
[32m+[m[32m  return result;[m
[32m+[m[32m}[m
 [m
[31m-  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)[m
[32m+[m[32mfunction filter(collection, callback) {[m
[32m+[m[32m  var array = isArray(collection);[m
[32m+[m[32m  var result = array ? [] : {};[m
[32m+[m[32m  forEach(collection, function(val, i) {[m
[32m+[m[32m    if (callback(val, i)) {[m
[32m+[m[32m      result[array ? result.length : i] = val;[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m  return result;[m
[32m+[m[32m}[m
 [m
[31m-}(jQuery);[m
[32m+[m[32mfunction map(collection, callback) {[m
[32m+[m[32m  var result = isArray(collection) ? [] : {};[m
 [m
[31m-/* ========================================================================[m
[31m- * Bootstrap: button.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#buttons[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
[32m+[m[32m  forEach(collection, function(val, i) {[m
[32m+[m[32m    result[i] = callback(val, i);[m
[32m+[m[32m  });[m
[32m+[m[32m  return result;[m
[32m+[m[32m}[m
 [m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc overview[m
[32m+[m[32m * @name ui.router.util[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * # ui.router.util sub-module[m
[32m+[m[32m *[m
[32m+[m[32m * This module is a dependency of other sub-modules. Do not include this module as a dependency[m
[32m+[m[32m * in your angular app (use {@link ui.router} module instead).[m
[32m+[m[32m *[m
[32m+[m[32m */[m
[32m+[m[32mangular.module('ui.router.util', ['ng']);[m
 [m
[31m-+function ($) {[m
[31m-  'use strict';[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc overview[m
[32m+[m[32m * @name ui.router.router[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @requires ui.router.util[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * # ui.router.router sub-module[m
[32m+[m[32m *[m
[32m+[m[32m * This module is a dependency of other sub-modules. Do not include this module as a dependency[m
[32m+[m[32m * in your angular app (use {@link ui.router} module instead).[m
[32m+[m[32m */[m
[32m+[m[32mangular.module('ui.router.router', ['ui.router.util']);[m
 [m
[31m-  // BUTTON PUBLIC CLASS DEFINITION[m
[31m-  // ==============================[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc overview[m
[32m+[m[32m * @name ui.router.state[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @requires ui.router.router[m
[32m+[m[32m * @requires ui.router.util[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * # ui.router.state sub-module[m
[32m+[m[32m *[m
[32m+[m[32m * This module is a dependency of the main ui.router module. Do not include this module as a dependency[m
[32m+[m[32m * in your angular app (use {@link ui.router} module instead).[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m */[m
[32m+[m[32mangular.module('ui.router.state', ['ui.router.router', 'ui.router.util']);[m
 [m
[31m-  var Button = function (element, options) {[m
[31m-    this.$element  = $(element)[m
[31m-    this.options   = $.extend({}, Button.DEFAULTS, options)[m
[31m-    this.isLoading = false[m
[31m-  }[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc overview[m
[32m+[m[32m * @name ui.router[m
[32m+[m[32m *[m
[32m+[m[32m * @requires ui.router.state[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * # ui.router[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * ## The main module for ui.router[m[41m [m
[32m+[m[32m * There are several sub-modules included with the ui.router module, however only this module is needed[m
[32m+[m[32m * as a dependency within your angular app. The other modules are for organization purposes.[m[41m [m
[32m+[m[32m *[m
[32m+[m[32m * The modules are:[m
[32m+[m[32m * * ui.router - the main "umbrella" module[m
[32m+[m[32m * * ui.router.router -[m[41m [m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * *You'll need to include **only** this module as the dependency within your angular app.*[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <!doctype html>[m
[32m+[m[32m * <html ng-app="myApp">[m
[32m+[m[32m * <head>[m
[32m+[m[32m *   <script src="js/angular.js"></script>[m
[32m+[m[32m *   <!-- Include the ui-router script -->[m
[32m+[m[32m *   <script src="js/angular-ui-router.min.js"></script>[m
[32m+[m[32m *   <script>[m
[32m+[m[32m *     // ...and add 'ui.router' as a dependency[m
[32m+[m[32m *     var myApp = angular.module('myApp', ['ui.router']);[m
[32m+[m[32m *   </script>[m
[32m+[m[32m * </head>[m
[32m+[m[32m * <body>[m
[32m+[m[32m * </body>[m
[32m+[m[32m * </html>[m
[32m+[m[32m * </pre>[m
[32m+[m[32m */[m
[32m+[m[32mangular.module('ui.router', ['ui.router.state']);[m
 [m
[31m-  Button.VERSION  = '3.3.4'[m
[32m+[m[32mangular.module('ui.router.compat', ['ui.router']);[m
 [m
[31m-  Button.DEFAULTS = {[m
[31m-    loadingText: 'loading...'[m
[31m-  }[m
[31m-[m
[31m-  Button.prototype.setState = function (state) {[m
[31m-    var d    = 'disabled'[m
[31m-    var $el  = this.$element[m
[31m-    var val  = $el.is('input') ? 'val' : 'html'[m
[31m-    var data = $el.data()[m
[31m-[m
[31m-    state = state + 'Text'[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc object[m
[32m+[m[32m * @name ui.router.util.$resolve[m
[32m+[m[32m *[m
[32m+[m[32m * @requires $q[m
[32m+[m[32m * @requires $injector[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Manages resolution of (acyclic) graphs of promises.[m
[32m+[m[32m */[m
[32m+[m[32m$Resolve.$inject = ['$q', '$injector'];[m
[32m+[m[32mfunction $Resolve(  $q,    $injector) {[m
[32m+[m[41m  [m
[32m+[m[32m  var VISIT_IN_PROGRESS = 1,[m
[32m+[m[32m      VISIT_DONE = 2,[m
[32m+[m[32m      NOTHING = {},[m
[32m+[m[32m      NO_DEPENDENCIES = [],[m
[32m+[m[32m      NO_LOCALS = NOTHING,[m
[32m+[m[32m      NO_PARENT = extend($q.when(NOTHING), { $$promises: NOTHING, $$values: NOTHING });[m
[32m+[m[41m  [m
 [m
[31m-    if (data.resetText == null) $el.data('resetText', $el[val]())[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$resolve#study[m
[32m+[m[32m   * @methodOf ui.router.util.$resolve[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Studies a set of invocables that are likely to be used multiple times.[m
[32m+[m[32m   * <pre>[m
[32m+[m[32m   * $resolve.study(invocables)(locals, parent, self)[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   * is equivalent to[m
[32m+[m[32m   * <pre>[m
[32m+[m[32m   * $resolve.resolve(invocables, locals, parent, self)[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   * but the former is more efficient (in fact `resolve` just calls `study`[m[41m [m
[32m+[m[32m   * internally).[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {object} invocables Invocable objects[m
[32m+[m[32m   * @return {function} a function to pass in locals, parent and self[m
[32m+[m[32m   */[m
[32m+[m[32m  this.study = function (invocables) {[m
[32m+[m[32m    if (!isObject(invocables)) throw new Error("'invocables' must be an object");[m
[32m+[m[32m    var invocableKeys = objectKeys(invocables || {});[m
[32m+[m[41m    [m
[32m+[m[32m    // Perform a topological sort of invocables to build an ordered plan[m
[32m+[m[32m    var plan = [], cycle = [], visited = {};[m
[32m+[m[32m    function visit(value, key) {[m
[32m+[m[32m      if (visited[key] === VISIT_DONE) return;[m
[32m+[m[41m      [m
[32m+[m[32m      cycle.push(key);[m
[32m+[m[32m      if (visited[key] === VISIT_IN_PROGRESS) {[m
[32m+[m[32m        cycle.splice(0, indexOf(cycle, key));[m
[32m+[m[32m        throw new Error("Cyclic dependency: " + cycle.join(" -> "));[m
[32m+[m[32m      }[m
[32m+[m[32m      visited[key] = VISIT_IN_PROGRESS;[m
[32m+[m[41m      [m
[32m+[m[32m      if (isString(value)) {[m
[32m+[m[32m        plan.push(key, [ function() { return $injector.get(value); }], NO_DEPENDENCIES);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        var params = $injector.annotate(value);[m
[32m+[m[32m        forEach(params, function (param) {[m
[32m+[m[32m          if (param !== key && invocables.hasOwnProperty(param)) visit(invocables[param], param);[m
[32m+[m[32m        });[m
[32m+[m[32m        plan.push(key, value, params);[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      cycle.pop();[m
[32m+[m[32m      visited[key] = VISIT_DONE;[m
[32m+[m[32m    }[m
[32m+[m[32m    forEach(invocables, visit);[m
[32m+[m[32m    invocables = cycle = visited = null; // plan is all that's required[m
[32m+[m[41m    [m
[32m+[m[32m    function isResolve(value) {[m
[32m+[m[32m      return isObject(value) && value.then && value.$$promises;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    return function (locals, parent, self) {[m
[32m+[m[32m      if (isResolve(locals) && self === undefined) {[m
[32m+[m[32m        self = parent; parent = locals; locals = null;[m
[32m+[m[32m      }[m
[32m+[m[32m      if (!locals) locals = NO_LOCALS;[m
[32m+[m[32m      else if (!isObject(locals)) {[m
[32m+[m[32m        throw new Error("'locals' must be an object");[m
[32m+[m[32m      }[m[41m       [m
[32m+[m[32m      if (!parent) parent = NO_PARENT;[m
[32m+[m[32m      else if (!isResolve(parent)) {[m
[32m+[m[32m        throw new Error("'parent' must be a promise returned by $resolve.resolve()");[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      // To complete the overall resolution, we have to wait for the parent[m
[32m+[m[32m      // promise and for the promise for each invokable in our plan.[m
[32m+[m[32m      var resolution = $q.defer(),[m
[32m+[m[32m          result = resolution.promise,[m
[32m+[m[32m          promises = result.$$promises = {},[m
[32m+[m[32m          values = extend({}, locals),[m
[32m+[m[32m          wait = 1 + plan.length/3,[m
[32m+[m[32m          merged = false;[m
[32m+[m[41m          [m
[32m+[m[32m      function done() {[m
[32m+[m[32m        // Merge parent values we haven't got yet and publish our own $$values[m
[32m+[m[32m        if (!--wait) {[m
[32m+[m[32m          if (!merged) merge(values, parent.$$values);[m[41m [m
[32m+[m[32m          result.$$values = values;[m
[32m+[m[32m          result.$$promises = result.$$promises || true; // keep for isResolve()[m
[32m+[m[32m          delete result.$$inheritedValues;[m
[32m+[m[32m          resolution.resolve(values);[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      function fail(reason) {[m
[32m+[m[32m        result.$$failure = reason;[m
[32m+[m[32m        resolution.reject(reason);[m
[32m+[m[32m      }[m
 [m
[31m-    // push to event loop to allow forms to submit[m
[31m-    setTimeout($.proxy(function () {[m
[31m-      $el[val](data[state] == null ? this.options[state] : data[state])[m
[32m+[m[32m      // Short-circuit if parent has already failed[m
[32m+[m[32m      if (isDefined(parent.$$failure)) {[m
[32m+[m[32m        fail(parent.$$failure);[m
[32m+[m[32m        return result;[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      if (parent.$$inheritedValues) {[m
[32m+[m[32m        merge(values, omit(parent.$$inheritedValues, invocableKeys));[m
[32m+[m[32m      }[m
 [m
[31m-      if (state == 'loadingText') {[m
[31m-        this.isLoading = true[m
[31m-        $el.addClass(d).attr(d, d)[m
[31m-      } else if (this.isLoading) {[m
[31m-        this.isLoading = false[m
[31m-        $el.removeClass(d).removeAttr(d)[m
[32m+[m[32m      // Merge parent values if the parent has already resolved, or merge[m
[32m+[m[32m      // parent promises and wait if the parent resolve is still in progress.[m
[32m+[m[32m      extend(promises, parent.$$promises);[m
[32m+[m[32m      if (parent.$$values) {[m
[32m+[m[32m        merged = merge(values, omit(parent.$$values, invocableKeys));[m
[32m+[m[32m        result.$$inheritedValues = omit(parent.$$values, invocableKeys);[m
[32m+[m[32m        done();[m
[32m+[m[32m      } else {[m
[32m+[m[32m        if (parent.$$inheritedValues) {[m
[32m+[m[32m          result.$$inheritedValues = omit(parent.$$inheritedValues, invocableKeys);[m
[32m+[m[32m        }[m[41m        [m
[32m+[m[32m        parent.then(done, fail);[m
       }[m
[31m-    }, this), 0)[m
[31m-  }[m
[32m+[m[41m      [m
[32m+[m[32m      // Process each invocable in the plan, but ignore any where a local of the same name exists.[m
[32m+[m[32m      for (var i=0, ii=plan.length; i<ii; i+=3) {[m
[32m+[m[32m        if (locals.hasOwnProperty(plan[i])) done();[m
[32m+[m[32m        else invoke(plan[i], plan[i+1], plan[i+2]);[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      function invoke(key, invocable, params) {[m
[32m+[m[32m        // Create a deferred for this invocation. Failures will propagate to the resolution as well.[m
[32m+[m[32m        var invocation = $q.defer(), waitParams = 0;[m
[32m+[m[32m        function onfailure(reason) {[m
[32m+[m[32m          invocation.reject(reason);[m
[32m+[m[32m          fail(reason);[m
[32m+[m[32m        }[m
[32m+[m[32m        // Wait for any parameter that we have a promise for (either from parent or from this[m
[32m+[m[32m        // resolve; in that case study() will have made sure it's ordered before us in the plan).[m
[32m+[m[32m        forEach(params, function (dep) {[m
[32m+[m[32m          if (promises.hasOwnProperty(dep) && !locals.hasOwnProperty(dep)) {[m
[32m+[m[32m            waitParams++;[m
[32m+[m[32m            promises[dep].then(function (result) {[m
[32m+[m[32m              values[dep] = result;[m
[32m+[m[32m              if (!(--waitParams)) proceed();[m
[32m+[m[32m            }, onfailure);[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m[32m        if (!waitParams) proceed();[m
[32m+[m[32m        function proceed() {[m
[32m+[m[32m          if (isDefined(result.$$failure)) return;[m
[32m+[m[32m          try {[m
[32m+[m[32m            invocation.resolve($injector.invoke(invocable, self, values));[m
[32m+[m[32m            invocation.promise.then(function (result) {[m
[32m+[m[32m              values[key] = result;[m
[32m+[m[32m              done();[m
[32m+[m[32m            }, onfailure);[m
[32m+[m[32m          } catch (e) {[m
[32m+[m[32m            onfailure(e);[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m        // Publish promise synchronously; invocations further down in the plan may depend on it.[m
[32m+[m[32m        promises[key] = invocation.promise;[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      return result;[m
[32m+[m[32m    };[m
[32m+[m[32m  };[m
[32m+[m[41m  [m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$resolve#resolve[m
[32m+[m[32m   * @methodOf ui.router.util.$resolve[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Resolves a set of invocables. An invocable is a function to be invoked via[m[41m [m
[32m+[m[32m   * `$injector.invoke()`, and can have an arbitrary number of dependencies.[m[41m [m
[32m+[m[32m   * An invocable can either return a value directly,[m
[32m+[m[32m   * or a `$q` promise. If a promise is returned it will be resolved and the[m[41m [m
[32m+[m[32m   * resulting value will be used instead. Dependencies of invocables are resolved[m[41m [m
[32m+[m[32m   * (in this order of precedence)[m
[32m+[m[32m   *[m
[32m+[m[32m   * - from the specified `locals`[m
[32m+[m[32m   * - from another invocable that is part of this `$resolve` call[m
[32m+[m[32m   * - from an invocable that is inherited from a `parent` call to `$resolve`[m[41m [m
[32m+[m[32m   *   (or recursively[m
[32m+[m[32m   * - from any ancestor `$resolve` of that parent).[m
[32m+[m[32m   *[m
[32m+[m[32m   * The return value of `$resolve` is a promise for an object that contains[m[41m [m
[32m+[m[32m   * (in this order of precedence)[m
[32m+[m[32m   *[m
[32m+[m[32m   * - any `locals` (if specified)[m
[32m+[m[32m   * - the resolved return values of all injectables[m
[32m+[m[32m   * - any values inherited from a `parent` call to `$resolve` (if specified)[m
[32m+[m[32m   *[m
[32m+[m[32m   * The promise will resolve after the `parent` promise (if any) and all promises[m[41m [m
[32m+[m[32m   * returned by injectables have been resolved. If any invocable[m[41m [m
[32m+[m[32m   * (or `$injector.invoke`) throws an exception, or if a promise returned by an[m[41m [m
[32m+[m[32m   * invocable is rejected, the `$resolve` promise is immediately rejected with the[m[41m [m
[32m+[m[32m   * same error. A rejection of a `parent` promise (if specified) will likewise be[m[41m [m
[32m+[m[32m   * propagated immediately. Once the `$resolve` promise has been rejected, no[m[41m [m
[32m+[m[32m   * further invocables will be called.[m
[32m+[m[32m   *[m[41m [m
[32m+[m[32m   * Cyclic dependencies between invocables are not permitted and will caues `$resolve`[m
[32m+[m[32m   * to throw an error. As a special case, an injectable can depend on a parameter[m[41m [m
[32m+[m[32m   * with the same name as the injectable, which will be fulfilled from the `parent`[m[41m [m
[32m+[m[32m   * injectable of the same name. This allows inherited values to be decorated.[m[41m [m
[32m+[m[32m   * Note that in this case any other injectable in the same `$resolve` with the same[m
[32m+[m[32m   * dependency would see the decorated value, not the inherited value.[m
[32m+[m[32m   *[m
[32m+[m[32m   * Note that missing dependencies -- unlike cyclic dependencies -- will cause an[m[41m [m
[32m+[m[32m   * (asynchronous) rejection of the `$resolve` promise rather than a (synchronous)[m[41m [m
[32m+[m[32m   * exception.[m
[32m+[m[32m   *[m
[32m+[m[32m   * Invocables are invoked eagerly as soon as all dependencies are available.[m[41m [m
[32m+[m[32m   * This is true even for dependencies inherited from a `parent` call to `$resolve`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * As a special case, an invocable can be a string, in which case it is taken to[m[41m [m
[32m+[m[32m   * be a service name to be passed to `$injector.get()`. This is supported primarily[m[41m [m
[32m+[m[32m   * for backwards-compatibility with the `resolve` property of `$routeProvider`[m[41m [m
[32m+[m[32m   * routes.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {object} invocables functions to invoke or[m[41m [m
[32m+[m[32m   * `$injector` services to fetch.[m
[32m+[m[32m   * @param {object} locals  values to make available to the injectables[m
[32m+[m[32m   * @param {object} parent  a promise returned by another call to `$resolve`.[m
[32m+[m[32m   * @param {object} self  the `this` for the invoked methods[m
[32m+[m[32m   * @return {object} Promise for an object that contains the resolved return value[m
[32m+[m[32m   * of all invocables, as well as any inherited and local values.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.resolve = function (invocables, locals, parent, self) {[m
[32m+[m[32m    return this.study(invocables)(locals, parent, self);[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
 [m
[31m-  Button.prototype.toggle = function () {[m
[31m-    var changed = true[m
[31m-    var $parent = this.$element.closest('[data-toggle="buttons"]')[m
[32m+[m[32mangular.module('ui.router.util').service('$resolve', $Resolve);[m
 [m
[31m-    if ($parent.length) {[m
[31m-      var $input = this.$element.find('input')[m
[31m-      if ($input.prop('type') == 'radio') {[m
[31m-        if ($input.prop('checked') && this.$element.hasClass('active')) changed = false[m
[31m-        else $parent.find('.active').removeClass('active')[m
[31m-      }[m
[31m-      if (changed) $input.prop('checked', !this.$element.hasClass('active')).trigger('change')[m
[31m-    } else {[m
[31m-      this.$element.attr('aria-pressed', !this.$element.hasClass('active'))[m
[31m-    }[m
 [m
[31m-    if (changed) this.$element.toggleClass('active')[m
[31m-  }[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc object[m
[32m+[m[32m * @name ui.router.util.$templateFactory[m
[32m+[m[32m *[m
[32m+[m[32m * @requires $http[m
[32m+[m[32m * @requires $templateCache[m
[32m+[m[32m * @requires $injector[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Service. Manages loading of templates.[m
[32m+[m[32m */[m
[32m+[m[32m$TemplateFactory.$inject = ['$http', '$templateCache', '$injector'];[m
[32m+[m[32mfunction $TemplateFactory(  $http,   $templateCache,   $injector) {[m
 [m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$templateFactory#fromConfig[m
[32m+[m[32m   * @methodOf ui.router.util.$templateFactory[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Creates a template from a configuration object.[m[41m [m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {object} config Configuration object for which to load a template.[m[41m [m
[32m+[m[32m   * The following properties are search in the specified order, and the first one[m[41m [m
[32m+[m[32m   * that is defined is used to create the template:[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string|object} config.template html string template or function to[m[41m [m
[32m+[m[32m   * load via {@link ui.router.util.$templateFactory#fromString fromString}.[m
[32m+[m[32m   * @param {string|object} config.templateUrl url to load or a function returning[m[41m [m
[32m+[m[32m   * the url to load via {@link ui.router.util.$templateFactory#fromUrl fromUrl}.[m
[32m+[m[32m   * @param {Function} config.templateProvider function to invoke via[m[41m [m
[32m+[m[32m   * {@link ui.router.util.$templateFactory#fromProvider fromProvider}.[m
[32m+[m[32m   * @param {object} params  Parameters to pass to the template function.[m
[32m+[m[32m   * @param {object} locals Locals to pass to `invoke` if the template is loaded[m[41m [m
[32m+[m[32m   * via a `templateProvider`. Defaults to `{ params: params }`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @return {string|object}  The template html as a string, or a promise for[m[41m [m
[32m+[m[32m   * that string,or `null` if no template is configured.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.fromConfig = function (config, params, locals) {[m
[32m+[m[32m    return ([m
[32m+[m[32m      isDefined(config.template) ? this.fromString(config.template, params) :[m
[32m+[m[32m      isDefined(config.templateUrl) ? this.fromUrl(config.templateUrl, params) :[m
[32m+[m[32m      isDefined(config.templateProvider) ? this.fromProvider(config.templateProvider, params, locals) :[m
[32m+[m[32m      null[m
[32m+[m[32m    );[m
[32m+[m[32m  };[m
 [m
[31m-  // BUTTON PLUGIN DEFINITION[m
[31m-  // ========================[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$templateFactory#fromString[m
[32m+[m[32m   * @methodOf ui.router.util.$templateFactory[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Creates a template from a string or a function returning a string.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string|object} template html template as a string or function that[m[41m [m
[32m+[m[32m   * returns an html template as a string.[m
[32m+[m[32m   * @param {object} params Parameters to pass to the template function.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @return {string|object} The template html as a string, or a promise for that[m[41m [m
[32m+[m[32m   * string.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.fromString = function (template, params) {[m
[32m+[m[32m    return isFunction(template) ? template(params) : template;[m
[32m+[m[32m  };[m
 [m
[31m-  function Plugin(option) {[m
[31m-    return this.each(function () {[m
[31m-      var $this   = $(this)[m
[31m-      var data    = $this.data('bs.button')[m
[31m-      var options = typeof option == 'object' && option[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$templateFactory#fromUrl[m
[32m+[m[32m   * @methodOf ui.router.util.$templateFactory[m
[32m+[m[32m   *[m[41m [m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Loads a template from the a URL via `$http` and `$templateCache`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string|Function} url url of the template to load, or a function[m[41m [m
[32m+[m[32m   * that returns a url.[m
[32m+[m[32m   * @param {Object} params Parameters to pass to the url function.[m
[32m+[m[32m   * @return {string|Promise.<string>} The template html as a string, or a promise[m[41m [m
[32m+[m[32m   * for that string.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.fromUrl = function (url, params) {[m
[32m+[m[32m    if (isFunction(url)) url = url(params);[m
[32m+[m[32m    if (url == null) return null;[m
[32m+[m[32m    else return $http[m
[32m+[m[32m        .get(url, { cache: $templateCache, headers: { Accept: 'text/html' }})[m
[32m+[m[32m        .then(function(response) { return response.data; });[m
[32m+[m[32m  };[m
 [m
[31m-      if (!data) $this.data('bs.button', (data = new Button(this, options)))[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$templateFactory#fromProvider[m
[32m+[m[32m   * @methodOf ui.router.util.$templateFactory[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Creates a template by invoking an injectable provider function.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {Function} provider Function to invoke via `$injector.invoke`[m
[32m+[m[32m   * @param {Object} params Parameters for the template.[m
[32m+[m[32m   * @param {Object} locals Locals to pass to `invoke`. Defaults to[m[41m [m
[32m+[m[32m   * `{ params: params }`.[m
[32m+[m[32m   * @return {string|Promise.<string>} The template html as a string, or a promise[m[41m [m
[32m+[m[32m   * for that string.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.fromProvider = function (provider, params, locals) {[m
[32m+[m[32m    return $injector.invoke(provider, null, locals || { params: params });[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
 [m
[31m-      if (option == 'toggle') data.toggle()[m
[31m-      else if (option) data.setState(option)[m
[31m-    })[m
[31m-  }[m
[32m+[m[32mangular.module('ui.router.util').service('$templateFactory', $TemplateFactory);[m
 [m
[31m-  var old = $.fn.button[m
[32m+[m[32mvar $$UMFP; // reference to $UrlMatcherFactoryProvider[m
 [m
[31m-  $.fn.button             = Plugin[m
[31m-  $.fn.button.Constructor = Button[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc object[m
[32m+[m[32m * @name ui.router.util.type:UrlMatcher[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Matches URLs against patterns and extracts named parameters from the path or the search[m
[32m+[m[32m * part of the URL. A URL pattern consists of a path pattern, optionally followed by '?' and a list[m
[32m+[m[32m * of search parameters. Multiple search parameter names are separated by '&'. Search parameters[m
[32m+[m[32m * do not influence whether or not a URL is matched, but their values are passed through into[m
[32m+[m[32m * the matched parameters returned by {@link ui.router.util.type:UrlMatcher#methods_exec exec}.[m
[32m+[m[32m *[m
[32m+[m[32m * Path parameter placeholders can be specified using simple colon/catch-all syntax or curly brace[m
[32m+[m[32m * syntax, which optionally allows a regular expression for the parameter to be specified:[m
[32m+[m[32m *[m
[32m+[m[32m * * `':'` name - colon placeholder[m
[32m+[m[32m * * `'*'` name - catch-all placeholder[m
[32m+[m[32m * * `'{' name '}'` - curly placeholder[m
[32m+[m[32m * * `'{' name ':' regexp|type '}'` - curly placeholder with regexp or type name. Should the[m
[32m+[m[32m *   regexp itself contain curly braces, they must be in matched pairs or escaped with a backslash.[m
[32m+[m[32m *[m
[32m+[m[32m * Parameter names may contain only word characters (latin letters, digits, and underscore) and[m
[32m+[m[32m * must be unique within the pattern (across both path and search parameters). For colon[m
[32m+[m[32m * placeholders or curly placeholders without an explicit regexp, a path parameter matches any[m
[32m+[m[32m * number of characters other than '/'. For catch-all placeholders the path parameter matches[m
[32m+[m[32m * any number of characters.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m * * `'/hello/'` - Matches only if the path is exactly '/hello/'. There is no special treatment for[m
[32m+[m[32m *   trailing slashes, and patterns have to match the entire path, not just a prefix.[m
[32m+[m[32m * * `'/user/:id'` - Matches '/user/bob' or '/user/1234!!!' or even '/user/' but not '/user' or[m
[32m+[m[32m *   '/user/bob/details'. The second path segment will be captured as the parameter 'id'.[m
[32m+[m[32m * * `'/user/{id}'` - Same as the previous example, but using curly brace syntax.[m
[32m+[m[32m * * `'/user/{id:[^/]*}'` - Same as the previous example.[m
[32m+[m[32m * * `'/user/{id:[0-9a-fA-F]{1,8}}'` - Similar to the previous example, but only matches if the id[m
[32m+[m[32m *   parameter consists of 1 to 8 hex digits.[m
[32m+[m[32m * * `'/files/{path:.*}'` - Matches any URL starting with '/files/' and captures the rest of the[m
[32m+[m[32m *   path into the parameter 'path'.[m
[32m+[m[32m * * `'/files/*path'` - ditto.[m
[32m+[m[32m * * `'/calendar/{start:date}'` - Matches "/calendar/2014-11-12" (because the pattern defined[m
[32m+[m[32m *   in the built-in  `date` Type matches `2014-11-12`) and provides a Date object in $stateParams.start[m
[32m+[m[32m *[m
[32m+[m[32m * @param {string} pattern  The pattern to compile into a matcher.[m
[32m+[m[32m * @param {Object} config  A configuration object hash:[m
[32m+[m[32m * @param {Object=} parentMatcher Used to concatenate the pattern/config onto[m
[32m+[m[32m *   an existing UrlMatcher[m
[32m+[m[32m *[m
[32m+[m[32m * * `caseInsensitive` - `true` if URL matching should be case insensitive, otherwise `false`, the default value (for backward compatibility) is `false`.[m
[32m+[m[32m * * `strict` - `false` if matching against a URL with a trailing slash should be treated as equivalent to a URL without a trailing slash, the default value is `true`.[m
[32m+[m[32m *[m
[32m+[m[32m * @property {string} prefix  A static prefix of this pattern. The matcher guarantees that any[m
[32m+[m[32m *   URL matching this matcher (i.e. any string for which {@link ui.router.util.type:UrlMatcher#methods_exec exec()} returns[m
[32m+[m[32m *   non-null) will start with this prefix.[m
[32m+[m[32m *[m
[32m+[m[32m * @property {string} source  The pattern that was passed into the constructor[m
[32m+[m[32m *[m
[32m+[m[32m * @property {string} sourcePath  The path portion of the source property[m
[32m+[m[32m *[m
[32m+[m[32m * @property {string} sourceSearch  The search portion of the source property[m
[32m+[m[32m *[m
[32m+[m[32m * @property {string} regex  The constructed regex that will be used to match against the url when[m
[32m+[m[32m *   it is time to determine which url will match.[m
[32m+[m[32m *[m
[32m+[m[32m * @returns {Object}  New `UrlMatcher` object[m
[32m+[m[32m */[m
[32m+[m[32mfunction UrlMatcher(pattern, config, parentMatcher) {[m
[32m+[m[32m  config = extend({ params: {} }, isObject(config) ? config : {});[m
 [m
[32m+[m[32m  // Find all placeholders and create a compiled pattern, using either classic or curly syntax:[m
[32m+[m[32m  //   '*' name[m
[32m+[m[32m  //   ':' name[m
[32m+[m[32m  //   '{' name '}'[m
[32m+[m[32m  //   '{' name ':' regexp '}'[m
[32m+[m[32m  // The regular expression is somewhat complicated due to the need to allow curly braces[m
[32m+[m[32m  // inside the regular expression. The placeholder regexp breaks down as follows:[m
[32m+[m[32m  //    ([:*])([\w\[\]]+)              - classic placeholder ($1 / $2) (search version has - for snake-case)[m
[32m+[m[32m  //    \{([\w\[\]]+)(?:\:( ... ))?\}  - curly brace placeholder ($3) with optional regexp/type ... ($4) (search version has - for snake-case[m
[32m+[m[32m  //    (?: ... | ... | ... )+         - the regexp consists of any number of atoms, an atom being either[m
[32m+[m[32m  //    [^{}\\]+                       - anything other than curly braces or backslash[m
[32m+[m[32m  //    \\.                            - a backslash escape[m
[32m+[m[32m  //    \{(?:[^{}\\]+|\\.)*\}          - a matched set of curly braces containing other atoms[m
[32m+[m[32m  var placeholder       = /([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,[m
[32m+[m[32m      searchPlaceholder = /([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,[m
[32m+[m[32m      compiled = '^', last = 0, m,[m
[32m+[m[32m      segments = this.segments = [],[m
[32m+[m[32m      parentParams = parentMatcher ? parentMatcher.params : {},[m
[32m+[m[32m      params = this.params = parentMatcher ? parentMatcher.params.$$new() : new $$UMFP.ParamSet(),[m
[32m+[m[32m      paramNames = [];[m
 [m
[31m-  // BUTTON NO CONFLICT[m
[31m-  // ==================[m
[32m+[m[32m  function addParameter(id, type, config, location) {[m
[32m+[m[32m    paramNames.push(id);[m
[32m+[m[32m    if (parentParams[id]) return parentParams[id];[m
[32m+[m[32m    if (!/^\w+(-+\w+)*(?:\[\])?$/.test(id)) throw new Error("Invalid parameter name '" + id + "' in pattern '" + pattern + "'");[m
[32m+[m[32m    if (params[id]) throw new Error("Duplicate parameter name '" + id + "' in pattern '" + pattern + "'");[m
[32m+[m[32m    params[id] = new $$UMFP.Param(id, type, config, location);[m
[32m+[m[32m    return params[id];[m
[32m+[m[32m  }[m
 [m
[31m-  $.fn.button.noConflict = function () {[m
[31m-    $.fn.button = old[m
[31m-    return this[m
[32m+[m[32m  function quoteRegExp(string, pattern, squash, optional) {[m
[32m+[m[32m    var surroundPattern = ['',''], result = string.replace(/[\\\[\]\^$*+?.()|{}]/g, "\\$&");[m
[32m+[m[32m    if (!pattern) return result;[m
[32m+[m[32m    switch(squash) {[m
[32m+[m[32m      case false: surroundPattern = ['(', ')' + (optional ? "?" : "")]; break;[m
[32m+[m[32m      case true:  surroundPattern = ['?(', ')?']; break;[m
[32m+[m[32m      default:    surroundPattern = ['(' + squash + "|", ')?']; break;[m
[32m+[m[32m    }[m
[32m+[m[32m    return result + surroundPattern[0] + pattern + surroundPattern[1];[m
   }[m
 [m
[32m+[m[32m  this.source = pattern;[m
 [m
[31m-  // BUTTON DATA-API[m
[31m-  // ===============[m
[31m-[m
[31m-  $(document)[m
[31m-    .on('click.bs.button.data-api', '[data-toggle^="button"]', function (e) {[m
[31m-      var $btn = $(e.target)[m
[31m-      if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')[m
[31m-      Plugin.call($btn, 'toggle')[m
[31m-      e.preventDefault()[m
[31m-    })[m
[31m-    .on('focus.bs.button.data-api blur.bs.button.data-api', '[data-toggle^="button"]', function (e) {[m
[31m-      $(e.target).closest('.btn').toggleClass('focus', /^focus(in)?$/.test(e.type))[m
[31m-    })[m
[31m-[m
[31m-}(jQuery);[m
[31m-[m
[31m-/* ========================================================================[m
[31m- * Bootstrap: carousel.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#carousel[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
[31m-[m
[31m-[m
[31m-+function ($) {[m
[31m-  'use strict';[m
[31m-[m
[31m-  // CAROUSEL CLASS DEFINITION[m
[31m-  // =========================[m
[31m-[m
[31m-  var Carousel = function (element, options) {[m
[31m-    this.$element    = $(element)[m
[31m-    this.$indicators = this.$element.find('.carousel-indicators')[m
[31m-    this.options     = options[m
[31m-    this.paused      = null[m
[31m-    this.sliding     = null[m
[31m-    this.interval    = null[m
[31m-    this.$active     = null[m
[31m-    this.$items      = null[m
[32m+[m[32m  // Split into static segments separated by path parameter placeholders.[m
[32m+[m[32m  // The number of segments is always 1 more than the number of parameters.[m
[32m+[m[32m  function matchDetails(m, isSearch) {[m
[32m+[m[32m    var id, regexp, segment, type, cfg, arrayMode;[m
[32m+[m[32m    id          = m[2] || m[3]; // IE[78] returns '' for unmatched groups instead of null[m
[32m+[m[32m    cfg         = config.params[id];[m
[32m+[m[32m    segment     = pattern.substring(last, m.index);[m
[32m+[m[32m    regexp      = isSearch ? m[4] : m[4] || (m[1] == '*' ? '.*' : null);[m
[32m+[m[32m    type        = $$UMFP.type(regexp || "string") || inherit($$UMFP.type("string"), { pattern: new RegExp(regexp, config.caseInsensitive ? 'i' : undefined) });[m
[32m+[m[32m    return {[m
[32m+[m[32m      id: id, regexp: regexp, segment: segment, type: type, cfg: cfg[m
[32m+[m[32m    };[m
[32m+[m[32m  }[m
 [m
[31m-    this.options.keyboard && this.$element.on('keydown.bs.carousel', $.proxy(this.keydown, this))[m
[32m+[m[32m  var p, param, segment;[m
[32m+[m[32m  while ((m = placeholder.exec(pattern))) {[m
[32m+[m[32m    p = matchDetails(m, false);[m
[32m+[m[32m    if (p.segment.indexOf('?') >= 0) break; // we're into the search part[m
 [m
[31m-    this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element[m
[31m-      .on('mouseenter.bs.carousel', $.proxy(this.pause, this))[m
[31m-      .on('mouseleave.bs.carousel', $.proxy(this.cycle, this))[m
[32m+[m[32m    param = addParameter(p.id, p.type, p.cfg, "path");[m
[32m+[m[32m    compiled += quoteRegExp(p.segment, param.type.pattern.source, param.squash, param.isOptional);[m
[32m+[m[32m    segments.push(p.segment);[m
[32m+[m[32m    last = placeholder.lastIndex;[m
   }[m
[32m+[m[32m  segment = pattern.substring(last);[m
 [m
[31m-  Carousel.VERSION  = '3.3.4'[m
[31m-[m
[31m-  Carousel.TRANSITION_DURATION = 600[m
[32m+[m[32m  // Find any search parameter names and remove them from the last segment[m
[32m+[m[32m  var i = segment.indexOf('?');[m
 [m
[31m-  Carousel.DEFAULTS = {[m
[31m-    interval: 5000,[m
[31m-    pause: 'hover',[m
[31m-    wrap: true,[m
[31m-    keyboard: true[m
[31m-  }[m
[32m+[m[32m  if (i >= 0) {[m
[32m+[m[32m    var search = this.sourceSearch = segment.substring(i);[m
[32m+[m[32m    segment = segment.substring(0, i);[m
[32m+[m[32m    this.sourcePath = pattern.substring(0, last + i);[m
 [m
[31m-  Carousel.prototype.keydown = function (e) {[m
[31m-    if (/input|textarea/i.test(e.target.tagName)) return[m
[31m-    switch (e.which) {[m
[31m-      case 37: this.prev(); break[m
[31m-      case 39: this.next(); break[m
[31m-      default: return[m
[32m+[m[32m    if (search.length > 0) {[m
[32m+[m[32m      last = 0;[m
[32m+[m[32m      while ((m = searchPlaceholder.exec(search))) {[m
[32m+[m[32m        p = matchDetails(m, true);[m
[32m+[m[32m        param = addParameter(p.id, p.type, p.cfg, "search");[m
[32m+[m[32m        last = placeholder.lastIndex;[m
[32m+[m[32m        // check if ?&[m
[32m+[m[32m      }[m
     }[m
[31m-[m
[31m-    e.preventDefault()[m
[32m+[m[32m  } else {[m
[32m+[m[32m    this.sourcePath = pattern;[m
[32m+[m[32m    this.sourceSearch = '';[m
   }[m
 [m
[31m-  Carousel.prototype.cycle = function (e) {[m
[31m-    e || (this.paused = false)[m
[31m-[m
[31m-    this.interval && clearInterval(this.interval)[m
[32m+[m[32m  compiled += quoteRegExp(segment) + (config.strict === false ? '\/?' : '') + '$';[m
[32m+[m[32m  segments.push(segment);[m
 [m
[31m-    this.options.interval[m
[31m-      && !this.paused[m
[31m-      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))[m
[32m+[m[32m  this.regexp = new RegExp(compiled, config.caseInsensitive ? 'i' : undefined);[m
[32m+[m[32m  this.prefix = segments[0];[m
[32m+[m[32m  this.$$paramNames = paramNames;[m
[32m+[m[32m}[m
 [m
[31m-    return this[m
[31m-  }[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc function[m
[32m+[m[32m * @name ui.router.util.type:UrlMatcher#concat[m
[32m+[m[32m * @methodOf ui.router.util.type:UrlMatcher[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Returns a new matcher for a pattern constructed by appending the path part and adding the[m
[32m+[m[32m * search parameters of the specified pattern to this pattern. The current pattern is not[m
[32m+[m[32m * modified. This can be understood as creating a pattern for URLs that are relative to (or[m
[32m+[m[32m * suffixes of) the current pattern.[m
[32m+[m[32m *[m
[32m+[m[32m * @example[m
[32m+[m[32m * The following two matchers are equivalent:[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * new UrlMatcher('/user/{id}?q').concat('/details?date');[m
[32m+[m[32m * new UrlMatcher('/user/{id}/details?q&date');[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m
[32m+[m[32m * @param {string} pattern  The pattern to append.[m
[32m+[m[32m * @param {Object} config  An object hash of the configuration for the matcher.[m
[32m+[m[32m * @returns {UrlMatcher}  A matcher for the concatenated pattern.[m
[32m+[m[32m */[m
[32m+[m[32mUrlMatcher.prototype.concat = function (pattern, config) {[m
[32m+[m[32m  // Because order of search parameters is irrelevant, we can add our own search[m
[32m+[m[32m  // parameters to the end of the new pattern. Parse the new pattern by itself[m
[32m+[m[32m  // and then join the bits together, but it's much easier to do this on a string level.[m
[32m+[m[32m  var defaultConfig = {[m
[32m+[m[32m    caseInsensitive: $$UMFP.caseInsensitive(),[m
[32m+[m[32m    strict: $$UMFP.strictMode(),[m
[32m+[m[32m    squash: $$UMFP.defaultSquashPolicy()[m
[32m+[m[32m  };[m
[32m+[m[32m  return new UrlMatcher(this.sourcePath + pattern + this.sourceSearch, extend(defaultConfig, config), this);[m
[32m+[m[32m};[m
 [m
[31m-  Carousel.prototype.getItemIndex = function (item) {[m
[31m-    this.$items = item.parent().children('.item')[m
[31m-    return this.$items.index(item || this.$active)[m
[31m-  }[m
[32m+[m[32mUrlMatcher.prototype.toString = function () {[m
[32m+[m[32m  return this.source;[m
[32m+[m[32m};[m
 [m
[31m-  Carousel.prototype.getItemForDirection = function (direction, active) {[m
[31m-    var activeIndex = this.getItemIndex(active)[m
[31m-    var willWrap = (direction == 'prev' && activeIndex === 0)[m
[31m-                || (direction == 'next' && activeIndex == (this.$items.length - 1))[m
[31m-    if (willWrap && !this.options.wrap) return active[m
[31m-    var delta = direction == 'prev' ? -1 : 1[m
[31m-    var itemIndex = (activeIndex + delta) % this.$items.length[m
[31m-    return this.$items.eq(itemIndex)[m
[31m-  }[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc function[m
[32m+[m[32m * @name ui.router.util.type:UrlMatcher#exec[m
[32m+[m[32m * @methodOf ui.router.util.type:UrlMatcher[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Tests the specified path against this matcher, and returns an object containing the captured[m
[32m+[m[32m * parameter values, or null if the path does not match. The returned object contains the values[m
[32m+[m[32m * of any search parameters that are mentioned in the pattern, but their value may be null if[m
[32m+[m[32m * they are not present in `searchParams`. This means that search parameters are always treated[m
[32m+[m[32m * as optional.[m
[32m+[m[32m *[m
[32m+[m[32m * @example[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * new UrlMatcher('/user/{id}?q&r').exec('/user/bob', {[m
[32m+[m[32m *   x: '1', q: 'hello'[m
[32m+[m[32m * });[m
[32m+[m[32m * // returns { id: 'bob', q: 'hello', r: null }[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m
[32m+[m[32m * @param {string} path  The URL path to match, e.g. `$location.path()`.[m
[32m+[m[32m * @param {Object} searchParams  URL search parameters, e.g. `$location.search()`.[m
[32m+[m[32m * @returns {Object}  The captured parameter values.[m
[32m+[m[32m */[m
[32m+[m[32mUrlMatcher.prototype.exec = function (path, searchParams) {[m
[32m+[m[32m  var m = this.regexp.exec(path);[m
[32m+[m[32m  if (!m) return null;[m
[32m+[m[32m  searchParams = searchParams || {};[m
 [m
[31m-  Carousel.prototype.to = function (pos) {[m
[31m-    var that        = this[m
[31m-    var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))[m
[32m+[m[32m  var paramNames = this.parameters(), nTotal = paramNames.length,[m
[32m+[m[32m    nPath = this.segments.length - 1,[m
[32m+[m[32m    values = {}, i, j, cfg, paramName;[m
 [m
[31m-    if (pos > (this.$items.length - 1) || pos < 0) return[m
[32m+[m[32m  if (nPath !== m.length - 1) throw new Error("Unbalanced capture group in route '" + this.source + "'");[m
 [m
[31m-    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) }) // yes, "slid"[m
[31m-    if (activeIndex == pos) return this.pause().cycle()[m
[32m+[m[32m  function decodePathArray(string) {[m
[32m+[m[32m    function reverseString(str) { return str.split("").reverse().join(""); }[m
[32m+[m[32m    function unquoteDashes(str) { return str.replace(/\\-/g, "-"); }[m
 [m
[31m-    return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))[m
[32m+[m[32m    var split = reverseString(string).split(/-(?!\\)/);[m
[32m+[m[32m    var allReversed = map(split, reverseString);[m
[32m+[m[32m    return map(allReversed, unquoteDashes).reverse();[m
   }[m
 [m
[31m-  Carousel.prototype.pause = function (e) {[m
[31m-    e || (this.paused = true)[m
[31m-[m
[31m-    if (this.$element.find('.next, .prev').length && $.support.transition) {[m
[31m-      this.$element.trigger($.support.transition.end)[m
[31m-      this.cycle(true)[m
[32m+[m[32m  for (i = 0; i < nPath; i++) {[m
[32m+[m[32m    paramName = paramNames[i];[m
[32m+[m[32m    var param = this.params[paramName];[m
[32m+[m[32m    var paramVal = m[i+1];[m
[32m+[m[32m    // if the param value matches a pre-replace pair, replace the value before decoding.[m
[32m+[m[32m    for (j = 0; j < param.replace; j++) {[m
[32m+[m[32m      if (param.replace[j].from === paramVal) paramVal = param.replace[j].to;[m
     }[m
[31m-[m
[31m-    this.interval = clearInterval(this.interval)[m
[31m-[m
[31m-    return this[m
[32m+[m[32m    if (paramVal && param.array === true) paramVal = decodePathArray(paramVal);[m
[32m+[m[32m    values[paramName] = param.value(paramVal);[m
   }[m
[31m-[m
[31m-  Carousel.prototype.next = function () {[m
[31m-    if (this.sliding) return[m
[31m-    return this.slide('next')[m
[32m+[m[32m  for (/**/; i < nTotal; i++) {[m
[32m+[m[32m    paramName = paramNames[i];[m
[32m+[m[32m    values[paramName] = this.params[paramName].value(searchParams[paramName]);[m
   }[m
 [m
[31m-  Carousel.prototype.prev = function () {[m
[31m-    if (this.sliding) return[m
[31m-    return this.slide('prev')[m
[31m-  }[m
[32m+[m[32m  return values;[m
[32m+[m[32m};[m
 [m
[31m-  Carousel.prototype.slide = function (type, next) {[m
[31m-    var $active   = this.$element.find('.item.active')[m
[31m-    var $next     = next || this.getItemForDirection(type, $active)[m
[31m-    var isCycling = this.interval[m
[31m-    var direction = type == 'next' ? 'left' : 'right'[m
[31m-    var that      = this[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc function[m
[32m+[m[32m * @name ui.router.util.type:UrlMatcher#parameters[m
[32m+[m[32m * @methodOf ui.router.util.type:UrlMatcher[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Returns the names of all path and search parameters of this pattern in an unspecified order.[m
[32m+[m[32m *[m
[32m+[m[32m * @returns {Array.<string>}  An array of parameter names. Must be treated as read-only. If the[m
[32m+[m[32m *    pattern has no parameters, an empty array is returned.[m
[32m+[m[32m */[m
[32m+[m[32mUrlMatcher.prototype.parameters = function (param) {[m
[32m+[m[32m  if (!isDefined(param)) return this.$$paramNames;[m
[32m+[m[32m  return this.params[param] || null;[m
[32m+[m[32m};[m
 [m
[31m-    if ($next.hasClass('active')) return (this.sliding = false)[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc function[m
[32m+[m[32m * @name ui.router.util.type:UrlMatcher#validate[m
[32m+[m[32m * @methodOf ui.router.util.type:UrlMatcher[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Checks an object hash of parameters to validate their correctness according to the parameter[m
[32m+[m[32m * types of this `UrlMatcher`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} params The object hash of parameters to validate.[m
[32m+[m[32m * @returns {boolean} Returns `true` if `params` validates, otherwise `false`.[m
[32m+[m[32m */[m
[32m+[m[32mUrlMatcher.prototype.validates = function (params) {[m
[32m+[m[32m  return this.params.$$validates(params);[m
[32m+[m[32m};[m
 [m
[31m-    var relatedTarget = $next[0][m
[31m-    var slideEvent = $.Event('slide.bs.carousel', {[m
[31m-      relatedTarget: relatedTarget,[m
[31m-      direction: direction[m
[31m-    })[m
[31m-    this.$element.trigger(slideEvent)[m
[31m-    if (slideEvent.isDefaultPrevented()) return[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc function[m
[32m+[m[32m * @name ui.router.util.type:UrlMatcher#format[m
[32m+[m[32m * @methodOf ui.router.util.type:UrlMatcher[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Creates a URL that matches this pattern by substituting the specified values[m
[32m+[m[32m * for the path and search parameters. Null values for path parameters are[m
[32m+[m[32m * treated as empty strings.[m
[32m+[m[32m *[m
[32m+[m[32m * @example[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * new UrlMatcher('/user/{id}?q').format({ id:'bob', q:'yes' });[m
[32m+[m[32m * // returns '/user/bob?q=yes'[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} values  the values to substitute for the parameters in this pattern.[m
[32m+[m[32m * @returns {string}  the formatted URL (path and optionally search part).[m
[32m+[m[32m */[m
[32m+[m[32mUrlMatcher.prototype.format = function (values) {[m
[32m+[m[32m  values = values || {};[m
[32m+[m[32m  var segments = this.segments, params = this.parameters(), paramset = this.params;[m
[32m+[m[32m  if (!this.validates(values)) return null;[m
 [m
[31m-    this.sliding = true[m
[32m+[m[32m  var i, search = false, nPath = segments.length - 1, nTotal = params.length, result = segments[0];[m
 [m
[31m-    isCycling && this.pause()[m
[32m+[m[32m  function encodeDashes(str) { // Replace dashes with encoded "\-"[m
[32m+[m[32m    return encodeURIComponent(str).replace(/-/g, function(c) { return '%5C%' + c.charCodeAt(0).toString(16).toUpperCase(); });[m
[32m+[m[32m  }[m
 [m
[31m-    if (this.$indicators.length) {[m
[31m-      this.$indicators.find('.active').removeClass('active')[m
[31m-      var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])[m
[31m-      $nextIndicator && $nextIndicator.addClass('active')[m
[31m-    }[m
[32m+[m[32m  for (i = 0; i < nTotal; i++) {[m
[32m+[m[32m    var isPathParam = i < nPath;[m
[32m+[m[32m    var name = params[i], param = paramset[name], value = param.value(values[name]);[m
[32m+[m[32m    var isDefaultValue = param.isOptional && param.type.equals(param.value(), value);[m
[32m+[m[32m    var squash = isDefaultValue ? param.squash : false;[m
[32m+[m[32m    var encoded = param.type.encode(value);[m
 [m
[31m-    var slidEvent = $.Event('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, "slid"[m
[31m-    if ($.support.transition && this.$element.hasClass('slide')) {[m
[31m-      $next.addClass(type)[m
[31m-      $next[0].offsetWidth // force reflow[m
[31m-      $active.addClass(direction)[m
[31m-      $next.addClass(direction)[m
[31m-      $active[m
[31m-        .one('bsTransitionEnd', function () {[m
[31m-          $next.removeClass([type, direction].join(' ')).addClass('active')[m
[31m-          $active.removeClass(['active', direction].join(' '))[m
[31m-          that.sliding = false[m
[31m-          setTimeout(function () {[m
[31m-            that.$element.trigger(slidEvent)[m
[31m-          }, 0)[m
[31m-        })[m
[31m-        .emulateTransitionEnd(Carousel.TRANSITION_DURATION)[m
[32m+[m[32m    if (isPathParam) {[m
[32m+[m[32m      var nextSegment = segments[i + 1];[m
[32m+[m[32m      if (squash === false) {[m
[32m+[m[32m        if (encoded != null) {[m
[32m+[m[32m          if (isArray(encoded)) {[m
[32m+[m[32m            result += map(encoded, encodeDashes).join("-");[m
[32m+[m[32m          } else {[m
[32m+[m[32m            result += encodeURIComponent(encoded);[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m        result += nextSegment;[m
[32m+[m[32m      } else if (squash === true) {[m
[32m+[m[32m        var capture = result.match(/\/$/) ? /\/?(.*)/ : /(.*)/;[m
[32m+[m[32m        result += nextSegment.match(capture)[1];[m
[32m+[m[32m      } else if (isString(squash)) {[m
[32m+[m[32m        result += squash + nextSegment;[m
[32m+[m[32m      }[m
     } else {[m
[31m-      $active.removeClass('active')[m
[31m-      $next.addClass('active')[m
[31m-      this.sliding = false[m
[31m-      this.$element.trigger(slidEvent)[m
[32m+[m[32m      if (encoded == null || (isDefaultValue && squash !== false)) continue;[m
[32m+[m[32m      if (!isArray(encoded)) encoded = [ encoded ];[m
[32m+[m[32m      encoded = map(encoded, encodeURIComponent).join('&' + name + '=');[m
[32m+[m[32m      result += (search ? '&' : '?') + (name + '=' + encoded);[m
[32m+[m[32m      search = true;[m
     }[m
[31m-[m
[31m-    isCycling && this.cycle()[m
[31m-[m
[31m-    return this[m
   }[m
 [m
[32m+[m[32m  return result;[m
[32m+[m[32m};[m
 [m
[31m-  // CAROUSEL PLUGIN DEFINITION[m
[31m-  // ==========================[m
[31m-[m
[31m-  function Plugin(option) {[m
[31m-    return this.each(function () {[m
[31m-      var $this   = $(this)[m
[31m-      var data    = $this.data('bs.carousel')[m
[31m-      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)[m
[31m-      var action  = typeof option == 'string' ? option : options.slide[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc object[m
[32m+[m[32m * @name ui.router.util.type:Type[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Implements an interface to define custom parameter types that can be decoded from and encoded to[m
[32m+[m[32m * string parameters matched in a URL. Used by {@link ui.router.util.type:UrlMatcher `UrlMatcher`}[m
[32m+[m[32m * objects when matching or formatting URLs, or comparing or validating parameter values.[m
[32m+[m[32m *[m
[32m+[m[32m * See {@link ui.router.util.$urlMatcherFactory#methods_type `$urlMatcherFactory#type()`} for more[m
[32m+[m[32m * information on registering custom types.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} config  A configuration object which contains the custom type definition.  The object's[m
[32m+[m[32m *        properties will override the default methods and/or pattern in `Type`'s public interface.[m
[32m+[m[32m * @example[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * {[m
[32m+[m[32m *   decode: function(val) { return parseInt(val, 10); },[m
[32m+[m[32m *   encode: function(val) { return val && val.toString(); },[m
[32m+[m[32m *   equals: function(a, b) { return this.is(a) && a === b; },[m
[32m+[m[32m *   is: function(val) { return angular.isNumber(val) isFinite(val) && val % 1 === 0; },[m
[32m+[m[32m *   pattern: /\d+/[m
[32m+[m[32m * }[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m
[32m+[m[32m * @property {RegExp} pattern The regular expression pattern used to match values of this type when[m
[32m+[m[32m *           coming from a substring of a URL.[m
[32m+[m[32m *[m
[32m+[m[32m * @returns {Object}  Returns a new `Type` object.[m
[32m+[m[32m */[m
[32m+[m[32mfunction Type(config) {[m
[32m+[m[32m  extend(this, config);[m
[32m+[m[32m}[m
 [m
[31m-      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))[m
[31m-      if (typeof option == 'number') data.to(option)[m
[31m-      else if (action) data[action]()[m
[31m-      else if (options.interval) data.pause().cycle()[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc function[m
[32m+[m[32m * @name ui.router.util.type:Type#is[m
[32m+[m[32m * @methodOf ui.router.util.type:Type[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Detects whether a value is of a particular type. Accepts a native (decoded) value[m
[32m+[m[32m * and determines whether it matches the current `Type` object.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {*} val  The value to check.[m
[32m+[m[32m * @param {string} key  Optional. If the type check is happening in the context of a specific[m
[32m+[m[32m *        {@link ui.router.util.type:UrlMatcher `UrlMatcher`} object, this is the name of the[m
[32m+[m[32m *        parameter in which `val` is stored. Can be used for meta-programming of `Type` objects.[m
[32m+[m[32m * @returns {Boolean}  Returns `true` if the value matches the type, otherwise `false`.[m
[32m+[m[32m */[m
[32m+[m[32mType.prototype.is = function(val, key) {[m
[32m+[m[32m  return true;[m
[32m+[m[32m};[m
 [m
[31m-  var old = $.fn.carousel[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc function[m
[32m+[m[32m * @name ui.router.util.type:Type#encode[m
[32m+[m[32m * @methodOf ui.router.util.type:Type[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Encodes a custom/native type value to a string that can be embedded in a URL. Note that the[m
[32m+[m[32m * return value does *not* need to be URL-safe (i.e. passed through `encodeURIComponent()`), it[m
[32m+[m[32m * only needs to be a representation of `val` that has been coerced to a string.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {*} val  The value to encode.[m
[32m+[m[32m * @param {string} key  The name of the parameter in which `val` is stored. Can be used for[m
[32m+[m[32m *        meta-programming of `Type` objects.[m
[32m+[m[32m * @returns {string}  Returns a string representation of `val` that can be encoded in a URL.[m
[32m+[m[32m */[m
[32m+[m[32mType.prototype.encode = function(val, key) {[m
[32m+[m[32m  return val;[m
[32m+[m[32m};[m
 [m
[31m-  $.fn.carousel             = Plugin[m
[31m-  $.fn.carousel.Constructor = Carousel[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc function[m
[32m+[m[32m * @name ui.router.util.type:Type#decode[m
[32m+[m[32m * @methodOf ui.router.util.type:Type[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Converts a parameter value (from URL string or transition param) to a custom/native value.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {string} val  The URL parameter value to decode.[m
[32m+[m[32m * @param {string} key  The name of the parameter in which `val` is stored. Can be used for[m
[32m+[m[32m *        meta-programming of `Type` objects.[m
[32m+[m[32m * @returns {*}  Returns a custom representation of the URL parameter value.[m
[32m+[m[32m */[m
[32m+[m[32mType.prototype.decode = function(val, key) {[m
[32m+[m[32m  return val;[m
[32m+[m[32m};[m
 [m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc function[m
[32m+[m[32m * @name ui.router.util.type:Type#equals[m
[32m+[m[32m * @methodOf ui.router.util.type:Type[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Determines whether two decoded values are equivalent.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {*} a  A value to compare against.[m
[32m+[m[32m * @param {*} b  A value to compare against.[m
[32m+[m[32m * @returns {Boolean}  Returns `true` if the values are equivalent/equal, otherwise `false`.[m
[32m+[m[32m */[m
[32m+[m[32mType.prototype.equals = function(a, b) {[m
[32m+[m[32m  return a == b;[m
[32m+[m[32m};[m
 [m
[31m-  // CAROUSEL NO CONFLICT[m
[31m-  // ====================[m
[32m+[m[32mType.prototype.$subPattern = function() {[m
[32m+[m[32m  var sub = this.pattern.toString();[m
[32m+[m[32m  return sub.substr(1, sub.length - 2);[m
[32m+[m[32m};[m
 [m
[31m-  $.fn.carousel.noConflict = function () {[m
[31m-    $.fn.carousel = old[m
[31m-    return this[m
[31m-  }[m
[32m+[m[32mType.prototype.pattern = /.*/;[m
 [m
[32m+[m[32mType.prototype.toString = function() { return "{Type:" + this.name + "}"; };[m
 [m
[31m-  // CAROUSEL DATA-API[m
[31m-  // =================[m
[32m+[m[32m/** Given an encoded string, or a decoded object, returns a decoded object */[m
[32m+[m[32mType.prototype.$normalize = function(val) {[m
[32m+[m[32m  return this.is(val) ? val : this.decode(val);[m
[32m+[m[32m};[m
 [m
[31m-  var clickHandler = function (e) {[m
[31m-    var href[m
[31m-    var $this   = $(this)[m
[31m-    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) // strip for ie7[m
[31m-    if (!$target.hasClass('carousel')) return[m
[31m-    var options = $.extend({}, $target.data(), $this.data())[m
[31m-    var slideIndex = $this.attr('data-slide-to')[m
[31m-    if (slideIndex) options.interval = false[m
[32m+[m[32m/*[m
[32m+[m[32m * Wraps an existing custom Type as an array of Type, depending on 'mode'.[m
[32m+[m[32m * e.g.:[m
[32m+[m[32m * - urlmatcher pattern "/path?{queryParam[]:int}"[m
[32m+[m[32m * - url: "/path?queryParam=1&queryParam=2[m
[32m+[m[32m * - $stateParams.queryParam will be [1, 2][m
[32m+[m[32m * if `mode` is "auto", then[m
[32m+[m[32m * - url: "/path?queryParam=1 will create $stateParams.queryParam: 1[m
[32m+[m[32m * - url: "/path?queryParam=1&queryParam=2 will create $stateParams.queryParam: [1, 2][m
[32m+[m[32m */[m
[32m+[m[32mType.prototype.$asArray = function(mode, isSearch) {[m
[32m+[m[32m  if (!mode) return this;[m
[32m+[m[32m  if (mode === "auto" && !isSearch) throw new Error("'auto' array mode is for query parameters only");[m
 [m
[31m-    Plugin.call($target, options)[m
[32m+[m[32m  function ArrayType(type, mode) {[m
[32m+[m[32m    function bindTo(type, callbackName) {[m
[32m+[m[32m      return function() {[m
[32m+[m[32m        return type[callbackName].apply(type, arguments);[m
[32m+[m[32m      };[m
[32m+[m[32m    }[m
 [m
[31m-    if (slideIndex) {[m
[31m-      $target.data('bs.carousel').to(slideIndex)[m
[32m+[m[32m    // Wrap non-array value as array[m
[32m+[m[32m    function arrayWrap(val) { return isArray(val) ? val : (isDefined(val) ? [ val ] : []); }[m
[32m+[m[32m    // Unwrap array value for "auto" mode. Return undefined for empty array.[m
[32m+[m[32m    function arrayUnwrap(val) {[m
[32m+[m[32m      switch(val.length) {[m
[32m+[m[32m        case 0: return undefined;[m
[32m+[m[32m        case 1: return mode === "auto" ? val[0] : val;[m
[32m+[m[32m        default: return val;[m
[32m+[m[32m      }[m
     }[m
[32m+[m[32m    function falsey(val) { return !val; }[m
 [m
[31m-    e.preventDefault()[m
[31m-  }[m
[32m+[m[32m    // Wraps type (.is/.encode/.decode) functions to operate on each value of an array[m
[32m+[m[32m    function arrayHandler(callback, allTruthyMode) {[m
[32m+[m[32m      return function handleArray(val) {[m
[32m+[m[32m        val = arrayWrap(val);[m
[32m+[m[32m        var result = map(val, callback);[m
[32m+[m[32m        if (allTruthyMode === true)[m
[32m+[m[32m          return filter(result, falsey).length === 0;[m
[32m+[m[32m        return arrayUnwrap(result);[m
[32m+[m[32m      };[m
[32m+[m[32m    }[m
 [m
[31m-  $(document)[m
[31m-    .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)[m
[31m-    .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)[m
[32m+[m[32m    // Wraps type (.equals) functions to operate on each value of an array[m
[32m+[m[32m    function arrayEqualsHandler(callback) {[m
[32m+[m[32m      return function handleArray(val1, val2) {[m
[32m+[m[32m        var left = arrayWrap(val1), right = arrayWrap(val2);[m
[32m+[m[32m        if (left.length !== right.length) return false;[m
[32m+[m[32m        for (var i = 0; i < left.length; i++) {[m
[32m+[m[32m          if (!callback(left[i], right[i])) return false;[m
[32m+[m[32m        }[m
[32m+[m[32m        return true;[m
[32m+[m[32m      };[m
[32m+[m[32m    }[m
 [m
[31m-  $(window).on('load', function () {[m
[31m-    $('[data-ride="carousel"]').each(function () {[m
[31m-      var $carousel = $(this)[m
[31m-      Plugin.call($carousel, $carousel.data())[m
[31m-    })[m
[31m-  })[m
[32m+[m[32m    this.encode = arrayHandler(bindTo(type, 'encode'));[m
[32m+[m[32m    this.decode = arrayHandler(bindTo(type, 'decode'));[m
[32m+[m[32m    this.is     = arrayHandler(bindTo(type, 'is'), true);[m
[32m+[m[32m    this.equals = arrayEqualsHandler(bindTo(type, 'equals'));[m
[32m+[m[32m    this.pattern = type.pattern;[m
[32m+[m[32m    this.$normalize = arrayHandler(bindTo(type, '$normalize'));[m
[32m+[m[32m    this.name = type.name;[m
[32m+[m[32m    this.$arrayMode = mode;[m
[32m+[m[32m  }[m
 [m
[31m-}(jQuery);[m
[32m+[m[32m  return new ArrayType(this, mode);[m
[32m+[m[32m};[m
 [m
[31m-/* ========================================================================[m
[31m- * Bootstrap: collapse.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#collapse[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
 [m
 [m
[31m-+function ($) {[m
[31m-  'use strict';[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc object[m
[32m+[m[32m * @name ui.router.util.$urlMatcherFactory[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Factory for {@link ui.router.util.type:UrlMatcher `UrlMatcher`} instances. The factory[m
[32m+[m[32m * is also available to providers under the name `$urlMatcherFactoryProvider`.[m
[32m+[m[32m */[m
[32m+[m[32mfunction $UrlMatcherFactory() {[m
[32m+[m[32m  $$UMFP = this;[m
 [m
[31m-  // COLLAPSE PUBLIC CLASS DEFINITION[m
[31m-  // ================================[m
[32m+[m[32m  var isCaseInsensitive = false, isStrictMode = true, defaultSquashPolicy = false;[m
 [m
[31m-  var Collapse = function (element, options) {[m
[31m-    this.$element      = $(element)[m
[31m-    this.options       = $.extend({}, Collapse.DEFAULTS, options)[m
[31m-    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +[m
[31m-                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')[m
[31m-    this.transitioning = null[m
[32m+[m[32m  function valToString(val) { return val != null ? val.toString().replace(/\//g, "%2F") : val; }[m
[32m+[m[32m  function valFromString(val) { return val != null ? val.toString().replace(/%2F/g, "/") : val; }[m
 [m
[31m-    if (this.options.parent) {[m
[31m-      this.$parent = this.getParent()[m
[31m-    } else {[m
[31m-      this.addAriaAndCollapsedClass(this.$element, this.$trigger)[m
[32m+[m[32m  var $types = {}, enqueue = true, typeQueue = [], injector, defaultTypes = {[m
[32m+[m[32m    string: {[m
[32m+[m[32m      encode: valToString,[m
[32m+[m[32m      decode: valFromString,[m
[32m+[m[32m      // TODO: in 1.0, make string .is() return false if value is undefined/null by default.[m
[32m+[m[32m      // In 0.2.x, string params are optional by default for backwards compat[m
[32m+[m[32m      is: function(val) { return val == null || !isDefined(val) || typeof val === "string"; },[m
[32m+[m[32m      pattern: /[^/]*/[m
[32m+[m[32m    },[m
[32m+[m[32m    int: {[m
[32m+[m[32m      encode: valToString,[m
[32m+[m[32m      decode: function(val) { return parseInt(val, 10); },[m
[32m+[m[32m      is: function(val) { return isDefined(val) && this.decode(val.toString()) === val; },[m
[32m+[m[32m      pattern: /\d+/[m
[32m+[m[32m    },[m
[32m+[m[32m    bool: {[m
[32m+[m[32m      encode: function(val) { return val ? 1 : 0; },[m
[32m+[m[32m      decode: function(val) { return parseInt(val, 10) !== 0; },[m
[32m+[m[32m      is: function(val) { return val === true || val === false; },[m
[32m+[m[32m      pattern: /0|1/[m
[32m+[m[32m    },[m
[32m+[m[32m    date: {[m
[32m+[m[32m      encode: function (val) {[m
[32m+[m[32m        if (!this.is(val))[m
[32m+[m[32m          return undefined;[m
[32m+[m[32m        return [ val.getFullYear(),[m
[32m+[m[32m          ('0' + (val.getMonth() + 1)).slice(-2),[m
[32m+[m[32m          ('0' + val.getDate()).slice(-2)[m
[32m+[m[32m        ].join("-");[m
[32m+[m[32m      },[m
[32m+[m[32m      decode: function (val) {[m
[32m+[m[32m        if (this.is(val)) return val;[m
[32m+[m[32m        var match = this.capture.exec(val);[m
[32m+[m[32m        return match ? new Date(match[1], match[2] - 1, match[3]) : undefined;[m
[32m+[m[32m      },[m
[32m+[m[32m      is: function(val) { return val instanceof Date && !isNaN(val.valueOf()); },[m
[32m+[m[32m      equals: function (a, b) { return this.is(a) && this.is(b) && a.toISOString() === b.toISOString(); },[m
[32m+[m[32m      pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,[m
[32m+[m[32m      capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/[m
[32m+[m[32m    },[m
[32m+[m[32m    json: {[m
[32m+[m[32m      encode: angular.toJson,[m
[32m+[m[32m      decode: angular.fromJson,[m
[32m+[m[32m      is: angular.isObject,[m
[32m+[m[32m      equals: angular.equals,[m
[32m+[m[32m      pattern: /[^/]*/[m
[32m+[m[32m    },[m
[32m+[m[32m    any: { // does not encode/decode[m
[32m+[m[32m      encode: angular.identity,[m
[32m+[m[32m      decode: angular.identity,[m
[32m+[m[32m      equals: angular.equals,[m
[32m+[m[32m      pattern: /.*/[m
     }[m
[32m+[m[32m  };[m
 [m
[31m-    if (this.options.toggle) this.toggle()[m
[31m-  }[m
[31m-[m
[31m-  Collapse.VERSION  = '3.3.4'[m
[31m-[m
[31m-  Collapse.TRANSITION_DURATION = 350[m
[31m-[m
[31m-  Collapse.DEFAULTS = {[m
[31m-    toggle: true[m
[32m+[m[32m  function getDefaultConfig() {[m
[32m+[m[32m    return {[m
[32m+[m[32m      strict: isStrictMode,[m
[32m+[m[32m      caseInsensitive: isCaseInsensitive[m
[32m+[m[32m    };[m
   }[m
 [m
[31m-  Collapse.prototype.dimension = function () {[m
[31m-    var hasWidth = this.$element.hasClass('width')[m
[31m-    return hasWidth ? 'width' : 'height'[m
[32m+[m[32m  function isInjectable(value) {[m
[32m+[m[32m    return (isFunction(value) || (isArray(value) && isFunction(value[value.length - 1])));[m
   }[m
 [m
[31m-  Collapse.prototype.show = function () {[m
[31m-    if (this.transitioning || this.$element.hasClass('in')) return[m
[31m-[m
[31m-    var activesData[m
[31m-    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')[m
[32m+[m[32m  /**[m
[32m+[m[32m   * [Internal] Get the default value of a parameter, which may be an injectable function.[m
[32m+[m[32m   */[m
[32m+[m[32m  $UrlMatcherFactory.$$getDefaultValue = function(config) {[m
[32m+[m[32m    if (!isInjectable(config.value)) return config.value;[m
[32m+[m[32m    if (!injector) throw new Error("Injectable functions cannot be called at configuration time");[m
[32m+[m[32m    return injector.invoke(config.value);[m
[32m+[m[32m  };[m
 [m
[31m-    if (actives && actives.length) {[m
[31m-      activesData = actives.data('bs.collapse')[m
[31m-      if (activesData && activesData.transitioning) return[m
[31m-    }[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$urlMatcherFactory#caseInsensitive[m
[32m+[m[32m   * @methodOf ui.router.util.$urlMatcherFactory[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Defines whether URL matching should be case sensitive (the default behavior), or not.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {boolean} value `false` to match URL in a case sensitive manner; otherwise `true`;[m
[32m+[m[32m   * @returns {boolean} the current value of caseInsensitive[m
[32m+[m[32m   */[m
[32m+[m[32m  this.caseInsensitive = function(value) {[m
[32m+[m[32m    if (isDefined(value))[m
[32m+[m[32m      isCaseInsensitive = value;[m
[32m+[m[32m    return isCaseInsensitive;[m
[32m+[m[32m  };[m
 [m
[31m-    var startEvent = $.Event('show.bs.collapse')[m
[31m-    this.$element.trigger(startEvent)[m
[31m-    if (startEvent.isDefaultPrevented()) return[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$urlMatcherFactory#strictMode[m
[32m+[m[32m   * @methodOf ui.router.util.$urlMatcherFactory[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Defines whether URLs should match trailing slashes, or not (the default behavior).[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {boolean=} value `false` to match trailing slashes in URLs, otherwise `true`.[m
[32m+[m[32m   * @returns {boolean} the current value of strictMode[m
[32m+[m[32m   */[m
[32m+[m[32m  this.strictMode = function(value) {[m
[32m+[m[32m    if (isDefined(value))[m
[32m+[m[32m      isStrictMode = value;[m
[32m+[m[32m    return isStrictMode;[m
[32m+[m[32m  };[m
 [m
[31m-    if (actives && actives.length) {[m
[31m-      Plugin.call(actives, 'hide')[m
[31m-      activesData || actives.data('bs.collapse', null)[m
[31m-    }[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$urlMatcherFactory#defaultSquashPolicy[m
[32m+[m[32m   * @methodOf ui.router.util.$urlMatcherFactory[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Sets the default behavior when generating or matching URLs with default parameter values.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string} value A string that defines the default parameter URL squashing behavior.[m
[32m+[m[32m   *    `nosquash`: When generating an href with a default parameter value, do not squash the parameter value from the URL[m
[32m+[m[32m   *    `slash`: When generating an href with a default parameter value, squash (remove) the parameter value, and, if the[m
[32m+[m[32m   *             parameter is surrounded by slashes, squash (remove) one slash from the URL[m
[32m+[m[32m   *    any other string, e.g. "~": When generating an href with a default parameter value, squash (remove)[m
[32m+[m[32m   *             the parameter value from the URL and replace it with this string.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.defaultSquashPolicy = function(value) {[m
[32m+[m[32m    if (!isDefined(value)) return defaultSquashPolicy;[m
[32m+[m[32m    if (value !== true && value !== false && !isString(value))[m
[32m+[m[32m      throw new Error("Invalid squash policy: " + value + ". Valid policies: false, true, arbitrary-string");[m
[32m+[m[32m    defaultSquashPolicy = value;[m
[32m+[m[32m    return value;[m
[32m+[m[32m  };[m
 [m
[31m-    var dimension = this.dimension()[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$urlMatcherFactory#compile[m
[32m+[m[32m   * @methodOf ui.router.util.$urlMatcherFactory[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Creates a {@link ui.router.util.type:UrlMatcher `UrlMatcher`} for the specified pattern.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string} pattern  The URL pattern.[m
[32m+[m[32m   * @param {Object} config  The config object hash.[m
[32m+[m[32m   * @returns {UrlMatcher}  The UrlMatcher.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.compile = function (pattern, config) {[m
[32m+[m[32m    return new UrlMatcher(pattern, extend(getDefaultConfig(), config));[m
[32m+[m[32m  };[m
 [m
[31m-    this.$element[m
[31m-      .removeClass('collapse')[m
[31m-      .addClass('collapsing')[dimension](0)[m
[31m-      .attr('aria-expanded', true)[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$urlMatcherFactory#isMatcher[m
[32m+[m[32m   * @methodOf ui.router.util.$urlMatcherFactory[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Returns true if the specified object is a `UrlMatcher`, or false otherwise.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {Object} object  The object to perform the type check against.[m
[32m+[m[32m   * @returns {Boolean}  Returns `true` if the object matches the `UrlMatcher` interface, by[m
[32m+[m[32m   *          implementing all the same methods.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.isMatcher = function (o) {[m
[32m+[m[32m    if (!isObject(o)) return false;[m
[32m+[m[32m    var result = true;[m
 [m
[31m-    this.$trigger[m
[31m-      .removeClass('collapsed')[m
[31m-      .attr('aria-expanded', true)[m
[32m+[m[32m    forEach(UrlMatcher.prototype, function(val, name) {[m
[32m+[m[32m      if (isFunction(val)) {[m
[32m+[m[32m        result = result && (isDefined(o[name]) && isFunction(o[name]));[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m    return result;[m
[32m+[m[32m  };[m
 [m
[31m-    this.transitioning = 1[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.util.$urlMatcherFactory#type[m
[32m+[m[32m   * @methodOf ui.router.util.$urlMatcherFactory[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Registers a custom {@link ui.router.util.type:Type `Type`} object that can be used to[m
[32m+[m[32m   * generate URLs with typed parameters.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string} name  The type name.[m
[32m+[m[32m   * @param {Object|Function} definition   The type definition. See[m
[32m+[m[32m   *        {@link ui.router.util.type:Type `Type`} for information on the values accepted.[m
[32m+[m[32m   * @param {Object|Function} definitionFn (optional) A function that is injected before the app[m
[32m+[m[32m   *        runtime starts.  The result of this function is merged into the existing `definition`.[m
[32m+[m[32m   *        See {@link ui.router.util.type:Type `Type`} for information on the values accepted.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @returns {Object}  Returns `$urlMatcherFactoryProvider`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @example[m
[32m+[m[32m   * This is a simple example of a custom type that encodes and decodes items from an[m
[32m+[m[32m   * array, using the array index as the URL-encoded value:[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>[m
[32m+[m[32m   * var list = ['John', 'Paul', 'George', 'Ringo'];[m
[32m+[m[32m   *[m
[32m+[m[32m   * $urlMatcherFactoryProvider.type('listItem', {[m
[32m+[m[32m   *   encode: function(item) {[m
[32m+[m[32m   *     // Represent the list item in the URL using its corresponding index[m
[32m+[m[32m   *     return list.indexOf(item);[m
[32m+[m[32m   *   },[m
[32m+[m[32m   *   decode: function(item) {[m
[32m+[m[32m   *     // Look up the list item by index[m
[32m+[m[32m   *     return list[parseInt(item, 10)];[m
[32m+[m[32m   *   },[m
[32m+[m[32m   *   is: function(item) {[m
[32m+[m[32m   *     // Ensure the item is valid by checking to see that it appears[m
[32m+[m[32m   *     // in the list[m
[32m+[m[32m   *     return list.indexOf(item) > -1;[m
[32m+[m[32m   *   }[m
[32m+[m[32m   * });[m
[32m+[m[32m   *[m
[32m+[m[32m   * $stateProvider.state('list', {[m
[32m+[m[32m   *   url: "/list/{item:listItem}",[m
[32m+[m[32m   *   controller: function($scope, $stateParams) {[m
[32m+[m[32m   *     console.log($stateParams.item);[m
[32m+[m[32m   *   }[m
[32m+[m[32m   * });[m
[32m+[m[32m   *[m
[32m+[m[32m   * // ...[m
[32m+[m[32m   *[m
[32m+[m[32m   * // Changes URL to '/list/3', logs "Ringo" to the console[m
[32m+[m[32m   * $state.go('list', { item: "Ringo" });[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * This is a more complex example of a type that relies on dependency injection to[m
[32m+[m[32m   * interact with services, and uses the parameter name from the URL to infer how to[m
[32m+[m[32m   * handle encoding and decoding parameter values:[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>[m
[32m+[m[32m   * // Defines a custom type that gets a value from a service,[m
[32m+[m[32m   * // where each service gets different types of values from[m
[32m+[m[32m   * // a backend API:[m
[32m+[m[32m   * $urlMatcherFactoryProvider.type('dbObject', {}, function(Users, Posts) {[m
[32m+[m[32m   *[m
[32m+[m[32m   *   // Matches up services to URL parameter names[m
[32m+[m[32m   *   var services = {[m
[32m+[m[32m   *     user: Users,[m
[32m+[m[32m   *     post: Posts[m
[32m+[m[32m   *   };[m
[32m+[m[32m   *[m
[32m+[m[32m   *   return {[m
[32m+[m[32m   *     encode: function(object) {[m
[32m+[m[32m   *       // Represent the object in the URL using its unique ID[m
[32m+[m[32m   *       return object.id;[m
[32m+[m[32m   *     },[m
[32m+[m[32m   *     decode: function(value, key) {[m
[32m+[m[32m   *       // Look up the object by ID, using the parameter[m
[32m+[m[32m   *       // name (key) to call the correct service[m
[32m+[m[32m   *       return services[key].findById(value);[m
[32m+[m[32m   *     },[m
[32m+[m[32m   *     is: function(object, key) {[m
[32m+[m[32m   *       // Check that object is a valid dbObject[m
[32m+[m[32m   *       return angular.isObject(object) && object.id && services[key];[m
[32m+[m[32m   *     }[m
[32m+[m[32m   *     equals: function(a, b) {[m
[32m+[m[32m   *       // Check the equality of decoded objects by comparing[m
[32m+[m[32m   *       // their unique IDs[m
[32m+[m[32m   *       return a.id === b.id;[m
[32m+[m[32m   *     }[m
[32m+[m[32m   *   };[m
[32m+[m[32m   * });[m
[32m+[m[32m   *[m
[32m+[m[32m   * // In a config() block, you can then attach URLs with[m
[32m+[m[32m   * // type-annotated parameters:[m
[32m+[m[32m   * $stateProvider.state('users', {[m
[32m+[m[32m   *   url: "/users",[m
[32m+[m[32m   *   // ...[m
[32m+[m[32m   * }).state('users.item', {[m
[32m+[m[32m   *   url: "/{user:dbObject}",[m
[32m+[m[32m   *   controller: function($scope, $stateParams) {[m
[32m+[m[32m   *     // $stateParams.user will now be an object returned from[m
[32m+[m[32m   *     // the Users service[m
[32m+[m[32m   *   },[m
[32m+[m[32m   *   // ...[m
[32m+[m[32m   * });[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   */[m
[32m+[m[32m  this.type = function (name, definition, definitionFn) {[m
[32m+[m[32m    if (!isDefined(definition)) return $types[name];[m
[32m+[m[32m    if ($types.hasOwnProperty(name)) throw new Error("A type named '" + name + "' has already been defined.");[m
 [m
[31m-    var complete = function () {[m
[31m-      this.$element[m
[31m-        .removeClass('collapsing')[m
[31m-        .addClass('collapse in')[dimension]('')[m
[31m-      this.transitioning = 0[m
[31m-      this.$element[m
[31m-        .trigger('shown.bs.collapse')[m
[32m+[m[32m    $types[name] = new Type(extend({ name: name }, definition));[m
[32m+[m[32m    if (definitionFn) {[m
[32m+[m[32m      typeQueue.push({ name: name, def: definitionFn });[m
[32m+[m[32m      if (!enqueue) flushTypeQueue();[m
     }[m
[32m+[m[32m    return this;[m
[32m+[m[32m  };[m
 [m
[31m-    if (!$.support.transition) return complete.call(this)[m
[31m-[m
[31m-    var scrollSize = $.camelCase(['scroll', dimension].join('-'))[m
[31m-[m
[31m-    this.$element[m
[31m-      .one('bsTransitionEnd', $.proxy(complete, this))[m
[31m-      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])[m
[32m+[m[32m  // `flushTypeQueue()` waits until `$urlMatcherFactory` is injected before invoking the queued `definitionFn`s[m
[32m+[m[32m  function flushTypeQueue() {[m
[32m+[m[32m    while(typeQueue.length) {[m
[32m+[m[32m      var type = typeQueue.shift();[m
[32m+[m[32m      if (type.pattern) throw new Error("You cannot override a type's .pattern at runtime.");[m
[32m+[m[32m      angular.extend($types[type.name], injector.invoke(type.def));[m
[32m+[m[32m    }[m
   }[m
 [m
[31m-  Collapse.prototype.hide = function () {[m
[31m-    if (this.transitioning || !this.$element.hasClass('in')) return[m
[32m+[m[32m  // Register default types. Store them in the prototype of $types.[m
[32m+[m[32m  forEach(defaultTypes, function(type, name) { $types[name] = new Type(extend({name: name}, type)); });[m
[32m+[m[32m  $types = inherit($types, {});[m
 [m
[31m-    var startEvent = $.Event('hide.bs.collapse')[m
[31m-    this.$element.trigger(startEvent)[m
[31m-    if (startEvent.isDefaultPrevented()) return[m
[32m+[m[32m  /* No need to document $get, since it returns this */[m
[32m+[m[32m  this.$get = ['$injector', function ($injector) {[m
[32m+[m[32m    injector = $injector;[m
[32m+[m[32m    enqueue = false;[m
[32m+[m[32m    flushTypeQueue();[m
 [m
[31m-    var dimension = this.dimension()[m
[32m+[m[32m    forEach(defaultTypes, function(type, name) {[m
[32m+[m[32m      if (!$types[name]) $types[name] = new Type(type);[m
[32m+[m[32m    });[m
[32m+[m[32m    return this;[m
[32m+[m[32m  }];[m
 [m
[31m-    this.$element[dimension](this.$element[dimension]())[0].offsetHeight[m
[32m+[m[32m  this.Param = function Param(id, type, config, location) {[m
[32m+[m[32m    var self = this;[m
[32m+[m[32m    config = unwrapShorthand(config);[m
[32m+[m[32m    type = getType(config, type, location);[m
[32m+[m[32m    var arrayMode = getArrayMode();[m
[32m+[m[32m    type = arrayMode ? type.$asArray(arrayMode, location === "search") : type;[m
[32m+[m[32m    if (type.name === "string" && !arrayMode && location === "path" && config.value === undefined)[m
[32m+[m[32m      config.value = ""; // for 0.2.x; in 0.3.0+ do not automatically default to ""[m
[32m+[m[32m    var isOptional = config.value !== undefined;[m
[32m+[m[32m    var squash = getSquashPolicy(config, isOptional);[m
[32m+[m[32m    var replace = getReplace(config, arrayMode, isOptional, squash);[m
 [m
[31m-    this.$element[m
[31m-      .addClass('collapsing')[m
[31m-      .removeClass('collapse in')[m
[31m-      .attr('aria-expanded', false)[m
[32m+[m[32m    function unwrapShorthand(config) {[m
[32m+[m[32m      var keys = isObject(config) ? objectKeys(config) : [];[m
[32m+[m[32m      var isShorthand = indexOf(keys, "value") === -1 && indexOf(keys, "type") === -1 &&[m
[32m+[m[32m                        indexOf(keys, "squash") === -1 && indexOf(keys, "array") === -1;[m
[32m+[m[32m      if (isShorthand) config = { value: config };[m
[32m+[m[32m      config.$$fn = isInjectable(config.value) ? config.value : function () { return config.value; };[m
[32m+[m[32m      return config;[m
[32m+[m[32m    }[m
 [m
[31m-    this.$trigger[m
[31m-      .addClass('collapsed')[m
[31m-      .attr('aria-expanded', false)[m
[32m+[m[32m    function getType(config, urlType, location) {[m
[32m+[m[32m      if (config.type && urlType) throw new Error("Param '"+id+"' has two type configurations.");[m
[32m+[m[32m      if (urlType) return urlType;[m
[32m+[m[32m      if (!config.type) return (location === "config" ? $types.any : $types.string);[m
[32m+[m[32m      return config.type instanceof Type ? config.type : new Type(config.type);[m
[32m+[m[32m    }[m
 [m
[31m-    this.transitioning = 1[m
[32m+[m[32m    // array config: param name (param[]) overrides default settings.  explicit config overrides param name.[m
[32m+[m[32m    function getArrayMode() {[m
[32m+[m[32m      var arrayDefaults = { array: (location === "search" ? "auto" : false) };[m
[32m+[m[32m      var arrayParamNomenclature = id.match(/\[\]$/) ? { array: true } : {};[m
[32m+[m[32m      return extend(arrayDefaults, arrayParamNomenclature, config).array;[m
[32m+[m[32m    }[m
 [m
[31m-    var complete = function () {[m
[31m-      this.transitioning = 0[m
[31m-      this.$element[m
[31m-        .removeClass('collapsing')[m
[31m-        .addClass('collapse')[m
[31m-        .trigger('hidden.bs.collapse')[m
[32m+[m[32m    /**[m
[32m+[m[32m     * returns false, true, or the squash value to indicate the "default parameter url squash policy".[m
[32m+[m[32m     */[m
[32m+[m[32m    function getSquashPolicy(config, isOptional) {[m
[32m+[m[32m      var squash = config.squash;[m
[32m+[m[32m      if (!isOptional || squash === false) return false;[m
[32m+[m[32m      if (!isDefined(squash) || squash == null) return defaultSquashPolicy;[m
[32m+[m[32m      if (squash === true || isString(squash)) return squash;[m
[32m+[m[32m      throw new Error("Invalid squash policy: '" + squash + "'. Valid policies: false, true, or arbitrary string");[m
     }[m
 [m
[31m-    if (!$.support.transition) return complete.call(this)[m
[32m+[m[32m    function getReplace(config, arrayMode, isOptional, squash) {[m
[32m+[m[32m      var replace, configuredKeys, defaultPolicy = [[m
[32m+[m[32m        { from: "",   to: (isOptional || arrayMode ? undefined : "") },[m
[32m+[m[32m        { from: null, to: (isOptional || arrayMode ? undefined : "") }[m
[32m+[m[32m      ];[m
[32m+[m[32m      replace = isArray(config.replace) ? config.replace : [];[m
[32m+[m[32m      if (isString(squash))[m
[32m+[m[32m        replace.push({ from: squash, to: undefined });[m
[32m+[m[32m      configuredKeys = map(replace, function(item) { return item.from; } );[m
[32m+[m[32m      return filter(defaultPolicy, function(item) { return indexOf(configuredKeys, item.from) === -1; }).concat(replace);[m
[32m+[m[32m    }[m
 [m
[31m-    this.$element[m
[31m-      [dimension](0)[m
[31m-      .one('bsTransitionEnd', $.proxy(complete, this))[m
[31m-      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[m
[31m-  }[m
[32m+[m[32m    /**[m
[32m+[m[32m     * [Internal] Get the default value of a parameter, which may be an injectable function.[m
[32m+[m[32m     */[m
[32m+[m[32m    function $$getDefaultValue() {[m
[32m+[m[32m      if (!injector) throw new Error("Injectable functions cannot be called at configuration time");[m
[32m+[m[32m      var defaultValue = injector.invoke(config.$$fn);[m
[32m+[m[32m      if (defaultValue !== null && defaultValue !== undefined && !self.type.is(defaultValue))[m
[32m+[m[32m        throw new Error("Default value (" + defaultValue + ") for parameter '" + self.id + "' is not an instance of Type (" + self.type.name + ")");[m
[32m+[m[32m      return defaultValue;[m
[32m+[m[32m    }[m
 [m
[31m-  Collapse.prototype.toggle = function () {[m
[31m-    this[this.$element.hasClass('in') ? 'hide' : 'show']()[m
[31m-  }[m
[32m+[m[32m    /**[m
[32m+[m[32m     * [Internal] Gets the decoded representation of a value if the value is defined, otherwise, returns the[m
[32m+[m[32m     * default value, which may be the result of an injectable function.[m
[32m+[m[32m     */[m
[32m+[m[32m    function $value(value) {[m
[32m+[m[32m      function hasReplaceVal(val) { return function(obj) { return obj.from === val; }; }[m
[32m+[m[32m      function $replace(value) {[m
[32m+[m[32m        var replacement = map(filter(self.replace, hasReplaceVal(value)), function(obj) { return obj.to; });[m
[32m+[m[32m        return replacement.length ? replacement[0] : value;[m
[32m+[m[32m      }[m
[32m+[m[32m      value = $replace(value);[m
[32m+[m[32m      return !isDefined(value) ? $$getDefaultValue() : self.type.$normalize(value);[m
[32m+[m[32m    }[m
 [m
[31m-  Collapse.prototype.getParent = function () {[m
[31m-    return $(this.options.parent)[m
[31m-      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')[m
[31m-      .each($.proxy(function (i, element) {[m
[31m-        var $element = $(element)[m
[31m-        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)[m
[31m-      }, this))[m
[31m-      .end()[m
[31m-  }[m
[32m+[m[32m    function toString() { return "{Param:" + id + " " + type + " squash: '" + squash + "' optional: " + isOptional + "}"; }[m
 [m
[31m-  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {[m
[31m-    var isOpen = $element.hasClass('in')[m
[32m+[m[32m    extend(this, {[m
[32m+[m[32m      id: id,[m
[32m+[m[32m      type: type,[m
[32m+[m[32m      location: location,[m
[32m+[m[32m      array: arrayMode,[m
[32m+[m[32m      squash: squash,[m
[32m+[m[32m      replace: replace,[m
[32m+[m[32m      isOptional: isOptional,[m
[32m+[m[32m      value: $value,[m
[32m+[m[32m      dynamic: undefined,[m
[32m+[m[32m      config: config,[m
[32m+[m[32m      toString: toString[m
[32m+[m[32m    });[m
[32m+[m[32m  };[m
 [m
[31m-    $element.attr('aria-expanded', isOpen)[m
[31m-    $trigger[m
[31m-      .toggleClass('collapsed', !isOpen)[m
[31m-      .attr('aria-expanded', isOpen)[m
[32m+[m[32m  function ParamSet(params) {[m
[32m+[m[32m    extend(this, params || {});[m
   }[m
 [m
[31m-  function getTargetFromTrigger($trigger) {[m
[31m-    var href[m
[31m-    var target = $trigger.attr('data-target')[m
[31m-      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7[m
[31m-[m
[31m-    return $(target)[m
[31m-  }[m
[32m+[m[32m  ParamSet.prototype = {[m
[32m+[m[32m    $$new: function() {[m
[32m+[m[32m      return inherit(this, extend(new ParamSet(), { $$parent: this}));[m
[32m+[m[32m    },[m
[32m+[m[32m    $$keys: function () {[m
[32m+[m[32m      var keys = [], chain = [], parent = this,[m
[32m+[m[32m        ignore = objectKeys(ParamSet.prototype);[m
[32m+[m[32m      while (parent) { chain.push(parent); parent = parent.$$parent; }[m
[32m+[m[32m      chain.reverse();[m
[32m+[m[32m      forEach(chain, function(paramset) {[m
[32m+[m[32m        forEach(objectKeys(paramset), function(key) {[m
[32m+[m[32m            if (indexOf(keys, key) === -1 && indexOf(ignore, key) === -1) keys.push(key);[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m[32m      return keys;[m
[32m+[m[32m    },[m
[32m+[m[32m    $$values: function(paramValues) {[m
[32m+[m[32m      var values = {}, self = this;[m
[32m+[m[32m      forEach(self.$$keys(), function(key) {[m
[32m+[m[32m        values[key] = self[key].value(paramValues && paramValues[key]);[m
[32m+[m[32m      });[m
[32m+[m[32m      return values;[m
[32m+[m[32m    },[m
[32m+[m[32m    $$equals: function(paramValues1, paramValues2) {[m
[32m+[m[32m      var equal = true, self = this;[m
[32m+[m[32m      forEach(self.$$keys(), function(key) {[m
[32m+[m[32m        var left = paramValues1 && paramValues1[key], right = paramValues2 && paramValues2[key];[m
[32m+[m[32m        if (!self[key].type.equals(left, right)) equal = false;[m
[32m+[m[32m      });[m
[32m+[m[32m      return equal;[m
[32m+[m[32m    },[m
[32m+[m[32m    $$validates: function $$validate(paramValues) {[m
[32m+[m[32m      var keys = this.$$keys(), i, param, rawVal, normalized, encoded;[m
[32m+[m[32m      for (i = 0; i < keys.length; i++) {[m
[32m+[m[32m        param = this[keys[i]];[m
[32m+[m[32m        rawVal = paramValues[keys[i]];[m
[32m+[m[32m        if ((rawVal === undefined || rawVal === null) && param.isOptional)[m
[32m+[m[32m          break; // There was no parameter value, but the param is optional[m
[32m+[m[32m        normalized = param.type.$normalize(rawVal);[m
[32m+[m[32m        if (!param.type.is(normalized))[m
[32m+[m[32m          return false; // The value was not of the correct Type, and could not be decoded to the correct Type[m
[32m+[m[32m        encoded = param.type.encode(normalized);[m
[32m+[m[32m        if (angular.isString(encoded) && !param.type.pattern.exec(encoded))[m
[32m+[m[32m          return false; // The value was of the correct type, but when encoded, did not match the Type's regexp[m
[32m+[m[32m      }[m
[32m+[m[32m      return true;[m
[32m+[m[32m    },[m
[32m+[m[32m    $$parent: undefined[m
[32m+[m[32m  };[m
 [m
[32m+[m[32m  this.ParamSet = ParamSet;[m
[32m+[m[32m}[m
 [m
[31m-  // COLLAPSE PLUGIN DEFINITION[m
[31m-  // ==========================[m
[32m+[m[32m// Register as a provider so it's available to other providers[m
[32m+[m[32mangular.module('ui.router.util').provider('$urlMatcherFactory', $UrlMatcherFactory);[m
[32m+[m[32mangular.module('ui.router.util').run(['$urlMatcherFactory', function($urlMatcherFactory) { }]);[m
 [m
[31m-  function Plugin(option) {[m
[31m-    return this.each(function () {[m
[31m-      var $this   = $(this)[m
[31m-      var data    = $this.data('bs.collapse')[m
[31m-      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc object[m
[32m+[m[32m * @name ui.router.router.$urlRouterProvider[m
[32m+[m[32m *[m
[32m+[m[32m * @requires ui.router.util.$urlMatcherFactoryProvider[m
[32m+[m[32m * @requires $locationProvider[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * `$urlRouterProvider` has the responsibility of watching `$location`.[m[41m [m
[32m+[m[32m * When `$location` changes it runs through a list of rules one by one until a[m[41m [m
[32m+[m[32m * match is found. `$urlRouterProvider` is used behind the scenes anytime you specify[m[41m [m
[32m+[m[32m * a url in a state configuration. All urls are compiled into a UrlMatcher object.[m
[32m+[m[32m *[m
[32m+[m[32m * There are several methods on `$urlRouterProvider` that make it useful to use directly[m
[32m+[m[32m * in your module config.[m
[32m+[m[32m */[m
[32m+[m[32m$UrlRouterProvider.$inject = ['$locationProvider', '$urlMatcherFactoryProvider'];[m
[32m+[m[32mfunction $UrlRouterProvider(   $locationProvider,   $urlMatcherFactory) {[m
[32m+[m[32m  var rules = [], otherwise = null, interceptDeferred = false, listener;[m
 [m
[31m-      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false[m
[31m-      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))[m
[31m-      if (typeof option == 'string') data[option]()[m
[31m-    })[m
[32m+[m[32m  // Returns a string that is a prefix of all strings matching the RegExp[m
[32m+[m[32m  function regExpPrefix(re) {[m
[32m+[m[32m    var prefix = /^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);[m
[32m+[m[32m    return (prefix != null) ? prefix[1].replace(/\\(.)/g, "$1") : '';[m
   }[m
 [m
[31m-  var old = $.fn.collapse[m
[31m-[m
[31m-  $.fn.collapse             = Plugin[m
[31m-  $.fn.collapse.Constructor = Collapse[m
[31m-[m
[31m-[m
[31m-  // COLLAPSE NO CONFLICT[m
[31m-  // ====================[m
[31m-[m
[31m-  $.fn.collapse.noConflict = function () {[m
[31m-    $.fn.collapse = old[m
[31m-    return this[m
[32m+[m[32m  // Interpolates matched values into a String.replace()-style pattern[m
[32m+[m[32m  function interpolate(pattern, match) {[m
[32m+[m[32m    return pattern.replace(/\$(\$|\d{1,2})/, function (m, what) {[m
[32m+[m[32m      return match[what === '$' ? 0 : Number(what)];[m
[32m+[m[32m    });[m
   }[m
 [m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.router.$urlRouterProvider#rule[m
[32m+[m[32m   * @methodOf ui.router.router.$urlRouterProvider[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Defines rules that are used by `$urlRouterProvider` to find matches for[m
[32m+[m[32m   * specific URLs.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @example[m
[32m+[m[32m   * <pre>[m
[32m+[m[32m   * var app = angular.module('app', ['ui.router.router']);[m
[32m+[m[32m   *[m
[32m+[m[32m   * app.config(function ($urlRouterProvider) {[m
[32m+[m[32m   *   // Here's an example of how you might allow case insensitive urls[m
[32m+[m[32m   *   $urlRouterProvider.rule(function ($injector, $location) {[m
[32m+[m[32m   *     var path = $location.path(),[m
[32m+[m[32m   *         normalized = path.toLowerCase();[m
[32m+[m[32m   *[m
[32m+[m[32m   *     if (path !== normalized) {[m
[32m+[m[32m   *       return normalized;[m
[32m+[m[32m   *     }[m
[32m+[m[32m   *   });[m
[32m+[m[32m   * });[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {object} rule Handler function that takes `$injector` and `$location`[m
[32m+[m[32m   * services as arguments. You can use them to return a valid path as a string.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @return {object} `$urlRouterProvider` - `$urlRouterProvider` instance[m
[32m+[m[32m   */[m
[32m+[m[32m  this.rule = function (rule) {[m
[32m+[m[32m    if (!isFunction(rule)) throw new Error("'rule' must be a function");[m
[32m+[m[32m    rules.push(rule);[m
[32m+[m[32m    return this;[m
[32m+[m[32m  };[m
 [m
[31m-  // COLLAPSE DATA-API[m
[31m-  // =================[m
[31m-[m
[31m-  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {[m
[31m-    var $this   = $(this)[m
[31m-[m
[31m-    if (!$this.attr('data-target')) e.preventDefault()[m
[31m-[m
[31m-    var $target = getTargetFromTrigger($this)[m
[31m-    var data    = $target.data('bs.collapse')[m
[31m-    var option  = data ? 'toggle' : $this.data()[m
[31m-[m
[31m-    Plugin.call($target, option)[m
[31m-  })[m
[31m-[m
[31m-}(jQuery);[m
[31m-[m
[31m-/* ========================================================================[m
[31m- * Bootstrap: dropdown.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#dropdowns[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
[31m-[m
[31m-[m
[31m-+function ($) {[m
[31m-  'use strict';[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc object[m
[32m+[m[32m   * @name ui.router.router.$urlRouterProvider#otherwise[m
[32m+[m[32m   * @methodOf ui.router.router.$urlRouterProvider[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Defines a path that is used when an invalid route is requested.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @example[m
[32m+[m[32m   * <pre>[m
[32m+[m[32m   * var app = angular.module('app', ['ui.router.router']);[m
[32m+[m[32m   *[m
[32m+[m[32m   * app.config(function ($urlRouterProvider) {[m
[32m+[m[32m   *   // if the path doesn't match any of the urls you configured[m
[32m+[m[32m   *   // otherwise will take care of routing the user to the[m
[32m+[m[32m   *   // specified url[m
[32m+[m[32m   *   $urlRouterProvider.otherwise('/index');[m
[32m+[m[32m   *[m
[32m+[m[32m   *   // Example of using function rule as param[m
[32m+[m[32m   *   $urlRouterProvider.otherwise(function ($injector, $location) {[m
[32m+[m[32m   *     return '/a/valid/url';[m
[32m+[m[32m   *   });[m
[32m+[m[32m   * });[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string|object} rule The url path you want to redirect to or a function[m[41m [m
[32m+[m[32m   * rule that returns the url path. The function version is passed two params:[m[41m [m
[32m+[m[32m   * `$injector` and `$location` services, and must return a url string.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @return {object} `$urlRouterProvider` - `$urlRouterProvider` instance[m
[32m+[m[32m   */[m
[32m+[m[32m  this.otherwise = function (rule) {[m
[32m+[m[32m    if (isString(rule)) {[m
[32m+[m[32m      var redirect = rule;[m
[32m+[m[32m      rule = function () { return redirect; };[m
[32m+[m[32m    }[m
[32m+[m[32m    else if (!isFunction(rule)) throw new Error("'rule' must be a function");[m
[32m+[m[32m    otherwise = rule;[m
[32m+[m[32m    return this;[m
[32m+[m[32m  };[m
 [m
[31m-  // DROPDOWN CLASS DEFINITION[m
[31m-  // =========================[m
 [m
[31m-  var backdrop = '.dropdown-backdrop'[m
[31m-  var toggle   = '[data-toggle="dropdown"]'[m
[31m-  var Dropdown = function (element) {[m
[31m-    $(element).on('click.bs.dropdown', this.toggle)[m
[32m+[m[32m  function handleIfMatch($injector, handler, match) {[m
[32m+[m[32m    if (!match) return false;[m
[32m+[m[32m    var result = $injector.invoke(handler, handler, { $match: match });[m
[32m+[m[32m    return isDefined(result) ? result : true;[m
   }[m
 [m
[31m-  Dropdown.VERSION = '3.3.4'[m
[31m-[m
[31m-  Dropdown.prototype.toggle = function (e) {[m
[31m-    var $this = $(this)[m
[31m-[m
[31m-    if ($this.is('.disabled, :disabled')) return[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.router.$urlRouterProvider#when[m
[32m+[m[32m   * @methodOf ui.router.router.$urlRouterProvider[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Registers a handler for a given url matching. if handle is a string, it is[m
[32m+[m[32m   * treated as a redirect, and is interpolated according to the syntax of match[m
[32m+[m[32m   * (i.e. like `String.replace()` for `RegExp`, or like a `UrlMatcher` pattern otherwise).[m
[32m+[m[32m   *[m
[32m+[m[32m   * If the handler is a function, it is injectable. It gets invoked if `$location`[m
[32m+[m[32m   * matches. You have the option of inject the match object as `$match`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * The handler can return[m
[32m+[m[32m   *[m
[32m+[m[32m   * - **falsy** to indicate that the rule didn't match after all, then `$urlRouter`[m
[32m+[m[32m   *   will continue trying to find another one that matches.[m
[32m+[m[32m   * - **string** which is treated as a redirect and passed to `$location.url()`[m
[32m+[m[32m   * - **void** or any **truthy** value tells `$urlRouter` that the url was handled.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @example[m
[32m+[m[32m   * <pre>[m
[32m+[m[32m   * var app = angular.module('app', ['ui.router.router']);[m
[32m+[m[32m   *[m
[32m+[m[32m   * app.config(function ($urlRouterProvider) {[m
[32m+[m[32m   *   $urlRouterProvider.when($state.url, function ($match, $stateParams) {[m
[32m+[m[32m   *     if ($state.$current.navigable !== state ||[m
[32m+[m[32m   *         !equalForKeys($match, $stateParams) {[m
[32m+[m[32m   *      $state.transitionTo(state, $match, false);[m
[32m+[m[32m   *     }[m
[32m+[m[32m   *   });[m
[32m+[m[32m   * });[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string|object} what The incoming path that you want to redirect.[m
[32m+[m[32m   * @param {string|object} handler The path you want to redirect your user to.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.when = function (what, handler) {[m
[32m+[m[32m    var redirect, handlerIsString = isString(handler);[m
[32m+[m[32m    if (isString(what)) what = $urlMatcherFactory.compile(what);[m
 [m
[31m-    var $parent  = getParent($this)[m
[31m-    var isActive = $parent.hasClass('open')[m
[32m+[m[32m    if (!handlerIsString && !isFunction(handler) && !isArray(handler))[m
[32m+[m[32m      throw new Error("invalid 'handler' in when()");[m
 [m
[31m-    clearMenus()[m
[32m+[m[32m    var strategies = {[m
[32m+[m[32m      matcher: function (what, handler) {[m
[32m+[m[32m        if (handlerIsString) {[m
[32m+[m[32m          redirect = $urlMatcherFactory.compile(handler);[m
[32m+[m[32m          handler = ['$match', function ($match) { return redirect.format($match); }];[m
[32m+[m[32m        }[m
[32m+[m[32m        return extend(function ($injector, $location) {[m
[32m+[m[32m          return handleIfMatch($injector, handler, what.exec($location.path(), $location.search()));[m
[32m+[m[32m        }, {[m
[32m+[m[32m          prefix: isString(what.prefix) ? what.prefix : ''[m
[32m+[m[32m        });[m
[32m+[m[32m      },[m
[32m+[m[32m      regex: function (what, handler) {[m
[32m+[m[32m        if (what.global || what.sticky) throw new Error("when() RegExp must not be global or sticky");[m
 [m
[31m-    if (!isActive) {[m
[31m-      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {[m
[31m-        // if mobile we use a backdrop because click events don't delegate[m
[31m-        $('<div class="dropdown-backdrop"/>').insertAfter($(this)).on('click', clearMenus)[m
[32m+[m[32m        if (handlerIsString) {[m
[32m+[m[32m          redirect = handler;[m
[32m+[m[32m          handler = ['$match', function ($match) { return interpolate(redirect, $match); }];[m
[32m+[m[32m        }[m
[32m+[m[32m        return extend(function ($injector, $location) {[m
[32m+[m[32m          return handleIfMatch($injector, handler, what.exec($location.path()));[m
[32m+[m[32m        }, {[m
[32m+[m[32m          prefix: regExpPrefix(what)[m
[32m+[m[32m        });[m
       }[m
[32m+[m[32m    };[m
 [m
[31m-      var relatedTarget = { relatedTarget: this }[m
[31m-      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))[m
[31m-[m
[31m-      if (e.isDefaultPrevented()) return[m
[31m-[m
[31m-      $this[m
[31m-        .trigger('focus')[m
[31m-        .attr('aria-expanded', 'true')[m
[32m+[m[32m    var check = { matcher: $urlMatcherFactory.isMatcher(what), regex: what instanceof RegExp };[m
 [m
[31m-      $parent[m
[31m-        .toggleClass('open')[m
[31m-        .trigger('shown.bs.dropdown', relatedTarget)[m
[32m+[m[32m    for (var n in check) {[m
[32m+[m[32m      if (check[n]) return this.rule(strategies[n](what, handler));[m
     }[m
 [m
[31m-    return false[m
[31m-  }[m
[31m-[m
[31m-  Dropdown.prototype.keydown = function (e) {[m
[31m-    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return[m
[31m-[m
[31m-    var $this = $(this)[m
[32m+[m[32m    throw new Error("invalid 'what' in when()");[m
[32m+[m[32m  };[m
 [m
[31m-    e.preventDefault()[m
[31m-    e.stopPropagation()[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.router.$urlRouterProvider#deferIntercept[m
[32m+[m[32m   * @methodOf ui.router.router.$urlRouterProvider[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Disables (or enables) deferring location change interception.[m
[32m+[m[32m   *[m
[32m+[m[32m   * If you wish to customize the behavior of syncing the URL (for example, if you wish to[m
[32m+[m[32m   * defer a transition but maintain the current URL), call this method at configuration time.[m
[32m+[m[32m   * Then, at run time, call `$urlRouter.listen()` after you have configured your own[m
[32m+[m[32m   * `$locationChangeSuccess` event handler.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @example[m
[32m+[m[32m   * <pre>[m
[32m+[m[32m   * var app = angular.module('app', ['ui.router.router']);[m
[32m+[m[32m   *[m
[32m+[m[32m   * app.config(function ($urlRouterProvider) {[m
[32m+[m[32m   *[m
[32m+[m[32m   *   // Prevent $urlRouter from automatically intercepting URL changes;[m
[32m+[m[32m   *   // this allows you to configure custom behavior in between[m
[32m+[m[32m   *   // location changes and route synchronization:[m
[32m+[m[32m   *   $urlRouterProvider.deferIntercept();[m
[32m+[m[32m   *[m
[32m+[m[32m   * }).run(function ($rootScope, $urlRouter, UserService) {[m
[32m+[m[32m   *[m
[32m+[m[32m   *   $rootScope.$on('$locationChangeSuccess', function(e) {[m
[32m+[m[32m   *     // UserService is an example service for managing user state[m
[32m+[m[32m   *     if (UserService.isLoggedIn()) return;[m
[32m+[m[32m   *[m
[32m+[m[32m   *     // Prevent $urlRouter's default handler from firing[m
[32m+[m[32m   *     e.preventDefault();[m
[32m+[m[32m   *[m
[32m+[m[32m   *     UserService.handleLogin().then(function() {[m
[32m+[m[32m   *       // Once the user has logged in, sync the current URL[m
[32m+[m[32m   *       // to the router:[m
[32m+[m[32m   *       $urlRouter.sync();[m
[32m+[m[32m   *     });[m
[32m+[m[32m   *   });[m
[32m+[m[32m   *[m
[32m+[m[32m   *   // Configures $urlRouter's listener *after* your custom listener[m
[32m+[m[32m   *   $urlRouter.listen();[m
[32m+[m[32m   * });[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {boolean} defer Indicates whether to defer location change interception. Passing[m
[32m+[m[32m            no parameter is equivalent to `true`.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.deferIntercept = function (defer) {[m
[32m+[m[32m    if (defer === undefined) defer = true;[m
[32m+[m[32m    interceptDeferred = defer;[m
[32m+[m[32m  };[m
 [m
[31m-    if ($this.is('.disabled, :disabled')) return[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc object[m
[32m+[m[32m   * @name ui.router.router.$urlRouter[m
[32m+[m[32m   *[m
[32m+[m[32m   * @requires $location[m
[32m+[m[32m   * @requires $rootScope[m
[32m+[m[32m   * @requires $injector[m
[32m+[m[32m   * @requires $browser[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   *[m
[32m+[m[32m   */[m
[32m+[m[32m  this.$get = $get;[m
[32m+[m[32m  $get.$inject = ['$location', '$rootScope', '$injector', '$browser'];[m
[32m+[m[32m  function $get(   $location,   $rootScope,   $injector,   $browser) {[m
 [m
[31m-    var $parent  = getParent($this)[m
[31m-    var isActive = $parent.hasClass('open')[m
[32m+[m[32m    var baseHref = $browser.baseHref(), location = $location.url(), lastPushedUrl;[m
 [m
[31m-    if ((!isActive && e.which != 27) || (isActive && e.which == 27)) {[m
[31m-      if (e.which == 27) $parent.find(toggle).trigger('focus')[m
[31m-      return $this.trigger('click')[m
[32m+[m[32m    function appendBasePath(url, isHtml5, absolute) {[m
[32m+[m[32m      if (baseHref === '/') return url;[m
[32m+[m[32m      if (isHtml5) return baseHref.slice(0, -1) + url;[m
[32m+[m[32m      if (absolute) return baseHref.slice(1) + url;[m
[32m+[m[32m      return url;[m
     }[m
 [m
[31m-    var desc = ' li:not(.disabled):visible a'[m
[31m-    var $items = $parent.find('[role="menu"]' + desc + ', [role="listbox"]' + desc)[m
[32m+[m[32m    // TODO: Optimize groups of rules with non-empty prefix into some sort of decision tree[m
[32m+[m[32m    function update(evt) {[m
[32m+[m[32m      if (evt && evt.defaultPrevented) return;[m
[32m+[m[32m      var ignoreUpdate = lastPushedUrl && $location.url() === lastPushedUrl;[m
[32m+[m[32m      lastPushedUrl = undefined;[m
[32m+[m[32m      // TODO: Re-implement this in 1.0 for https://github.com/angular-ui/ui-router/issues/1573[m
[32m+[m[32m      //if (ignoreUpdate) return true;[m
 [m
[31m-    if (!$items.length) return[m
[32m+[m[32m      function check(rule) {[m
[32m+[m[32m        var handled = rule($injector, $location);[m
 [m
[31m-    var index = $items.index(e.target)[m
[32m+[m[32m        if (!handled) return false;[m
[32m+[m[32m        if (isString(handled)) $location.replace().url(handled);[m
[32m+[m[32m        return true;[m
[32m+[m[32m      }[m
[32m+[m[32m      var n = rules.length, i;[m
 [m
[31m-    if (e.which == 38 && index > 0)                 index--                        // up[m
[31m-    if (e.which == 40 && index < $items.length - 1) index++                        // down[m
[31m-    if (!~index)                                      index = 0[m
[32m+[m[32m      for (i = 0; i < n; i++) {[m
[32m+[m[32m        if (check(rules[i])) return;[m
[32m+[m[32m      }[m
[32m+[m[32m      // always check otherwise last to allow dynamic updates to the set of rules[m
[32m+[m[32m      if (otherwise) check(otherwise);[m
[32m+[m[32m    }[m
 [m
[31m-    $items.eq(index).trigger('focus')[m
[31m-  }[m
[32m+[m[32m    function listen() {[m
[32m+[m[32m      listener = listener || $rootScope.$on('$locationChangeSuccess', update);[m
[32m+[m[32m      return listener;[m
[32m+[m[32m    }[m
 [m
[31m-  function clearMenus(e) {[m
[31m-    if (e && e.which === 3) return[m
[31m-    $(backdrop).remove()[m
[31m-    $(toggle).each(function () {[m
[31m-      var $this         = $(this)[m
[31m-      var $parent       = getParent($this)[m
[31m-      var relatedTarget = { relatedTarget: this }[m
[31m-[m
[31m-      if (!$parent.hasClass('open')) return[m
[31m-[m
[31m-      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))[m
[32m+[m[32m    if (!interceptDeferred) listen();[m
 [m
[31m-      if (e.isDefaultPrevented()) return[m
[32m+[m[32m    return {[m
[32m+[m[32m      /**[m
[32m+[m[32m       * @ngdoc function[m
[32m+[m[32m       * @name ui.router.router.$urlRouter#sync[m
[32m+[m[32m       * @methodOf ui.router.router.$urlRouter[m
[32m+[m[32m       *[m
[32m+[m[32m       * @description[m
[32m+[m[32m       * Triggers an update; the same update that happens when the address bar url changes, aka `$locationChangeSuccess`.[m
[32m+[m[32m       * This method is useful when you need to use `preventDefault()` on the `$locationChangeSuccess` event,[m
[32m+[m[32m       * perform some custom logic (route protection, auth, config, redirection, etc) and then finally proceed[m
[32m+[m[32m       * with the transition by calling `$urlRouter.sync()`.[m
[32m+[m[32m       *[m
[32m+[m[32m       * @example[m
[32m+[m[32m       * <pre>[m
[32m+[m[32m       * angular.module('app', ['ui.router'])[m
[32m+[m[32m       *   .run(function($rootScope, $urlRouter) {[m
[32m+[m[32m       *     $rootScope.$on('$locationChangeSuccess', function(evt) {[m
[32m+[m[32m       *       // Halt state change from even starting[m
[32m+[m[32m       *       evt.preventDefault();[m
[32m+[m[32m       *       // Perform custom logic[m
[32m+[m[32m       *       var meetsRequirement = ...[m
[32m+[m[32m       *       // Continue with the update and state transition if logic allows[m
[32m+[m[32m       *       if (meetsRequirement) $urlRouter.sync();[m
[32m+[m[32m       *     });[m
[32m+[m[32m       * });[m
[32m+[m[32m       * </pre>[m
[32m+[m[32m       */[m
[32m+[m[32m      sync: function() {[m
[32m+[m[32m        update();[m
[32m+[m[32m      },[m
 [m
[31m-      $this.attr('aria-expanded', 'false')[m
[31m-      $parent.removeClass('open').trigger('hidden.bs.dropdown', relatedTarget)[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m      listen: function() {[m
[32m+[m[32m        return listen();[m
[32m+[m[32m      },[m
 [m
[31m-  function getParent($this) {[m
[31m-    var selector = $this.attr('data-target')[m
[32m+[m[32m      update: function(read) {[m
[32m+[m[32m        if (read) {[m
[32m+[m[32m          location = $location.url();[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m[32m        if ($location.url() === location) return;[m
 [m
[31m-    if (!selector) {[m
[31m-      selector = $this.attr('href')[m
[31m-      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7[m
[31m-    }[m
[32m+[m[32m        $location.url(location);[m
[32m+[m[32m        $location.replace();[m
[32m+[m[32m      },[m
 [m
[31m-    var $parent = selector && $(selector)[m
[32m+[m[32m      push: function(urlMatcher, params, options) {[m
[32m+[m[32m         var url = urlMatcher.format(params || {});[m
 [m
[31m-    return $parent && $parent.length ? $parent : $this.parent()[m
[31m-  }[m
[32m+[m[32m        // Handle the special hash param, if needed[m
[32m+[m[32m        if (url !== null && params && params['#']) {[m
[32m+[m[32m            url += '#' + params['#'];[m
[32m+[m[32m        }[m
 [m
[32m+[m[32m        $location.url(url);[m
[32m+[m[32m        lastPushedUrl = options && options.$$avoidResync ? $location.url() : undefined;[m
[32m+[m[32m        if (options && options.replace) $location.replace();[m
[32m+[m[32m      },[m
 [m
[31m-  // DROPDOWN PLUGIN DEFINITION[m
[31m-  // ==========================[m
[32m+[m[32m      /**[m
[32m+[m[32m       * @ngdoc function[m
[32m+[m[32m       * @name ui.router.router.$urlRouter#href[m
[32m+[m[32m       * @methodOf ui.router.router.$urlRouter[m
[32m+[m[32m       *[m
[32m+[m[32m       * @description[m
[32m+[m[32m       * A URL generation method that returns the compiled URL for a given[m
[32m+[m[32m       * {@link ui.router.util.type:UrlMatcher `UrlMatcher`}, populated with the provided parameters.[m
[32m+[m[32m       *[m
[32m+[m[32m       * @example[m
[32m+[m[32m       * <pre>[m
[32m+[m[32m       * $bob = $urlRouter.href(new UrlMatcher("/about/:person"), {[m
[32m+[m[32m       *   person: "bob"[m
[32m+[m[32m       * });[m
[32m+[m[32m       * // $bob == "/about/bob";[m
[32m+[m[32m       * </pre>[m
[32m+[m[32m       *[m
[32m+[m[32m       * @param {UrlMatcher} urlMatcher The `UrlMatcher` object which is used as the template of the URL to generate.[m
[32m+[m[32m       * @param {object=} params An object of parameter values to fill the matcher's required parameters.[m
[32m+[m[32m       * @param {object=} options Options object. The options are:[m
[32m+[m[32m       *[m
[32m+[m[32m       * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. "http://www.example.com/fullurl".[m
[32m+[m[32m       *[m
[32m+[m[32m       * @returns {string} Returns the fully compiled URL, or `null` if `params` fail validation against `urlMatcher`[m
[32m+[m[32m       */[m
[32m+[m[32m      href: function(urlMatcher, params, options) {[m
[32m+[m[32m        if (!urlMatcher.validates(params)) return null;[m
 [m
[31m-  function Plugin(option) {[m
[31m-    return this.each(function () {[m
[31m-      var $this = $(this)[m
[31m-      var data  = $this.data('bs.dropdown')[m
[32m+[m[32m        var isHtml5 = $locationProvider.html5Mode();[m
[32m+[m[32m        if (angular.isObject(isHtml5)) {[m
[32m+[m[32m          isHtml5 = isHtml5.enabled;[m
[32m+[m[32m        }[m
[32m+[m[41m        [m
[32m+[m[32m        var url = urlMatcher.format(params);[m
[32m+[m[32m        options = options || {};[m
 [m
[31m-      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))[m
[31m-      if (typeof option == 'string') data[option].call($this)[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m        if (!isHtml5 && url !== null) {[m
[32m+[m[32m          url = "#" + $locationProvider.hashPrefix() + url;[m
[32m+[m[32m        }[m
 [m
[31m-  var old = $.fn.dropdown[m
[32m+[m[32m        // Handle special hash param, if needed[m
[32m+[m[32m        if (url !== null && params && params['#']) {[m
[32m+[m[32m          url += '#' + params['#'];[m
[32m+[m[32m        }[m
 [m
[31m-  $.fn.dropdown             = Plugin[m
[31m-  $.fn.dropdown.Constructor = Dropdown[m
[32m+[m[32m        url = appendBasePath(url, isHtml5, options.absolute);[m
 [m
[32m+[m[32m        if (!options.absolute || !url) {[m
[32m+[m[32m          return url;[m
[32m+[m[32m        }[m
 [m
[31m-  // DROPDOWN NO CONFLICT[m
[31m-  // ====================[m
[32m+[m[32m        var slash = (!isHtml5 && url ? '/' : ''), port = $location.port();[m
[32m+[m[32m        port = (port === 80 || port === 443 ? '' : ':' + port);[m
 [m
[31m-  $.fn.dropdown.noConflict = function () {[m
[31m-    $.fn.dropdown = old[m
[31m-    return this[m
[32m+[m[32m        return [$location.protocol(), '://', $location.host(), port, slash, url].join('');[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
   }[m
[32m+[m[32m}[m
 [m
[32m+[m[32mangular.module('ui.router.router').provider('$urlRouter', $UrlRouterProvider);[m
 [m
[31m-  // APPLY TO STANDARD DROPDOWN ELEMENTS[m
[31m-  // ===================================[m
[31m-[m
[31m-  $(document)[m
[31m-    .on('click.bs.dropdown.data-api', clearMenus)[m
[31m-    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })[m
[31m-    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)[m
[31m-    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)[m
[31m-    .on('keydown.bs.dropdown.data-api', '[role="menu"]', Dropdown.prototype.keydown)[m
[31m-    .on('keydown.bs.dropdown.data-api', '[role="listbox"]', Dropdown.prototype.keydown)[m
[31m-[m
[31m-}(jQuery);[m
[31m-[m
[31m-/* ========================================================================[m
[31m- * Bootstrap: modal.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#modals[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
[31m-[m
[31m-[m
[31m-+function ($) {[m
[31m-  'use strict';[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc object[m
[32m+[m[32m * @name ui.router.state.$stateProvider[m
[32m+[m[32m *[m
[32m+[m[32m * @requires ui.router.router.$urlRouterProvider[m
[32m+[m[32m * @requires ui.router.util.$urlMatcherFactoryProvider[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * The new `$stateProvider` works similar to Angular's v1 router, but it focuses purely[m
[32m+[m[32m * on state.[m
[32m+[m[32m *[m
[32m+[m[32m * A state corresponds to a "place" in the application in terms of the overall UI and[m
[32m+[m[32m * navigation. A state describes (via the controller / template / view properties) what[m
[32m+[m[32m * the UI looks like and does at that place.[m
[32m+[m[32m *[m
[32m+[m[32m * States often have things in common, and the primary way of factoring out these[m
[32m+[m[32m * commonalities in this model is via the state hierarchy, i.e. parent/child states aka[m
[32m+[m[32m * nested states.[m
[32m+[m[32m *[m
[32m+[m[32m * The `$stateProvider` provides interfaces to declare these states for your app.[m
[32m+[m[32m */[m
[32m+[m[32m$StateProvider.$inject = ['$urlRouterProvider', '$urlMatcherFactoryProvider'];[m
[32m+[m[32mfunction $StateProvider(   $urlRouterProvider,   $urlMatcherFactory) {[m
 [m
[31m-  // MODAL CLASS DEFINITION[m
[31m-  // ======================[m
[32m+[m[32m  var root, states = {}, $state, queue = {}, abstractKey = 'abstract';[m
 [m
[31m-  var Modal = function (element, options) {[m
[31m-    this.options             = options[m
[31m-    this.$body               = $(document.body)[m
[31m-    this.$element            = $(element)[m
[31m-    this.$dialog             = this.$element.find('.modal-dialog')[m
[31m-    this.$backdrop           = null[m
[31m-    this.isShown             = null[m
[31m-    this.originalBodyPad     = null[m
[31m-    this.scrollbarWidth      = 0[m
[31m-    this.ignoreBackdropClick = false[m
[32m+[m[32m  // Builds state properties from definition passed to registerState()[m
[32m+[m[32m  var stateBuilder = {[m
 [m
[31m-    if (this.options.remote) {[m
[31m-      this.$element[m
[31m-        .find('.modal-content')[m
[31m-        .load(this.options.remote, $.proxy(function () {[m
[31m-          this.$element.trigger('loaded.bs.modal')[m
[31m-        }, this))[m
[31m-    }[m
[31m-  }[m
[32m+[m[32m    // Derive parent state from a hierarchical name only if 'parent' is not explicitly defined.[m
[32m+[m[32m    // state.children = [];[m
[32m+[m[32m    // if (parent) parent.children.push(state);[m
[32m+[m[32m    parent: function(state) {[m
[32m+[m[32m      if (isDefined(state.parent) && state.parent) return findState(state.parent);[m
[32m+[m[32m      // regex matches any valid composite state name[m
[32m+[m[32m      // would match "contact.list" but not "contacts"[m
[32m+[m[32m      var compositeName = /^(.+)\.[^.]+$/.exec(state.name);[m
[32m+[m[32m      return compositeName ? findState(compositeName[1]) : root;[m
[32m+[m[32m    },[m
 [m
[31m-  Modal.VERSION  = '3.3.4'[m
[32m+[m[32m    // inherit 'data' from parent and override by own values (if any)[m
[32m+[m[32m    data: function(state) {[m
[32m+[m[32m      if (state.parent && state.parent.data) {[m
[32m+[m[32m        state.data = state.self.data = extend({}, state.parent.data, state.data);[m
[32m+[m[32m      }[m
[32m+[m[32m      return state.data;[m
[32m+[m[32m    },[m
 [m
[31m-  Modal.TRANSITION_DURATION = 300[m
[31m-  Modal.BACKDROP_TRANSITION_DURATION = 150[m
[32m+[m[32m    // Build a URLMatcher if necessary, either via a relative or absolute URL[m
[32m+[m[32m    url: function(state) {[m
[32m+[m[32m      var url = state.url, config = { params: state.params || {} };[m
 [m
[31m-  Modal.DEFAULTS = {[m
[31m-    backdrop: true,[m
[31m-    keyboard: true,[m
[31m-    show: true[m
[31m-  }[m
[32m+[m[32m      if (isString(url)) {[m
[32m+[m[32m        if (url.charAt(0) == '^') return $urlMatcherFactory.compile(url.substring(1), config);[m
[32m+[m[32m        return (state.parent.navigable || root).url.concat(url, config);[m
[32m+[m[32m      }[m
 [m
[31m-  Modal.prototype.toggle = function (_relatedTarget) {[m
[31m-    return this.isShown ? this.hide() : this.show(_relatedTarget)[m
[31m-  }[m
[32m+[m[32m      if (!url || $urlMatcherFactory.isMatcher(url)) return url;[m
[32m+[m[32m      throw new Error("Invalid url '" + url + "' in state '" + state + "'");[m
[32m+[m[32m    },[m
 [m
[31m-  Modal.prototype.show = function (_relatedTarget) {[m
[31m-    var that = this[m
[31m-    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })[m
[32m+[m[32m    // Keep track of the closest ancestor state that has a URL (i.e. is navigable)[m
[32m+[m[32m    navigable: function(state) {[m
[32m+[m[32m      return state.url ? state : (state.parent ? state.parent.navigable : null);[m
[32m+[m[32m    },[m
 [m
[31m-    this.$element.trigger(e)[m
[32m+[m[32m    // Own parameters for this state. state.url.params is already built at this point. Create and add non-url params[m
[32m+[m[32m    ownParams: function(state) {[m
[32m+[m[32m      var params = state.url && state.url.params || new $$UMFP.ParamSet();[m
[32m+[m[32m      forEach(state.params || {}, function(config, id) {[m
[32m+[m[32m        if (!params[id]) params[id] = new $$UMFP.Param(id, null, config, "config");[m
[32m+[m[32m      });[m
[32m+[m[32m      return params;[m
[32m+[m[32m    },[m
 [m
[31m-    if (this.isShown || e.isDefaultPrevented()) return[m
[32m+[m[32m    // Derive parameters for this state and ensure they're a super-set of parent's parameters[m
[32m+[m[32m    params: function(state) {[m
[32m+[m[32m      return state.parent && state.parent.params ? extend(state.parent.params.$$new(), state.ownParams) : new $$UMFP.ParamSet();[m
[32m+[m[32m    },[m
 [m
[31m-    this.isShown = true[m
[32m+[m[32m    // If there is no explicit multi-view configuration, make one up so we don't have[m
[32m+[m[32m    // to handle both cases in the view directive later. Note that having an explicit[m
[32m+[m[32m    // 'views' property will mean the default unnamed view properties are ignored. This[m
[32m+[m[32m    // is also a good time to resolve view names to absolute names, so everything is a[m
[32m+[m[32m    // straight lookup at link time.[m
[32m+[m[32m    views: function(state) {[m
[32m+[m[32m      var views = {};[m
 [m
[31m-    this.checkScrollbar()[m
[31m-    this.setScrollbar()[m
[31m-    this.$body.addClass('modal-open')[m
[32m+[m[32m      forEach(isDefined(state.views) ? state.views : { '': state }, function (view, name) {[m
[32m+[m[32m        if (name.indexOf('@') < 0) name += '@' + state.parent.name;[m
[32m+[m[32m        views[name] = view;[m
[32m+[m[32m      });[m
[32m+[m[32m      return views;[m
[32m+[m[32m    },[m
 [m
[31m-    this.escape()[m
[31m-    this.resize()[m
[32m+[m[32m    // Keep a full path from the root down to this state as this is needed for state activation.[m
[32m+[m[32m    path: function(state) {[m
[32m+[m[32m      return state.parent ? state.parent.path.concat(state) : []; // exclude root from path[m
[32m+[m[32m    },[m
 [m
[31m-    this.$element.on('click.dismiss.bs.modal', '[data-dismiss="modal"]', $.proxy(this.hide, this))[m
[32m+[m[32m    // Speed up $state.contains() as it's used a lot[m
[32m+[m[32m    includes: function(state) {[m
[32m+[m[32m      var includes = state.parent ? extend({}, state.parent.includes) : {};[m
[32m+[m[32m      includes[state.name] = true;[m
[32m+[m[32m      return includes;[m
[32m+[m[32m    },[m
 [m
[31m-    this.$dialog.on('mousedown.dismiss.bs.modal', function () {[m
[31m-      that.$element.one('mouseup.dismiss.bs.modal', function (e) {[m
[31m-        if ($(e.target).is(that.$element)) that.ignoreBackdropClick = true[m
[31m-      })[m
[31m-    })[m
[32m+[m[32m    $delegates: {}[m
[32m+[m[32m  };[m
 [m
[31m-    this.backdrop(function () {[m
[31m-      var transition = $.support.transition && that.$element.hasClass('fade')[m
[32m+[m[32m  function isRelative(stateName) {[m
[32m+[m[32m    return stateName.indexOf(".") === 0 || stateName.indexOf("^") === 0;[m
[32m+[m[32m  }[m
 [m
[31m-      if (!that.$element.parent().length) {[m
[31m-        that.$element.appendTo(that.$body) // don't move modals dom position[m
[31m-      }[m
[32m+[m[32m  function findState(stateOrName, base) {[m
[32m+[m[32m    if (!stateOrName) return undefined;[m
 [m
[31m-      that.$element[m
[31m-        .show()[m
[31m-        .scrollTop(0)[m
[32m+[m[32m    var isStr = isString(stateOrName),[m
[32m+[m[32m        name  = isStr ? stateOrName : stateOrName.name,[m
[32m+[m[32m        path  = isRelative(name);[m
 [m
[31m-      that.adjustDialog()[m
[32m+[m[32m    if (path) {[m
[32m+[m[32m      if (!base) throw new Error("No reference point given for path '"  + name + "'");[m
[32m+[m[32m      base = findState(base);[m
[32m+[m[41m      [m
[32m+[m[32m      var rel = name.split("."), i = 0, pathLength = rel.length, current = base;[m
 [m
[31m-      if (transition) {[m
[31m-        that.$element[0].offsetWidth // force reflow[m
[32m+[m[32m      for (; i < pathLength; i++) {[m
[32m+[m[32m        if (rel[i] === "" && i === 0) {[m
[32m+[m[32m          current = base;[m
[32m+[m[32m          continue;[m
[32m+[m[32m        }[m
[32m+[m[32m        if (rel[i] === "^") {[m
[32m+[m[32m          if (!current.parent) throw new Error("Path '" + name + "' not valid for state '" + base.name + "'");[m
[32m+[m[32m          current = current.parent;[m
[32m+[m[32m          continue;[m
[32m+[m[32m        }[m
[32m+[m[32m        break;[m
       }[m
[32m+[m[32m      rel = rel.slice(i).join(".");[m
[32m+[m[32m      name = current.name + (current.name && rel ? "." : "") + rel;[m
[32m+[m[32m    }[m
[32m+[m[32m    var state = states[name];[m
 [m
[31m-      that.$element[m
[31m-        .addClass('in')[m
[31m-        .attr('aria-hidden', false)[m
[31m-[m
[31m-      that.enforceFocus()[m
[31m-[m
[31m-      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })[m
[31m-[m
[31m-      transition ?[m
[31m-        that.$dialog // wait for modal to slide in[m
[31m-          .one('bsTransitionEnd', function () {[m
[31m-            that.$element.trigger('focus').trigger(e)[m
[31m-          })[m
[31m-          .emulateTransitionEnd(Modal.TRANSITION_DURATION) :[m
[31m-        that.$element.trigger('focus').trigger(e)[m
[31m-    })[m
[32m+[m[32m    if (state && (isStr || (!isStr && (state === stateOrName || state.self === stateOrName)))) {[m
[32m+[m[32m      return state;[m
[32m+[m[32m    }[m
[32m+[m[32m    return undefined;[m
   }[m
 [m
[31m-  Modal.prototype.hide = function (e) {[m
[31m-    if (e) e.preventDefault()[m
[31m-[m
[31m-    e = $.Event('hide.bs.modal')[m
[31m-[m
[31m-    this.$element.trigger(e)[m
[31m-[m
[31m-    if (!this.isShown || e.isDefaultPrevented()) return[m
[32m+[m[32m  function queueState(parentName, state) {[m
[32m+[m[32m    if (!queue[parentName]) {[m
[32m+[m[32m      queue[parentName] = [];[m
[32m+[m[32m    }[m
[32m+[m[32m    queue[parentName].push(state);[m
[32m+[m[32m  }[m
 [m
[31m-    this.isShown = false[m
[32m+[m[32m  function flushQueuedChildren(parentName) {[m
[32m+[m[32m    var queued = queue[parentName] || [];[m
[32m+[m[32m    while(queued.length) {[m
[32m+[m[32m      registerState(queued.shift());[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
 [m
[31m-    this.escape()[m
[31m-    this.resize()[m
[32m+[m[32m  function registerState(state) {[m
[32m+[m[32m    // Wrap a new object around the state so we can store our private details easily.[m
[32m+[m[32m    state = inherit(state, {[m
[32m+[m[32m      self: state,[m
[32m+[m[32m      resolve: state.resolve || {},[m
[32m+[m[32m      toString: function() { return this.name; }[m
[32m+[m[32m    });[m
 [m
[31m-    $(document).off('focusin.bs.modal')[m
[32m+[m[32m    var name = state.name;[m
[32m+[m[32m    if (!isString(name) || name.indexOf('@') >= 0) throw new Error("State must have a valid name");[m
[32m+[m[32m    if (states.hasOwnProperty(name)) throw new Error("State '" + name + "'' is already defined");[m
 [m
[31m-    this.$element[m
[31m-      .removeClass('in')[m
[31m-      .attr('aria-hidden', true)[m
[31m-      .off('click.dismiss.bs.modal')[m
[31m-      .off('mouseup.dismiss.bs.modal')[m
[32m+[m[32m    // Get parent name[m
[32m+[m[32m    var parentName = (name.indexOf('.') !== -1) ? name.substring(0, name.lastIndexOf('.'))[m
[32m+[m[32m        : (isString(state.parent)) ? state.parent[m
[32m+[m[32m        : (isObject(state.parent) && isString(state.parent.name)) ? state.parent.name[m
[32m+[m[32m        : '';[m
 [m
[31m-    this.$dialog.off('mousedown.dismiss.bs.modal')[m
[32m+[m[32m    // If parent is not registered yet, add state to queue and register later[m
[32m+[m[32m    if (parentName && !states[parentName]) {[m
[32m+[m[32m      return queueState(parentName, state.self);[m
[32m+[m[32m    }[m
 [m
[31m-    $.support.transition && this.$element.hasClass('fade') ?[m
[31m-      this.$element[m
[31m-        .one('bsTransitionEnd', $.proxy(this.hideModal, this))[m
[31m-        .emulateTransitionEnd(Modal.TRANSITION_DURATION) :[m
[31m-      this.hideModal()[m
[31m-  }[m
[32m+[m[32m    for (var key in stateBuilder) {[m
[32m+[m[32m      if (isFunction(stateBuilder[key])) state[key] = stateBuilder[key](state, stateBuilder.$delegates[key]);[m
[32m+[m[32m    }[m
[32m+[m[32m    states[name] = state;[m
 [m
[31m-  Modal.prototype.enforceFocus = function () {[m
[31m-    $(document)[m
[31m-      .off('focusin.bs.modal') // guard against infinite focus loop[m
[31m-      .on('focusin.bs.modal', $.proxy(function (e) {[m
[31m-        if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {[m
[31m-          this.$element.trigger('focus')[m
[32m+[m[32m    // Register the state in the global state list and with $urlRouter if necessary.[m
[32m+[m[32m    if (!state[abstractKey] && state.url) {[m
[32m+[m[32m      $urlRouterProvider.when(state.url, ['$match', '$stateParams', function ($match, $stateParams) {[m
[32m+[m[32m        if ($state.$current.navigable != state || !equalForKeys($match, $stateParams)) {[m
[32m+[m[32m          $state.transitionTo(state, $match, { inherit: true, location: false });[m
         }[m
[31m-      }, this))[m
[31m-  }[m
[31m-[m
[31m-  Modal.prototype.escape = function () {[m
[31m-    if (this.isShown && this.options.keyboard) {[m
[31m-      this.$element.on('keydown.dismiss.bs.modal', $.proxy(function (e) {[m
[31m-        e.which == 27 && this.hide()[m
[31m-      }, this))[m
[31m-    } else if (!this.isShown) {[m
[31m-      this.$element.off('keydown.dismiss.bs.modal')[m
[32m+[m[32m      }]);[m
     }[m
[31m-  }[m
 [m
[31m-  Modal.prototype.resize = function () {[m
[31m-    if (this.isShown) {[m
[31m-      $(window).on('resize.bs.modal', $.proxy(this.handleUpdate, this))[m
[31m-    } else {[m
[31m-      $(window).off('resize.bs.modal')[m
[31m-    }[m
[31m-  }[m
[32m+[m[32m    // Register any queued children[m
[32m+[m[32m    flushQueuedChildren(name);[m
 [m
[31m-  Modal.prototype.hideModal = function () {[m
[31m-    var that = this[m
[31m-    this.$element.hide()[m
[31m-    this.backdrop(function () {[m
[31m-      that.$body.removeClass('modal-open')[m
[31m-      that.resetAdjustments()[m
[31m-      that.resetScrollbar()[m
[31m-      that.$element.trigger('hidden.bs.modal')[m
[31m-    })[m
[32m+[m[32m    return state;[m
   }[m
 [m
[31m-  Modal.prototype.removeBackdrop = function () {[m
[31m-    this.$backdrop && this.$backdrop.remove()[m
[31m-    this.$backdrop = null[m
[32m+[m[32m  // Checks text to see if it looks like a glob.[m
[32m+[m[32m  function isGlob (text) {[m
[32m+[m[32m    return text.indexOf('*') > -1;[m
   }[m
 [m
[31m-  Modal.prototype.backdrop = function (callback) {[m
[31m-    var that = this[m
[31m-    var animate = this.$element.hasClass('fade') ? 'fade' : ''[m
[32m+[m[32m  // Returns true if glob matches current $state name.[m
[32m+[m[32m  function doesStateMatchGlob (glob) {[m
[32m+[m[32m    var globSegments = glob.split('.'),[m
[32m+[m[32m        segments = $state.$current.name.split('.');[m
 [m
[31m-    if (this.isShown && this.options.backdrop) {[m
[31m-      var doAnimate = $.support.transition && animate[m
[32m+[m[32m    //match single stars[m
[32m+[m[32m    for (var i = 0, l = globSegments.length; i < l; i++) {[m
[32m+[m[32m      if (globSegments[i] === '*') {[m
[32m+[m[32m        segments[i] = '*';[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
 [m
[31m-      this.$backdrop = $('<div class="modal-backdrop ' + animate + '" />')[m
[31m-        .appendTo(this.$body)[m
[32m+[m[32m    //match greedy starts[m
[32m+[m[32m    if (globSegments[0] === '**') {[m
[32m+[m[32m       segments = segments.slice(indexOf(segments, globSegments[1]));[m
[32m+[m[32m       segments.unshift('**');[m
[32m+[m[32m    }[m
[32m+[m[32m    //match greedy ends[m
[32m+[m[32m    if (globSegments[globSegments.length - 1] === '**') {[m
[32m+[m[32m       segments.splice(indexOf(segments, globSegments[globSegments.length - 2]) + 1, Number.MAX_VALUE);[m
[32m+[m[32m       segments.push('**');[m
[32m+[m[32m    }[m
 [m
[31m-      this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {[m
[31m-        if (this.ignoreBackdropClick) {[m
[31m-          this.ignoreBackdropClick = false[m
[31m-          return[m
[31m-        }[m
[31m-        if (e.target !== e.currentTarget) return[m
[31m-        this.options.backdrop == 'static'[m
[31m-          ? this.$element[0].focus()[m
[31m-          : this.hide()[m
[31m-      }, this))[m
[32m+[m[32m    if (globSegments.length != segments.length) {[m
[32m+[m[32m      return false;[m
[32m+[m[32m    }[m
 [m
[31m-      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow[m
[32m+[m[32m    return segments.join('') === globSegments.join('');[m
[32m+[m[32m  }[m
 [m
[31m-      this.$backdrop.addClass('in')[m
 [m
[31m-      if (!callback) return[m
[32m+[m[32m  // Implicit root state that is always active[m
[32m+[m[32m  root = registerState({[m
[32m+[m[32m    name: '',[m
[32m+[m[32m    url: '^',[m
[32m+[m[32m    views: null,[m
[32m+[m[32m    'abstract': true[m
[32m+[m[32m  });[m
[32m+[m[32m  root.navigable = null;[m
 [m
[31m-      doAnimate ?[m
[31m-        this.$backdrop[m
[31m-          .one('bsTransitionEnd', callback)[m
[31m-          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :[m
[31m-        callback()[m
 [m
[31m-    } else if (!this.isShown && this.$backdrop) {[m
[31m-      this.$backdrop.removeClass('in')[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.state.$stateProvider#decorator[m
[32m+[m[32m   * @methodOf ui.router.state.$stateProvider[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Allows you to extend (carefully) or override (at your own peril) the[m[41m [m
[32m+[m[32m   * `stateBuilder` object used internally by `$stateProvider`. This can be used[m[41m [m
[32m+[m[32m   * to add custom functionality to ui-router, for example inferring templateUrl[m[41m [m
[32m+[m[32m   * based on the state name.[m
[32m+[m[32m   *[m
[32m+[m[32m   * When passing only a name, it returns the current (original or decorated) builder[m
[32m+[m[32m   * function that matches `name`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * The builder functions that can be decorated are listed below. Though not all[m
[32m+[m[32m   * necessarily have a good use case for decoration, that is up to you to decide.[m
[32m+[m[32m   *[m
[32m+[m[32m   * In addition, users can attach custom decorators, which will generate new[m[41m [m
[32m+[m[32m   * properties within the state's internal definition. There is currently no clear[m[41m [m
[32m+[m[32m   * use-case for this beyond accessing internal states (i.e. $state.$current),[m[41m [m
[32m+[m[32m   * however, expect this to become increasingly relevant as we introduce additional[m[41m [m
[32m+[m[32m   * meta-programming features.[m
[32m+[m[32m   *[m
[32m+[m[32m   * **Warning**: Decorators should not be interdependent because the order of[m[41m [m
[32m+[m[32m   * execution of the builder functions in non-deterministic. Builder functions[m[41m [m
[32m+[m[32m   * should only be dependent on the state definition object and super function.[m
[32m+[m[32m   *[m
[32m+[m[32m   *[m
[32m+[m[32m   * Existing builder functions and current return values:[m
[32m+[m[32m   *[m
[32m+[m[32m   * - **parent** `{object}` - returns the parent state object.[m
[32m+[m[32m   * - **data** `{object}` - returns state data, including any inherited data that is not[m
[32m+[m[32m   *   overridden by own values (if any).[m
[32m+[m[32m   * - **url** `{object}` - returns a {@link ui.router.util.type:UrlMatcher UrlMatcher}[m
[32m+[m[32m   *   or `null`.[m
[32m+[m[32m   * - **navigable** `{object}` - returns closest ancestor state that has a URL (aka is[m[41m [m
[32m+[m[32m   *   navigable).[m
[32m+[m[32m   * - **params** `{object}` - returns an array of state params that are ensured to[m[41m [m
[32m+[m[32m   *   be a super-set of parent's params.[m
[32m+[m[32m   * - **views** `{object}` - returns a views object where each key is an absolute view[m[41m [m
[32m+[m[32m   *   name (i.e. "viewName@stateName") and each value is the config object[m[41m [m
[32m+[m[32m   *   (template, controller) for the view. Even when you don't use the views object[m[41m [m
[32m+[m[32m   *   explicitly on a state config, one is still created for you internally.[m
[32m+[m[32m   *   So by decorating this builder function you have access to decorating template[m[41m [m
[32m+[m[32m   *   and controller properties.[m
[32m+[m[32m   * - **ownParams** `{object}` - returns an array of params that belong to the state,[m[41m [m
[32m+[m[32m   *   not including any params defined by ancestor states.[m
[32m+[m[32m   * - **path** `{string}` - returns the full path from the root down to this state.[m[41m [m
[32m+[m[32m   *   Needed for state activation.[m
[32m+[m[32m   * - **includes** `{object}` - returns an object that includes every state that[m[41m [m
[32m+[m[32m   *   would pass a `$state.includes()` test.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @example[m
[32m+[m[32m   * <pre>[m
[32m+[m[32m   * // Override the internal 'views' builder with a function that takes the state[m
[32m+[m[32m   * // definition, and a reference to the internal function being overridden:[m
[32m+[m[32m   * $stateProvider.decorator('views', function (state, parent) {[m
[32m+[m[32m   *   var result = {},[m
[32m+[m[32m   *       views = parent(state);[m
[32m+[m[32m   *[m
[32m+[m[32m   *   angular.forEach(views, function (config, name) {[m
[32m+[m[32m   *     var autoName = (state.name + '.' + name).replace('.', '/');[m
[32m+[m[32m   *     config.templateUrl = config.templateUrl || '/partials/' + autoName + '.html';[m
[32m+[m[32m   *     result[name] = config;[m
[32m+[m[32m   *   });[m
[32m+[m[32m   *   return result;[m
[32m+[m[32m   * });[m
[32m+[m[32m   *[m
[32m+[m[32m   * $stateProvider.state('home', {[m
[32m+[m[32m   *   views: {[m
[32m+[m[32m   *     'contact.list': { controller: 'ListController' },[m
[32m+[m[32m   *     'contact.item': { controller: 'ItemController' }[m
[32m+[m[32m   *   }[m
[32m+[m[32m   * });[m
[32m+[m[32m   *[m
[32m+[m[32m   * // ...[m
[32m+[m[32m   *[m
[32m+[m[32m   * $state.go('home');[m
[32m+[m[32m   * // Auto-populates list and item views with /partials/home/contact/list.html,[m
[32m+[m[32m   * // and /partials/home/contact/item.html, respectively.[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string} name The name of the builder function to decorate.[m[41m [m
[32m+[m[32m   * @param {object} func A function that is responsible for decorating the original[m[41m [m
[32m+[m[32m   * builder function. The function receives two parameters:[m
[32m+[m[32m   *[m
[32m+[m[32m   *   - `{object}` - state - The state config object.[m
[32m+[m[32m   *   - `{object}` - super - The original builder function.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @return {object} $stateProvider - $stateProvider instance[m
[32m+[m[32m   */[m
[32m+[m[32m  this.decorator = decorator;[m
[32m+[m[32m  function decorator(name, func) {[m
[32m+[m[32m    /*jshint validthis: true */[m
[32m+[m[32m    if (isString(name) && !isDefined(func)) {[m
[32m+[m[32m      return stateBuilder[name];[m
[32m+[m[32m    }[m
[32m+[m[32m    if (!isFunction(func) || !isString(name)) {[m
[32m+[m[32m      return this;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (stateBuilder[name] && !stateBuilder.$delegates[name]) {[m
[32m+[m[32m      stateBuilder.$delegates[name] = stateBuilder[name];[m
[32m+[m[32m    }[m
[32m+[m[32m    stateBuilder[name] = func;[m
[32m+[m[32m    return this;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.state.$stateProvider#state[m
[32m+[m[32m   * @methodOf ui.router.state.$stateProvider[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Registers a state configuration under a given state name. The stateConfig object[m
[32m+[m[32m   * has the following acceptable properties.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string} name A unique state name, e.g. "home", "about", "contacts".[m
[32m+[m[32m   * To create a parent/child state use a dot, e.g. "about.sales", "home.newest".[m
[32m+[m[32m   * @param {object} stateConfig State configuration object.[m
[32m+[m[32m   * @param {string|function=} stateConfig.template[m
[32m+[m[32m   * <a id='template'></a>[m
[32m+[m[32m   *   html template as a string or a function that returns[m
[32m+[m[32m   *   an html template as a string which should be used by the uiView directives. This property[m[41m [m
[32m+[m[32m   *   takes precedence over templateUrl.[m
[32m+[m[32m   *[m[41m   [m
[32m+[m[32m   *   If `template` is a function, it will be called with the following parameters:[m
[32m+[m[32m   *[m
[32m+[m[32m   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by[m
[32m+[m[32m   *     applying the current state[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>template:[m
[32m+[m[32m   *   "<h1>inline template definition</h1>" +[m
[32m+[m[32m   *   "<div ui-view></div>"</pre>[m
[32m+[m[32m   * <pre>template: function(params) {[m
[32m+[m[32m   *       return "<h1>generated template</h1>"; }</pre>[m
[32m+[m[32m   * </div>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string|function=} stateConfig.templateUrl[m
[32m+[m[32m   * <a id='templateUrl'></a>[m
[32m+[m[32m   *[m
[32m+[m[32m   *   path or function that returns a path to an html[m
[32m+[m[32m   *   template that should be used by uiView.[m
[32m+[m[32m   *[m[41m   [m
[32m+[m[32m   *   If `templateUrl` is a function, it will be called with the following parameters:[m
[32m+[m[32m   *[m
[32m+[m[32m   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by[m[41m [m
[32m+[m[32m   *     applying the current state[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>templateUrl: "home.html"</pre>[m
[32m+[m[32m   * <pre>templateUrl: function(params) {[m
[32m+[m[32m   *     return myTemplates[params.pageId]; }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {function=} stateConfig.templateProvider[m
[32m+[m[32m   * <a id='templateProvider'></a>[m
[32m+[m[32m   *    Provider function that returns HTML content string.[m
[32m+[m[32m   * <pre> templateProvider:[m
[32m+[m[32m   *       function(MyTemplateService, params) {[m
[32m+[m[32m   *         return MyTemplateService.getTemplate(params.pageId);[m
[32m+[m[32m   *       }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string|function=} stateConfig.controller[m
[32m+[m[32m   * <a id='controller'></a>[m
[32m+[m[32m   *[m
[32m+[m[32m   *  Controller fn that should be associated with newly[m
[32m+[m[32m   *   related scope or the name of a registered controller if passed as a string.[m
[32m+[m[32m   *   Optionally, the ControllerAs may be declared here.[m
[32m+[m[32m   * <pre>controller: "MyRegisteredController"</pre>[m
[32m+[m[32m   * <pre>controller:[m
[32m+[m[32m   *     "MyRegisteredController as fooCtrl"}</pre>[m
[32m+[m[32m   * <pre>controller: function($scope, MyService) {[m
[32m+[m[32m   *     $scope.data = MyService.getData(); }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {function=} stateConfig.controllerProvider[m
[32m+[m[32m   * <a id='controllerProvider'></a>[m
[32m+[m[32m   *[m
[32m+[m[32m   * Injectable provider function that returns the actual controller or string.[m
[32m+[m[32m   * <pre>controllerProvider:[m
[32m+[m[32m   *   function(MyResolveData) {[m
[32m+[m[32m   *     if (MyResolveData.foo)[m
[32m+[m[32m   *       return "FooCtrl"[m
[32m+[m[32m   *     else if (MyResolveData.bar)[m
[32m+[m[32m   *       return "BarCtrl";[m
[32m+[m[32m   *     else return function($scope) {[m
[32m+[m[32m   *       $scope.baz = "Qux";[m
[32m+[m[32m   *     }[m
[32m+[m[32m   *   }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string=} stateConfig.controllerAs[m
[32m+[m[32m   * <a id='controllerAs'></a>[m
[32m+[m[32m   *[m[41m [m
[32m+[m[32m   * A controller alias name. If present the controller will be[m
[32m+[m[32m   *   published to scope under the controllerAs name.[m
[32m+[m[32m   * <pre>controllerAs: "myCtrl"</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string|object=} stateConfig.parent[m
[32m+[m[32m   * <a id='parent'></a>[m
[32m+[m[32m   * Optionally specifies the parent state of this state.[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>parent: 'parentState'</pre>[m
[32m+[m[32m   * <pre>parent: parentState // JS variable</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {object=} stateConfig.resolve[m
[32m+[m[32m   * <a id='resolve'></a>[m
[32m+[m[32m   *[m
[32m+[m[32m   * An optional map&lt;string, function&gt; of dependencies which[m
[32m+[m[32m   *   should be injected into the controller. If any of these dependencies are promises,[m[41m [m
[32m+[m[32m   *   the router will wait for them all to be resolved before the controller is instantiated.[m
[32m+[m[32m   *   If all the promises are resolved successfully, the $stateChangeSuccess event is fired[m
[32m+[m[32m   *   and the values of the resolved promises are injected into any controllers that reference them.[m
[32m+[m[32m   *   If any  of the promises are rejected the $stateChangeError event is fired.[m
[32m+[m[32m   *[m
[32m+[m[32m   *   The map object is:[m
[32m+[m[32m   *[m[41m   [m
[32m+[m[32m   *   - key - {string}: name of dependency to be injected into controller[m
[32m+[m[32m   *   - factory - {string|function}: If string then it is alias for service. Otherwise if function,[m[41m [m
[32m+[m[32m   *     it is injected and return value it treated as dependency. If result is a promise, it is[m[41m [m
[32m+[m[32m   *     resolved before its value is injected into controller.[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>resolve: {[m
[32m+[m[32m   *     myResolve1:[m
[32m+[m[32m   *       function($http, $stateParams) {[m
[32m+[m[32m   *         return $http.get("/api/foos/"+stateParams.fooID);[m
[32m+[m[32m   *       }[m
[32m+[m[32m   *     }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {string=} stateConfig.url[m
[32m+[m[32m   * <a id='url'></a>[m
[32m+[m[32m   *[m
[32m+[m[32m   *   A url fragment with optional parameters. When a state is navigated or[m
[32m+[m[32m   *   transitioned to, the `$stateParams` service will be populated with any[m[41m [m
[32m+[m[32m   *   parameters that were passed.[m
[32m+[m[32m   *[m
[32m+[m[32m   *   (See {@link ui.router.util.type:UrlMatcher UrlMatcher} `UrlMatcher`} for[m
[32m+[m[32m   *   more details on acceptable patterns )[m
[32m+[m[32m   *[m
[32m+[m[32m   * examples:[m
[32m+[m[32m   * <pre>url: "/home"[m
[32m+[m[32m   * url: "/users/:userid"[m
[32m+[m[32m   * url: "/books/{bookid:[a-zA-Z_-]}"[m
[32m+[m[32m   * url: "/books/{categoryid:int}"[m
[32m+[m[32m   * url: "/books/{publishername:string}/{categoryid:int}"[m
[32m+[m[32m   * url: "/messages?before&after"[m
[32m+[m[32m   * url: "/messages?{before:date}&{after:date}"[m
[32m+[m[32m   * url: "/messages/:mailboxid?{before:date}&{after:date}"[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {object=} stateConfig.views[m
[32m+[m[32m   * <a id='views'></a>[m
[32m+[m[32m   * an optional map&lt;string, object&gt; which defined multiple views, or targets views[m
[32m+[m[32m   * manually/explicitly.[m
[32m+[m[32m   *[m
[32m+[m[32m   * Examples:[m
[32m+[m[32m   *[m
[32m+[m[32m   * Targets three named `ui-view`s in the parent state's template[m
[32m+[m[32m   * <pre>views: {[m
[32m+[m[32m   *     header: {[m
[32m+[m[32m   *       controller: "headerCtrl",[m
[32m+[m[32m   *       templateUrl: "header.html"[m
[32m+[m[32m   *     }, body: {[m
[32m+[m[32m   *       controller: "bodyCtrl",[m
[32m+[m[32m   *       templateUrl: "body.html"[m
[32m+[m[32m   *     }, footer: {[m
[32m+[m[32m   *       controller: "footCtrl",[m
[32m+[m[32m   *       templateUrl: "footer.html"[m
[32m+[m[32m   *     }[m
[32m+[m[32m   *   }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * Targets named `ui-view="header"` from grandparent state 'top''s template, and named `ui-view="body" from parent state's template.[m
[32m+[m[32m   * <pre>views: {[m
[32m+[m[32m   *     'header@top': {[m
[32m+[m[32m   *       controller: "msgHeaderCtrl",[m
[32m+[m[32m   *       templateUrl: "msgHeader.html"[m
[32m+[m[32m   *     }, 'body': {[m
[32m+[m[32m   *       controller: "messagesCtrl",[m
[32m+[m[32m   *       templateUrl: "messages.html"[m
[32m+[m[32m   *     }[m
[32m+[m[32m   *   }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {boolean=} [stateConfig.abstract=false][m
[32m+[m[32m   * <a id='abstract'></a>[m
[32m+[m[32m   * An abstract state will never be directly activated,[m
[32m+[m[32m   *   but can provide inherited properties to its common children states.[m
[32m+[m[32m   * <pre>abstract: true</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {function=} stateConfig.onEnter[m
[32m+[m[32m   * <a id='onEnter'></a>[m
[32m+[m[32m   *[m
[32m+[m[32m   * Callback function for when a state is entered. Good way[m
[32m+[m[32m   *   to trigger an action or dispatch an event, such as opening a dialog.[m
[32m+[m[32m   * If minifying your scripts, make sure to explictly annotate this function,[m
[32m+[m[32m   * because it won't be automatically annotated by your build tools.[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>onEnter: function(MyService, $stateParams) {[m
[32m+[m[32m   *     MyService.foo($stateParams.myParam);[m
[32m+[m[32m   * }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {function=} stateConfig.onExit[m
[32m+[m[32m   * <a id='onExit'></a>[m
[32m+[m[32m   *[m
[32m+[m[32m   * Callback function for when a state is exited. Good way to[m
[32m+[m[32m   *   trigger an action or dispatch an event, such as opening a dialog.[m
[32m+[m[32m   * If minifying your scripts, make sure to explictly annotate this function,[m
[32m+[m[32m   * because it won't be automatically annotated by your build tools.[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>onExit: function(MyService, $stateParams) {[m
[32m+[m[32m   *     MyService.cleanup($stateParams.myParam);[m
[32m+[m[32m   * }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {boolean=} [stateConfig.reloadOnSearch=true][m
[32m+[m[32m   * <a id='reloadOnSearch'></a>[m
[32m+[m[32m   *[m
[32m+[m[32m   * If `false`, will not retrigger the same state[m
[32m+[m[32m   *   just because a search/query parameter has changed (via $location.search() or $location.hash()).[m[41m [m
[32m+[m[32m   *   Useful for when you'd like to modify $location.search() without triggering a reload.[m
[32m+[m[32m   * <pre>reloadOnSearch: false</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {object=} stateConfig.data[m
[32m+[m[32m   * <a id='data'></a>[m
[32m+[m[32m   *[m
[32m+[m[32m   * Arbitrary data object, useful for custom configuration.  The parent state's `data` is[m
[32m+[m[32m   *   prototypally inherited.  In other words, adding a data property to a state adds it to[m
[32m+[m[32m   *   the entire subtree via prototypal inheritance.[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>data: {[m
[32m+[m[32m   *     requiredRole: 'foo'[m
[32m+[m[32m   * } </pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {object=} stateConfig.params[m
[32m+[m[32m   * <a id='params'></a>[m
[32m+[m[32m   *[m
[32m+[m[32m   * A map which optionally configures parameters declared in the `url`, or[m
[32m+[m[32m   *   defines additional non-url parameters.  For each parameter being[m
[32m+[m[32m   *   configured, add a configuration object keyed to the name of the parameter.[m
[32m+[m[32m   *[m
[32m+[m[32m   *   Each parameter configuration object may contain the following properties:[m
[32m+[m[32m   *[m
[32m+[m[32m   *   - ** value ** - {object|function=}: specifies the default value for this[m
[32m+[m[32m   *     parameter.  This implicitly sets this parameter as optional.[m
[32m+[m[32m   *[m
[32m+[m[32m   *     When UI-Router routes to a state and no value is[m
[32m+[m[32m   *     specified for this parameter in the URL or transition, the[m
[32m+[m[32m   *     default value will be used instead.  If `value` is a function,[m
[32m+[m[32m   *     it will be injected and invoked, and the return value used.[m
[32m+[m[32m   *[m
[32m+[m[32m   *     *Note*: `undefined` is treated as "no default value" while `null`[m
[32m+[m[32m   *     is treated as "the default value is `null`".[m
[32m+[m[32m   *[m
[32m+[m[32m   *     *Shorthand*: If you only need to configure the default value of the[m
[32m+[m[32m   *     parameter, you may use a shorthand syntax.   In the **`params`**[m
[32m+[m[32m   *     map, instead mapping the param name to a full parameter configuration[m
[32m+[m[32m   *     object, simply set map it to the default parameter value, e.g.:[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>// define a parameter's default value[m
[32m+[m[32m   * params: {[m
[32m+[m[32m   *     param1: { value: "defaultValue" }[m
[32m+[m[32m   * }[m
[32m+[m[32m   * // shorthand default values[m
[32m+[m[32m   * params: {[m
[32m+[m[32m   *     param1: "defaultValue",[m
[32m+[m[32m   *     param2: "param2Default"[m
[32m+[m[32m   * }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   *   - ** array ** - {boolean=}: *(default: false)* If true, the param value will be[m
[32m+[m[32m   *     treated as an array of values.  If you specified a Type, the value will be[m
[32m+[m[32m   *     treated as an array of the specified Type.  Note: query parameter values[m
[32m+[m[32m   *     default to a special `"auto"` mode.[m
[32m+[m[32m   *[m
[32m+[m[32m   *     For query parameters in `"auto"` mode, if multiple  values for a single parameter[m
[32m+[m[32m   *     are present in the URL (e.g.: `/foo?bar=1&bar=2&bar=3`) then the values[m
[32m+[m[32m   *     are mapped to an array (e.g.: `{ foo: [ '1', '2', '3' ] }`).  However, if[m
[32m+[m[32m   *     only one value is present (e.g.: `/foo?bar=1`) then the value is treated as single[m
[32m+[m[32m   *     value (e.g.: `{ foo: '1' }`).[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>params: {[m
[32m+[m[32m   *     param1: { array: true }[m
[32m+[m[32m   * }</pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   *   - ** squash ** - {bool|string=}: `squash` configures how a default parameter value is represented in the URL when[m
[32m+[m[32m   *     the current parameter value is the same as the default value. If `squash` is not set, it uses the[m
[32m+[m[32m   *     configured default squash policy.[m
[32m+[m[32m   *     (See {@link ui.router.util.$urlMatcherFactory#methods_defaultSquashPolicy `defaultSquashPolicy()`})[m
[32m+[m[32m   *[m
[32m+[m[32m   *   There are three squash settings:[m
[32m+[m[32m   *[m
[32m+[m[32m   *     - false: The parameter's default value is not squashed.  It is encoded and included in the URL[m
[32m+[m[32m   *     - true: The parameter's default value is omitted from the URL.  If the parameter is preceeded and followed[m
[32m+[m[32m   *       by slashes in the state's `url` declaration, then one of those slashes are omitted.[m
[32m+[m[32m   *       This can allow for cleaner looking URLs.[m
[32m+[m[32m   *     - `"<arbitrary string>"`: The parameter's default value is replaced with an arbitrary placeholder of  your choice.[m
[32m+[m[32m   *[m
[32m+[m[32m   * <pre>params: {[m
[32m+[m[32m   *     param1: {[m
[32m+[m[32m   *       value: "defaultId",[m
[32m+[m[32m   *       squash: true[m
[32m+[m[32m   * } }[m
[32m+[m[32m   * // squash "defaultValue" to "~"[m
[32m+[m[32m   * params: {[m
[32m+[m[32m   *     param1: {[m
[32m+[m[32m   *       value: "defaultValue",[m
[32m+[m[32m   *       squash: "~"[m
[32m+[m[32m   * } }[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   *[m
[32m+[m[32m   * @example[m
[32m+[m[32m   * <pre>[m
[32m+[m[32m   * // Some state name examples[m
[32m+[m[32m   *[m
[32m+[m[32m   * // stateName can be a single top-level name (must be unique).[m
[32m+[m[32m   * $stateProvider.state("home", {});[m
[32m+[m[32m   *[m
[32m+[m[32m   * // Or it can be a nested state name. This state is a child of the[m
[32m+[m[32m   * // above "home" state.[m
[32m+[m[32m   * $stateProvider.state("home.newest", {});[m
[32m+[m[32m   *[m
[32m+[m[32m   * // Nest states as deeply as needed.[m
[32m+[m[32m   * $stateProvider.state("home.newest.abc.xyz.inception", {});[m
[32m+[m[32m   *[m
[32m+[m[32m   * // state() returns $stateProvider, so you can chain state declarations.[m
[32m+[m[32m   * $stateProvider[m
[32m+[m[32m   *   .state("home", {})[m
[32m+[m[32m   *   .state("about", {})[m
[32m+[m[32m   *   .state("contacts", {});[m
[32m+[m[32m   * </pre>[m
[32m+[m[32m   *[m
[32m+[m[32m   */[m
[32m+[m[32m  this.state = state;[m
[32m+[m[32m  function state(name, definition) {[m
[32m+[m[32m    /*jshint validthis: true */[m
[32m+[m[32m    if (isObject(name)) definition = name;[m
[32m+[m[32m    else definition.name = name;[m
[32m+[m[32m    registerState(definition);[m
[32m+[m[32m    return this;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc object[m
[32m+[m[32m   * @name ui.router.state.$state[m
[32m+[m[32m   *[m
[32m+[m[32m   * @requires $rootScope[m
[32m+[m[32m   * @requires $q[m
[32m+[m[32m   * @requires ui.router.state.$view[m
[32m+[m[32m   * @requires $injector[m
[32m+[m[32m   * @requires ui.router.util.$resolve[m
[32m+[m[32m   * @requires ui.router.state.$stateParams[m
[32m+[m[32m   * @requires ui.router.router.$urlRouter[m
[32m+[m[32m   *[m
[32m+[m[32m   * @property {object} params A param object, e.g. {sectionId: section.id)}, that[m[41m [m
[32m+[m[32m   * you'd like to test against the current active state.[m
[32m+[m[32m   * @property {object} current A reference to the state's config object. However[m[41m [m
[32m+[m[32m   * you passed it in. Useful for accessing custom data.[m
[32m+[m[32m   * @property {object} transition Currently pending transition. A promise that'll[m[41m [m
[32m+[m[32m   * resolve or reject.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * `$state` service is responsible for representing states as well as transitioning[m
[32m+[m[32m   * between them. It also provides interfaces to ask for current state or even states[m
[32m+[m[32m   * you're coming from.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.$get = $get;[m
[32m+[m[32m  $get.$inject = ['$rootScope', '$q', '$view', '$injector', '$resolve', '$stateParams', '$urlRouter', '$location', '$urlMatcherFactory'];[m
[32m+[m[32m  function $get(   $rootScope,   $q,   $view,   $injector,   $resolve,   $stateParams,   $urlRouter,   $location,   $urlMatcherFactory) {[m
[32m+[m
[32m+[m[32m    var TransitionSuperseded = $q.reject(new Error('transition superseded'));[m
[32m+[m[32m    var TransitionPrevented = $q.reject(new Error('transition prevented'));[m
[32m+[m[32m    var TransitionAborted = $q.reject(new Error('transition aborted'));[m
[32m+[m[32m    var TransitionFailed = $q.reject(new Error('transition failed'));[m
[32m+[m
[32m+[m[32m    // Handles the case where a state which is the target of a transition is not found, and the user[m
[32m+[m[32m    // can optionally retry or defer the transition[m
[32m+[m[32m    function handleRedirect(redirect, state, params, options) {[m
[32m+[m[32m      /**[m
[32m+[m[32m       * @ngdoc event[m
[32m+[m[32m       * @name ui.router.state.$state#$stateNotFound[m
[32m+[m[32m       * @eventOf ui.router.state.$state[m
[32m+[m[32m       * @eventType broadcast on root scope[m
[32m+[m[32m       * @description[m
[32m+[m[32m       * Fired when a requested state **cannot be found** using the provided state name during transition.[m
[32m+[m[32m       * The event is broadcast allowing any handlers a single chance to deal with the error (usually by[m
[32m+[m[32m       * lazy-loading the unfound state). A special `unfoundState` object is passed to the listener handler,[m
[32m+[m[32m       * you can see its three properties in the example. You can use `event.preventDefault()` to abort the[m
[32m+[m[32m       * transition and the promise returned from `go` will be rejected with a `'transition aborted'` value.[m
[32m+[m[32m       *[m
[32m+[m[32m       * @param {Object} event Event object.[m
[32m+[m[32m       * @param {Object} unfoundState Unfound State information. Contains: `to, toParams, options` properties.[m
[32m+[m[32m       * @param {State} fromState Current state object.[m
[32m+[m[32m       * @param {Object} fromParams Current state params.[m
[32m+[m[32m       *[m
[32m+[m[32m       * @example[m
[32m+[m[32m       *[m
[32m+[m[32m       * <pre>[m
[32m+[m[32m       * // somewhere, assume lazy.state has not been defined[m
[32m+[m[32m       * $state.go("lazy.state", {a:1, b:2}, {inherit:false});[m
[32m+[m[32m       *[m
[32m+[m[32m       * // somewhere else[m
[32m+[m[32m       * $scope.$on('$stateNotFound',[m
[32m+[m[32m       * function(event, unfoundState, fromState, fromParams){[m
[32m+[m[32m       *     console.log(unfoundState.to); // "lazy.state"[m
[32m+[m[32m       *     console.log(unfoundState.toParams); // {a:1, b:2}[m
[32m+[m[32m       *     console.log(unfoundState.options); // {inherit:false} + default options[m
[32m+[m[32m       * })[m
[32m+[m[32m       * </pre>[m
[32m+[m[32m       */[m
[32m+[m[32m      var evt = $rootScope.$broadcast('$stateNotFound', redirect, state, params);[m
[32m+[m
[32m+[m[32m      if (evt.defaultPrevented) {[m
[32m+[m[32m        $urlRouter.update();[m
[32m+[m[32m        return TransitionAborted;[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      if (!evt.retry) {[m
[32m+[m[32m        return null;[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      // Allow the handler to return a promise to defer state lookup retry[m
[32m+[m[32m      if (options.$retry) {[m
[32m+[m[32m        $urlRouter.update();[m
[32m+[m[32m        return TransitionFailed;[m
[32m+[m[32m      }[m
[32m+[m[32m      var retryTransition = $state.transition = $q.when(evt.retry);[m
[32m+[m
[32m+[m[32m      retryTransition.then(function() {[m
[32m+[m[32m        if (retryTransition !== $state.transition) return TransitionSuperseded;[m
[32m+[m[32m        redirect.options.$retry = true;[m
[32m+[m[32m        return $state.transitionTo(redirect.to, redirect.toParams, redirect.options);[m
[32m+[m[32m      }, function() {[m
[32m+[m[32m        return TransitionAborted;[m
[32m+[m[32m      });[m
[32m+[m[32m      $urlRouter.update();[m
[32m+[m
[32m+[m[32m      return retryTransition;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    root.locals = { resolve: null, globals: { $stateParams: {} } };[m
[32m+[m
[32m+[m[32m    $state = {[m
[32m+[m[32m      params: {},[m
[32m+[m[32m      current: root.self,[m
[32m+[m[32m      $current: root,[m
[32m+[m[32m      transition: null[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * @ngdoc function[m
[32m+[m[32m     * @name ui.router.state.$state#reload[m
[32m+[m[32m     * @methodOf ui.router.state.$state[m
[32m+[m[32m     *[m
[32m+[m[32m     * @description[m
[32m+[m[32m     * A method that force reloads the current state. All resolves are re-resolved,[m
[32m+[m[32m     * controllers reinstantiated, and events re-fired.[m
[32m+[m[32m     *[m
[32m+[m[32m     * @example[m
[32m+[m[32m     * <pre>[m
[32m+[m[32m     * var app angular.module('app', ['ui.router']);[m
[32m+[m[32m     *[m
[32m+[m[32m     * app.controller('ctrl', function ($scope, $state) {[m
[32m+[m[32m     *   $scope.reload = function(){[m
[32m+[m[32m     *     $state.reload();[m
[32m+[m[32m     *   }[m
[32m+[m[32m     * });[m
[32m+[m[32m     * </pre>[m
[32m+[m[32m     *[m
[32m+[m[32m     * `reload()` is just an alias for:[m
[32m+[m[32m     * <pre>[m
[32m+[m[32m     * $state.transitionTo($state.current, $stateParams, {[m[41m [m
[32m+[m[32m     *   reload: true, inherit: false, notify: true[m
[32m+[m[32m     * });[m
[32m+[m[32m     * </pre>[m
[32m+[m[32m     *[m
[32m+[m[32m     * @param {string=|object=} state - A state name or a state object, which is the root of the resolves to be re-resolved.[m
[32m+[m[32m     * @example[m
[32m+[m[32m     * <pre>[m
[32m+[m[32m     * //assuming app application consists of 3 states: 'contacts', 'contacts.detail', 'contacts.detail.item'[m[41m [m
[32m+[m[32m     * //and current state is 'contacts.detail.item'[m
[32m+[m[32m     * var app angular.module('app', ['ui.router']);[m
[32m+[m[32m     *[m
[32m+[m[32m     * app.controller('ctrl', function ($scope, $state) {[m
[32m+[m[32m     *   $scope.reload = function(){[m
[32m+[m[32m     *     //will reload 'contact.detail' and 'contact.detail.item' states[m
[32m+[m[32m     *     $state.reload('contact.detail');[m
[32m+[m[32m     *   }[m
[32m+[m[32m     * });[m
[32m+[m[32m     * </pre>[m
[32m+[m[32m     *[m
[32m+[m[32m     * `reload()` is just an alias for:[m
[32m+[m[32m     * <pre>[m
[32m+[m[32m     * $state.transitionTo($state.current, $stateParams, {[m[41m [m
[32m+[m[32m     *   reload: true, inherit: false, notify: true[m
[32m+[m[32m     * });[m
[32m+[m[32m     * </pre>[m
 [m
[31m-      var callbackRemove = function () {[m
[31m-        that.removeBackdrop()[m
[31m-        callback && callback()[m
[32m+[m[32m     * @returns {promise} A promise representing the state of the new transition. See[m
[32m+[m[32m     * {@link ui.router.state.$state#methods_go $state.go}.[m
[32m+[m[32m     */[m
[32m+[m[32m    $state.reload = function reload(state) {[m
[32m+[m[32m      return $state.transitionTo($state.current, $stateParams, { reload: state || true, inherit: false, notify: true});[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * @ngdoc function[m
[32m+[m[32m     * @name ui.router.state.$state#go[m
[32m+[m[32m     * @methodOf ui.router.state.$state[m
[32m+[m[32m     *[m
[32m+[m[32m     * @description[m
[32m+[m[32m     * Convenience method for transitioning to a new state. `$state.go` calls[m[41m [m
[32m+[m[32m     * `$state.transitionTo` internally but automatically sets options to[m[41m [m
[32m+[m[32m     * `{ location: true, inherit: true, relative: $state.$current, notify: true }`.[m[41m [m
[32m+[m[32m     * This allows you to easily use an absolute or relative to path and specify[m[41m [m
[32m+[m[32m     * only the parameters you'd like to update (while letting unspecified parameters[m[41m [m
[32m+[m[32m     * inherit from the currently active ancestor states).[m
[32m+[m[32m     *[m
[32m+[m[32m     * @example[m
[32m+[m[32m     * <pre>[m
[32m+[m[32m     * var app = angular.module('app', ['ui.router']);[m
[32m+[m[32m     *[m
[32m+[m[32m     * app.controller('ctrl', function ($scope, $state) {[m
[32m+[m[32m     *   $scope.changeState = function () {[m
[32m+[m[32m     *     $state.go('contact.detail');[m
[32m+[m[32m     *   };[m
[32m+[m[32m     * });[m
[32m+[m[32m     * </pre>[m
[32m+[m[32m     * <img src='../ngdoc_assets/StateGoExamples.png'/>[m
[32m+[m[32m     *[m
[32m+[m[32m     * @param {string} to Absolute state name or relative state path. Some examples:[m
[32m+[m[32m     *[m
[32m+[m[32m     * - `$state.go('contact.detail')` - will go to the `contact.detail` state[m
[32m+[m[32m     * - `$state.go('^')` - will go to a parent state[m
[32m+[m[32m     * - `$state.go('^.sibling')` - will go to a sibling state[m
[32m+[m[32m     * - `$state.go('.child.grandchild')` - will go to grandchild state[m
[32m+[m[32m     *[m
[32m+[m[32m     * @param {object=} params A map of the parameters that will be sent to the state,[m[41m [m
[32m+[m[32m     * will populate $stateParams. Any parameters that are not specified will be inherited from currently[m[41m [m
[32m+[m[32m     * defined parameters. This allows, for example, going to a sibling state that shares parameters[m
[32m+[m[32m     * specified in a parent state. Parameter inheritance only works between common ancestor states, I.e.[m
[32m+[m[32m     * transitioning to a sibling will get you the parameters for all parents, transitioning to a child[m
[32m+[m[32m     * will get you all current parameters, etc.[m
[32m+[m[32m     * @param {object=} options Options object. The options are:[m
[32m+[m[32m     *[m
[32m+[m[32m     * - **`location`** - {boolean=true|string=} - If `true` will update the url in the location bar, if `false`[m
[32m+[m[32m     *    will not. If string, must be `"replace"`, which will update url and also replace last history record.[m
[32m+[m[32m     * - **`inherit`** - {boolean=true}, If `true` will inherit url parameters from current url.[m
[32m+[m[32m     * - **`relative`** - {object=$state.$current}, When transitioning with relative path (e.g '^'),[m[41m [m
[32m+[m[32m     *    defines which state to be relative from.[m
[32m+[m[32m     * - **`notify`** - {boolean=true}, If `true` will broadcast $stateChangeStart and $stateChangeSuccess events.[m
[32m+[m[32m     * - **`reload`** (v0.2.5) - {boolean=false}, If `true` will force transition even if the state or params[m[41m [m
[32m+[m[32m     *    have not changed, aka a reload of the same state. It differs from reloadOnSearch because you'd[m
[32m+[m[32m     *    use this when you want to force a reload when *everything* is the same, including search params.[m
[32m+[m[32m     *[m
[32m+[m[32m     * @returns {promise} A promise representing the state of the new transition.[m
[32m+[m[32m     *[m
[32m+[m[32m     * Possible success values:[m
[32m+[m[32m     *[m
[32m+[m[32m     * - $state.current[m
[32m+[m[32m     *[m
[32m+[m[32m     * <br/>Possible rejection values:[m
[32m+[m[32m     *[m
[32m+[m[32m     * - 'transition superseded' - when a newer transition has been started after this one[m
[32m+[m[32m     * - 'transition prevented' - when `event.preventDefault()` has been called in a `$stateChangeStart` listener[m
[32m+[m[32m     * - 'transition aborted' - when `event.preventDefault()` has been called in a `$stateNotFound` listener or[m
[32m+[m[32m     *   when a `$stateNotFound` `event.retry` promise errors.[m
[32m+[m[32m     * - 'transition failed' - when a state has been unsuccessfully found after 2 tries.[m
[32m+[m[32m     * - *resolve error* - when an error has occurred with a `resolve`[m
[32m+[m[32m     *[m
[32m+[m[32m     */[m
[32m+[m[32m    $state.go = function go(to, params, options) {[m
[32m+[m[32m      return $state.transitionTo(to, params, extend({ inherit: true, relative: $state.$current }, options));[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * @ngdoc function[m
[32m+[m[32m     * @name ui.router.state.$state#transitionTo[m
[32m+[m[32m     * @methodOf ui.router.state.$state[m
[32m+[m[32m     *[m
[32m+[m[32m     * @description[m
[32m+[m[32m     * Low-level method for transitioning to a new state. {@link ui.router.state.$state#methods_go $state.go}[m
[32m+[m[32m     * uses `transitionTo` internally. `$state.go` is recommended in most situations.[m
[32m+[m[32m     *[m
[32m+[m[32m     * @example[m
[32m+[m[32m     * <pre>[m
[32m+[m[32m     * var app = angular.module('app', ['ui.router']);[m
[32m+[m[32m     *[m
[32m+[m[32m     * app.controller('ctrl', function ($scope, $state) {[m
[32m+[m[32m     *   $scope.changeState = function () {[m
[32m+[m[32m     *     $state.transitionTo('contact.detail');[m
[32m+[m[32m     *   };[m
[32m+[m[32m     * });[m
[32m+[m[32m     * </pre>[m
[32m+[m[32m     *[m
[32m+[m[32m     * @param {string} to State name.[m
[32m+[m[32m     * @param {object=} toParams A map of the parameters that will be sent to the state,[m
[32m+[m[32m     * will populate $stateParams.[m
[32m+[m[32m     * @param {object=} options Options object. The options are:[m
[32m+[m[32m     *[m
[32m+[m[32m     * - **`location`** - {boolean=true|string=} - If `true` will update the url in the location bar, if `false`[m
[32m+[m[32m     *    will not. If string, must be `"replace"`, which will update url and also replace last history record.[m
[32m+[m[32m     * - **`inherit`** - {boolean=false}, If `true` will inherit url parameters from current url.[m
[32m+[m[32m     * - **`relative`** - {object=}, When transitioning with relative path (e.g '^'),[m[41m [m
[32m+[m[32m     *    defines which state to be relative from.[m
[32m+[m[32m     * - **`notify`** - {boolean=true}, If `true` will broadcast $stateChangeStart and $stateChangeSuccess events.[m
[32m+[m[32m     * - **`reload`** (v0.2.5) - {boolean=false|string=|object=}, If `true` will force transition even if the state or params[m[41m [m
[32m+[m[32m     *    have not changed, aka a reload of the same state. It differs from reloadOnSearch because you'd[m
[32m+[m[32m     *    use this when you want to force a reload when *everything* is the same, including search params.[m
[32m+[m[32m     *    if String, then will reload the state with the name given in reload, and any children.[m
[32m+[m[32m     *    if Object, then a stateObj is expected, will reload the state found in stateObj, and any children.[m
[32m+[m[32m     *[m
[32m+[m[32m     * @returns {promise} A promise representing the state of the new transition. See[m
[32m+[m[32m     * {@link ui.router.state.$state#methods_go $state.go}.[m
[32m+[m[32m     */[m
[32m+[m[32m    $state.transitionTo = function transitionTo(to, toParams, options) {[m
[32m+[m[32m      toParams = toParams || {};[m
[32m+[m[32m      options = extend({[m
[32m+[m[32m        location: true, inherit: false, relative: null, notify: true, reload: false, $retry: false[m
[32m+[m[32m      }, options || {});[m
[32m+[m
[32m+[m[32m      var from = $state.$current, fromParams = $state.params, fromPath = from.path;[m
[32m+[m[32m      var evt, toState = findState(to, options.relative);[m
[32m+[m
[32m+[m[32m      // Store the hash param for later (since it will be stripped out by various methods)[m
[32m+[m[32m      var hash = toParams['#'];[m
[32m+[m
[32m+[m[32m      if (!isDefined(toState)) {[m
[32m+[m[32m        var redirect = { to: to, toParams: toParams, options: options };[m
[32m+[m[32m        var redirectResult = handleRedirect(redirect, from.self, fromParams, options);[m
[32m+[m
[32m+[m[32m        if (redirectResult) {[m
[32m+[m[32m          return redirectResult;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Always retry once if the $stateNotFound was not prevented[m
[32m+[m[32m        // (handles either redirect changed or state lazy-definition)[m
[32m+[m[32m        to = redirect.to;[m
[32m+[m[32m        toParams = redirect.toParams;[m
[32m+[m[32m        options = redirect.options;[m
[32m+[m[32m        toState = findState(to, options.relative);[m
[32m+[m
[32m+[m[32m        if (!isDefined(toState)) {[m
[32m+[m[32m          if (!options.relative) throw new Error("No such state '" + to + "'");[m
[32m+[m[32m          throw new Error("Could not resolve '" + to + "' from state '" + options.relative + "'");[m
[32m+[m[32m        }[m
       }[m
[31m-      $.support.transition && this.$element.hasClass('fade') ?[m
[31m-        this.$backdrop[m
[31m-          .one('bsTransitionEnd', callbackRemove)[m
[31m-          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :[m
[31m-        callbackRemove()[m
[32m+[m[32m      if (toState[abstractKey]) throw new Error("Cannot transition to abstract state '" + to + "'");[m
[32m+[m[32m      if (options.inherit) toParams = inheritParams($stateParams, toParams || {}, $state.$current, toState);[m
[32m+[m[32m      if (!toState.params.$$validates(toParams)) return TransitionFailed;[m
 [m
[31m-    } else if (callback) {[m
[31m-      callback()[m
[31m-    }[m
[31m-  }[m
[32m+[m[32m      toParams = toState.params.$$values(toParams);[m
[32m+[m[32m      to = toState;[m
 [m
[31m-  // these following methods are used to handle overflowing modals[m
[32m+[m[32m      var toPath = to.path;[m
 [m
[31m-  Modal.prototype.handleUpdate = function () {[m
[31m-    this.adjustDialog()[m
[31m-  }[m
[32m+[m[32m      // Starting from the root of the path, keep all levels that haven't changed[m
[32m+[m[32m      var keep = 0, state = toPath[keep], locals = root.locals, toLocals = [];[m
 [m
[31m-  Modal.prototype.adjustDialog = function () {[m
[31m-    var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight[m
[32m+[m[32m      if (!options.reload) {[m
[32m+[m[32m        while (state && state === fromPath[keep] && state.ownParams.$$equals(toParams, fromParams)) {[m
[32m+[m[32m          locals = toLocals[keep] = state.locals;[m
[32m+[m[32m          keep++;[m
[32m+[m[32m          state = toPath[keep];[m
[32m+[m[32m        }[m
[32m+[m[32m      } else if (isString(options.reload) || isObject(options.reload)) {[m
[32m+[m[32m        if (isObject(options.reload) && !options.reload.name) {[m
[32m+[m[32m          throw new Error('Invalid reload state object');[m
[32m+[m[32m        }[m
[32m+[m[41m        [m
[32m+[m[32m        var reloadState = options.reload === true ? fromPath[0] : findState(options.reload);[m
[32m+[m[32m        if (options.reload && !reloadState) {[m
[32m+[m[32m          throw new Error("No such reload state '" + (isString(options.reload) ? options.reload : options.reload.name) + "'");[m
[32m+[m[32m        }[m
 [m
[31m-    this.$element.css({[m
[31m-      paddingLeft:  !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : '',[m
[31m-      paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ''[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m        while (state && state === fromPath[keep] && state !== reloadState) {[m
[32m+[m[32m          locals = toLocals[keep] = state.locals;[m
[32m+[m[32m          keep++;[m
[32m+[m[32m          state = toPath[keep];[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
 [m
[31m-  Modal.prototype.resetAdjustments = function () {[m
[31m-    this.$element.css({[m
[31m-      paddingLeft: '',[m
[31m-      paddingRight: ''[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m      // If we're going to the same state and all locals are kept, we've got nothing to do.[m
[32m+[m[32m      // But clear 'transition', as we still want to cancel any other pending transitions.[m
[32m+[m[32m      // TODO: We may not want to bump 'transition' if we're called from a location change[m
[32m+[m[32m      // that we've initiated ourselves, because we might accidentally abort a legitimate[m
[32m+[m[32m      // transition initiated from code?[m
[32m+[m[32m      if (shouldSkipReload(to, toParams, from, fromParams, locals, options)) {[m
[32m+[m[32m        if (hash) toParams['#'] = hash;[m
[32m+[m[32m        $state.params = toParams;[m
[32m+[m[32m        copy($state.params, $stateParams);[m
[32m+[m[32m        if (options.location && to.navigable && to.navigable.url) {[m
[32m+[m[32m          $urlRouter.push(to.navigable.url, toParams, {[m
[32m+[m[32m            $$avoidResync: true, replace: options.location === 'replace'[m
[32m+[m[32m          });[m
[32m+[m[32m          $urlRouter.update(true);[m
[32m+[m[32m        }[m
[32m+[m[32m        $state.transition = null;[m
[32m+[m[32m        return $q.when($state.current);[m
[32m+[m[32m      }[m
 [m
[31m-  Modal.prototype.checkScrollbar = function () {[m
[31m-    var fullWindowWidth = window.innerWidth[m
[31m-    if (!fullWindowWidth) { // workaround for missing window.innerWidth in IE8[m
[31m-      var documentElementRect = document.documentElement.getBoundingClientRect()[m
[31m-      fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left)[m
[31m-    }[m
[31m-    this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth[m
[31m-    this.scrollbarWidth = this.measureScrollbar()[m
[31m-  }[m
[32m+[m[32m      // Filter parameters before we pass them to event handlers etc.[m
[32m+[m[32m      toParams = filterByKeys(to.params.$$keys(), toParams || {});[m
 [m
[31m-  Modal.prototype.setScrollbar = function () {[m
[31m-    var bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)[m
[31m-    this.originalBodyPad = document.body.style.paddingRight || ''[m
[31m-    if (this.bodyIsOverflowing) this.$body.css('padding-right', bodyPad + this.scrollbarWidth)[m
[31m-  }[m
[32m+[m[32m      // Broadcast start event and cancel the transition if requested[m
[32m+[m[32m      if (options.notify) {[m
[32m+[m[32m        /**[m
[32m+[m[32m         * @ngdoc event[m
[32m+[m[32m         * @name ui.router.state.$state#$stateChangeStart[m
[32m+[m[32m         * @eventOf ui.router.state.$state[m
[32m+[m[32m         * @eventType broadcast on root scope[m
[32m+[m[32m         * @description[m
[32m+[m[32m         * Fired when the state transition **begins**. You can use `event.preventDefault()`[m
[32m+[m[32m         * to prevent the transition from happening and then the transition promise will be[m
[32m+[m[32m         * rejected with a `'transition prevented'` value.[m
[32m+[m[32m         *[m
[32m+[m[32m         * @param {Object} event Event object.[m
[32m+[m[32m         * @param {State} toState The state being transitioned to.[m
[32m+[m[32m         * @param {Object} toParams The params supplied to the `toState`.[m
[32m+[m[32m         * @param {State} fromState The current state, pre-transition.[m
[32m+[m[32m         * @param {Object} fromParams The params supplied to the `fromState`.[m
[32m+[m[32m         *[m
[32m+[m[32m         * @example[m
[32m+[m[32m         *[m
[32m+[m[32m         * <pre>[m
[32m+[m[32m         * $rootScope.$on('$stateChangeStart',[m
[32m+[m[32m         * function(event, toState, toParams, fromState, fromParams){[m
[32m+[m[32m         *     event.preventDefault();[m
[32m+[m[32m         *     // transitionTo() promise will be rejected with[m
[32m+[m[32m         *     // a 'transition prevented' error[m
[32m+[m[32m         * })[m
[32m+[m[32m         * </pre>[m
[32m+[m[32m         */[m
[32m+[m[32m        if ($rootScope.$broadcast('$stateChangeStart', to.self, toParams, from.self, fromParams).defaultPrevented) {[m
[32m+[m[32m          $rootScope.$broadcast('$stateChangeCancel', to.self, toParams, from.self, fromParams);[m
[32m+[m[32m          $urlRouter.update();[m
[32m+[m[32m          return TransitionPrevented;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
 [m
[31m-  Modal.prototype.resetScrollbar = function () {[m
[31m-    this.$body.css('padding-right', this.originalBodyPad)[m
[31m-  }[m
[32m+[m[32m      // Resolve locals for the remaining states, but don't update any global state just[m
[32m+[m[32m      // yet -- if anything fails to resolve the current state needs to remain untouched.[m
[32m+[m[32m      // We also set up an inheritance chain for the locals here. This allows the view directive[m
[32m+[m[32m      // to quickly look up the correct definition for each view in the current state. Even[m
[32m+[m[32m      // though we create the locals object itself outside resolveState(), it is initially[m
[32m+[m[32m      // empty and gets filled asynchronously. We need to keep track of the promise for the[m
[32m+[m[32m      // (fully resolved) current locals, and pass this down the chain.[m
[32m+[m[32m      var resolved = $q.when(locals);[m
 [m
[31m-  Modal.prototype.measureScrollbar = function () { // thx walsh[m
[31m-    var scrollDiv = document.createElement('div')[m
[31m-    scrollDiv.className = 'modal-scrollbar-measure'[m
[31m-    this.$body.append(scrollDiv)[m
[31m-    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth[m
[31m-    this.$body[0].removeChild(scrollDiv)[m
[31m-    return scrollbarWidth[m
[31m-  }[m
[32m+[m[32m      for (var l = keep; l < toPath.length; l++, state = toPath[l]) {[m
[32m+[m[32m        locals = toLocals[l] = inherit(locals);[m
[32m+[m[32m        resolved = resolveState(state, toParams, state === to, resolved, locals, options);[m
[32m+[m[32m      }[m
 [m
[32m+[m[32m      // Once everything is resolved, we are ready to perform the actual transition[m
[32m+[m[32m      // and return a promise for the new state. We also keep track of what the[m
[32m+[m[32m      // current promise is, so that we can detect overlapping transitions and[m
[32m+[m[32m      // keep only the outcome of the last transition.[m
[32m+[m[32m      var transition = $state.transition = resolved.then(function () {[m
[32m+[m[32m        var l, entering, exiting;[m
 [m
[31m-  // MODAL PLUGIN DEFINITION[m
[31m-  // =======================[m
[32m+[m[32m        if ($state.transition !== transition) return TransitionSuperseded;[m
 [m
[31m-  function Plugin(option, _relatedTarget) {[m
[31m-    return this.each(function () {[m
[31m-      var $this   = $(this)[m
[31m-      var data    = $this.data('bs.modal')[m
[31m-      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)[m
[32m+[m[32m        // Exit 'from' states not kept[m
[32m+[m[32m        for (l = fromPath.length - 1; l >= keep; l--) {[m
[32m+[m[32m          exiting = fromPath[l];[m
[32m+[m[32m          if (exiting.self.onExit) {[m
[32m+[m[32m            $injector.invoke(exiting.self.onExit, exiting.self, exiting.locals.globals);[m
[32m+[m[32m          }[m
[32m+[m[32m          exiting.locals = null;[m
[32m+[m[32m        }[m
 [m
[31m-      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))[m
[31m-      if (typeof option == 'string') data[option](_relatedTarget)[m
[31m-      else if (options.show) data.show(_relatedTarget)[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m        // Enter 'to' states not kept[m
[32m+[m[32m        for (l = keep; l < toPath.length; l++) {[m
[32m+[m[32m          entering = toPath[l];[m
[32m+[m[32m          entering.locals = toLocals[l];[m
[32m+[m[32m          if (entering.self.onEnter) {[m
[32m+[m[32m            $injector.invoke(entering.self.onEnter, entering.self, entering.locals.globals);[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
 [m
[31m-  var old = $.fn.modal[m
[32m+[m[32m        // Re-add the saved hash before we start returning things[m
[32m+[m[32m        if (hash) toParams['#'] = hash;[m
 [m
[31m-  $.fn.modal             = Plugin[m
[31m-  $.fn.modal.Constructor = Modal[m
[32m+[m[32m        // Run it again, to catch any transitions in callbacks[m
[32m+[m[32m        if ($state.transition !== transition) return TransitionSuperseded;[m
[32m+[m
[32m+[m[32m        // Update globals in $state[m
[32m+[m[32m        $state.$current = to;[m
[32m+[m[32m        $state.current = to.self;[m
[32m+[m[32m        $state.params = toParams;[m
[32m+[m[32m        copy($state.params, $stateParams);[m
[32m+[m[32m        $state.transition = null;[m
[32m+[m
[32m+[m[32m        if (options.location && to.navigable) {[m
[32m+[m[32m          $urlRouter.push(to.navigable.url, to.navigable.locals.globals.$stateParams, {[m
[32m+[m[32m            $$avoidResync: true, replace: options.location === 'replace'[m
[32m+[m[32m          });[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (options.notify) {[m
[32m+[m[32m        /**[m
[32m+[m[32m         * @ngdoc event[m
[32m+[m[32m         * @name ui.router.state.$state#$stateChangeSuccess[m
[32m+[m[32m         * @eventOf ui.router.state.$state[m
[32m+[m[32m         * @eventType broadcast on root scope[m
[32m+[m[32m         * @description[m
[32m+[m[32m         * Fired once the state transition is **complete**.[m
[32m+[m[32m         *[m
[32m+[m[32m         * @param {Object} event Event object.[m
[32m+[m[32m         * @param {State} toState The state being transitioned to.[m
[32m+[m[32m         * @param {Object} toParams The params supplied to the `toState`.[m
[32m+[m[32m         * @param {State} fromState The current state, pre-transition.[m
[32m+[m[32m         * @param {Object} fromParams The params supplied to the `fromState`.[m
[32m+[m[32m         */[m
[32m+[m[32m          $rootScope.$broadcast('$stateChangeSuccess', to.self, toParams, from.self, fromParams);[m
[32m+[m[32m        }[m
[32m+[m[32m        $urlRouter.update(true);[m
[32m+[m
[32m+[m[32m        return $state.current;[m
[32m+[m[32m      }, function (error) {[m
[32m+[m[32m        if ($state.transition !== transition) return TransitionSuperseded;[m
[32m+[m
[32m+[m[32m        $state.transition = null;[m
[32m+[m[32m        /**[m
[32m+[m[32m         * @ngdoc event[m
[32m+[m[32m         * @name ui.router.state.$state#$stateChangeError[m
[32m+[m[32m         * @eventOf ui.router.state.$state[m
[32m+[m[32m         * @eventType broadcast on root scope[m
[32m+[m[32m         * @description[m
[32m+[m[32m         * Fired when an **error occurs** during transition. It's important to note that if you[m
[32m+[m[32m         * have any errors in your resolve functions (javascript errors, non-existent services, etc)[m
[32m+[m[32m         * they will not throw traditionally. You must listen for this $stateChangeError event to[m
[32m+[m[32m         * catch **ALL** errors.[m
[32m+[m[32m         *[m
[32m+[m[32m         * @param {Object} event Event object.[m
[32m+[m[32m         * @param {State} toState The state being transitioned to.[m
[32m+[m[32m         * @param {Object} toParams The params supplied to the `toState`.[m
[32m+[m[32m         * @param {State} fromState The current state, pre-transition.[m
[32m+[m[32m         * @param {Object} fromParams The params supplied to the `fromState`.[m
[32m+[m[32m         * @param {Error} error The resolve error object.[m
[32m+[m[32m         */[m
[32m+[m[32m        evt = $rootScope.$broadcast('$stateChangeError', to.self, toParams, from.self, fromParams, error);[m
[32m+[m
[32m+[m[32m        if (!evt.defaultPrevented) {[m
[32m+[m[32m            $urlRouter.update();[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        return $q.reject(error);[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      return transition;[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * @ngdoc function[m
[32m+[m[32m     * @name ui.router.state.$state#is[m
[32m+[m[32m     * @methodOf ui.router.state.$state[m
[32m+[m[32m     *[m
[32m+[m[32m     * @description[m
[32m+[m[32m     * Similar to {@link ui.router.state.$state#methods_includes $state.includes},[m
[32m+[m[32m     * but only checks for the full state name. If params is supplied then it will be[m
[32m+[m[32m     * tested for strict equality against the current active params object, so all params[m
[32m+[m[32m     * must match with none missing and no extras.[m
[32m+[m[32m     *[m
[32m+[m[32m     * @example[m
[32m+[m[32m     * <pre>[m
[32m+[m[32m     * $state.$current.name = 'contacts.details.item';[m
[32m+[m[32m     *[m
[32m+[m[32m     * // absolute name[m
[32m+[m[32m     * $state.is('contact.details.item'); // returns true[m
[32m+[m[32m     * $state.is(contactDetailItemStateObject); // returns true[m
[32m+[m[32m     *[m
[32m+[m[32m     * // relative name (. and ^), typically from a template[m
[32m+[m[32m     * // E.g. from the 'contacts.details' template[m
[32m+[m[32m     * <div ng-class="{highlighted: $state.is('.item')}">Item</div>[m
[32m+[m[32m     * </pre>[m
[32m+[m[32m     *[m
[32m+[m[32m     * @param {string|object} stateOrName The state name (absolute or relative) or state object you'd like to check.[m
[32m+[m[32m     * @param {object=} params A param object, e.g. `{sectionId: section.id}`, that you'd like[m
[32m+[m[32m     * to test against the current active state.[m
[32m+[m[32m     * @param {object=} options An options object.  The options are:[m
[32m+[m[32m     *[m
[32m+[m[32m     * - **`relative`** - {string|object} -  If `stateOrName` is a relative state name and `options.relative` is set, .is will[m
[32m+[m[32m     * test relative to `options.relative` state (or name).[m
[32m+[m[32m     *[m
[32m+[m[32m     * @returns {boolean} Returns true if it is the state.[m
[32m+[m[32m     */[m
[32m+[m[32m    $state.is = function is(stateOrName, params, options) {[m
[32m+[m[32m      options = extend({ relative: $state.$current }, options || {});[m
[32m+[m[32m      var state = findState(stateOrName, options.relative);[m
[32m+[m
[32m+[m[32m      if (!isDefined(state)) { return undefined; }[m
[32m+[m[32m      if ($state.$current !== state) { return false; }[m
[32m+[m[32m      return params ? equalForKeys(state.params.$$values(params), $stateParams) : true;[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * @ngdoc function[m
[32m+[m[32m     * @name ui.router.state.$state#includes[m
[32m+[m[32m     * @methodOf ui.router.state.$state[m
[32m+[m[32m     *[m
[32m+[m[32m     * @description[m
[32m+[m[32m     * A method to determine if the current active state is equal to or is the child of the[m
[32m+[m[32m     * state stateName. If any params are passed then they will be tested for a match as well.[m
[32m+[m[32m     * Not all the parameters need to be passed, just the ones you'd like to test for equality.[m
[32m+[m[32m     *[m
[32m+[m[32m     * @example[m
[32m+[m[32m     * Partial and relative names[m
[32m+[m[32m     * <pre>[m
[32m+[m[32m     * $state.$current.name = 'contacts.details.item';[m
[32m+[m[32m     *[m
[32m+[m[32m     * // Using partial names[m
[32m+[m[32m     * $state.includes("contacts"); // returns true[m
[32m+[m[32m     * $state.includes("contacts.details"); // returns true[m
[32m+[m[32m     * $state.includes("contacts.details.item"); // returns true[m
[32m+[m[32m     * $state.includes("contacts.list"); // returns false[m
[32m+[m[32m     * $state.includes("about"); // returns false[m
[32m+[m[32m     *[m
[32m+[m[32m     * // Using relative names (. and ^), typically from a template[m
[32m+[m[32m     * // E.g. from the 'contacts.details' template[m
[32m+[m[32m     * <div ng-class="{highlighted: $state.includes('.item')}">Item</div>[m
[32m+[m[32m     * </pre>[m
[32m+[m[32m     *[m
[32m+[m[32m     * Basic globbing patterns[m
[32m+[m[32m     * <pre>[m
[32m+[m[32m     * $state.$current.name = 'contacts.details.item.url';[m
[32m+[m[32m     *[m
[32m+[m[32m     * $state.includes("*.details.*.*"); // returns true[m
[32m+[m[32m     * $state.includes("*.details.**"); // returns true[m
[32m+[m[32m     * $state.includes("**.item.**"); // returns true[m
[32m+[m[32m     * $state.includes("*.details.item.url"); // returns true[m
[32m+[m[32m     * $state.includes("*.details.*.url"); // returns true[m
[32m+[m[32m     * $state.includes("*.details.*"); // returns false[m
[32m+[m[32m     * $state.includes("item.**"); // returns false[m
[32m+[m[32m     * </pre>[m
[32m+[m[32m     *[m
[32m+[m[32m     * @param {string} stateOrName A partial name, relative name, or glob pattern[m
[32m+[m[32m     * to be searched for within the current state name.[m
[32m+[m[32m     * @param {object=} params A param object, e.g. `{sectionId: section.id}`,[m
[32m+[m[32m     * that you'd like to test against the current active state.[m
[32m+[m[32m     * @param {object=} options An options object.  The options are:[m
[32m+[m[32m     *[m
[32m+[m[32m     * - **`relative`** - {string|object=} -  If `stateOrName` is a relative state reference and `options.relative` is set,[m
[32m+[m[32m     * .includes will test relative to `options.relative` state (or name).[m
[32m+[m[32m     *[m
[32m+[m[32m     * @returns {boolean} Returns true if it does include the state[m
[32m+[m[32m     */[m
[32m+[m[32m    $state.includes = function includes(stateOrName, params, options) {[m
[32m+[m[32m      options = extend({ relative: $state.$current }, options || {});[m
[32m+[m[32m      if (isString(stateOrName) && isGlob(stateOrName)) {[m
[32m+[m[32m        if (!doesStateMatchGlob(stateOrName)) {[m
[32m+[m[32m          return false;[m
[32m+[m[32m        }[m
[32m+[m[32m        stateOrName = $state.$current.name;[m
[32m+[m[32m      }[m
 [m
[32m+[m[32m      var state = findState(stateOrName, options.relative);[m
[32m+[m[32m      if (!isDefined(state)) { return undefined; }[m
[32m+[m[32m      if (!isDefined($state.$current.includes[state.name])) { return false; }[m
[32m+[m[32m      return params ? equalForKeys(state.params.$$values(params), $stateParams, objectKeys(params)) : true;[m
[32m+[m[32m    };[m
 [m
[31m-  // MODAL NO CONFLICT[m
[31m-  // =================[m
 [m
[31m-  $.fn.modal.noConflict = function () {[m
[31m-    $.fn.modal = old[m
[31m-    return this[m
[31m-  }[m
[32m+[m[32m    /**[m
[32m+[m[32m     * @ngdoc function[m
[32m+[m[32m     * @name ui.router.state.$state#href[m
[32m+[m[32m     * @methodOf ui.router.state.$state[m
[32m+[m[32m     *[m
[32m+[m[32m     * @description[m
[32m+[m[32m     * A url generation method that returns the compiled url for the given state populated with the given params.[m
[32m+[m[32m     *[m
[32m+[m[32m     * @example[m
[32m+[m[32m     * <pre>[m
[32m+[m[32m     * expect($state.href("about.person", { person: "bob" })).toEqual("/about/bob");[m
[32m+[m[32m     * </pre>[m
[32m+[m[32m     *[m
[32m+[m[32m     * @param {string|object} stateOrName The state name or state object you'd like to generate a url from.[m
[32m+[m[32m     * @param {object=} params An object of parameter values to fill the state's required parameters.[m
[32m+[m[32m     * @param {object=} options Options object. The options are:[m
[32m+[m[32m     *[m
[32m+[m[32m     * - **`lossy`** - {boolean=true} -  If true, and if there is no url associated with the state provided in the[m
[32m+[m[32m     *    first parameter, then the constructed href url will be built from the first navigable ancestor (aka[m
[32m+[m[32m     *    ancestor with a valid url).[m
[32m+[m[32m     * - **`inherit`** - {boolean=true}, If `true` will inherit url parameters from current url.[m
[32m+[m[32m     * - **`relative`** - {object=$state.$current}, When transitioning with relative path (e.g '^'),[m[41m [m
[32m+[m[32m     *    defines which state to be relative from.[m
[32m+[m[32m     * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. "http://www.example.com/fullurl".[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @returns {string} compiled state url[m
[32m+[m[32m     */[m
[32m+[m[32m    $state.href = function href(stateOrName, params, options) {[m
[32m+[m[32m      options = extend({[m
[32m+[m[32m        lossy:    true,[m
[32m+[m[32m        inherit:  true,[m
[32m+[m[32m        absolute: false,[m
[32m+[m[32m        relative: $state.$current[m
[32m+[m[32m      }, options || {});[m
 [m
[32m+[m[32m      var state = findState(stateOrName, options.relative);[m
 [m
[31m-  // MODAL DATA-API[m
[31m-  // ==============[m
[32m+[m[32m      if (!isDefined(state)) return null;[m
[32m+[m[32m      if (options.inherit) params = inheritParams($stateParams, params || {}, $state.$current, state);[m
[32m+[m[41m      [m
[32m+[m[32m      var nav = (state && options.lossy) ? state.navigable : state;[m
 [m
[31m-  $(document).on('click.bs.modal.data-api', '[data-toggle="modal"]', function (e) {[m
[31m-    var $this   = $(this)[m
[31m-    var href    = $this.attr('href')[m
[31m-    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\s]+$)/, ''))) // strip for ie7[m
[31m-    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())[m
[32m+[m[32m      if (!nav || nav.url === undefined || nav.url === null) {[m
[32m+[m[32m        return null;[m
[32m+[m[32m      }[m
[32m+[m[32m      return $urlRouter.href(nav.url, filterByKeys(state.params.$$keys().concat('#'), params || {}), {[m
[32m+[m[32m        absolute: options.absolute[m
[32m+[m[32m      });[m
[32m+[m[32m    };[m
 [m
[31m-    if ($this.is('a')) e.preventDefault()[m
[32m+[m[32m    /**[m
[32m+[m[32m     * @ngdoc function[m
[32m+[m[32m     * @name ui.router.state.$state#get[m
[32m+[m[32m     * @methodOf ui.router.state.$state[m
[32m+[m[32m     *[m
[32m+[m[32m     * @description[m
[32m+[m[32m     * Returns the state configuration object for any specific state or all states.[m
[32m+[m[32m     *[m
[32m+[m[32m     * @param {string|object=} stateOrName (absolute or relative) If provided, will only get the config for[m
[32m+[m[32m     * the requested state. If not provided, returns an array of ALL state configs.[m
[32m+[m[32m     * @param {string|object=} context When stateOrName is a relative state reference, the state will be retrieved relative to context.[m
[32m+[m[32m     * @returns {Object|Array} State configuration object or array of all objects.[m
[32m+[m[32m     */[m
[32m+[m[32m    $state.get = function (stateOrName, context) {[m
[32m+[m[32m      if (arguments.length === 0) return map(objectKeys(states), function(name) { return states[name].self; });[m
[32m+[m[32m      var state = findState(stateOrName, context || $state.$current);[m
[32m+[m[32m      return (state && state.self) ? state.self : null;[m
[32m+[m[32m    };[m
 [m
[31m-    $target.one('show.bs.modal', function (showEvent) {[m
[31m-      if (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown[m
[31m-      $target.one('hidden.bs.modal', function () {[m
[31m-        $this.is(':visible') && $this.trigger('focus')[m
[31m-      })[m
[31m-    })[m
[31m-    Plugin.call($target, option, this)[m
[31m-  })[m
[32m+[m[32m    function resolveState(state, params, paramsAreFiltered, inherited, dst, options) {[m
[32m+[m[32m      // Make a restricted $stateParams with only the parameters that apply to this state if[m
[32m+[m[32m      // necessary. In addition to being available to the controller and onEnter/onExit callbacks,[m
[32m+[m[32m      // we also need $stateParams to be available for any $injector calls we make during the[m
[32m+[m[32m      // dependency resolution process.[m
[32m+[m[32m      var $stateParams = (paramsAreFiltered) ? params : filterByKeys(state.params.$$keys(), params);[m
[32m+[m[32m      var locals = { $stateParams: $stateParams };[m
 [m
[31m-}(jQuery);[m
[32m+[m[32m      // Resolve 'global' dependencies for the state, i.e. those not specific to a view.[m
[32m+[m[32m      // We're also including $stateParams in this; that way the parameters are restricted[m
[32m+[m[32m      // to the set that should be visible to the state, and are independent of when we update[m
[32m+[m[32m      // the global $state and $stateParams values.[m
[32m+[m[32m      dst.resolve = $resolve.resolve(state.resolve, locals, dst.resolve, state);[m
[32m+[m[32m      var promises = [dst.resolve.then(function (globals) {[m
[32m+[m[32m        dst.globals = globals;[m
[32m+[m[32m      })];[m
[32m+[m[32m      if (inherited) promises.push(inherited);[m
 [m
[31m-/* ========================================================================[m
[31m- * Bootstrap: tooltip.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#tooltip[m
[31m- * Inspired by the original jQuery.tipsy by Jason Frame[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
[32m+[m[32m      function resolveViews() {[m
[32m+[m[32m        var viewsPromises = [];[m
 [m
[32m+[m[32m        // Resolve template and dependencies for all views.[m
[32m+[m[32m        forEach(state.views, function (view, name) {[m
[32m+[m[32m          var injectables = (view.resolve && view.resolve !== state.resolve ? view.resolve : {});[m
[32m+[m[32m          injectables.$template = [ function () {[m
[32m+[m[32m            return $view.load(name, { view: view, locals: dst.globals, params: $stateParams, notify: options.notify }) || '';[m
[32m+[m[32m          }];[m
 [m
[31m-+function ($) {[m
[31m-  'use strict';[m
[32m+[m[32m          viewsPromises.push($resolve.resolve(injectables, dst.globals, dst.resolve, state).then(function (result) {[m
[32m+[m[32m            // References to the controller (only instantiated at link time)[m
[32m+[m[32m            if (isFunction(view.controllerProvider) || isArray(view.controllerProvider)) {[m
[32m+[m[32m              var injectLocals = angular.extend({}, injectables, dst.globals);[m
[32m+[m[32m              result.$$controller = $injector.invoke(view.controllerProvider, null, injectLocals);[m
[32m+[m[32m            } else {[m
[32m+[m[32m              result.$$controller = view.controller;[m
[32m+[m[32m            }[m
[32m+[m[32m            // Provide access to the state itself for internal use[m
[32m+[m[32m            result.$$state = state;[m
[32m+[m[32m            result.$$controllerAs = view.controllerAs;[m
[32m+[m[32m            dst[name] = result;[m
[32m+[m[32m          }));[m
[32m+[m[32m        });[m
 [m
[31m-  // TOOLTIP PUBLIC CLASS DEFINITION[m
[31m-  // ===============================[m
[32m+[m[32m        return $q.all(viewsPromises).then(function(){[m
[32m+[m[32m          return dst.globals;[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
 [m
[31m-  var Tooltip = function (element, options) {[m
[31m-    this.type       = null[m
[31m-    this.options    = null[m
[31m-    this.enabled    = null[m
[31m-    this.timeout    = null[m
[31m-    this.hoverState = null[m
[31m-    this.$element   = null[m
[32m+[m[32m      // Wait for all the promises and then return the activation object[m
[32m+[m[32m      return $q.all(promises).then(resolveViews).then(function (values) {[m
[32m+[m[32m        return dst;[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
 [m
[31m-    this.init('tooltip', element, options)[m
[32m+[m[32m    return $state;[m
   }[m
 [m
[31m-  Tooltip.VERSION  = '3.3.4'[m
[31m-[m
[31m-  Tooltip.TRANSITION_DURATION = 150[m
[31m-[m
[31m-  Tooltip.DEFAULTS = {[m
[31m-    animation: true,[m
[31m-    placement: 'top',[m
[31m-    selector: false,[m
[31m-    template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',[m
[31m-    trigger: 'hover focus',[m
[31m-    title: '',[m
[31m-    delay: 0,[m
[31m-    html: false,[m
[31m-    container: false,[m
[31m-    viewport: {[m
[31m-      selector: 'body',[m
[31m-      padding: 0[m
[32m+[m[32m  function shouldSkipReload(to, toParams, from, fromParams, locals, options) {[m
[32m+[m[32m    // Return true if there are no differences in non-search (path/object) params, false if there are differences[m
[32m+[m[32m    function nonSearchParamsEqual(fromAndToState, fromParams, toParams) {[m
[32m+[m[32m      // Identify whether all the parameters that differ between `fromParams` and `toParams` were search params.[m
[32m+[m[32m      function notSearchParam(key) {[m
[32m+[m[32m        return fromAndToState.params[key].location != "search";[m
[32m+[m[32m      }[m
[32m+[m[32m      var nonQueryParamKeys = fromAndToState.params.$$keys().filter(notSearchParam);[m
[32m+[m[32m      var nonQueryParams = pick.apply({}, [fromAndToState.params].concat(nonQueryParamKeys));[m
[32m+[m[32m      var nonQueryParamSet = new $$UMFP.ParamSet(nonQueryParams);[m
[32m+[m[32m      return nonQueryParamSet.$$equals(fromParams, toParams);[m
     }[m
[31m-  }[m
[31m-[m
[31m-  Tooltip.prototype.init = function (type, element, options) {[m
[31m-    this.enabled   = true[m
[31m-    this.type      = type[m
[31m-    this.$element  = $(element)[m
[31m-    this.options   = this.getOptions(options)[m
[31m-    this.$viewport = this.options.viewport && $(this.options.viewport.selector || this.options.viewport)[m
 [m
[31m-    if (this.$element[0] instanceof document.constructor && !this.options.selector) {[m
[31m-      throw new Error('`selector` option must be specified when initializing ' + this.type + ' on the window.document object!')[m
[32m+[m[32m    // If reload was not explicitly requested[m
[32m+[m[32m    // and we're transitioning to the same state we're already in[m
[32m+[m[32m    // and    the locals didn't change[m
[32m+[m[32m    //     or they changed in a way that doesn't merit reloading[m
[32m+[m[32m    //        (reloadOnParams:false, or reloadOnSearch.false and only search params changed)[m
[32m+[m[32m    // Then return true.[m
[32m+[m[32m    if (!options.reload && to === from &&[m
[32m+[m[32m      (locals === from.locals || (to.self.reloadOnSearch === false && nonSearchParamsEqual(from, fromParams, toParams)))) {[m
[32m+[m[32m      return true;[m
     }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
 [m
[31m-    var triggers = this.options.trigger.split(' ')[m
[31m-[m
[31m-    for (var i = triggers.length; i--;) {[m
[31m-      var trigger = triggers[i][m
[31m-[m
[31m-      if (trigger == 'click') {[m
[31m-        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))[m
[31m-      } else if (trigger != 'manual') {[m
[31m-        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'[m
[31m-        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'[m
[31m-[m
[31m-        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))[m
[31m-        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))[m
[31m-      }[m
[31m-    }[m
[32m+[m[32mangular.module('ui.router.state')[m
[32m+[m[32m  .value('$stateParams', {})[m
[32m+[m[32m  .provider('$state', $StateProvider);[m
 [m
[31m-    this.options.selector ?[m
[31m-      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :[m
[31m-      this.fixTitle()[m
[31m-  }[m
 [m
[31m-  Tooltip.prototype.getDefaults = function () {[m
[31m-    return Tooltip.DEFAULTS[m
[31m-  }[m
[32m+[m[32m$ViewProvider.$inject = [];[m
[32m+[m[32mfunction $ViewProvider() {[m
 [m
[31m-  Tooltip.prototype.getOptions = function (options) {[m
[31m-    options = $.extend({}, this.getDefaults(), this.$element.data(), options)[m
[32m+[m[32m  this.$get = $get;[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc object[m
[32m+[m[32m   * @name ui.router.state.$view[m
[32m+[m[32m   *[m
[32m+[m[32m   * @requires ui.router.util.$templateFactory[m
[32m+[m[32m   * @requires $rootScope[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   *[m
[32m+[m[32m   */[m
[32m+[m[32m  $get.$inject = ['$rootScope', '$templateFactory'];[m
[32m+[m[32m  function $get(   $rootScope,   $templateFactory) {[m
[32m+[m[32m    return {[m
[32m+[m[32m      // $view.load('full.viewName', { template: ..., controller: ..., resolve: ..., async: false, params: ... })[m
[32m+[m[32m      /**[m
[32m+[m[32m       * @ngdoc function[m
[32m+[m[32m       * @name ui.router.state.$view#load[m
[32m+[m[32m       * @methodOf ui.router.state.$view[m
[32m+[m[32m       *[m
[32m+[m[32m       * @description[m
[32m+[m[32m       *[m
[32m+[m[32m       * @param {string} name name[m
[32m+[m[32m       * @param {object} options option object.[m
[32m+[m[32m       */[m
[32m+[m[32m      load: function load(name, options) {[m
[32m+[m[32m        var result, defaults = {[m
[32m+[m[32m          template: null, controller: null, view: null, locals: null, notify: true, async: true, params: {}[m
[32m+[m[32m        };[m
[32m+[m[32m        options = extend(defaults, options);[m
 [m
[31m-    if (options.delay && typeof options.delay == 'number') {[m
[31m-      options.delay = {[m
[31m-        show: options.delay,[m
[31m-        hide: options.delay[m
[32m+[m[32m        if (options.view) {[m
[32m+[m[32m          result = $templateFactory.fromConfig(options.view, options.params, options.locals);[m
[32m+[m[32m        }[m
[32m+[m[32m        if (result && options.notify) {[m
[32m+[m[32m        /**[m
[32m+[m[32m         * @ngdoc event[m
[32m+[m[32m         * @name ui.router.state.$state#$viewContentLoading[m
[32m+[m[32m         * @eventOf ui.router.state.$view[m
[32m+[m[32m         * @eventType broadcast on root scope[m
[32m+[m[32m         * @description[m
[32m+[m[32m         *[m
[32m+[m[32m         * Fired once the view **begins loading**, *before* the DOM is rendered.[m
[32m+[m[32m         *[m
[32m+[m[32m         * @param {Object} event Event object.[m
[32m+[m[32m         * @param {Object} viewConfig The view config properties (template, controller, etc).[m
[32m+[m[32m         *[m
[32m+[m[32m         * @example[m
[32m+[m[32m         *[m
[32m+[m[32m         * <pre>[m
[32m+[m[32m         * $scope.$on('$viewContentLoading',[m
[32m+[m[32m         * function(event, viewConfig){[m
[32m+[m[32m         *     // Access to all the view config properties.[m
[32m+[m[32m         *     // and one special property 'targetView'[m
[32m+[m[32m         *     // viewConfig.targetView[m
[32m+[m[32m         * });[m
[32m+[m[32m         * </pre>[m
[32m+[m[32m         */[m
[32m+[m[32m          $rootScope.$broadcast('$viewContentLoading', options);[m
[32m+[m[32m        }[m
[32m+[m[32m        return result;[m
       }[m
[31m-    }[m
[31m-[m
[31m-    return options[m
[32m+[m[32m    };[m
   }[m
[32m+[m[32m}[m
 [m
[31m-  Tooltip.prototype.getDelegateOptions = function () {[m
[31m-    var options  = {}[m
[31m-    var defaults = this.getDefaults()[m
[31m-[m
[31m-    this._options && $.each(this._options, function (key, value) {[m
[31m-      if (defaults[key] != value) options[key] = value[m
[31m-    })[m
[32m+[m[32mangular.module('ui.router.state').provider('$view', $ViewProvider);[m
 [m
[31m-    return options[m
[31m-  }[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc object[m
[32m+[m[32m * @name ui.router.state.$uiViewScrollProvider[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Provider that returns the {@link ui.router.state.$uiViewScroll} service function.[m
[32m+[m[32m */[m
[32m+[m[32mfunction $ViewScrollProvider() {[m
 [m
[31m-  Tooltip.prototype.enter = function (obj) {[m
[31m-    var self = obj instanceof this.constructor ?[m
[31m-      obj : $(obj.currentTarget).data('bs.' + this.type)[m
[32m+[m[32m  var useAnchorScroll = false;[m
 [m
[31m-    if (self && self.$tip && self.$tip.is(':visible')) {[m
[31m-      self.hoverState = 'in'[m
[31m-      return[m
[31m-    }[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc function[m
[32m+[m[32m   * @name ui.router.state.$uiViewScrollProvider#useAnchorScroll[m
[32m+[m[32m   * @methodOf ui.router.state.$uiViewScrollProvider[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * Reverts back to using the core [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll) service for[m
[32m+[m[32m   * scrolling based on the url anchor.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.useAnchorScroll = function () {[m
[32m+[m[32m    useAnchorScroll = true;[m
[32m+[m[32m  };[m
 [m
[31m-    if (!self) {[m
[31m-      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())[m
[31m-      $(obj.currentTarget).data('bs.' + this.type, self)[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @ngdoc object[m
[32m+[m[32m   * @name ui.router.state.$uiViewScroll[m
[32m+[m[32m   *[m
[32m+[m[32m   * @requires $anchorScroll[m
[32m+[m[32m   * @requires $timeout[m
[32m+[m[32m   *[m
[32m+[m[32m   * @description[m
[32m+[m[32m   * When called with a jqLite element, it scrolls the element into view (after a[m
[32m+[m[32m   * `$timeout` so the DOM has time to refresh).[m
[32m+[m[32m   *[m
[32m+[m[32m   * If you prefer to rely on `$anchorScroll` to scroll the view to the anchor,[m
[32m+[m[32m   * this can be enabled by calling {@link ui.router.state.$uiViewScrollProvider#methods_useAnchorScroll `$uiViewScrollProvider.useAnchorScroll()`}.[m
[32m+[m[32m   */[m
[32m+[m[32m  this.$get = ['$anchorScroll', '$timeout', function ($anchorScroll, $timeout) {[m
[32m+[m[32m    if (useAnchorScroll) {[m
[32m+[m[32m      return $anchorScroll;[m
     }[m
 [m
[31m-    clearTimeout(self.timeout)[m
[32m+[m[32m    return function ($element) {[m
[32m+[m[32m      return $timeout(function () {[m
[32m+[m[32m        $element[0].scrollIntoView();[m
[32m+[m[32m      }, 0, false);[m
[32m+[m[32m    };[m
[32m+[m[32m  }];[m
[32m+[m[32m}[m
 [m
[31m-    self.hoverState = 'in'[m
[32m+[m[32mangular.module('ui.router.state').provider('$uiViewScroll', $ViewScrollProvider);[m
 [m
[31m-    if (!self.options.delay || !self.options.delay.show) return self.show()[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc directive[m
[32m+[m[32m * @name ui.router.state.directive:ui-view[m
[32m+[m[32m *[m
[32m+[m[32m * @requires ui.router.state.$state[m
[32m+[m[32m * @requires $compile[m
[32m+[m[32m * @requires $controller[m
[32m+[m[32m * @requires $injector[m
[32m+[m[32m * @requires ui.router.state.$uiViewScroll[m
[32m+[m[32m * @requires $document[m
[32m+[m[32m *[m
[32m+[m[32m * @restrict ECA[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * The ui-view directive tells $state where to place your templates.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {string=} name A view name. The name should be unique amongst the other views in the[m
[32m+[m[32m * same state. You can have views of the same name that live in different states.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {string=} autoscroll It allows you to set the scroll behavior of the browser window[m
[32m+[m[32m * when a view is populated. By default, $anchorScroll is overridden by ui-router's custom scroll[m
[32m+[m[32m * service, {@link ui.router.state.$uiViewScroll}. This custom service let's you[m
[32m+[m[32m * scroll ui-view elements into view when they are populated during a state activation.[m
[32m+[m[32m *[m
[32m+[m[32m * *Note: To revert back to old [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll)[m
[32m+[m[32m * functionality, call `$uiViewScrollProvider.useAnchorScroll()`.*[m
[32m+[m[32m *[m
[32m+[m[32m * @param {string=} onload Expression to evaluate whenever the view updates.[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @example[m
[32m+[m[32m * A view can be unnamed or named.[m[41m [m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <!-- Unnamed -->[m
[32m+[m[32m * <div ui-view></div>[m[41m [m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * <!-- Named -->[m
[32m+[m[32m * <div ui-view="viewName"></div>[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m
[32m+[m[32m * You can only have one unnamed view within any template (or root html). If you are only using a[m[41m [m
[32m+[m[32m * single view and it is unnamed then you can populate it like so:[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <div ui-view></div>[m[41m [m
[32m+[m[32m * $stateProvider.state("home", {[m
[32m+[m[32m *   template: "<h1>HELLO!</h1>"[m
[32m+[m[32m * })[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * The above is a convenient shortcut equivalent to specifying your view explicitly with the {@link ui.router.state.$stateProvider#views `views`}[m
[32m+[m[32m * config property, by name, in this case an empty name:[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * $stateProvider.state("home", {[m
[32m+[m[32m *   views: {[m
[32m+[m[32m *     "": {[m
[32m+[m[32m *       template: "<h1>HELLO!</h1>"[m
[32m+[m[32m *     }[m
[32m+[m[32m *   }[m[41m    [m
[32m+[m[32m * })[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * But typically you'll only use the views property if you name your view or have more than one view[m[41m [m
[32m+[m[32m * in the same template. There's not really a compelling reason to name a view if its the only one,[m[41m [m
[32m+[m[32m * but you could if you wanted, like so:[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <div ui-view="main"></div>[m
[32m+[m[32m * </pre>[m[41m [m
[32m+[m[32m * <pre>[m
[32m+[m[32m * $stateProvider.state("home", {[m
[32m+[m[32m *   views: {[m
[32m+[m[32m *     "main": {[m
[32m+[m[32m *       template: "<h1>HELLO!</h1>"[m
[32m+[m[32m *     }[m
[32m+[m[32m *   }[m[41m    [m
[32m+[m[32m * })[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * Really though, you'll use views to set up multiple views:[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <div ui-view></div>[m
[32m+[m[32m * <div ui-view="chart"></div>[m[41m [m
[32m+[m[32m * <div ui-view="data"></div>[m[41m [m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * <pre>[m
[32m+[m[32m * $stateProvider.state("home", {[m
[32m+[m[32m *   views: {[m
[32m+[m[32m *     "": {[m
[32m+[m[32m *       template: "<h1>HELLO!</h1>"[m
[32m+[m[32m *     },[m
[32m+[m[32m *     "chart": {[m
[32m+[m[32m *       template: "<chart_thing/>"[m
[32m+[m[32m *     },[m
[32m+[m[32m *     "data": {[m
[32m+[m[32m *       template: "<data_thing/>"[m
[32m+[m[32m *     }[m
[32m+[m[32m *   }[m[41m    [m
[32m+[m[32m * })[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m
[32m+[m[32m * Examples for `autoscroll`:[m
[32m+[m[32m *[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <!-- If autoscroll present with no expression,[m
[32m+[m[32m *      then scroll ui-view into view -->[m
[32m+[m[32m * <ui-view autoscroll/>[m
[32m+[m[32m *[m
[32m+[m[32m * <!-- If autoscroll present with valid expression,[m
[32m+[m[32m *      then scroll ui-view into view if expression evaluates to true -->[m
[32m+[m[32m * <ui-view autoscroll='true'/>[m
[32m+[m[32m * <ui-view autoscroll='false'/>[m
[32m+[m[32m * <ui-view autoscroll='scopeVariable'/>[m
[32m+[m[32m * </pre>[m
[32m+[m[32m */[m
[32m+[m[32m$ViewDirective.$inject = ['$state', '$injector', '$uiViewScroll', '$interpolate'];[m
[32m+[m[32mfunction $ViewDirective(   $state,   $injector,   $uiViewScroll,   $interpolate) {[m
 [m
[31m-    self.timeout = setTimeout(function () {[m
[31m-      if (self.hoverState == 'in') self.show()[m
[31m-    }, self.options.delay.show)[m
[32m+[m[32m  function getService() {[m
[32m+[m[32m    return ($injector.has) ? function(service) {[m
[32m+[m[32m      return $injector.has(service) ? $injector.get(service) : null;[m
[32m+[m[32m    } : function(service) {[m
[32m+[m[32m      try {[m
[32m+[m[32m        return $injector.get(service);[m
[32m+[m[32m      } catch (e) {[m
[32m+[m[32m        return null;[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
   }[m
 [m
[31m-  Tooltip.prototype.leave = function (obj) {[m
[31m-    var self = obj instanceof this.constructor ?[m
[31m-      obj : $(obj.currentTarget).data('bs.' + this.type)[m
[32m+[m[32m  var service = getService(),[m
[32m+[m[32m      $animator = service('$animator'),[m
[32m+[m[32m      $animate = service('$animate');[m
 [m
[31m-    if (!self) {[m
[31m-      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())[m
[31m-      $(obj.currentTarget).data('bs.' + this.type, self)[m
[31m-    }[m
[32m+[m[32m  // Returns a set of DOM manipulation functions based on which Angular version[m
[32m+[m[32m  // it should use[m
[32m+[m[32m  function getRenderer(attrs, scope) {[m
[32m+[m[32m    var statics = function() {[m
[32m+[m[32m      return {[m
[32m+[m[32m        enter: function (element, target, cb) { target.after(element); cb(); },[m
[32m+[m[32m        leave: function (element, cb) { element.remove(); cb(); }[m
[32m+[m[32m      };[m
[32m+[m[32m    };[m
 [m
[31m-    clearTimeout(self.timeout)[m
[32m+[m[32m    if ($animate) {[m
[32m+[m[32m      return {[m
[32m+[m[32m        enter: function(element, target, cb) {[m
[32m+[m[32m          var promise = $animate.enter(element, null, target, cb);[m
[32m+[m[32m          if (promise && promise.then) promise.then(cb);[m
[32m+[m[32m        },[m
[32m+[m[32m        leave: function(element, cb) {[m
[32m+[m[32m          var promise = $animate.leave(element, cb);[m
[32m+[m[32m          if (promise && promise.then) promise.then(cb);[m
[32m+[m[32m        }[m
[32m+[m[32m      };[m
[32m+[m[32m    }[m
 [m
[31m-    self.hoverState = 'out'[m
[32m+[m[32m    if ($animator) {[m
[32m+[m[32m      var animate = $animator && $animator(scope, attrs);[m
 [m
[31m-    if (!self.options.delay || !self.options.delay.hide) return self.hide()[m
[32m+[m[32m      return {[m
[32m+[m[32m        enter: function(element, target, cb) {animate.enter(element, null, target); cb(); },[m
[32m+[m[32m        leave: function(element, cb) { animate.leave(element); cb(); }[m
[32m+[m[32m      };[m
[32m+[m[32m    }[m
 [m
[31m-    self.timeout = setTimeout(function () {[m
[31m-      if (self.hoverState == 'out') self.hide()[m
[31m-    }, self.options.delay.hide)[m
[32m+[m[32m    return statics();[m
   }[m
 [m
[31m-  Tooltip.prototype.show = function () {[m
[31m-    var e = $.Event('show.bs.' + this.type)[m
[31m-[m
[31m-    if (this.hasContent() && this.enabled) {[m
[31m-      this.$element.trigger(e)[m
[32m+[m[32m  var directive = {[m
[32m+[m[32m    restrict: 'ECA',[m
[32m+[m[32m    terminal: true,[m
[32m+[m[32m    priority: 400,[m
[32m+[m[32m    transclude: 'element',[m
[32m+[m[32m    compile: function (tElement, tAttrs, $transclude) {[m
[32m+[m[32m      return function (scope, $element, attrs) {[m
[32m+[m[32m        var previousEl, currentEl, currentScope, latestLocals,[m
[32m+[m[32m            onloadExp     = attrs.onload || '',[m
[32m+[m[32m            autoScrollExp = attrs.autoscroll,[m
[32m+[m[32m            renderer      = getRenderer(attrs, scope);[m
 [m
[31m-      var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0])[m
[31m-      if (e.isDefaultPrevented() || !inDom) return[m
[31m-      var that = this[m
[32m+[m[32m        scope.$on('$stateChangeSuccess', function() {[m
[32m+[m[32m          updateView(false);[m
[32m+[m[32m        });[m
[32m+[m[32m        scope.$on('$viewContentLoading', function() {[m
[32m+[m[32m          updateView(false);[m
[32m+[m[32m        });[m
 [m
[31m-      var $tip = this.tip()[m
[32m+[m[32m        updateView(true);[m
 [m
[31m-      var tipId = this.getUID(this.type)[m
[32m+[m[32m        function cleanupLastView() {[m
[32m+[m[32m          if (previousEl) {[m
[32m+[m[32m            previousEl.remove();[m
[32m+[m[32m            previousEl = null;[m
[32m+[m[32m          }[m
 [m
[31m-      this.setContent()[m
[31m-      $tip.attr('id', tipId)[m
[31m-      this.$element.attr('aria-describedby', tipId)[m
[32m+[m[32m          if (currentScope) {[m
[32m+[m[32m            currentScope.$destroy();[m
[32m+[m[32m            currentScope = null;[m
[32m+[m[32m          }[m
 [m
[31m-      if (this.options.animation) $tip.addClass('fade')[m
[32m+[m[32m          if (currentEl) {[m
[32m+[m[32m            renderer.leave(currentEl, function() {[m
[32m+[m[32m              previousEl = null;[m
[32m+[m[32m            });[m
 [m
[31m-      var placement = typeof this.options.placement == 'function' ?[m
[31m-        this.options.placement.call(this, $tip[0], this.$element[0]) :[m
[31m-        this.options.placement[m
[32m+[m[32m            previousEl = currentEl;[m
[32m+[m[32m            currentEl = null;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
 [m
[31m-      var autoToken = /\s?auto?\s?/i[m
[31m-      var autoPlace = autoToken.test(placement)[m
[31m-      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'[m
[32m+[m[32m        function updateView(firstTime) {[m
[32m+[m[32m          var newScope,[m
[32m+[m[32m              name            = getUiViewName(scope, attrs, $element, $interpolate),[m
[32m+[m[32m              previousLocals  = name && $state.$current && $state.$current.locals[name];[m
 [m
[31m-      $tip[m
[31m-        .detach()[m
[31m-        .css({ top: 0, left: 0, display: 'block' })[m
[31m-        .addClass(placement)[m
[31m-        .data('bs.' + this.type, this)[m
[32m+[m[32m          if (!firstTime && previousLocals === latestLocals) return; // nothing to do[m
[32m+[m[32m          newScope = scope.$new();[m
[32m+[m[32m          latestLocals = $state.$current.locals[name];[m
 [m
[31m-      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)[m
[32m+[m[32m          var clone = $transclude(newScope, function(clone) {[m
[32m+[m[32m            renderer.enter(clone, $element, function onUiViewEnter() {[m
[32m+[m[32m              if(currentScope) {[m
[32m+[m[32m                currentScope.$emit('$viewContentAnimationEnded');[m
[32m+[m[32m              }[m
 [m
[31m-      var pos          = this.getPosition()[m
[31m-      var actualWidth  = $tip[0].offsetWidth[m
[31m-      var actualHeight = $tip[0].offsetHeight[m
[32m+[m[32m              if (angular.isDefined(autoScrollExp) && !autoScrollExp || scope.$eval(autoScrollExp)) {[m
[32m+[m[32m                $uiViewScroll(clone);[m
[32m+[m[32m              }[m
[32m+[m[32m            });[m
[32m+[m[32m            cleanupLastView();[m
[32m+[m[32m          });[m
 [m
[31m-      if (autoPlace) {[m
[31m-        var orgPlacement = placement[m
[31m-        var $container   = this.options.container ? $(this.options.container) : this.$element.parent()[m
[31m-        var containerDim = this.getPosition($container)[m
[32m+[m[32m          currentEl = clone;[m
[32m+[m[32m          currentScope = newScope;[m
[32m+[m[32m          /**[m
[32m+[m[32m           * @ngdoc event[m
[32m+[m[32m           * @name ui.router.state.directive:ui-view#$viewContentLoaded[m
[32m+[m[32m           * @eventOf ui.router.state.directive:ui-view[m
[32m+[m[32m           * @eventType emits on ui-view directive scope[m
[32m+[m[32m           * @description           *[m
[32m+[m[32m           * Fired once the view is **loaded**, *after* the DOM is rendered.[m
[32m+[m[32m           *[m
[32m+[m[32m           * @param {Object} event Event object.[m
[32m+[m[32m           */[m
[32m+[m[32m          currentScope.$emit('$viewContentLoaded');[m
[32m+[m[32m          currentScope.$eval(onloadExp);[m
[32m+[m[32m        }[m
[32m+[m[32m      };[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
 [m
[31m-        placement = placement == 'bottom' && pos.bottom + actualHeight > containerDim.bottom ? 'top'    :[m
[31m-                    placement == 'top'    && pos.top    - actualHeight < containerDim.top    ? 'bottom' :[m
[31m-                    placement == 'right'  && pos.right  + actualWidth  > containerDim.width  ? 'left'   :[m
[31m-                    placement == 'left'   && pos.left   - actualWidth  < containerDim.left   ? 'right'  :[m
[31m-                    placement[m
[32m+[m[32m  return directive;[m
[32m+[m[32m}[m
 [m
[31m-        $tip[m
[31m-          .removeClass(orgPlacement)[m
[31m-          .addClass(placement)[m
[31m-      }[m
[32m+[m[32m$ViewDirectiveFill.$inject = ['$compile', '$controller', '$state', '$interpolate'];[m
[32m+[m[32mfunction $ViewDirectiveFill (  $compile,   $controller,   $state,   $interpolate) {[m
[32m+[m[32m  return {[m
[32m+[m[32m    restrict: 'ECA',[m
[32m+[m[32m    priority: -400,[m
[32m+[m[32m    compile: function (tElement) {[m
[32m+[m[32m      var initial = tElement.html();[m
[32m+[m[32m      return function (scope, $element, attrs) {[m
[32m+[m[32m        var current = $state.$current,[m
[32m+[m[32m            name = getUiViewName(scope, attrs, $element, $interpolate),[m
[32m+[m[32m            locals  = current && current.locals[name];[m
 [m
[31m-      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)[m
[32m+[m[32m        if (! locals) {[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
 [m
[31m-      this.applyPlacement(calculatedOffset, placement)[m
[32m+[m[32m        $element.data('$uiView', { name: name, state: locals.$$state });[m
[32m+[m[32m        $element.html(locals.$template ? locals.$template : initial);[m
 [m
[31m-      var complete = function () {[m
[31m-        var prevHoverState = that.hoverState[m
[31m-        that.$element.trigger('shown.bs.' + that.type)[m
[31m-        that.hoverState = null[m
[32m+[m[32m        var link = $compile($element.contents());[m
 [m
[31m-        if (prevHoverState == 'out') that.leave(that)[m
[31m-      }[m
[32m+[m[32m        if (locals.$$controller) {[m
[32m+[m[32m          locals.$scope = scope;[m
[32m+[m[32m          locals.$element = $element;[m
[32m+[m[32m          var controller = $controller(locals.$$controller, locals);[m
[32m+[m[32m          if (locals.$$controllerAs) {[m
[32m+[m[32m            scope[locals.$$controllerAs] = controller;[m
[32m+[m[32m          }[m
[32m+[m[32m          $element.data('$ngControllerController', controller);[m
[32m+[m[32m          $element.children().data('$ngControllerController', controller);[m
[32m+[m[32m        }[m
 [m
[31m-      $.support.transition && this.$tip.hasClass('fade') ?[m
[31m-        $tip[m
[31m-          .one('bsTransitionEnd', complete)[m
[31m-          .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :[m
[31m-        complete()[m
[32m+[m[32m        link(scope);[m
[32m+[m[32m      };[m
     }[m
[31m-  }[m
[31m-[m
[31m-  Tooltip.prototype.applyPlacement = function (offset, placement) {[m
[31m-    var $tip   = this.tip()[m
[31m-    var width  = $tip[0].offsetWidth[m
[31m-    var height = $tip[0].offsetHeight[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
 [m
[31m-    // manually read margins because getBoundingClientRect includes difference[m
[31m-    var marginTop = parseInt($tip.css('margin-top'), 10)[m
[31m-    var marginLeft = parseInt($tip.css('margin-left'), 10)[m
[32m+[m[32m/**[m
[32m+[m[32m * Shared ui-view code for both directives:[m
[32m+[m[32m * Given scope, element, and its attributes, return the view's name[m
[32m+[m[32m */[m
[32m+[m[32mfunction getUiViewName(scope, attrs, element, $interpolate) {[m
[32m+[m[32m  var name = $interpolate(attrs.uiView || attrs.name || '')(scope);[m
[32m+[m[32m  var inherited = element.inheritedData('$uiView');[m
[32m+[m[32m  return name.indexOf('@') >= 0 ?  name :  (name + '@' + (inherited ? inherited.state.name : ''));[m
[32m+[m[32m}[m
 [m
[31m-    // we must check for NaN for ie 8/9[m
[31m-    if (isNaN(marginTop))  marginTop  = 0[m
[31m-    if (isNaN(marginLeft)) marginLeft = 0[m
[32m+[m[32mangular.module('ui.router.state').directive('uiView', $ViewDirective);[m
[32m+[m[32mangular.module('ui.router.state').directive('uiView', $ViewDirectiveFill);[m
 [m
[31m-    offset.top  = offset.top  + marginTop[m
[31m-    offset.left = offset.left + marginLeft[m
[32m+[m[32mfunction parseStateRef(ref, current) {[m
[32m+[m[32m  var preparsed = ref.match(/^\s*({[^}]*})\s*$/), parsed;[m
[32m+[m[32m  if (preparsed) ref = current + '(' + preparsed[1] + ')';[m
[32m+[m[32m  parsed = ref.replace(/\n/g, " ").match(/^([^(]+?)\s*(\((.*)\))?$/);[m
[32m+[m[32m  if (!parsed || parsed.length !== 4) throw new Error("Invalid state ref '" + ref + "'");[m
[32m+[m[32m  return { state: parsed[1], paramExpr: parsed[3] || null };[m
[32m+[m[32m}[m
 [m
[31m-    // $.fn.offset doesn't round pixel values[m
[31m-    // so we use setOffset directly with our own function B-0[m
[31m-    $.offset.setOffset($tip[0], $.extend({[m
[31m-      using: function (props) {[m
[31m-        $tip.css({[m
[31m-          top: Math.round(props.top),[m
[31m-          left: Math.round(props.left)[m
[31m-        })[m
[31m-      }[m
[31m-    }, offset), 0)[m
[32m+[m[32mfunction stateContext(el) {[m
[32m+[m[32m  var stateData = el.parent().inheritedData('$uiView');[m
 [m
[31m-    $tip.addClass('in')[m
[32m+[m[32m  if (stateData && stateData.state && stateData.state.name) {[m
[32m+[m[32m    return stateData.state;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
 [m
[31m-    // check to see if placing tip in new offset caused the tip to resize itself[m
[31m-    var actualWidth  = $tip[0].offsetWidth[m
[31m-    var actualHeight = $tip[0].offsetHeight[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc directive[m
[32m+[m[32m * @name ui.router.state.directive:ui-sref[m
[32m+[m[32m *[m
[32m+[m[32m * @requires ui.router.state.$state[m
[32m+[m[32m * @requires $timeout[m
[32m+[m[32m *[m
[32m+[m[32m * @restrict A[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * A directive that binds a link (`<a>` tag) to a state. If the state has an associated[m[41m [m
[32m+[m[32m * URL, the directive will automatically generate & update the `href` attribute via[m[41m [m
[32m+[m[32m * the {@link ui.router.state.$state#methods_href $state.href()} method. Clicking[m[41m [m
[32m+[m[32m * the link will trigger a state transition with optional parameters.[m[41m [m
[32m+[m[32m *[m
[32m+[m[32m * Also middle-clicking, right-clicking, and ctrl-clicking on the link will be[m[41m [m
[32m+[m[32m * handled natively by the browser.[m
[32m+[m[32m *[m
[32m+[m[32m * You can also use relative state paths within ui-sref, just like the relative[m[41m [m
[32m+[m[32m * paths passed to `$state.go()`. You just need to be aware that the path is relative[m
[32m+[m[32m * to the state that the link lives in, in other words the state that loaded the[m[41m [m
[32m+[m[32m * template containing the link.[m
[32m+[m[32m *[m
[32m+[m[32m * You can specify options to pass to {@link ui.router.state.$state#go $state.go()}[m
[32m+[m[32m * using the `ui-sref-opts` attribute. Options are restricted to `location`, `inherit`,[m
[32m+[m[32m * and `reload`.[m
[32m+[m[32m *[m
[32m+[m[32m * @example[m
[32m+[m[32m * Here's an example of how you'd use ui-sref and how it would compile. If you have the[m[41m [m
[32m+[m[32m * following template:[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <a ui-sref="home">Home</a> | <a ui-sref="about">About</a> | <a ui-sref="{page: 2}">Next page</a>[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * <ul>[m
[32m+[m[32m *     <li ng-repeat="contact in contacts">[m
[32m+[m[32m *         <a ui-sref="contacts.detail({ id: contact.id })">{{ contact.name }}</a>[m
[32m+[m[32m *     </li>[m
[32m+[m[32m * </ul>[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * Then the compiled html would be (assuming Html5Mode is off and current state is contacts):[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <a href="#/home" ui-sref="home">Home</a> | <a href="#/about" ui-sref="about">About</a> | <a href="#/contacts?page=2" ui-sref="{page: 2}">Next page</a>[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * <ul>[m
[32m+[m[32m *     <li ng-repeat="contact in contacts">[m
[32m+[m[32m *         <a href="#/contacts/1" ui-sref="contacts.detail({ id: contact.id })">Joe</a>[m
[32m+[m[32m *     </li>[m
[32m+[m[32m *     <li ng-repeat="contact in contacts">[m
[32m+[m[32m *         <a href="#/contacts/2" ui-sref="contacts.detail({ id: contact.id })">Alice</a>[m
[32m+[m[32m *     </li>[m
[32m+[m[32m *     <li ng-repeat="contact in contacts">[m
[32m+[m[32m *         <a href="#/contacts/3" ui-sref="contacts.detail({ id: contact.id })">Bob</a>[m
[32m+[m[32m *     </li>[m
[32m+[m[32m * </ul>[m
[32m+[m[32m *[m
[32m+[m[32m * <a ui-sref="home" ui-sref-opts="{reload: true}">Home</a>[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m
[32m+[m[32m * @param {string} ui-sref 'stateName' can be any valid absolute or relative state[m
[32m+[m[32m * @param {Object} ui-sref-opts options to pass to {@link ui.router.state.$state#go $state.go()}[m
[32m+[m[32m */[m
[32m+[m[32m$StateRefDirective.$inject = ['$state', '$timeout'];[m
[32m+[m[32mfunction $StateRefDirective($state, $timeout) {[m
[32m+[m[32m  var allowedOptions = ['location', 'inherit', 'reload', 'absolute'];[m
 [m
[31m-    if (placement == 'top' && actualHeight != height) {[m
[31m-      offset.top = offset.top + height - actualHeight[m
[31m-    }[m
[32m+[m[32m  return {[m
[32m+[m[32m    restrict: 'A',[m
[32m+[m[32m    require: ['?^uiSrefActive', '?^uiSrefActiveEq'],[m
[32m+[m[32m    link: function(scope, element, attrs, uiSrefActive) {[m
[32m+[m[32m      var ref = parseStateRef(attrs.uiSref, $state.current.name);[m
[32m+[m[32m      var params = null, url = null, base = stateContext(element) || $state.$current;[m
[32m+[m[32m      // SVGAElement does not use the href attribute, but rather the 'xlinkHref' attribute.[m
[32m+[m[32m      var hrefKind = Object.prototype.toString.call(element.prop('href')) === '[object SVGAnimatedString]' ?[m
[32m+[m[32m                 'xlink:href' : 'href';[m
[32m+[m[32m      var newHref = null, isAnchor = element.prop("tagName").toUpperCase() === "A";[m
[32m+[m[32m      var isForm = element[0].nodeName === "FORM";[m
[32m+[m[32m      var attr = isForm ? "action" : hrefKind, nav = true;[m
 [m
[31m-    var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight)[m
[32m+[m[32m      var options = { relative: base, inherit: true };[m
[32m+[m[32m      var optionsOverride = scope.$eval(attrs.uiSrefOpts) || {};[m
 [m
[31m-    if (delta.left) offset.left += delta.left[m
[31m-    else offset.top += delta.top[m
[32m+[m[32m      angular.forEach(allowedOptions, function(option) {[m
[32m+[m[32m        if (option in optionsOverride) {[m
[32m+[m[32m          options[option] = optionsOverride[option];[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
 [m
[31m-    var isVertical          = /top|bottom/.test(placement)[m
[31m-    var arrowDelta          = isVertical ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight[m
[31m-    var arrowOffsetPosition = isVertical ? 'offsetWidth' : 'offsetHeight'[m
[32m+[m[32m      var update = function(newVal) {[m
[32m+[m[32m        if (newVal) params = angular.copy(newVal);[m
[32m+[m[32m        if (!nav) return;[m
 [m
[31m-    $tip.offset(offset)[m
[31m-    this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical)[m
[31m-  }[m
[32m+[m[32m        newHref = $state.href(ref.state, params, options);[m
 [m
[31m-  Tooltip.prototype.replaceArrow = function (delta, dimension, isVertical) {[m
[31m-    this.arrow()[m
[31m-      .css(isVertical ? 'left' : 'top', 50 * (1 - delta / dimension) + '%')[m
[31m-      .css(isVertical ? 'top' : 'left', '')[m
[31m-  }[m
[32m+[m[32m        var activeDirective = uiSrefActive[1] || uiSrefActive[0];[m
[32m+[m[32m        if (activeDirective) {[m
[32m+[m[32m          activeDirective.$$addStateInfo(ref.state, params);[m
[32m+[m[32m        }[m
[32m+[m[32m        if (newHref === null) {[m
[32m+[m[32m          nav = false;[m
[32m+[m[32m          return false;[m
[32m+[m[32m        }[m
[32m+[m[32m        attrs.$set(attr, newHref);[m
[32m+[m[32m      };[m
 [m
[31m-  Tooltip.prototype.setContent = function () {[m
[31m-    var $tip  = this.tip()[m
[31m-    var title = this.getTitle()[m
[32m+[m[32m      if (ref.paramExpr) {[m
[32m+[m[32m        scope.$watch(ref.paramExpr, function(newVal, oldVal) {[m
[32m+[m[32m          if (newVal !== params) update(newVal);[m
[32m+[m[32m        }, true);[m
[32m+[m[32m        params = angular.copy(scope.$eval(ref.paramExpr));[m
[32m+[m[32m      }[m
[32m+[m[32m      update();[m
 [m
[31m-    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)[m
[31m-    $tip.removeClass('fade in top bottom left right')[m
[31m-  }[m
[32m+[m[32m      if (isForm) return;[m
 [m
[31m-  Tooltip.prototype.hide = function (callback) {[m
[31m-    var that = this[m
[31m-    var $tip = $(this.$tip)[m
[31m-    var e    = $.Event('hide.bs.' + this.type)[m
[32m+[m[32m      element.bind("click", function(e) {[m
[32m+[m[32m        var button = e.which || e.button;[m
[32m+[m[32m        if ( !(button > 1 || e.ctrlKey || e.metaKey || e.shiftKey || element.attr('target')) ) {[m
[32m+[m[32m          // HACK: This is to allow ng-clicks to be processed before the transition is initiated:[m
[32m+[m[32m          var transition = $timeout(function() {[m
[32m+[m[32m            $state.go(ref.state, params, options);[m
[32m+[m[32m          });[m
[32m+[m[32m          e.preventDefault();[m
 [m
[31m-    function complete() {[m
[31m-      if (that.hoverState != 'in') $tip.detach()[m
[31m-      that.$element[m
[31m-        .removeAttr('aria-describedby')[m
[31m-        .trigger('hidden.bs.' + that.type)[m
[31m-      callback && callback()[m
[32m+[m[32m          // if the state has no URL, ignore one preventDefault from the <a> directive.[m
[32m+[m[32m          var ignorePreventDefaultCount = isAnchor && !newHref ? 1: 0;[m
[32m+[m[32m          e.preventDefault = function() {[m
[32m+[m[32m            if (ignorePreventDefaultCount-- <= 0)[m
[32m+[m[32m              $timeout.cancel(transition);[m
[32m+[m[32m          };[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
     }[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
 [m
[31m-    this.$element.trigger(e)[m
[31m-[m
[31m-    if (e.isDefaultPrevented()) return[m
[31m-[m
[31m-    $tip.removeClass('in')[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc directive[m
[32m+[m[32m * @name ui.router.state.directive:ui-sref-active[m
[32m+[m[32m *[m
[32m+[m[32m * @requires ui.router.state.$state[m
[32m+[m[32m * @requires ui.router.state.$stateParams[m
[32m+[m[32m * @requires $interpolate[m
[32m+[m[32m *[m
[32m+[m[32m * @restrict A[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * A directive working alongside ui-sref to add classes to an element when the[m
[32m+[m[32m * related ui-sref directive's state is active, and removing them when it is inactive.[m
[32m+[m[32m * The primary use-case is to simplify the special appearance of navigation menus[m
[32m+[m[32m * relying on `ui-sref`, by having the "active" state's menu button appear different,[m
[32m+[m[32m * distinguishing it from the inactive menu items.[m
[32m+[m[32m *[m
[32m+[m[32m * ui-sref-active can live on the same element as ui-sref or on a parent element. The first[m
[32m+[m[32m * ui-sref-active found at the same level or above the ui-sref will be used.[m
[32m+[m[32m *[m
[32m+[m[32m * Will activate when the ui-sref's target state or any child state is active. If you[m
[32m+[m[32m * need to activate only when the ui-sref target state is active and *not* any of[m
[32m+[m[32m * it's children, then you will use[m
[32m+[m[32m * {@link ui.router.state.directive:ui-sref-active-eq ui-sref-active-eq}[m
[32m+[m[32m *[m
[32m+[m[32m * @example[m
[32m+[m[32m * Given the following template:[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <ul>[m
[32m+[m[32m *   <li ui-sref-active="active" class="item">[m
[32m+[m[32m *     <a href ui-sref="app.user({user: 'bilbobaggins'})">@bilbobaggins</a>[m
[32m+[m[32m *   </li>[m
[32m+[m[32m * </ul>[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m
[32m+[m[32m *[m
[32m+[m[32m * When the app state is "app.user" (or any children states), and contains the state parameter "user" with value "bilbobaggins",[m
[32m+[m[32m * the resulting HTML will appear as (note the 'active' class):[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <ul>[m
[32m+[m[32m *   <li ui-sref-active="active" class="item active">[m
[32m+[m[32m *     <a ui-sref="app.user({user: 'bilbobaggins'})" href="/users/bilbobaggins">@bilbobaggins</a>[m
[32m+[m[32m *   </li>[m
[32m+[m[32m * </ul>[m
[32m+[m[32m * </pre>[m
[32m+[m[32m *[m
[32m+[m[32m * The class name is interpolated **once** during the directives link time (any further changes to the[m
[32m+[m[32m * interpolated value are ignored).[m
[32m+[m[32m *[m
[32m+[m[32m * Multiple classes may be specified in a space-separated format:[m
[32m+[m[32m * <pre>[m
[32m+[m[32m * <ul>[m
[32m+[m[32m *   <li ui-sref-active='class1 class2 class3'>[m
[32m+[m[32m *     <a ui-sref="app.user">link</a>[m
[32m+[m[32m *   </li>[m
[32m+[m[32m * </ul>[m
[32m+[m[32m * </pre>[m
[32m+[m[32m */[m
 [m
[31m-    $.support.transition && $tip.hasClass('fade') ?[m
[31m-      $tip[m
[31m-        .one('bsTransitionEnd', complete)[m
[31m-        .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :[m
[31m-      complete()[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc directive[m
[32m+[m[32m * @name ui.router.state.directive:ui-sref-active-eq[m
[32m+[m[32m *[m
[32m+[m[32m * @requires ui.router.state.$state[m
[32m+[m[32m * @requires ui.router.state.$stateParams[m
[32m+[m[32m * @requires $interpolate[m
[32m+[m[32m *[m
[32m+[m[32m * @restrict A[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * The same as {@link ui.router.state.directive:ui-sref-active ui-sref-active} but will only activate[m
[32m+[m[32m * when the exact target state used in the `ui-sref` is active; no child states.[m
[32m+[m[32m *[m
[32m+[m[32m */[m
[32m+[m[32m$StateRefActiveDirective.$inject = ['$state', '$stateParams', '$interpolate'];[m
[32m+[m[32mfunction $StateRefActiveDirective($state, $stateParams, $interpolate) {[m
[32m+[m[32m  return  {[m
[32m+[m[32m    restrict: "A",[m
[32m+[m[32m    controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {[m
[32m+[m[32m      var states = [], activeClass;[m
 [m
[31m-    this.hoverState = null[m
[32m+[m[32m      // There probably isn't much point in $observing this[m
[32m+[m[32m      // uiSrefActive and uiSrefActiveEq share the same directive object with some[m
[32m+[m[32m      // slight difference in logic routing[m
[32m+[m[32m      activeClass = $interpolate($attrs.uiSrefActiveEq || $attrs.uiSrefActive || '', false)($scope);[m
 [m
[31m-    return this[m
[31m-  }[m
[32m+[m[32m      // Allow uiSref to communicate with uiSrefActive[Equals][m
[32m+[m[32m      this.$$addStateInfo = function (newState, newParams) {[m
[32m+[m[32m        var state = $state.get(newState, stateContext($element));[m
 [m
[31m-  Tooltip.prototype.fixTitle = function () {[m
[31m-    var $e = this.$element[m
[31m-    if ($e.attr('title') || typeof ($e.attr('data-original-title')) != 'string') {[m
[31m-      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')[m
[31m-    }[m
[31m-  }[m
[32m+[m[32m        states.push({[m
[32m+[m[32m          state: state || { name: newState },[m
[32m+[m[32m          params: newParams[m
[32m+[m[32m        });[m
 [m
[31m-  Tooltip.prototype.hasContent = function () {[m
[31m-    return this.getTitle()[m
[31m-  }[m
[32m+[m[32m        update();[m
[32m+[m[32m      };[m
 [m
[31m-  Tooltip.prototype.getPosition = function ($element) {[m
[31m-    $element   = $element || this.$element[m
[32m+[m[32m      $scope.$on('$stateChangeSuccess', update);[m
 [m
[31m-    var el     = $element[0][m
[31m-    var isBody = el.tagName == 'BODY'[m
[32m+[m[32m      // Update route state[m
[32m+[m[32m      function update() {[m
[32m+[m[32m        if (anyMatch()) {[m
[32m+[m[32m          $element.addClass(activeClass);[m
[32m+[m[32m        } else {[m
[32m+[m[32m          $element.removeClass(activeClass);[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
 [m
[31m-    var elRect    = el.getBoundingClientRect()[m
[31m-    if (elRect.width == null) {[m
[31m-      // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093[m
[31m-      elRect = $.extend({}, elRect, { width: elRect.right - elRect.left, height: elRect.bottom - elRect.top })[m
[31m-    }[m
[31m-    var elOffset  = isBody ? { top: 0, left: 0 } : $element.offset()[m
[31m-    var scroll    = { scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop() }[m
[31m-    var outerDims = isBody ? { width: $(window).width(), height: $(window).height() } : null[m
[32m+[m[32m      function anyMatch() {[m
[32m+[m[32m        for (var i = 0; i < states.length; i++) {[m
[32m+[m[32m          if (isMatch(states[i].state, states[i].params)) {[m
[32m+[m[32m            return true;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m        return false;[m
[32m+[m[32m      }[m
 [m
[31m-    return $.extend({}, elRect, scroll, outerDims, elOffset)[m
[31m-  }[m
[32m+[m[32m      function isMatch(state, params) {[m
[32m+[m[32m        if (typeof $attrs.uiSrefActiveEq !== 'undefined') {[m
[32m+[m[32m          return $state.is(state.name, params);[m
[32m+[m[32m        } else {[m
[32m+[m[32m          return $state.includes(state.name, params);[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }][m
[32m+[m[32m  };[m
[32m+[m[32m}[m
 [m
[31m-  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {[m
[31m-    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2 } :[m
[31m-           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2 } :[m
[31m-           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :[m
[31m-        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width }[m
[32m+[m[32mangular.module('ui.router.state')[m
[32m+[m[32m  .directive('uiSref', $StateRefDirective)[m
[32m+[m[32m  .directive('uiSrefActive', $StateRefActiveDirective)[m
[32m+[m[32m  .directive('uiSrefActiveEq', $StateRefActiveDirective);[m
 [m
[31m-  }[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc filter[m
[32m+[m[32m * @name ui.router.state.filter:isState[m
[32m+[m[32m *[m
[32m+[m[32m * @requires ui.router.state.$state[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Translates to {@link ui.router.state.$state#methods_is $state.is("stateName")}.[m
[32m+[m[32m */[m
[32m+[m[32m$IsStateFilter.$inject = ['$state'];[m
[32m+[m[32mfunction $IsStateFilter($state) {[m
[32m+[m[32m  var isFilter = function (state) {[m
[32m+[m[32m    return $state.is(state);[m
[32m+[m[32m  };[m
[32m+[m[32m  isFilter.$stateful = true;[m
[32m+[m[32m  return isFilter;[m
[32m+[m[32m}[m
 [m
[31m-  Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {[m
[31m-    var delta = { top: 0, left: 0 }[m
[31m-    if (!this.$viewport) return delta[m
[32m+[m[32m/**[m
[32m+[m[32m * @ngdoc filter[m
[32m+[m[32m * @name ui.router.state.filter:includedByState[m
[32m+[m[32m *[m
[32m+[m[32m * @requires ui.router.state.$state[m
[32m+[m[32m *[m
[32m+[m[32m * @description[m
[32m+[m[32m * Translates to {@link ui.router.state.$state#methods_includes $state.includes('fullOrPartialStateName')}.[m
[32m+[m[32m */[m
[32m+[m[32m$IncludedByStateFilter.$inject = ['$state'];[m
[32m+[m[32mfunction $IncludedByStateFilter($state) {[m
[32m+[m[32m  var includesFilter = function (state) {[m
[32m+[m[32m    return $state.includes(state);[m
[32m+[m[32m  };[m
[32m+[m[32m  includesFilter.$stateful = true;[m
[32m+[m[32m  return  includesFilter;[m
[32m+[m[32m}[m
 [m
[31m-    var viewportPadding = this.options.viewport && this.options.viewport.padding || 0[m
[31m-    var viewportDimensions = this.getPosition(this.$viewport)[m
[32m+[m[32mangular.module('ui.router.state')[m
[32m+[m[32m  .filter('isState', $IsStateFilter)[m
[32m+[m[32m  .filter('includedByState', $IncludedByStateFilter);[m
[32m+[m[32m})(window, window.angular);[m
[32m+[m[32m/*![m
[32m+[m[32mangular-xeditable - 0.1.9[m
[32m+[m[32mEdit-in-place for angular.js[m
[32m+[m[32mBuild date: 2015-03-26[m[41m [m
[32m+[m[32m*/[m
[32m+[m[32m/**[m
[32m+[m[32m * Angular-xeditable module[m[41m [m
[32m+[m[32m *[m
[32m+[m[32m */[m
[32m+[m[32mangular.module('xeditable', [])[m
 [m
[31m-    if (/right|left/.test(placement)) {[m
[31m-      var topEdgeOffset    = pos.top - viewportPadding - viewportDimensions.scroll[m
[31m-      var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight[m
[31m-      if (topEdgeOffset < viewportDimensions.top) { // top overflow[m
[31m-        delta.top = viewportDimensions.top - topEdgeOffset[m
[31m-      } else if (bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height) { // bottom overflow[m
[31m-        delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset[m
[31m-      }[m
[31m-    } else {[m
[31m-      var leftEdgeOffset  = pos.left - viewportPadding[m
[31m-      var rightEdgeOffset = pos.left + viewportPadding + actualWidth[m
[31m-      if (leftEdgeOffset < viewportDimensions.left) { // left overflow[m
[31m-        delta.left = viewportDimensions.left - leftEdgeOffset[m
[31m-      } else if (rightEdgeOffset > viewportDimensions.width) { // right overflow[m
[31m-        delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset[m
[31m-      }[m
[31m-    }[m
 [m
[31m-    return delta[m
[31m-  }[m
[32m+[m[32m/**[m
[32m+[m[32m * Default options.[m[41m [m
[32m+[m[32m *[m
[32m+[m[32m * @namespace editable-options[m
[32m+[m[32m */[m
[32m+[m[32m//todo: maybe better have editableDefaults, not options...[m
[32m+[m[32m.value('editableOptions', {[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Theme. Possible values `bs3`, `bs2`, `default`.[m
[32m+[m[32m   *[m[41m [m
[32m+[m[32m   * @var {string} theme[m
[32m+[m[32m   * @memberOf editable-options[m
[32m+[m[32m   */[m[41m  [m
[32m+[m[32m  theme: 'default',[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Icon Set. Possible values `font-awesome`, `default`.[m
[32m+[m[32m   *[m[41m [m
[32m+[m[32m   * @var {string} icon set[m
[32m+[m[32m   * @memberOf editable-options[m
[32m+[m[32m   */[m[41m  [m
[32m+[m[32m  icon_set: 'default',[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Whether to show buttons for single editalbe element.[m[41m  [m
[32m+[m[32m   * Possible values `right` (default), `no`.[m
[32m+[m[32m   *[m[41m [m
[32m+[m[32m   * @var {string} buttons[m
[32m+[m[32m   * @memberOf editable-options[m
[32m+[m[32m   */[m[41m    [m
[32m+[m[32m  buttons: 'right',[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Default value for `blur` attribute of single editable element.[m[41m  [m
[32m+[m[32m   * Can be `cancel|submit|ignore`.[m
[32m+[m[32m   *[m[41m [m
[32m+[m[32m   * @var {string} blurElem[m
[32m+[m[32m   * @memberOf editable-options[m
[32m+[m[32m   */[m
[32m+[m[32m  blurElem: 'cancel',[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Default value for `blur` attribute of editable form.[m[41m  [m
[32m+[m[32m   * Can be `cancel|submit|ignore`.[m
[32m+[m[32m   *[m[41m [m
[32m+[m[32m   * @var {string} blurForm[m
[32m+[m[32m   * @memberOf editable-options[m
[32m+[m[32m   */[m
[32m+[m[32m  blurForm: 'ignore',[m
[32m+[m[32m  /**[m
[32m+[m[32m   * How input elements get activated. Possible values: `focus|select|none`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @var {string} activate[m
[32m+[m[32m   * @memberOf editable-options[m
[32m+[m[32m   */[m
[32m+[m[32m  activate: 'focus',[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Whether to disable x-editable. Can be overloaded on each element.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @var {boolean} isDisabled[m
[32m+[m[32m   * @memberOf editable-options[m
[32m+[m[32m   */[m
[32m+[m[32m   isDisabled: false,[m
[32m+[m[41m  [m
[32m+[m[32m  /**[m
[32m+[m[32m   * Event, on which the edit mode gets activated.[m[41m [m
[32m+[m[32m   * Can be any event.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @var {string} activationEvent[m
[32m+[m[32m   * @memberOf editable-options[m
[32m+[m[32m   */[m
[32m+[m[32m  activationEvent: 'click'[m
 [m
[31m-  Tooltip.prototype.getTitle = function () {[m
[31m-    var title[m
[31m-    var $e = this.$element[m
[31m-    var o  = this.options[m
[32m+[m[32m});[m
 [m
[31m-    title = $e.attr('data-original-title')[m
[31m-      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)[m
[32m+[m[32m/*[m
[32m+[m[32mAngular-ui bootstrap datepicker[m
[32m+[m[32mhttp://angular-ui.github.io/bootstrap/#/datepicker[m
[32m+[m[32m*/[m
[32m+[m[32mangular.module('xeditable').directive('editableBsdate', ['editableDirectiveFactory',[m
[32m+[m	[32mfunction(editableDirectiveFactory) {[m
[32m+[m		[32mreturn editableDirectiveFactory({[m
[32m+[m			[32mdirectiveName: 'editableBsdate',[m
[32m+[m			[32minputTpl: '<div></div>',[m
[32m+[m			[32mrender: function() {[m
[32m+[m				[32m/** This basically renders a datepicker as in the example shown in[m[41m [m
[32m+[m				[32m**  http://angular-ui.github.io/bootstrap/#/datepicker[m
[32m+[m				[32m**  The attributes are all the same as in the bootstrap-ui datepicker with e- as prefix[m
[32m+[m				[32m**/[m
[32m+[m				[32mthis.parent.render.call(this);[m
 [m
[31m-    return title[m
[31m-  }[m
[32m+[m				[32mvar inputDatePicker = angular.element('<input type="text" class="form-control" ng-model="$data"/>');[m
[32m+[m				[32mvar buttonDatePicker = angular.element('<button type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>');[m
[32m+[m				[32mvar buttonWrapper = angular.element('<span class="input-group-btn"></span>');[m
 [m
[31m-  Tooltip.prototype.getUID = function (prefix) {[m
[31m-    do prefix += ~~(Math.random() * 1000000)[m
[31m-    while (document.getElementById(prefix))[m
[31m-    return prefix[m
[31m-  }[m
[32m+[m				[32minputDatePicker.attr('datepicker-popup', this.attrs.eDatepickerPopupXEditable || 'yyyy/MM/dd' );[m
[32m+[m				[32minputDatePicker.attr('is-open', this.attrs.eIsOpen);[m
[32m+[m				[32minputDatePicker.attr('date-disabled', this.attrs.eDateDisabled);[m
[32m+[m				[32minputDatePicker.attr('datepicker-popup', this.attrs.eDatepickerPopup);[m
[32m+[m				[32minputDatePicker.attr('datepicker-mode', this.attrs.eDatepickerMode || 'day');[m
[32m+[m				[32minputDatePicker.attr('min-date', this.attrs.eMinDate);[m
[32m+[m				[32minputDatePicker.attr('max-date', this.attrs.eMaxDate);[m
[32m+[m				[32minputDatePicker.attr('show-weeks', this.attrs.eShowWeeks || true);[m
[32m+[m				[32minputDatePicker.attr('starting-day', this.attrs.eStartingDay || 0);[m
[32m+[m				[32minputDatePicker.attr('init-date', this.attrs.eInitDate || new Date());[m
[32m+[m				[32minputDatePicker.attr('min-mode', this.attrs.eMinMode || 'day');[m
[32m+[m				[32minputDatePicker.attr('max-mode', this.attrs.eMaxMode || 'year');[m
[32m+[m				[32minputDatePicker.attr('format-day', this.attrs.eFormatDay || 'dd');[m
[32m+[m				[32minputDatePicker.attr('format-month', this.attrs.eFormatMonth || 'MMMM');[m
[32m+[m				[32minputDatePicker.attr('format-year', this.attrs.eFormatYear || 'yyyy');[m
[32m+[m				[32minputDatePicker.attr('format-day-header', this.attrs.eFormatDayHeader || 'EEE');[m
[32m+[m				[32minputDatePicker.attr('format-day-title', this.attrs.eFormatDayTitle || 'MMMM yyyy');[m
[32m+[m				[32minputDatePicker.attr('format-month-title', this.attrs.eFormatMonthTitle || 'yyyy');[m
[32m+[m				[32minputDatePicker.attr('year-range', this.attrs.eYearRange || 20);[m
[32m+[m				[32minputDatePicker.attr('show-button-bar', this.attrs.eShowButtonBar || true);[m
[32m+[m				[32minputDatePicker.attr('current-text', this.attrs.eCurrentText || 'Today');[m
[32m+[m				[32minputDatePicker.attr('clear-text', this.attrs.eClearText || 'Clear');[m
[32m+[m				[32minputDatePicker.attr('close-text', this.attrs.eCloseText || 'Done');[m
[32m+[m				[32minputDatePicker.attr('close-on-date-selection', this.attrs.eCloseOnDateSelection || true);[m
[32m+[m				[32minputDatePicker.attr('date-picker-append-to-body', this.attrs.eDatePickerAppendToBody || false);[m
[32m+[m				[32minputDatePicker.attr('date-disabled', this.attrs.eDateDisabled);[m
 [m
[31m-  Tooltip.prototype.tip = function () {[m
[31m-    return (this.$tip = this.$tip || $(this.options.template))[m
[31m-  }[m
[32m+[m				[32mbuttonDatePicker.attr('ng-click',this.attrs.eNgClick);[m
 [m
[31m-  Tooltip.prototype.arrow = function () {[m
[31m-    return (this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow'))[m
[31m-  }[m
[32m+[m				[32mbuttonWrapper.append(buttonDatePicker);[m
[32m+[m				[32mthis.inputEl.prepend(inputDatePicker);[m
[32m+[m				[32mthis.inputEl.append(buttonWrapper);[m
 [m
[31m-  Tooltip.prototype.enable = function () {[m
[31m-    this.enabled = true[m
[31m-  }[m
[32m+[m				[32mthis.inputEl.removeAttr('class');[m
[32m+[m				[32mthis.inputEl.attr('class','input-group');[m
 [m
[31m-  Tooltip.prototype.disable = function () {[m
[31m-    this.enabled = false[m
[31m-  }[m
[32m+[m			[32m}[m
[32m+[m[32m    });[m
[32m+[m[32m}]);[m
[32m+[m[32m/*[m
[32m+[m[32mAngular-ui bootstrap editable timepicker[m
[32m+[m[32mhttp://angular-ui.github.io/bootstrap/#/timepicker[m
[32m+[m[32m*/[m
[32m+[m[32mangular.module('xeditable').directive('editableBstime', ['editableDirectiveFactory',[m
[32m+[m[32m  function(editableDirectiveFactory) {[m
[32m+[m[32m    return editableDirectiveFactory({[m
[32m+[m[32m      directiveName: 'editableBstime',[m
[32m+[m[32m      inputTpl: '<timepicker></timepicker>',[m
[32m+[m[32m      render: function() {[m
[32m+[m[32m        this.parent.render.call(this);[m
 [m
[31m-  Tooltip.prototype.toggleEnabled = function () {[m
[31m-    this.enabled = !this.enabled[m
[31m-  }[m
[32m+[m[32m        // timepicker can't update model when ng-model set directly to it[m
[32m+[m[32m        // see: https://github.com/angular-ui/bootstrap/issues/1141[m
[32m+[m[32m        // so we wrap it into DIV[m
[32m+[m[32m        var div = angular.element('<div class="well well-small" style="display:inline-block;"></div>');[m
 [m
[31m-  Tooltip.prototype.toggle = function (e) {[m
[31m-    var self = this[m
[31m-    if (e) {[m
[31m-      self = $(e.currentTarget).data('bs.' + this.type)[m
[31m-      if (!self) {[m
[31m-        self = new this.constructor(e.currentTarget, this.getDelegateOptions())[m
[31m-        $(e.currentTarget).data('bs.' + this.type, self)[m
[31m-      }[m
[31m-    }[m
[32m+[m[32m        // move ng-model to wrapping div[m
[32m+[m[32m        div.attr('ng-model', this.inputEl.attr('ng-model'));[m
[32m+[m[32m        this.inputEl.removeAttr('ng-model');[m
 [m
[31m-    self.tip().hasClass('in') ? self.leave(self) : self.enter(self)[m
[31m-  }[m
[32m+[m[32m        // move ng-change to wrapping div[m
[32m+[m[32m        if(this.attrs.eNgChange) {[m
[32m+[m[32m          div.attr('ng-change', this.inputEl.attr('ng-change'));[m
[32m+[m[32m          this.inputEl.removeAttr('ng-change');[m
[32m+[m[32m        }[m
 [m
[31m-  Tooltip.prototype.destroy = function () {[m
[31m-    var that = this[m
[31m-    clearTimeout(this.timeout)[m
[31m-    this.hide(function () {[m
[31m-      that.$element.off('.' + that.type).removeData('bs.' + that.type)[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m        // wrap[m
[32m+[m[32m        this.inputEl.wrap(div);[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m}]);[m
[32m+[m[32m//checkbox[m
[32m+[m[32mangular.module('xeditable').directive('editableCheckbox', ['editableDirectiveFactory',[m
[32m+[m[32m  function(editableDirectiveFactory) {[m
[32m+[m[32m    return editableDirectiveFactory({[m
[32m+[m[32m      directiveName: 'editableCheckbox',[m
[32m+[m[32m      inputTpl: '<input type="checkbox">',[m
[32m+[m[32m      render: function() {[m
[32m+[m[32m        this.parent.render.call(this);[m
[32m+[m[32m        if(this.attrs.eTitle) {[m
[32m+[m[32m          this.inputEl.wrap('<label></label>');[m
[32m+[m[32m          this.inputEl.parent().append(this.attrs.eTitle);[m
[32m+[m[32m        }[m
[32m+[m[32m      },[m
[32m+[m[32m      autosubmit: function() {[m
[32m+[m[32m        var self = this;[m
[32m+[m[32m        self.inputEl.bind('change', function() {[m
[32m+[m[32m          setTimeout(function() {[m
[32m+[m[32m            self.scope.$apply(function() {[m
[32m+[m[32m              self.scope.$form.$submit();[m
[32m+[m[32m            });[m
[32m+[m[32m          }, 500);[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m}]);[m
 [m
[32m+[m[32m// checklist[m
[32m+[m[32mangular.module('xeditable').directive('editableChecklist', [[m
[32m+[m[32m  'editableDirectiveFactory',[m
[32m+[m[32m  'editableNgOptionsParser',[m
[32m+[m[32m  function(editableDirectiveFactory, editableNgOptionsParser) {[m
[32m+[m[32m    return editableDirectiveFactory({[m
[32m+[m[32m      directiveName: 'editableChecklist',[m
[32m+[m[32m      inputTpl: '<span></span>',[m
[32m+[m[32m      useCopy: true,[m
[32m+[m[32m      render: function() {[m
[32m+[m[32m        this.parent.render.call(this);[m
[32m+[m[32m        var parsed = editableNgOptionsParser(this.attrs.eNgOptions);[m
[32m+[m[32m        var html = '<label ng-repeat="'+parsed.ngRepeat+'">'+[m
[32m+[m[32m          '<input type="checkbox" checklist-model="$parent.$data" checklist-value="'+parsed.locals.valueFn+'">'+[m
[32m+[m[32m          '<span ng-bind="'+parsed.locals.displayFn+'"></span></label>';[m
 [m
[31m-  // TOOLTIP PLUGIN DEFINITION[m
[31m-  // =========================[m
[32m+[m[32m        this.inputEl.removeAttr('ng-model');[m
[32m+[m[32m        this.inputEl.removeAttr('ng-options');[m
[32m+[m[32m        this.inputEl.html(html);[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m}]);[m
 [m
[31m-  function Plugin(option) {[m
[31m-    return this.each(function () {[m
[31m-      var $this   = $(this)[m
[31m-      var data    = $this.data('bs.tooltip')[m
[31m-      var options = typeof option == 'object' && option[m
[32m+[m[32mangular.module('xeditable').directive('editableCombodate', ['editableDirectiveFactory', 'editableCombodate',[m
[32m+[m[32m  function(editableDirectiveFactory, editableCombodate) {[m
[32m+[m[32m    return editableDirectiveFactory({[m
[32m+[m[32m      directiveName: 'editableCombodate',[m
[32m+[m[32m      inputTpl: '<input type="text">',[m
[32m+[m[32m      render: function() {[m
[32m+[m[32m        this.parent.render.call(this);[m
[32m+[m[32m        var combodate = editableCombodate.getInstance(this.inputEl, {value: new Date(this.scope.$data)});[m
 [m
[31m-      if (!data && /destroy|hide/.test(option)) return[m
[31m-      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))[m
[31m-      if (typeof option == 'string') data[option]()[m
[31m-    })[m
[32m+[m[32m        var self = this;[m
[32m+[m[32m        combodate.$widget.find('select').bind('change', function(e) {[m
[32m+[m[32m          self.scope.$data = (new Date(combodate.getValue())).toISOString();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
   }[m
[32m+[m[32m]);[m
[32m+[m[32m/*[m
[32m+[m[32mInput types: text|email|tel|number|url|search|color|date|datetime|time|month|week[m
[32m+[m[32m*/[m
 [m
[31m-  var old = $.fn.tooltip[m
[31m-[m
[31m-  $.fn.tooltip             = Plugin[m
[31m-  $.fn.tooltip.Constructor = Tooltip[m
[32m+[m[32m(function() {[m
 [m
[32m+[m[32m  var types = 'text|password|email|tel|number|url|search|color|date|datetime|time|month|week|file'.split('|');[m
 [m
[31m-  // TOOLTIP NO CONFLICT[m
[31m-  // ===================[m
[32m+[m[32m  //todo: datalist[m
[32m+[m[41m  [m
[32m+[m[32m  // generate directives[m
[32m+[m[32m  angular.forEach(types, function(type) {[m
[32m+[m[32m    var directiveName = 'editable'+type.charAt(0).toUpperCase() + type.slice(1);[m
[32m+[m[32m    angular.module('xeditable').directive(directiveName, ['editableDirectiveFactory',[m
[32m+[m[32m      function(editableDirectiveFactory) {[m
[32m+[m[32m        return editableDirectiveFactory({[m
[32m+[m[32m          directiveName: directiveName,[m
[32m+[m[32m          inputTpl: '<input type="'+type+'">'[m
[32m+[m[32m        });[m
[32m+[m[32m    }]);[m
[32m+[m[32m  });[m
 [m
[31m-  $.fn.tooltip.noConflict = function () {[m
[31m-    $.fn.tooltip = old[m
[31m-    return this[m
[31m-  }[m
[32m+[m[32m  //`range` is bit specific[m
[32m+[m[32m  angular.module('xeditable').directive('editableRange', ['editableDirectiveFactory',[m
[32m+[m[32m    function(editableDirectiveFactory) {[m
[32m+[m[32m      return editableDirectiveFactory({[m
[32m+[m[32m        directiveName: 'editableRange',[m
[32m+[m[32m        inputTpl: '<input type="range" id="range" name="range">',[m
[32m+[m[32m        render: function() {[m
[32m+[m[32m          this.parent.render.call(this);[m
[32m+[m[32m          this.inputEl.after('<output>{{$data}}</output>');[m
[32m+[m[32m        }[m[41m        [m
[32m+[m[32m      });[m
[32m+[m[32m  }]);[m
 [m
[31m-}(jQuery);[m
[32m+[m[32m}());[m
 [m
[31m-/* ========================================================================[m
[31m- * Bootstrap: popover.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#popovers[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
 [m
[32m+[m[32m// radiolist[m
[32m+[m[32mangular.module('xeditable').directive('editableRadiolist', [[m
[32m+[m[32m  'editableDirectiveFactory',[m
[32m+[m[32m  'editableNgOptionsParser',[m
[32m+[m[32m  function(editableDirectiveFactory, editableNgOptionsParser) {[m
[32m+[m[32m    return editableDirectiveFactory({[m
[32m+[m[32m      directiveName: 'editableRadiolist',[m
[32m+[m[32m      inputTpl: '<span></span>',[m
[32m+[m[32m      render: function() {[m
[32m+[m[32m        this.parent.render.call(this);[m
[32m+[m[32m        var parsed = editableNgOptionsParser(this.attrs.eNgOptions);[m
[32m+[m[32m        var html = '<label ng-repeat="'+parsed.ngRepeat+'">'+[m
[32m+[m[32m          '<input type="radio" ng-disabled="' + this.attrs.eNgDisabled + '" ng-model="$parent.$data" value="{{'+parsed.locals.valueFn+'}}">'+[m
[32m+[m[32m          '<span ng-bind="'+parsed.locals.displayFn+'"></span></label>';[m
 [m
[31m-+function ($) {[m
[31m-  'use strict';[m
[32m+[m[32m        this.inputEl.removeAttr('ng-model');[m
[32m+[m[32m        this.inputEl.removeAttr('ng-options');[m
[32m+[m[32m        this.inputEl.html(html);[m
[32m+[m[32m      },[m
[32m+[m[32m      autosubmit: function() {[m
[32m+[m[32m        var self = this;[m
[32m+[m[32m        self.inputEl.bind('change', function() {[m
[32m+[m[32m          setTimeout(function() {[m
[32m+[m[32m            self.scope.$apply(function() {[m
[32m+[m[32m              self.scope.$form.$submit();[m
[32m+[m[32m            });[m
[32m+[m[32m          }, 500);[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m}]);[m
 [m
[31m-  // POPOVER PUBLIC CLASS DEFINITION[m
[31m-  // ===============================[m
[32m+[m[32m//select[m
[32m+[m[32mangular.module('xeditable').directive('editableSelect', ['editableDirectiveFactory',[m
[32m+[m[32m  function(editableDirectiveFactory) {[m
[32m+[m[32m    return editableDirectiveFactory({[m
[32m+[m[32m      directiveName: 'editableSelect',[m
[32m+[m[32m      inputTpl: '<select></select>',[m
[32m+[m[32m      autosubmit: function() {[m
[32m+[m[32m        var self = this;[m
[32m+[m[32m        self.inputEl.bind('change', function() {[m
[32m+[m[32m          self.scope.$apply(function() {[m
[32m+[m[32m            self.scope.$form.$submit();[m
[32m+[m[32m          });[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m}]);[m
[32m+[m[32m//textarea[m
[32m+[m[32mangular.module('xeditable').directive('editableTextarea', ['editableDirectiveFactory',[m
[32m+[m[32m  function(editableDirectiveFactory) {[m
[32m+[m[32m    return editableDirectiveFactory({[m
[32m+[m[32m      directiveName: 'editableTextarea',[m
[32m+[m[32m      inputTpl: '<textarea></textarea>',[m
[32m+[m[32m      addListeners: function() {[m
[32m+[m[32m        var self = this;[m
[32m+[m[32m        self.parent.addListeners.call(self);[m
[32m+[m[32m        // submit textarea by ctrl+enter even with buttons[m
[32m+[m[32m        if (self.single && self.buttons !== 'no') {[m
[32m+[m[32m          self.autosubmit();[m
[32m+[m[32m        }[m
[32m+[m[32m      },[m
[32m+[m[32m      autosubmit: function() {[m
[32m+[m[32m        var self = this;[m
[32m+[m[32m        self.inputEl.bind('keydown', function(e) {[m
[32m+[m[32m          if ((e.ctrlKey || e.metaKey) && (e.keyCode === 13)) {[m
[32m+[m[32m            self.scope.$apply(function() {[m
[32m+[m[32m              self.scope.$form.$submit();[m
[32m+[m[32m            });[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m}]);[m
 [m
[31m-  var Popover = function (element, options) {[m
[31m-    this.init('popover', element, options)[m
[31m-  }[m
[32m+[m[32m/**[m
[32m+[m[32m * EditableController class.[m[41m [m
[32m+[m[32m * Attached to element with `editable-xxx` directive.[m
[32m+[m[32m *[m
[32m+[m[32m * @namespace editable-element[m
[32m+[m[32m */[m
[32m+[m[32m/*[m
[32m+[m[32mTODO: this file should be refactored to work more clear without closures![m
[32m+[m[32m*/[m
[32m+[m[32mangular.module('xeditable').factory('editableController',[m[41m [m
[32m+[m[32m  ['$q', 'editableUtils',[m
[32m+[m[32m  function($q, editableUtils) {[m
 [m
[31m-  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')[m
[32m+[m[32m  //EditableController function[m
[32m+[m[32m  EditableController.$inject = ['$scope', '$attrs', '$element', '$parse', 'editableThemes', 'editableIcons', 'editableOptions', '$rootScope', '$compile', '$q'];[m
[32m+[m[32m  function EditableController($scope, $attrs, $element, $parse, editableThemes, editableIcons, editableOptions, $rootScope, $compile, $q) {[m
[32m+[m[32m    var valueGetter;[m
 [m
[31m-  Popover.VERSION  = '3.3.4'[m
[32m+[m[32m    //if control is disabled - it does not participate in waiting process[m
[32m+[m[32m    var inWaiting;[m
 [m
[31m-  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {[m
[31m-    placement: 'right',[m
[31m-    trigger: 'click',[m
[31m-    content: '',[m
[31m-    template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'[m
[31m-  })[m
[32m+[m[32m    var self = this;[m
 [m
[32m+[m[32m    self.scope = $scope;[m
[32m+[m[32m    self.elem = $element;[m
[32m+[m[32m    self.attrs = $attrs;[m
[32m+[m[32m    self.inputEl = null;[m
[32m+[m[32m    self.editorEl = null;[m
[32m+[m[32m    self.single = true;[m
[32m+[m[32m    self.error = '';[m
[32m+[m[32m    self.theme =  editableThemes[editableOptions.theme] || editableThemes['default'];[m
[32m+[m[32m    self.parent = {};[m
 [m
[31m-  // NOTE: POPOVER EXTENDS tooltip.js[m
[31m-  // ================================[m
[32m+[m[32m    //will be undefined if icon_set is default and theme is default[m
[32m+[m[32m    self.icon_set = editableOptions.icon_set === 'default' ? editableIcons.default[editableOptions.theme] : editableIcons.external[editableOptions.icon_set];[m
 [m
[31m-  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)[m
[32m+[m[32m    //to be overwritten by directive[m
[32m+[m[32m    self.inputTpl = '';[m
[32m+[m[32m    self.directiveName = '';[m
 [m
[31m-  Popover.prototype.constructor = Popover[m
[32m+[m[32m    // with majority of controls copy is not needed, but..[m
[32m+[m[32m    // copy MUST NOT be used for `select-multiple` with objects as items[m
[32m+[m[32m    // copy MUST be used for `checklist`[m
[32m+[m[32m    self.useCopy = false;[m
 [m
[31m-  Popover.prototype.getDefaults = function () {[m
[31m-    return Popover.DEFAULTS[m
[31m-  }[m
[32m+[m[32m    //runtime (defaults)[m
[32m+[m[32m    self.single = null;[m
 [m
[31m-  Popover.prototype.setContent = function () {[m
[31m-    var $tip    = this.tip()[m
[31m-    var title   = this.getTitle()[m
[31m-    var content = this.getContent()[m
[32m+[m[32m    /**[m
[32m+[m[32m     * Attributes defined with `e-*` prefix automatically transfered from original element to[m
[32m+[m[32m     * control.[m[41m  [m
[32m+[m[32m     * For example, if you set `<span editable-text="user.name" e-style="width: 100px"`>[m
[32m+[m[32m     * then input will appear as `<input style="width: 100px">`.[m[41m  [m
[32m+[m[32m     * See [demo](#text-customize).[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @var {any|attribute} e-*[m
[32m+[m[32m     * @memberOf editable-element[m
[32m+[m[32m     */[m[41m [m
 [m
[31m-    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)[m
[31m-    $tip.find('.popover-content').children().detach().end()[ // we use append for html objects to maintain js events[m
[31m-      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'[m
[31m-    ](content)[m
[32m+[m[32m    /**[m
[32m+[m[32m     * Whether to show ok/cancel buttons. Values: `right|no`.[m
[32m+[m[32m     * If set to `no` control automatically submitted when value changed.[m[41m  [m
[32m+[m[32m     * If control is part of form buttons will never be shown.[m[41m [m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @var {string|attribute} buttons[m
[32m+[m[32m     * @memberOf editable-element[m
[32m+[m[32m     */[m[41m    [m
[32m+[m[32m    self.buttons = 'right';[m[41m [m
[32m+[m[32m    /**[m
[32m+[m[32m     * Action when control losses focus. Values: `cancel|submit|ignore`.[m
[32m+[m[32m     * Has sense only for single editable element.[m
[32m+[m[32m     * Otherwise, if control is part of form - you should set `blur` of form, not of individual element.[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @var {string|attribute} blur[m
[32m+[m[32m     * @memberOf editable-element[m
[32m+[m[32m     */[m[41m     [m
[32m+[m[32m    // no real `blur` property as it is transfered to editable form[m
 [m
[31m-    $tip.removeClass('fade top bottom left right in')[m
[32m+[m[32m    //init[m
[32m+[m[32m    self.init = function(single) {[m
[32m+[m[32m      self.single = single;[m
 [m
[31m-    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do[m
[31m-    // this manually by checking the contents.[m
[31m-    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()[m
[31m-  }[m
[32m+[m[32m      self.name = $attrs.eName || $attrs[self.directiveName];[m
[32m+[m[32m      /*[m
[32m+[m[32m      if(!$attrs[directiveName] && !$attrs.eNgModel && ($attrs.eValue === undefined)) {[m
[32m+[m[32m        throw 'You should provide value for `'+directiveName+'` or `e-value` in editable element!';[m
[32m+[m[32m      }[m
[32m+[m[32m      */[m
[32m+[m[32m      if($attrs[self.directiveName]) {[m
[32m+[m[32m        valueGetter = $parse($attrs[self.directiveName]);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        throw 'You should provide value for `'+self.directiveName+'` in editable element!';[m
[32m+[m[32m      }[m
 [m
[31m-  Popover.prototype.hasContent = function () {[m
[31m-    return this.getTitle() || this.getContent()[m
[31m-  }[m
[32m+[m[32m      // settings for single and non-single[m
[32m+[m[32m      if (!self.single) {[m
[32m+[m[32m        // hide buttons for non-single[m
[32m+[m[32m        self.buttons = 'no';[m
[32m+[m[32m      } else {[m
[32m+[m[32m        self.buttons = self.attrs.buttons || editableOptions.buttons;[m
[32m+[m[32m      }[m
 [m
[31m-  Popover.prototype.getContent = function () {[m
[31m-    var $e = this.$element[m
[31m-    var o  = this.options[m
[32m+[m[32m      //if name defined --> watch changes and update $data in form[m
[32m+[m[32m      if($attrs.eName) {[m
[32m+[m[32m        self.scope.$watch('$data', function(newVal){[m
[32m+[m[32m          self.scope.$form.$data[$attrs.eName] = newVal;[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
 [m
[31m-    return $e.attr('data-content')[m
[31m-      || (typeof o.content == 'function' ?[m
[31m-            o.content.call($e[0]) :[m
[31m-            o.content)[m
[31m-  }[m
[32m+[m[32m      /**[m
[32m+[m[32m       * Called when control is shown.[m[41m  [m
[32m+[m[32m       * See [demo](#select-remote).[m
[32m+[m[32m       *[m[41m [m
[32m+[m[32m       * @var {method|attribute} onshow[m
[32m+[m[32m       * @memberOf editable-element[m
[32m+[m[32m       */[m
[32m+[m[32m      if($attrs.onshow) {[m
[32m+[m[32m        self.onshow = function() {[m
[32m+[m[32m          return self.catchError($parse($attrs.onshow)($scope));[m
[32m+[m[32m        };[m
[32m+[m[32m      }[m
 [m
[31m-  Popover.prototype.arrow = function () {[m
[31m-    return (this.$arrow = this.$arrow || this.tip().find('.arrow'))[m
[31m-  }[m
[32m+[m[32m      /**[m
[32m+[m[32m       * Called when control is hidden after both save or cancel.[m[41m  [m
[32m+[m[32m       *[m[41m [m
[32m+[m[32m       * @var {method|attribute} onhide[m
[32m+[m[32m       * @memberOf editable-element[m
[32m+[m[32m       */[m
[32m+[m[32m      if($attrs.onhide) {[m
[32m+[m[32m        self.onhide = function() {[m
[32m+[m[32m          return $parse($attrs.onhide)($scope);[m
[32m+[m[32m        };[m
[32m+[m[32m      }[m
 [m
[32m+[m[32m      /**[m
[32m+[m[32m       * Called when control is cancelled.[m[41m  [m
[32m+[m[32m       *[m[41m [m
[32m+[m[32m       * @var {method|attribute} oncancel[m
[32m+[m[32m       * @memberOf editable-element[m
[32m+[m[32m       */[m
[32m+[m[32m      if($attrs.oncancel) {[m
[32m+[m[32m        self.oncancel = function() {[m
[32m+[m[32m          return $parse($attrs.oncancel)($scope);[m
[32m+[m[32m        };[m
[32m+[m[32m      }[m[41m          [m
 [m
[31m-  // POPOVER PLUGIN DEFINITION[m
[31m-  // =========================[m
[32m+[m[32m      /**[m
[32m+[m[32m       * Called during submit before value is saved to model.[m[41m  [m
[32m+[m[32m       * See [demo](#onbeforesave).[m
[32m+[m[32m       *[m[41m [m
[32m+[m[32m       * @var {method|attribute} onbeforesave[m
[32m+[m[32m       * @memberOf editable-element[m
[32m+[m[32m       */[m
[32m+[m[32m      if ($attrs.onbeforesave) {[m
[32m+[m[32m        self.onbeforesave = function() {[m
[32m+[m[32m          return self.catchError($parse($attrs.onbeforesave)($scope));[m
[32m+[m[32m        };[m
[32m+[m[32m      }[m
 [m
[31m-  function Plugin(option) {[m
[31m-    return this.each(function () {[m
[31m-      var $this   = $(this)[m
[31m-      var data    = $this.data('bs.popover')[m
[31m-      var options = typeof option == 'object' && option[m
[32m+[m[32m      /**[m
[32m+[m[32m       * Called during submit after value is saved to model.[m[41m  [m
[32m+[m[32m       * See [demo](#onaftersave).[m
[32m+[m[32m       *[m[41m [m
[32m+[m[32m       * @var {method|attribute} onaftersave[m
[32m+[m[32m       * @memberOf editable-element[m
[32m+[m[32m       */[m
[32m+[m[32m      if ($attrs.onaftersave) {[m
[32m+[m[32m        self.onaftersave = function() {[m
[32m+[m[32m          return self.catchError($parse($attrs.onaftersave)($scope));[m
[32m+[m[32m        };[m
[32m+[m[32m      }[m
 [m
[31m-      if (!data && /destroy|hide/.test(option)) return[m
[31m-      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))[m
[31m-      if (typeof option == 'string') data[option]()[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m      // watch change of model to update editable element[m
[32m+[m[32m      // now only add/remove `editable-empty` class.[m
[32m+[m[32m      // Initially this method called with newVal = undefined, oldVal = undefined[m
[32m+[m[32m      // so no need initially call handleEmpty() explicitly[m
[32m+[m[32m      $scope.$parent.$watch($attrs[self.directiveName], function(newVal, oldVal) {[m
[32m+[m[32m        self.setLocalValue();[m
[32m+[m[32m        self.handleEmpty();[m
[32m+[m[32m      });[m
[32m+[m[32m    };[m
 [m
[31m-  var old = $.fn.popover[m
[32m+[m[32m    self.render = function() {[m
[32m+[m[32m      var theme = self.theme;[m
 [m
[31m-  $.fn.popover             = Plugin[m
[31m-  $.fn.popover.Constructor = Popover[m
[32m+[m[32m      //build input[m
[32m+[m[32m      self.inputEl = angular.element(self.inputTpl);[m
 [m
[32m+[m[32m      //build controls[m
[32m+[m[32m      self.controlsEl = angular.element(theme.controlsTpl);[m
[32m+[m[32m      self.controlsEl.append(self.inputEl);[m
 [m
[31m-  // POPOVER NO CONFLICT[m
[31m-  // ===================[m
[32m+[m[32m      //build buttons[m
[32m+[m[32m      if(self.buttons !== 'no') {[m
[32m+[m[32m        self.buttonsEl = angular.element(theme.buttonsTpl);[m
[32m+[m[32m        self.submitEl = angular.element(theme.submitTpl);[m
[32m+[m[32m        self.cancelEl = angular.element(theme.cancelTpl);[m
[32m+[m[32m        if(self.icon_set) {[m
[32m+[m[32m          self.submitEl.find('span').addClass(self.icon_set.ok);[m
[32m+[m[32m          self.cancelEl.find('span').addClass(self.icon_set.cancel);[m
[32m+[m[32m        }[m
[32m+[m[32m        self.buttonsEl.append(self.submitEl).append(self.cancelEl);[m
[32m+[m[32m        self.controlsEl.append(self.buttonsEl);[m
[32m+[m[41m        [m
[32m+[m[32m        self.inputEl.addClass('editable-has-buttons');[m
[32m+[m[32m      }[m
 [m
[31m-  $.fn.popover.noConflict = function () {[m
[31m-    $.fn.popover = old[m
[31m-    return this[m
[31m-  }[m
[32m+[m[32m      //build error[m
[32m+[m[32m      self.errorEl = angular.element(theme.errorTpl);[m
[32m+[m[32m      self.controlsEl.append(self.errorEl);[m
 [m
[31m-}(jQuery);[m
[32m+[m[32m      //build editor[m
[32m+[m[32m      self.editorEl = angular.element(self.single ? theme.formTpl : theme.noformTpl);[m
[32m+[m[32m      self.editorEl.append(self.controlsEl);[m
 [m
[31m-/* ========================================================================[m
[31m- * Bootstrap: scrollspy.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#scrollspy[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
[32m+[m[32m      // transfer `e-*|data-e-*|x-e-*` attributes[m
[32m+[m[32m      for(var k in $attrs.$attr) {[m
[32m+[m[32m        if(k.length <= 1) {[m
[32m+[m[32m          continue;[m
[32m+[m[32m        }[m
[32m+[m[32m        var transferAttr = false;[m
[32m+[m[32m        var nextLetter = k.substring(1, 2);[m
 [m
[32m+[m[32m        // if starts with `e` + uppercase letter[m
[32m+[m[32m        if(k.substring(0, 1) === 'e' && nextLetter === nextLetter.toUpperCase()) {[m
[32m+[m[32m          transferAttr = k.substring(1); // cut `e`[m
[32m+[m[32m        } else {[m
[32m+[m[32m          continue;[m
[32m+[m[32m        }[m
[32m+[m[41m        [m
[32m+[m[32m        // exclude `form` and `ng-submit`,[m[41m [m
[32m+[m[32m        if(transferAttr === 'Form' || transferAttr === 'NgSubmit') {[m
[32m+[m[32m          continue;[m
[32m+[m[32m        }[m
 [m
[31m-+function ($) {[m
[31m-  'use strict';[m
[32m+[m[32m        // convert back to lowercase style[m
[32m+[m[32m        transferAttr = transferAttr.substring(0, 1).toLowerCase() + editableUtils.camelToDash(transferAttr.substring(1));[m[41m  [m
 [m
[31m-  // SCROLLSPY CLASS DEFINITION[m
[31m-  // ==========================[m
[32m+[m[32m        // workaround for attributes without value (e.g. `multiple = "multiple"`)[m
[32m+[m[32m        // except for 'e-value'[m
[32m+[m[32m        var attrValue = (transferAttr !== 'value' && $attrs[k] === '') ? transferAttr : $attrs[k];[m
 [m
[31m-  function ScrollSpy(element, options) {[m
[31m-    this.$body          = $(document.body)[m
[31m-    this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)[m
[31m-    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)[m
[31m-    this.selector       = (this.options.target || '') + ' .nav li > a'[m
[31m-    this.offsets        = [][m
[31m-    this.targets        = [][m
[31m-    this.activeTarget   = null[m
[31m-    this.scrollHeight   = 0[m
[32m+[m[32m        // set attributes to input[m
[32m+[m[32m        self.inputEl.attr(transferAttr, attrValue);[m
[32m+[m[32m      }[m
 [m
[31m-    this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))[m
[31m-    this.refresh()[m
[31m-    this.process()[m
[31m-  }[m
[32m+[m[32m      self.inputEl.addClass('editable-input');[m
[32m+[m[32m      self.inputEl.attr('ng-model', '$data');[m
 [m
[31m-  ScrollSpy.VERSION  = '3.3.4'[m
[32m+[m[32m      // add directiveName class to editor, e.g. `editable-text`[m
[32m+[m[32m      self.editorEl.addClass(editableUtils.camelToDash(self.directiveName));[m
 [m
[31m-  ScrollSpy.DEFAULTS = {[m
[31m-    offset: 10[m
[31m-  }[m
[32m+[m[32m      if(self.single) {[m
[32m+[m[32m        self.editorEl.attr('editable-form', '$form');[m
[32m+[m[32m        // transfer `blur` to form[m
[32m+[m[32m        self.editorEl.attr('blur', self.attrs.blur || (self.buttons === 'no' ? 'cancel' : editableOptions.blurElem));[m
[32m+[m[32m      }[m
 [m
[31m-  ScrollSpy.prototype.getScrollHeight = function () {[m
[31m-    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)[m
[31m-  }[m
[32m+[m[32m      //apply `postrender` method of theme[m
[32m+[m[32m      if(angular.isFunction(theme.postrender)) {[m
[32m+[m[32m        theme.postrender.call(self);[m
[32m+[m[32m      }[m
 [m
[31m-  ScrollSpy.prototype.refresh = function () {[m
[31m-    var that          = this[m
[31m-    var offsetMethod  = 'offset'[m
[31m-    var offsetBase    = 0[m
[32m+[m[32m    };[m
 [m
[31m-    this.offsets      = [][m
[31m-    this.targets      = [][m
[31m-    this.scrollHeight = this.getScrollHeight()[m
[32m+[m[32m    // with majority of controls copy is not needed, but..[m
[32m+[m[32m    // copy MUST NOT be used for `select-multiple` with objects as items[m
[32m+[m[32m    // copy MUST be used for `checklist`[m
[32m+[m[32m    self.setLocalValue = function() {[m
[32m+[m[32m      self.scope.$data = self.useCopy ?[m[41m [m
[32m+[m[32m        angular.copy(valueGetter($scope.$parent)) :[m[41m [m
[32m+[m[32m        valueGetter($scope.$parent);[m
[32m+[m[32m    };[m
 [m
[31m-    if (!$.isWindow(this.$scrollElement[0])) {[m
[31m-      offsetMethod = 'position'[m
[31m-      offsetBase   = this.$scrollElement.scrollTop()[m
[31m-    }[m
[32m+[m[32m    //show[m
[32m+[m[32m    self.show = function() {[m
[32m+[m[32m      // set value of scope.$data[m
[32m+[m[32m      self.setLocalValue();[m
 [m
[31m-    this.$body[m
[31m-      .find(this.selector)[m
[31m-      .map(function () {[m
[31m-        var $el   = $(this)[m
[31m-        var href  = $el.data('target') || $el.attr('href')[m
[31m-        var $href = /^#./.test(href) && $(href)[m
[32m+[m[32m      /*[m
[32m+[m[32m      Originally render() was inside init() method, but some directives polluting editorEl,[m
[32m+[m[32m      so it is broken on second openning.[m
[32m+[m[32m      Cloning is not a solution as jqLite can not clone with event handler's.[m
[32m+[m[32m      */[m
[32m+[m[32m      self.render();[m
 [m
[31m-        return ($href[m
[31m-          && $href.length[m
[31m-          && $href.is(':visible')[m
[31m-          && [[$href[offsetMethod]().top + offsetBase, href]]) || null[m
[31m-      })[m
[31m-      .sort(function (a, b) { return a[0] - b[0] })[m
[31m-      .each(function () {[m
[31m-        that.offsets.push(this[0])[m
[31m-        that.targets.push(this[1])[m
[31m-      })[m
[31m-  }[m
[32m+[m[32m      // insert into DOM[m
[32m+[m[32m      $element.after(self.editorEl);[m
 [m
[31m-  ScrollSpy.prototype.process = function () {[m
[31m-    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset[m
[31m-    var scrollHeight = this.getScrollHeight()[m
[31m-    var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()[m
[31m-    var offsets      = this.offsets[m
[31m-    var targets      = this.targets[m
[31m-    var activeTarget = this.activeTarget[m
[31m-    var i[m
[32m+[m[32m      // compile (needed to attach ng-* events from markup)[m
[32m+[m[32m      $compile(self.editorEl)($scope);[m
 [m
[31m-    if (this.scrollHeight != scrollHeight) {[m
[31m-      this.refresh()[m
[31m-    }[m
[32m+[m[32m      // attach listeners (`escape`, autosubmit, etc)[m
[32m+[m[32m      self.addListeners();[m
 [m
[31m-    if (scrollTop >= maxScroll) {[m
[31m-      return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)[m
[31m-    }[m
[32m+[m[32m      // hide element[m
[32m+[m[32m      $element.addClass('editable-hide');[m
 [m
[31m-    if (activeTarget && scrollTop < offsets[0]) {[m
[31m-      this.activeTarget = null[m
[31m-      return this.clear()[m
[31m-    }[m
[32m+[m[32m      // onshow[m
[32m+[m[32m      return self.onshow();[m
[32m+[m[32m    };[m
 [m
[31m-    for (i = offsets.length; i--;) {[m
[31m-      activeTarget != targets[i][m
[31m-        && scrollTop >= offsets[i][m
[31m-        && (offsets[i + 1] === undefined || scrollTop < offsets[i + 1])[m
[31m-        && this.activate(targets[i])[m
[31m-    }[m
[31m-  }[m
[32m+[m[32m    //hide[m
[32m+[m[32m    self.hide = function() {[m
[32m+[m[41m      [m
[32m+[m[32m      self.editorEl.remove();[m
[32m+[m[32m      $element.removeClass('editable-hide');[m
 [m
[31m-  ScrollSpy.prototype.activate = function (target) {[m
[31m-    this.activeTarget = target[m
[32m+[m[32m      // onhide[m
[32m+[m[32m      return self.onhide();[m
[32m+[m[32m    };[m
 [m
[31m-    this.clear()[m
[32m+[m[32m    // cancel[m
[32m+[m[32m    self.cancel = function() {[m
[32m+[m[32m      // oncancel[m
[32m+[m[32m      self.oncancel();[m
[32m+[m[32m      // don't call hide() here as it called in form's code[m
[32m+[m[32m    };[m
 [m
[31m-    var selector = this.selector +[m
[31m-      '[data-target="' + target + '"],' +[m
[31m-      this.selector + '[href="' + target + '"]'[m
[32m+[m[32m    /*[m
[32m+[m[32m    Called after show to attach listeners[m
[32m+[m[32m    */[m
[32m+[m[32m    self.addListeners = function() {[m
[32m+[m[32m      // bind keyup for `escape`[m
[32m+[m[32m      self.inputEl.bind('keyup', function(e) {[m
[32m+[m[32m          if(!self.single) {[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
 [m
[31m-    var active = $(selector)[m
[31m-      .parents('li')[m
[31m-      .addClass('active')[m
[32m+[m[32m          // todo: move this to editable-form![m
[32m+[m[32m          switch(e.keyCode) {[m
[32m+[m[32m            // hide on `escape` press[m
[32m+[m[32m            case 27:[m
[32m+[m[32m              self.scope.$apply(function() {[m
[32m+[m[32m                self.scope.$form.$cancel();[m
[32m+[m[32m              });[m
[32m+[m[32m            break;[m
[32m+[m[32m          }[m
[32m+[m[32m      });[m
 [m
[31m-    if (active.parent('.dropdown-menu').length) {[m
[31m-      active = active[m
[31m-        .closest('li.dropdown')[m
[31m-        .addClass('active')[m
[31m-    }[m
[32m+[m[32m      // autosubmit when `no buttons`[m
[32m+[m[32m      if (self.single && self.buttons === 'no') {[m
[32m+[m[32m        self.autosubmit();[m
[32m+[m[32m      }[m
 [m
[31m-    active.trigger('activate.bs.scrollspy')[m
[31m-  }[m
[32m+[m[32m      // click - mark element as clicked to exclude in document click handler[m
[32m+[m[32m      self.editorEl.bind('click', function(e) {[m
[32m+[m[32m        // ignore right/middle button click[m
[32m+[m[32m        if (e.which && e.which !== 1) {[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
 [m
[31m-  ScrollSpy.prototype.clear = function () {[m
[31m-    $(this.selector)[m
[31m-      .parentsUntil(this.options.target, '.active')[m
[31m-      .removeClass('active')[m
[31m-  }[m
[32m+[m[32m        if (self.scope.$form.$visible) {[m
[32m+[m[32m          self.scope.$form._clicked = true;[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    };[m
 [m
[32m+[m[32m    // setWaiting[m
[32m+[m[32m    self.setWaiting = function(value) {[m
[32m+[m[32m      if (value) {[m
[32m+[m[32m        // participate in waiting only if not disabled[m
[32m+[m[32m        inWaiting = !self.inputEl.attr('disabled') &&[m
[32m+[m[32m                    !self.inputEl.attr('ng-disabled') &&[m
[32m+[m[32m                    !self.inputEl.attr('ng-enabled');[m
[32m+[m[32m        if (inWaiting) {[m
[32m+[m[32m          self.inputEl.attr('disabled', 'disabled');[m
[32m+[m[32m          if(self.buttonsEl) {[m
[32m+[m[32m            self.buttonsEl.find('button').attr('disabled', 'disabled');[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      } else {[m
[32m+[m[32m        if (inWaiting) {[m
[32m+[m[32m          self.inputEl.removeAttr('disabled');[m
[32m+[m[32m          if (self.buttonsEl) {[m
[32m+[m[32m            self.buttonsEl.find('button').removeAttr('disabled');[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
 [m
[31m-  // SCROLLSPY PLUGIN DEFINITION[m
[31m-  // ===========================[m
[32m+[m[32m    self.activate = function(start, end) {[m
[32m+[m[32m      setTimeout(function() {[m
[32m+[m[32m        var el = self.inputEl[0];[m
[32m+[m[32m        if (editableOptions.activate === 'focus' && el.focus) {[m
[32m+[m[32m          if(start){[m
[32m+[m[32m            end = end || start;[m
[32m+[m[32m            el.onfocus = function(){[m
[32m+[m[32m              var that = this;[m
[32m+[m[32m              setTimeout(function(){[m
[32m+[m[32m                that.setSelectionRange(start,end);[m
[32m+[m[32m              });[m
[32m+[m[32m            };[m
[32m+[m[32m          }[m
[32m+[m[32m          el.focus();[m
[32m+[m[32m        }[m
[32m+[m[32m        if (editableOptions.activate === 'select' && el.select) {[m
[32m+[m[32m          el.select();[m
[32m+[m[32m        }[m
[32m+[m[32m      }, 0);[m
[32m+[m[32m    };[m
 [m
[31m-  function Plugin(option) {[m
[31m-    return this.each(function () {[m
[31m-      var $this   = $(this)[m
[31m-      var data    = $this.data('bs.scrollspy')[m
[31m-      var options = typeof option == 'object' && option[m
[32m+[m[32m    self.setError = function(msg) {[m
[32m+[m[32m      if(!angular.isObject(msg)) {[m
[32m+[m[32m        $scope.$error = msg;[m
[32m+[m[32m        self.error = msg;[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
 [m
[31m-      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))[m
[31m-      if (typeof option == 'string') data[option]()[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m    /*[m
[32m+[m[32m    Checks that result is string or promise returned string and shows it as error message[m
[32m+[m[32m    Applied to onshow, onbeforesave, onaftersave[m
[32m+[m[32m    */[m
[32m+[m[32m    self.catchError = function(result, noPromise) {[m
[32m+[m[32m      if (angular.isObject(result) && noPromise !== true) {[m
[32m+[m[32m        $q.when(result).then([m
[32m+[m[32m          //success and fail handlers are equal[m
[32m+[m[32m          angular.bind(this, function(r) {[m
[32m+[m[32m            this.catchError(r, true);[m
[32m+[m[32m          }),[m
[32m+[m[32m          angular.bind(this, function(r) {[m
[32m+[m[32m            this.catchError(r, true);[m
[32m+[m[32m          })[m
[32m+[m[32m        );[m
[32m+[m[32m      //check $http error[m
[32m+[m[32m      } else if (noPromise && angular.isObject(result) && result.status &&[m
[32m+[m[32m        (result.status !== 200) && result.data && angular.isString(result.data)) {[m
[32m+[m[32m        this.setError(result.data);[m
[32m+[m[32m        //set result to string: to let form know that there was error[m
[32m+[m[32m        result = result.data;[m
[32m+[m[32m      } else if (angular.isString(result)) {[m
[32m+[m[32m        this.setError(result);[m
[32m+[m[32m      }[m
[32m+[m[32m      return result;[m
[32m+[m[32m    };[m
 [m
[31m-  var old = $.fn.scrollspy[m
[32m+[m[32m    self.save = function() {[m
[32m+[m[32m      valueGetter.assign($scope.$parent,[m
[32m+[m[32m          self.useCopy ? angular.copy(self.scope.$data) : self.scope.$data);[m
 [m
[31m-  $.fn.scrollspy             = Plugin[m
[31m-  $.fn.scrollspy.Constructor = ScrollSpy[m
[32m+[m[32m      // no need to call handleEmpty here as we are watching change of model value[m
[32m+[m[32m      // self.handleEmpty();[m
[32m+[m[32m    };[m
 [m
[32m+[m[32m    /*[m
[32m+[m[32m    attach/detach `editable-empty` class to element[m
[32m+[m[32m    */[m
[32m+[m[32m    self.handleEmpty = function() {[m
[32m+[m[32m      var val = valueGetter($scope.$parent);[m
[32m+[m[32m      var isEmpty = val === null || val === undefined || val === "" || (angular.isArray(val) && val.length === 0);[m[41m [m
[32m+[m[32m      $element.toggleClass('editable-empty', isEmpty);[m
[32m+[m[32m    };[m
 [m
[31m-  // SCROLLSPY NO CONFLICT[m
[31m-  // =====================[m
[32m+[m[32m    /*[m
[32m+[m[32m    Called when `buttons = "no"` to submit automatically[m
[32m+[m[32m    */[m
[32m+[m[32m    self.autosubmit = angular.noop;[m
 [m
[31m-  $.fn.scrollspy.noConflict = function () {[m
[31m-    $.fn.scrollspy = old[m
[31m-    return this[m
[32m+[m[32m    self.onshow = angular.noop;[m
[32m+[m[32m    self.onhide = angular.noop;[m
[32m+[m[32m    self.oncancel = angular.noop;[m
[32m+[m[32m    self.onbeforesave = angular.noop;[m
[32m+[m[32m    self.onaftersave = angular.noop;[m
   }[m
 [m
[32m+[m[32m  return EditableController;[m
[32m+[m[32m}]);[m
 [m
[31m-  // SCROLLSPY DATA-API[m
[31m-  // ==================[m
[31m-[m
[31m-  $(window).on('load.bs.scrollspy.data-api', function () {[m
[31m-    $('[data-spy="scroll"]').each(function () {[m
[31m-      var $spy = $(this)[m
[31m-      Plugin.call($spy, $spy.data())[m
[31m-    })[m
[31m-  })[m
[32m+[m[32m/*[m
[32m+[m[32meditableFactory is used to generate editable directives (see `/directives` folder)[m
[32m+[m[32mInside it does several things:[m
[32m+[m[32m- detect form for editable element. Form may be one of three types:[m
[32m+[m[32m  1. autogenerated form (for single editable elements)[m
[32m+[m[32m  2. wrapper form (element wrapped by <form> tag)[m
[32m+[m[32m  3. linked form (element has `e-form` attribute pointing to existing form)[m
 [m
[31m-}(jQuery);[m
[32m+[m[32m- attach editableController to element[m
 [m
[31m-/* ========================================================================[m
[31m- * Bootstrap: tab.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#tabs[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
[32m+[m[32mDepends on: editableController, editableFormFactory[m
[32m+[m[32m*/[m
[32m+[m[32mangular.module('xeditable').factory('editableDirectiveFactory',[m
[32m+[m[32m['$parse', '$compile', 'editableThemes', '$rootScope', '$document', 'editableController', 'editableFormController', 'editableOptions',[m
[32m+[m[32mfunction($parse, $compile, editableThemes, $rootScope, $document, editableController, editableFormController, editableOptions) {[m
 [m
[32m+[m[32m  //directive object[m
[32m+[m[32m  return function(overwrites) {[m
[32m+[m[32m    return {[m
[32m+[m[32m      restrict: 'A',[m
[32m+[m[32m      scope: true,[m
[32m+[m[32m      require: [overwrites.directiveName, '?^form'],[m
[32m+[m[32m      controller: editableController,[m
[32m+[m[32m      link: function(scope, elem, attrs, ctrl) {[m
[32m+[m[32m        // editable controller[m
[32m+[m[32m        var eCtrl = ctrl[0];[m
 [m
[31m-+function ($) {[m
[31m-  'use strict';[m
[32m+[m[32m        // form controller[m
[32m+[m[32m        var eFormCtrl;[m
 [m
[31m-  // TAB CLASS DEFINITION[m
[31m-  // ====================[m
[32m+[m[32m        // this variable indicates is element is bound to some existing form,[m[41m [m
[32m+[m[32m        // or it's single element who's form will be generated automatically[m
[32m+[m[32m        // By default consider single element without any linked form.ÃŸ[m
[32m+[m[32m        var hasForm = false;[m
[32m+[m[41m     [m
[32m+[m[32m        // element wrapped by form[m
[32m+[m[32m        if(ctrl[1]) {[m
[32m+[m[32m          eFormCtrl = ctrl[1];[m
[32m+[m[32m          hasForm = true;[m
[32m+[m[32m        } else if(attrs.eForm) { // element not wrapped by <form>, but we hane `e-form` attr[m
[32m+[m[32m          var getter = $parse(attrs.eForm)(scope);[m
[32m+[m[32m          if(getter) { // form exists in scope (above), e.g. editable column[m
[32m+[m[32m            eFormCtrl = getter;[m
[32m+[m[32m            hasForm = true;[m
[32m+[m[32m          } else { // form exists below or not exist at all: check document.forms[m
[32m+[m[32m            for(var i=0; i<$document[0].forms.length;i++){[m
[32m+[m[32m              if($document[0].forms[i].name === attrs.eForm) {[m
[32m+[m[32m                // form is below and not processed yet[m
[32m+[m[32m                eFormCtrl = null;[m
[32m+[m[32m                hasForm = true;[m
[32m+[m[32m                break;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
 [m
[31m-  var Tab = function (element) {[m
[31m-    this.element = $(element)[m
[31m-  }[m
[32m+[m[32m        /*[m
[32m+[m[32m        if(hasForm && !attrs.eName) {[m
[32m+[m[32m          throw 'You should provide `e-name` for editable element inside form!';[m
[32m+[m[32m        }[m
[32m+[m[32m        */[m
 [m
[31m-  Tab.VERSION = '3.3.4'[m
[32m+[m[32m        //check for `editable-form` attr in form[m
[32m+[m[32m        /*[m
[32m+[m[32m        if(eFormCtrl && ) {[m
[32m+[m[32m          throw 'You should provide `e-name` for editable element inside form!';[m
[32m+[m[32m        }[m
[32m+[m[32m        */[m
 [m
[31m-  Tab.TRANSITION_DURATION = 150[m
[32m+[m[32m        // store original props to `parent` before merge[m
[32m+[m[32m        angular.forEach(overwrites, function(v, k) {[m
[32m+[m[32m          if(eCtrl[k] !== undefined) {[m
[32m+[m[32m            eCtrl.parent[k] = eCtrl[k];[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
 [m
[31m-  Tab.prototype.show = function () {[m
[31m-    var $this    = this.element[m
[31m-    var $ul      = $this.closest('ul:not(.dropdown-menu)')[m
[31m-    var selector = $this.data('target')[m
[32m+[m[32m        // merge overwrites to base editable controller[m
[32m+[m[32m        angular.extend(eCtrl, overwrites);[m
 [m
[31m-    if (!selector) {[m
[31m-      selector = $this.attr('href')[m
[31m-      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7[m
[31m-    }[m
[32m+[m[32m        // x-editable can be disabled using editableOption or edit-disabled attribute[m
[32m+[m[32m        var disabled = angular.isDefined(attrs.editDisabled) ?[m
[32m+[m[32m          scope.$eval(attrs.editDisabled) :[m
[32m+[m[32m          editableOptions.isDisabled;[m
 [m
[31m-    if ($this.parent('li').hasClass('active')) return[m
[32m+[m[32m        if (disabled) {[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m[41m        [m
[32m+[m[32m        // init editable ctrl[m
[32m+[m[32m        eCtrl.init(!hasForm);[m
 [m
[31m-    var $previous = $ul.find('.active:last a')[m
[31m-    var hideEvent = $.Event('hide.bs.tab', {[m
[31m-      relatedTarget: $this[0][m
[31m-    })[m
[31m-    var showEvent = $.Event('show.bs.tab', {[m
[31m-      relatedTarget: $previous[0][m
[31m-    })[m
[32m+[m[32m        // publich editable controller as `$editable` to be referenced in html[m
[32m+[m[32m        scope.$editable = eCtrl;[m
 [m
[31m-    $previous.trigger(hideEvent)[m
[31m-    $this.trigger(showEvent)[m
[32m+[m[32m        // add `editable` class to element[m
[32m+[m[32m        elem.addClass('editable');[m
 [m
[31m-    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) return[m
[32m+[m[32m        // hasForm[m
[32m+[m[32m        if(hasForm) {[m
[32m+[m[32m          if(eFormCtrl) {[m
[32m+[m[32m            scope.$form = eFormCtrl;[m
[32m+[m[32m            if(!scope.$form.$addEditable) {[m
[32m+[m[32m              throw 'Form with editable elements should have `editable-form` attribute.';[m
[32m+[m[32m            }[m
[32m+[m[32m            scope.$form.$addEditable(eCtrl);[m
[32m+[m[32m          } else {[m
[32m+[m[32m            // future form (below): add editable controller to buffer and add to form later[m
[32m+[m[32m            $rootScope.$$editableBuffer = $rootScope.$$editableBuffer || {};[m
[32m+[m[32m            $rootScope.$$editableBuffer[attrs.eForm] = $rootScope.$$editableBuffer[attrs.eForm] || [];[m
[32m+[m[32m            $rootScope.$$editableBuffer[attrs.eForm].push(eCtrl);[m
[32m+[m[32m            scope.$form = null; //will be re-assigned later[m
[32m+[m[32m          }[m
[32m+[m[32m        // !hasForm[m
[32m+[m[32m        } else {[m
[32m+[m[32m          // create editableform controller[m
[32m+[m[32m          scope.$form = editableFormController();[m
[32m+[m[32m          // add self to editable controller[m
[32m+[m[32m          scope.$form.$addEditable(eCtrl);[m
 [m
[31m-    var $target = $(selector)[m
[32m+[m[32m          // if `e-form` provided, publish local $form in scope[m
[32m+[m[32m          if(attrs.eForm) {[m
[32m+[m[32m            scope.$parent[attrs.eForm] = scope.$form;[m
[32m+[m[32m          }[m
 [m
[31m-    this.activate($this.closest('li'), $ul)[m
[31m-    this.activate($target, $target.parent(), function () {[m
[31m-      $previous.trigger({[m
[31m-        type: 'hidden.bs.tab',[m
[31m-        relatedTarget: $this[0][m
[31m-      })[m
[31m-      $this.trigger({[m
[31m-        type: 'shown.bs.tab',[m
[31m-        relatedTarget: $previous[0][m
[31m-      })[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m          // bind click - if no external form defined[m
[32m+[m[32m          if(!attrs.eForm || attrs.eClickable) {[m
[32m+[m[32m            elem.addClass('editable-click');[m
[32m+[m[32m            elem.bind(editableOptions.activationEvent, function(e) {[m
[32m+[m[32m              e.preventDefault();[m
[32m+[m[32m              e.editable = eCtrl;[m
[32m+[m[32m              scope.$apply(function(){[m
[32m+[m[32m                scope.$form.$show();[m
[32m+[m[32m              });[m
[32m+[m[32m            });[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
 [m
[31m-  Tab.prototype.activate = function (element, container, callback) {[m
[31m-    var $active    = container.find('> .active')[m
[31m-    var transition = callback[m
[31m-      && $.support.transition[m
[31m-      && (($active.length && $active.hasClass('fade')) || !!container.find('> .fade').length)[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
[32m+[m[32m  };[m
[32m+[m[32m}]);[m
 [m
[31m-    function next() {[m
[31m-      $active[m
[31m-        .removeClass('active')[m
[31m-        .find('> .dropdown-menu > .active')[m
[31m-          .removeClass('active')[m
[31m-        .end()[m
[31m-        .find('[data-toggle="tab"]')[m
[31m-          .attr('aria-expanded', false)[m
[32m+[m[32m/*[m
[32m+[m[32mReturns editableForm controller[m
[32m+[m[32m*/[m
[32m+[m[32mangular.module('xeditable').factory('editableFormController',[m[41m [m
[32m+[m[32m  ['$parse', '$document', '$rootScope', 'editablePromiseCollection', 'editableUtils',[m
[32m+[m[32m  function($parse, $document, $rootScope, editablePromiseCollection, editableUtils) {[m
 [m
[31m-      element[m
[31m-        .addClass('active')[m
[31m-        .find('[data-toggle="tab"]')[m
[31m-          .attr('aria-expanded', true)[m
[32m+[m[32m  // array of opened editable forms[m
[32m+[m[32m  var shown = [];[m
 [m
[31m-      if (transition) {[m
[31m-        element[0].offsetWidth // reflow for transition[m
[31m-        element.addClass('in')[m
[31m-      } else {[m
[31m-        element.removeClass('fade')[m
[31m-      }[m
[32m+[m[32m  //Check if the child element correspond or is a descendant of the parent element[m
[32m+[m[32m  var isSelfOrDescendant = function (parent, child) {[m
[32m+[m[32m    if (child == parent) {[m
[32m+[m[32m      return true;[m
[32m+[m[32m    }[m
 [m
[31m-      if (element.parent('.dropdown-menu').length) {[m
[31m-        element[m
[31m-          .closest('li.dropdown')[m
[31m-            .addClass('active')[m
[31m-          .end()[m
[31m-          .find('[data-toggle="tab"]')[m
[31m-            .attr('aria-expanded', true)[m
[32m+[m[32m    var node = child.parentNode;[m
[32m+[m[32m    while (node !== null) {[m
[32m+[m[32m      if (node == parent) {[m
[32m+[m[32m        return true;[m
       }[m
[31m-[m
[31m-      callback && callback()[m
[32m+[m[32m      node = node.parentNode;[m
     }[m
[32m+[m[32m    return false;[m
[32m+[m[32m  };[m
[32m+[m[41m  [m
[32m+[m[32m  //Check if it is a real blur : if the click event appear on a shown editable elem, this is not a blur.[m
[32m+[m[32m  var isBlur = function(shown, event) {[m
[32m+[m[32m    var isBlur = true;[m
 [m
[31m-    $active.length && transition ?[m
[31m-      $active[m
[31m-        .one('bsTransitionEnd', next)[m
[31m-        .emulateTransitionEnd(Tab.TRANSITION_DURATION) :[m
[31m-      next()[m
[31m-[m
[31m-    $active.removeClass('in')[m
[31m-  }[m
[31m-[m
[31m-[m
[31m-  // TAB PLUGIN DEFINITION[m
[31m-  // =====================[m
[31m-[m
[31m-  function Plugin(option) {[m
[31m-    return this.each(function () {[m
[31m-      var $this = $(this)[m
[31m-      var data  = $this.data('bs.tab')[m
[31m-[m
[31m-      if (!data) $this.data('bs.tab', (data = new Tab(this)))[m
[31m-      if (typeof option == 'string') data[option]()[m
[31m-    })[m
[31m-  }[m
[31m-[m
[31m-  var old = $.fn.tab[m
[31m-[m
[31m-  $.fn.tab             = Plugin[m
[31m-  $.fn.tab.Constructor = Tab[m
[31m-[m
[31m-[m
[31m-  // TAB NO CONFLICT[m
[31m-  // ===============[m
[32m+[m[32m    var editables = shown.$editables;[m
[32m+[m[32m    angular.forEach(editables, function(v){[m
[32m+[m[32m      var element = v.editorEl[0];[m
[32m+[m[32m      if (isSelfOrDescendant(element, event.target))[m
[32m+[m[32m        isBlur = false;[m
[32m+[m[41m      [m
[32m+[m[32m    });[m
[32m+[m[32m    return isBlur;[m
[32m+[m[32m  };[m
[32m+[m[41m  [m
[32m+[m[32m  // bind click to body: cancel|submit|ignore forms[m
[32m+[m[32m  $document.bind('click', function(e) {[m
[32m+[m[32m    // ignore right/middle button click[m
[32m+[m[32m    if ((e.which && e.which !== 1) || e.isDefaultPrevented()) {[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
 [m
[31m-  $.fn.tab.noConflict = function () {[m
[31m-    $.fn.tab = old[m
[31m-    return this[m
[31m-  }[m
[32m+[m[32m    var toCancel = [];[m
[32m+[m[32m    var toSubmit = [];[m
[32m+[m[32m    for (var i=0; i<shown.length; i++) {[m
 [m
[32m+[m[32m      // exclude clicked[m
[32m+[m[32m      if (shown[i]._clicked) {[m
[32m+[m[32m        shown[i]._clicked = false;[m
[32m+[m[32m        continue;[m
[32m+[m[32m      }[m
 [m
[31m-  // TAB DATA-API[m
[31m-  // ============[m
[32m+[m[32m      // exclude waiting[m
[32m+[m[32m      if (shown[i].$waiting) {[m
[32m+[m[32m        continue;[m
[32m+[m[32m      }[m
 [m
[31m-  var clickHandler = function (e) {[m
[31m-    e.preventDefault()[m
[31m-    Plugin.call($(this), 'show')[m
[31m-  }[m
[32m+[m[32m      if (shown[i]._blur === 'cancel' && isBlur(shown[i], e)) {[m
[32m+[m[32m        toCancel.push(shown[i]);[m
[32m+[m[32m      }[m
 [m
[31m-  $(document)[m
[31m-    .on('click.bs.tab.data-api', '[data-toggle="tab"]', clickHandler)[m
[31m-    .on('click.bs.tab.data-api', '[data-toggle="pill"]', clickHandler)[m
[32m+[m[32m      if (shown[i]._blur === 'submit' && isBlur(shown[i], e)) {[m
[32m+[m[32m        toSubmit.push(shown[i]);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
 [m
[31m-}(jQuery);[m
[32m+[m[32m    if (toCancel.length || toSubmit.length) {[m
[32m+[m[32m      $rootScope.$apply(function() {[m
[32m+[m[32m        angular.forEach(toCancel, function(v){ v.$cancel(); });[m
[32m+[m[32m        angular.forEach(toSubmit, function(v){ v.$submit(); });[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[41m [m
 [m
[31m-/* ========================================================================[m
[31m- * Bootstrap: affix.js v3.3.4[m
[31m- * http://getbootstrap.com/javascript/#affix[m
[31m- * ========================================================================[m
[31m- * Copyright 2011-2015 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[31m- * ======================================================================== */[m
[32m+[m[32m  var base = {[m
[32m+[m[32m    $addEditable: function(editable) {[m
[32m+[m[32m      //console.log('add editable', editable.elem, editable.elem.bind);[m
[32m+[m[32m      this.$editables.push(editable);[m
 [m
[32m+[m[32m      //'on' is not supported in angular 1.0.8[m
[32m+[m[32m      editable.elem.bind('$destroy', angular.bind(this, this.$removeEditable, editable));[m
 [m
[31m-+function ($) {[m
[31m-  'use strict';[m
[32m+[m[32m      //bind editable's local $form to self (if not bound yet, below form)[m[41m [m
[32m+[m[32m      if (!editable.scope.$form) {[m
[32m+[m[32m        editable.scope.$form = this;[m
[32m+[m[32m      }[m
 [m
[31m-  // AFFIX CLASS DEFINITION[m
[31m-  // ======================[m
[32m+[m[32m      //if form already shown - call show() of new editable[m
[32m+[m[32m      if (this.$visible) {[m
[32m+[m[32m        editable.catchError(editable.show());[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
 [m
[31m-  var Affix = function (element, options) {[m
[31m-    this.options = $.extend({}, Affix.DEFAULTS, options)[m
[32m+[m[32m    $removeEditable: function(editable) {[m
[32m+[m[32m      //arrayRemove[m
[32m+[m[32m      for(var i=0; i < this.$editables.length; i++) {[m
[32m+[m[32m        if(this.$editables[i] === editable) {[m
[32m+[m[32m          this.$editables.splice(i, 1);[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
 [m
[31m-    this.$target = $(this.options.target)[m
[31m-      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))[m
[31m-      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))[m
[32m+[m[32m    /**[m
[32m+[m[32m     * Shows form with editable controls.[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @method $show()[m
[32m+[m[32m     * @memberOf editable-form[m
[32m+[m[32m     */[m
[32m+[m[32m    $show: function() {[m
[32m+[m[32m      if (this.$visible) {[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
 [m
[31m-    this.$element     = $(element)[m
[31m-    this.affixed      = null[m
[31m-    this.unpin        = null[m
[31m-    this.pinnedOffset = null[m
[32m+[m[32m      this.$visible = true;[m
 [m
[31m-    this.checkPosition()[m
[31m-  }[m
[32m+[m[32m      var pc = editablePromiseCollection();[m
 [m
[31m-  Affix.VERSION  = '3.3.4'[m
[32m+[m[32m      //own show[m
[32m+[m[32m      pc.when(this.$onshow());[m
 [m
[31m-  Affix.RESET    = 'affix affix-top affix-bottom'[m
[32m+[m[32m      //clear errors[m
[32m+[m[32m      this.$setError(null, '');[m
 [m
[31m-  Affix.DEFAULTS = {[m
[31m-    offset: 0,[m
[31m-    target: window[m
[31m-  }[m
[32m+[m[32m      //children show[m
[32m+[m[32m      angular.forEach(this.$editables, function(editable) {[m
[32m+[m[32m        pc.when(editable.show());[m
[32m+[m[32m      });[m
 [m
[31m-  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {[m
[31m-    var scrollTop    = this.$target.scrollTop()[m
[31m-    var position     = this.$element.offset()[m
[31m-    var targetHeight = this.$target.height()[m
[32m+[m[32m      //wait promises and activate[m
[32m+[m[32m      pc.then({[m
[32m+[m[32m        onWait: angular.bind(this, this.$setWaiting),[m[41m [m
[32m+[m[32m        onTrue: angular.bind(this, this.$activate),[m[41m [m
[32m+[m[32m        onFalse: angular.bind(this, this.$activate),[m[41m [m
[32m+[m[32m        onString: angular.bind(this, this.$activate)[m
[32m+[m[32m      });[m
 [m
[31m-    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false[m
[32m+[m[32m      // add to internal list of shown forms[m
[32m+[m[32m      // setTimeout needed to prevent closing right after opening (e.g. when trigger by button)[m
[32m+[m[32m      setTimeout(angular.bind(this, function() {[m
[32m+[m[32m        // clear `clicked` to get ready for clicks on visible form[m
[32m+[m[32m        this._clicked = false;[m
[32m+[m[32m        if(editableUtils.indexOf(shown, this) === -1) {[m
[32m+[m[32m          shown.push(this);[m
[32m+[m[32m        }[m
[32m+[m[32m      }), 0);[m[41m      [m
[32m+[m[32m    },[m
 [m
[31m-    if (this.affixed == 'bottom') {[m
[31m-      if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'[m
[31m-      return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'[m
[31m-    }[m
[32m+[m[32m    /**[m
[32m+[m[32m     * Sets focus on form field specified by `name`.[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @method $activate(name)[m
[32m+[m[32m     * @param {string} name name of field[m
[32m+[m[32m     * @memberOf editable-form[m
[32m+[m[32m     */[m
[32m+[m[32m    $activate: function(name) {[m
[32m+[m[32m      var i;[m
[32m+[m[32m      if (this.$editables.length) {[m
[32m+[m[32m        //activate by name[m
[32m+[m[32m        if (angular.isString(name)) {[m
[32m+[m[32m          for(i=0; i<this.$editables.length; i++) {[m
[32m+[m[32m            if (this.$editables[i].name === name) {[m
[32m+[m[32m              this.$editables[i].activate();[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
 [m
[31m-    var initializing   = this.affixed == null[m
[31m-    var colliderTop    = initializing ? scrollTop : position.top[m
[31m-    var colliderHeight = initializing ? targetHeight : height[m
[32m+[m[32m        //try activate error field[m
[32m+[m[32m        for(i=0; i<this.$editables.length; i++) {[m
[32m+[m[32m          if (this.$editables[i].error) {[m
[32m+[m[32m            this.$editables[i].activate();[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
 [m
[31m-    if (offsetTop != null && scrollTop <= offsetTop) return 'top'[m
[31m-    if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'[m
[32m+[m[32m        //by default activate first field[m
[32m+[m[32m        this.$editables[0].activate(this.$editables[0].elem[0].selectionStart, this.$editables[0].elem[0].selectionEnd);[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
 [m
[31m-    return false[m
[31m-  }[m
[32m+[m[32m    /**[m
[32m+[m[32m     * Hides form with editable controls without saving.[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @method $hide()[m
[32m+[m[32m     * @memberOf editable-form[m
[32m+[m[32m     */[m
[32m+[m[32m    $hide: function() {[m
[32m+[m[32m      if (!this.$visible) {[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m[41m      [m
[32m+[m[32m      this.$visible = false;[m
[32m+[m[32m      // self hide[m
[32m+[m[32m      this.$onhide();[m
[32m+[m[32m      // children's hide[m
[32m+[m[32m      angular.forEach(this.$editables, function(editable) {[m
[32m+[m[32m        editable.hide();[m
[32m+[m[32m      });[m
 [m
[31m-  Affix.prototype.getPinnedOffset = function () {[m
[31m-    if (this.pinnedOffset) return this.pinnedOffset[m
[31m-    this.$element.removeClass(Affix.RESET).addClass('affix')[m
[31m-    var scrollTop = this.$target.scrollTop()[m
[31m-    var position  = this.$element.offset()[m
[31m-    return (this.pinnedOffset = position.top - scrollTop)[m
[31m-  }[m
[32m+[m[32m      // remove from internal list of shown forms[m
[32m+[m[32m      editableUtils.arrayRemove(shown, this);[m
[32m+[m[32m    },[m
 [m
[31m-  Affix.prototype.checkPositionWithEventLoop = function () {[m
[31m-    setTimeout($.proxy(this.checkPosition, this), 1)[m
[31m-  }[m
[32m+[m[32m    /**[m
[32m+[m[32m     * Triggers `oncancel` event and calls `$hide()`.[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @method $cancel()[m
[32m+[m[32m     * @memberOf editable-form[m
[32m+[m[32m     */[m
[32m+[m[32m    $cancel: function() {[m
[32m+[m[32m      if (!this.$visible) {[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m[41m      [m
[32m+[m[32m      // self cancel[m
[32m+[m[32m      this.$oncancel();[m
[32m+[m[32m      // children's cancel[m[41m      [m
[32m+[m[32m      angular.forEach(this.$editables, function(editable) {[m
[32m+[m[32m        editable.cancel();[m
[32m+[m[32m      });[m
[32m+[m[32m      // self hide[m
[32m+[m[32m      this.$hide();[m
[32m+[m[32m    },[m[41m    [m
 [m
[31m-  Affix.prototype.checkPosition = function () {[m
[31m-    if (!this.$element.is(':visible')) return[m
[32m+[m[32m    $setWaiting: function(value) {[m
[32m+[m[32m      this.$waiting = !!value;[m
[32m+[m[32m      // we can't just set $waiting variable and use it via ng-disabled in children[m
[32m+[m[32m      // because in editable-row form is not accessible[m
[32m+[m[32m      angular.forEach(this.$editables, function(editable) {[m
[32m+[m[32m        editable.setWaiting(!!value);[m
[32m+[m[32m      });[m
[32m+[m[32m    },[m
 [m
[31m-    var height       = this.$element.height()[m
[31m-    var offset       = this.options.offset[m
[31m-    var offsetTop    = offset.top[m
[31m-    var offsetBottom = offset.bottom[m
[31m-    var scrollHeight = $(document.body).height()[m
[32m+[m[32m    /**[m
[32m+[m[32m     * Shows error message for particular field.[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @method $setError(name, msg)[m
[32m+[m[32m     * @param {string} name name of field[m
[32m+[m[32m     * @param {string} msg error message[m
[32m+[m[32m     * @memberOf editable-form[m
[32m+[m[32m     */[m
[32m+[m[32m    $setError: function(name, msg) {[m
[32m+[m[32m      angular.forEach(this.$editables, function(editable) {[m
[32m+[m[32m        if(!name || editable.name === name) {[m
[32m+[m[32m          editable.setError(msg);[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    },[m
 [m
[31m-    if (typeof offset != 'object')         offsetBottom = offsetTop = offset[m
[31m-    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)[m
[31m-    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)[m
[32m+[m[32m    $submit: function() {[m
[32m+[m[32m      if (this.$waiting) {[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m[41m [m
 [m
[31m-    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)[m
[32m+[m[32m      //clear errors[m
[32m+[m[32m      this.$setError(null, '');[m
 [m
[31m-    if (this.affixed != affix) {[m
[31m-      if (this.unpin != null) this.$element.css('top', '')[m
[32m+[m[32m      //children onbeforesave[m
[32m+[m[32m      var pc = editablePromiseCollection();[m
[32m+[m[32m      angular.forEach(this.$editables, function(editable) {[m
[32m+[m[32m        pc.when(editable.onbeforesave());[m
[32m+[m[32m      });[m
 [m
[31m-      var affixType = 'affix' + (affix ? '-' + affix : '')[m
[31m-      var e         = $.Event(affixType + '.bs.affix')[m
[32m+[m[32m      /*[m
[32m+[m[32m      onbeforesave result:[m
[32m+[m[32m      - true/undefined: save data and close form[m
[32m+[m[32m      - false: close form without saving[m
[32m+[m[32m      - string: keep form open and show error[m
[32m+[m[32m      */[m
[32m+[m[32m      pc.then({[m
[32m+[m[32m        onWait: angular.bind(this, this.$setWaiting),[m[41m [m
[32m+[m[32m        onTrue: angular.bind(this, checkSelf, true),[m[41m [m
[32m+[m[32m        onFalse: angular.bind(this, checkSelf, false),[m[41m [m
[32m+[m[32m        onString: angular.bind(this, this.$activate)[m
[32m+[m[32m      });[m
 [m
[31m-      this.$element.trigger(e)[m
[32m+[m[32m      //save[m
[32m+[m[32m      function checkSelf(childrenTrue){[m
[32m+[m[32m        var pc = editablePromiseCollection();[m
[32m+[m[32m        pc.when(this.$onbeforesave());[m
[32m+[m[32m        pc.then({[m
[32m+[m[32m          onWait: angular.bind(this, this.$setWaiting),[m[41m [m
[32m+[m[32m          onTrue: childrenTrue ? angular.bind(this, this.$save) : angular.bind(this, this.$hide),[m[41m [m
[32m+[m[32m          onFalse: angular.bind(this, this.$hide),[m[41m [m
[32m+[m[32m          onString: angular.bind(this, this.$activate)[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
 [m
[31m-      if (e.isDefaultPrevented()) return[m
[32m+[m[32m    $save: function() {[m
[32m+[m[32m      // write model for each editable[m
[32m+[m[32m      angular.forEach(this.$editables, function(editable) {[m
[32m+[m[32m        editable.save();[m
[32m+[m[32m      });[m
 [m
[31m-      this.affixed = affix[m
[31m-      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null[m
[32m+[m[32m      //call onaftersave of self and children[m
[32m+[m[32m      var pc = editablePromiseCollection();[m
[32m+[m[32m      pc.when(this.$onaftersave());[m
[32m+[m[32m      angular.forEach(this.$editables, function(editable) {[m
[32m+[m[32m        pc.when(editable.onaftersave());[m
[32m+[m[32m      });[m
 [m
[31m-      this.$element[m
[31m-        .removeClass(Affix.RESET)[m
[31m-        .addClass(affixType)[m
[31m-        .trigger(affixType.replace('affix', 'affixed') + '.bs.affix')[m
[31m-    }[m
[32m+[m[32m      /*[m
[32m+[m[32m      onaftersave result:[m
[32m+[m[32m      - true/undefined/false: just close form[m
[32m+[m[32m      - string: keep form open and show error[m
[32m+[m[32m      */[m
[32m+[m[32m      pc.then({[m
[32m+[m[32m        onWait: angular.bind(this, this.$setWaiting),[m[41m [m
[32m+[m[32m        onTrue: angular.bind(this, this.$hide),[m[41m [m
[32m+[m[32m        onFalse: angular.bind(this, this.$hide),[m[41m [m
[32m+[m[32m        onString: angular.bind(this, this.$activate)[m
[32m+[m[32m      });[m
[32m+[m[32m    },[m
 [m
[31m-    if (affix == 'bottom') {[m
[31m-      this.$element.offset({[m
[31m-        top: scrollHeight - height - offsetBottom[m
[31m-      })[m
[31m-    }[m
[31m-  }[m
[32m+[m[32m    $onshow: angular.noop,[m
[32m+[m[32m    $oncancel: angular.noop,[m
[32m+[m[32m    $onhide: angular.noop,[m
[32m+[m[32m    $onbeforesave: angular.noop,[m
[32m+[m[32m    $onaftersave: angular.noop[m
[32m+[m[32m  };[m
 [m
[32m+[m[32m  return function() {[m
[32m+[m[32m    return angular.extend({[m
[32m+[m[32m      $editables: [],[m
[32m+[m[32m      /**[m
[32m+[m[32m       * Form visibility flag.[m
[32m+[m[32m       *[m[41m [m
[32m+[m[32m       * @var {bool} $visible[m
[32m+[m[32m       * @memberOf editable-form[m
[32m+[m[32m       */[m
[32m+[m[32m      $visible: false,[m
[32m+[m[32m      /**[m
[32m+[m[32m       * Form waiting flag. It becomes `true` when form is loading or saving data.[m
[32m+[m[32m       *[m[41m [m
[32m+[m[32m       * @var {bool} $waiting[m
[32m+[m[32m       * @memberOf editable-form[m
[32m+[m[32m       */[m
[32m+[m[32m      $waiting: false,[m
[32m+[m[32m      $data: {},[m
[32m+[m[32m      _clicked: false,[m
[32m+[m[32m      _blur: null[m
[32m+[m[32m    }, base);[m
[32m+[m[32m  };[m
[32m+[m[32m}]);[m
 [m
[31m-  // AFFIX PLUGIN DEFINITION[m
[31m-  // =======================[m
[32m+[m[32m/**[m
[32m+[m[32m * EditableForm directive. Should be defined in <form> containing editable controls.[m[41m  [m
[32m+[m[32m * It add some usefull methods to form variable exposed to scope by `name="myform"` attribute.[m
[32m+[m[32m *[m
[32m+[m[32m * @namespace editable-form[m
[32m+[m[32m */[m
[32m+[m[32mangular.module('xeditable').directive('editableForm',[m
[32m+[m[32m  ['$rootScope', '$parse', 'editableFormController', 'editableOptions',[m
[32m+[m[32m  function($rootScope, $parse, editableFormController, editableOptions) {[m
[32m+[m[32m    return {[m
[32m+[m[32m      restrict: 'A',[m
[32m+[m[32m      require: ['form'],[m
[32m+[m[32m      //require: ['form', 'editableForm'],[m
[32m+[m[32m      //controller: EditableFormController,[m
[32m+[m[32m      compile: function() {[m
[32m+[m[32m        return {[m
[32m+[m[32m          pre: function(scope, elem, attrs, ctrl) {[m
[32m+[m[32m            var form = ctrl[0];[m
[32m+[m[32m            var eForm;[m
 [m
[31m-  function Plugin(option) {[m
[31m-    return this.each(function () {[m
[31m-      var $this   = $(this)[m
[31m-      var data    = $this.data('bs.affix')[m
[31m-      var options = typeof option == 'object' && option[m
[32m+[m[32m            //if `editableForm` has value - publish smartly under this value[m
[32m+[m[32m            //this is required only for single editor form that is created and removed[m
[32m+[m[32m            if(attrs.editableForm) {[m
[32m+[m[32m              if(scope[attrs.editableForm] && scope[attrs.editableForm].$show) {[m
[32m+[m[32m                eForm = scope[attrs.editableForm];[m
[32m+[m[32m                angular.extend(form, eForm);[m
[32m+[m[32m              } else {[m
[32m+[m[32m                eForm = editableFormController();[m
[32m+[m[32m                scope[attrs.editableForm] = eForm;[m
[32m+[m[32m                angular.extend(eForm, form);[m
[32m+[m[32m              }[m
[32m+[m[32m            } else { //just merge to form and publish if form has name[m
[32m+[m[32m              eForm = editableFormController();[m
[32m+[m[32m              angular.extend(form, eForm);[m
[32m+[m[32m            }[m
 [m
[31m-      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))[m
[31m-      if (typeof option == 'string') data[option]()[m
[31m-    })[m
[31m-  }[m
[32m+[m[32m            //read editables from buffer (that appeared before FORM tag)[m
[32m+[m[32m            var buf = $rootScope.$$editableBuffer;[m
[32m+[m[32m            var name = form.$name;[m
[32m+[m[32m            if(name && buf && buf[name]) {[m
[32m+[m[32m              angular.forEach(buf[name], function(editable) {[m
[32m+[m[32m                eForm.$addEditable(editable);[m
[32m+[m[32m              });[m
[32m+[m[32m              delete buf[name];[m
[32m+[m[32m            }[m
[32m+[m[32m          },[m
[32m+[m[32m          post: function(scope, elem, attrs, ctrl) {[m
[32m+[m[32m            var eForm;[m
 [m
[31m-  var old = $.fn.affix[m
[32m+[m[32m            if(attrs.editableForm && scope[attrs.editableForm] && scope[attrs.editableForm].$show) {[m
[32m+[m[32m              eForm = scope[attrs.editableForm];[m
[32m+[m[32m            } else {[m
[32m+[m[32m              eForm = ctrl[0];[m
[32m+[m[32m            }[m
 [m
[31m-  $.fn.affix             = Plugin[m
[31m-  $.fn.affix.Constructor = Affix[m
[32m+[m[32m            /**[m
[32m+[m[32m             * Called when form is shown.[m
[32m+[m[32m             *[m[41m [m
[32m+[m[32m             * @var {method|attribute} onshow[m[41m [m
[32m+[m[32m             * @memberOf editable-form[m
[32m+[m[32m             */[m
[32m+[m[32m            if(attrs.onshow) {[m
[32m+[m[32m              eForm.$onshow = angular.bind(eForm, $parse(attrs.onshow), scope);[m
[32m+[m[32m            }[m
 [m
[32m+[m[32m            /**[m
[32m+[m[32m             * Called when form hides after both save or cancel.[m
[32m+[m[32m             *[m[41m [m
[32m+[m[32m             * @var {method|attribute} onhide[m[41m [m
[32m+[m[32m             * @memberOf editable-form[m
[32m+[m[32m             */[m
[32m+[m[32m            if(attrs.onhide) {[m
[32m+[m[32m              eForm.$onhide = angular.bind(eForm, $parse(attrs.onhide), scope);[m
[32m+[m[32m            }[m
 [m
[31m-  // AFFIX NO CONFLICT[m
[31m-  // =================[m
[32m+[m[32m            /**[m
[32m+[m[32m             * Called when form is cancelled.[m
[32m+[m[32m             *[m[41m [m
[32m+[m[32m             * @var {method|attribute} oncancel[m
[32m+[m[32m             * @memberOf editable-form[m
[32m+[m[32m             */[m
[32m+[m[32m            if(attrs.oncancel) {[m
[32m+[m[32m              eForm.$oncancel = angular.bind(eForm, $parse(attrs.oncancel), scope);[m
[32m+[m[32m            }[m
 [m
[31m-  $.fn.affix.noConflict = function () {[m
[31m-    $.fn.affix = old[m
[31m-    return this[m
[31m-  }[m
[32m+[m[32m            /**[m
[32m+[m[32m             * Whether form initially rendered in shown state.[m
[32m+[m[32m             *[m
[32m+[m[32m             * @var {bool|attribute} shown[m
[32m+[m[32m             * @memberOf editable-form[m
[32m+[m[32m             */[m
[32m+[m[32m            if(attrs.shown && $parse(attrs.shown)(scope)) {[m
[32m+[m[32m              eForm.$show();[m
[32m+[m[32m            }[m
 [m
[32m+[m[32m            /**[m
[32m+[m[32m             * Action when form losses focus. Values: `cancel|submit|ignore`.[m
[32m+[m[32m             * Default is `ignore`.[m
[32m+[m[32m             *[m[41m [m
[32m+[m[32m             * @var {string|attribute} blur[m
[32m+[m[32m             * @memberOf editable-form[m
[32m+[m[32m             */[m
[32m+[m[32m            eForm._blur = attrs.blur || editableOptions.blurForm;[m
 [m
[31m-  // AFFIX DATA-API[m
[31m-  // ==============[m
[32m+[m[32m            // onbeforesave, onaftersave[m
[32m+[m[32m            if(!attrs.ngSubmit && !attrs.submit) {[m
[32m+[m[32m              /**[m
[32m+[m[32m               * Called after all children `onbeforesave` callbacks but before saving form values[m
[32m+[m[32m               * to model.[m[41m  [m
[32m+[m[32m               * If at least one children callback returns `non-string` - it will not not be called.[m[41m  [m
[32m+[m[32m               * See [editable-form demo](#editable-form) for details.[m
[32m+[m[32m               *[m[41m [m
[32m+[m[32m               * @var {method|attribute} onbeforesave[m
[32m+[m[32m               * @memberOf editable-form[m
[32m+[m[32m               *[m[41m [m
[32m+[m[32m               */[m
[32m+[m[32m              if(attrs.onbeforesave) {[m
[32m+[m[32m                eForm.$onbeforesave = function() {[m
[32m+[m[32m                  return $parse(attrs.onbeforesave)(scope, {$data: eForm.$data});[m
[32m+[m[32m                };[m
[32m+[m[32m              }[m
 [m
[31m-  $(window).on('load', function () {[m
[31m-    $('[data-spy="affix"]').each(function () {[m
[31m-      var $spy = $(this)[m
[31m-      var data = $spy.data()[m
[32m+[m[32m              /**[m
[32m+[m[32m               * Called when form values are saved to model.[m[41m  [m
[32m+[m[32m               * See [editable-form demo](#editable-form) for details.[m
[32m+[m[32m               *[m[41m [m
[32m+[m[32m               * @var {method|attribute} onaftersave[m[41m [m
[32m+[m[32m               * @memberOf editable-form[m
[32m+[m[32m               *[m[41m [m
[32m+[m[32m               */[m
[32m+[m[32m              if(attrs.onaftersave) {[m
[32m+[m[32m                eForm.$onaftersave = function() {[m
[32m+[m[32m                  return $parse(attrs.onaftersave)(scope, {$data: eForm.$data});[m
[32m+[m[32m                };[m
[32m+[m[32m              }[m
 [m
[31m-      data.offset = data.offset || {}[m
[32m+[m[32m              elem.bind('submit', function(event) {[m
[32m+[m[32m                event.preventDefault();[m
[32m+[m[32m                scope.$apply(function() {[m
[32m+[m[32m                  eForm.$submit();[m
[32m+[m[32m                });[m
[32m+[m[32m              });[m
[32m+[m[32m            }[m
 [m
[31m-      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom[m
[31m-      if (data.offsetTop    != null) data.offset.top    = data.offsetTop[m
 [m
[31m-      Plugin.call($spy, data)[m
[31m-    })[m
[31m-  })[m
[32m+[m[32m            // click - mark form as clicked to exclude in document click handler[m
[32m+[m[32m            elem.bind('click', function(e) {[m
[32m+[m[32m              // ignore right/middle button click[m
[32m+[m[32m              if (e.which && e.which !== 1) {[m
[32m+[m[32m                return;[m
[32m+[m[32m              }[m
 [m
[31m-}(jQuery);[m
[32m+[m[32m              if (eForm.$visible) {[m
[32m+[m[32m                eForm._clicked = true;[m
[32m+[m[32m              }[m
[32m+[m[32m            });[m[41m   [m
 [m
[32m+[m[32m          }[m
[32m+[m[32m        };[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
[32m+[m[32m}]);[m
 /**[m
[31m- * State-based routing for AngularJS[m
[31m- * @version v0.2.15[m
[31m- * @link http://angular-ui.github.com/[m
[31m- * @license MIT License, http://www.opensource.org/licenses/MIT[m
[32m+[m[32m * editablePromiseCollection[m
[32m+[m[32m *[m[41m  [m
[32m+[m[32m * Collect results of function calls. Shows waiting if there are promises.[m[41m [m
[32m+[m[32m * Finally, applies callbacks if:[m
[32m+[m[32m * - onTrue(): all results are true and all promises resolved to true[m
[32m+[m[32m * - onFalse(): at least one result is false or promise resolved to false[m
[32m+[m[32m * - onString(): at least one result is string or promise rejected or promise resolved to string[m
  */[m
 [m
[31m-/* commonjs package manager support (eg componentjs) */[m
[31m-if (typeof module !== "undefined" && typeof exports !== "undefined" && module.exports === exports){[m
[31m-  module.exports = 'ui.router';[m
[31m-}[m
[31m-[m
[31m-(function (window, angular, undefined) {[m
[31m-/*jshint globalstrict:true*/[m
[31m-/*global angular:false*/[m
[31m-'use strict';[m
[31m-[m
[31m-var isDefined = angular.isDefined,[m
[31m-    isFunction = angular.isFunction,[m
[31m-    isString = angular.isString,[m
[31m-    isObject = angular.isObject,[m
[31m-    isArray = angular.isArray,[m
[31m-    forEach = angular.forEach,[m
[31m-    extend = angular.extend,[m
[31m-    copy = angular.copy;[m
[31m-[m
[31m-function inherit(parent, extra) {[m
[31m-  return extend(new (extend(function() {}, { prototype: parent }))(), extra);[m
[31m-}[m
[31m-[m
[31m-function merge(dst) {[m
[31m-  forEach(arguments, function(obj) {[m
[31m-    if (obj !== dst) {[m
[31m-      forEach(obj, function(value, key) {[m
[31m-        if (!dst.hasOwnProperty(key)) dst[key] = value;[m
[31m-      });[m
[31m-    }[m
[31m-  });[m
[31m-  return dst;[m
[31m-}[m
[32m+[m[32mangular.module('xeditable').factory('editablePromiseCollection', ['$q', function($q) {[m[41m [m
 [m
[31m-/**[m
[31m- * Finds the common ancestor path between two states.[m
[31m- *[m
[31m- * @param {Object} first The first state.[m
[31m- * @param {Object} second The second state.[m
[31m- * @return {Array} Returns an array of state names in descending order, not including the root.[m
[31m- */[m
[31m-function ancestors(first, second) {[m
[31m-  var path = [];[m
[32m+[m[32m  function promiseCollection() {[m
[32m+[m[32m    return {[m
[32m+[m[32m      promises: [],[m
[32m+[m[32m      hasFalse: false,[m
[32m+[m[32m      hasString: false,[m
[32m+[m[32m      when: function(result, noPromise) {[m
[32m+[m[32m        if (result === false) {[m
[32m+[m[32m          this.hasFalse = true;[m
[32m+[m[32m        } else if (!noPromise && angular.isObject(result)) {[m
[32m+[m[32m          this.promises.push($q.when(result));[m
[32m+[m[32m        } else if (angular.isString(result)){[m
[32m+[m[32m          this.hasString = true;[m
[32m+[m[32m        } else { //result === true || result === undefined || result === null[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m[32m      },[m
[32m+[m[32m      //callbacks: onTrue, onFalse, onString[m
[32m+[m[32m      then: function(callbacks) {[m
[32m+[m[32m        callbacks = callbacks || {};[m
[32m+[m[32m        var onTrue = callbacks.onTrue || angular.noop;[m
[32m+[m[32m        var onFalse = callbacks.onFalse || angular.noop;[m
[32m+[m[32m        var onString = callbacks.onString || angular.noop;[m
[32m+[m[32m        var onWait = callbacks.onWait || angular.noop;[m
 [m
[31m-  for (var n in first.path) {[m
[31m-    if (first.path[n] !== second.path[n]) break;[m
[31m-    path.push(first.path[n]);[m
[31m-  }[m
[31m-  return path;[m
[31m-}[m
[32m+[m[32m        var self = this;[m
 [m
[31m-/**[m
[31m- * IE8-safe wrapper for `Object.keys()`.[m
[31m- *[m
[31m- * @param {Object} object A JavaScript object.[m
[31m- * @return {Array} Returns the keys of the object as an array.[m
[31m- */[m
[31m-function objectKeys(object) {[m
[31m-  if (Object.keys) {[m
[31m-    return Object.keys(object);[m
[31m-  }[m
[31m-  var result = [];[m
[32m+[m[32m        if (this.promises.length) {[m
[32m+[m[32m          onWait(true);[m
[32m+[m[32m          $q.all(this.promises).then([m
[32m+[m[32m            //all resolved[m[41m       [m
[32m+[m[32m            function(results) {[m
[32m+[m[32m              onWait(false);[m
[32m+[m[32m              //check all results via same `when` method (without checking promises)[m
[32m+[m[32m              angular.forEach(results, function(result) {[m
[32m+[m[32m                self.when(result, true);[m[41m  [m
[32m+[m[32m              });[m
[32m+[m[32m              applyCallback();[m
[32m+[m[32m            },[m
[32m+[m[32m            //some rejected[m
[32m+[m[32m            function(error) {[m[41m [m
[32m+[m[32m              onWait(false);[m
[32m+[m[32m              onString();[m
[32m+[m[32m            }[m
[32m+[m[32m            );[m
[32m+[m[32m        } else {[m
[32m+[m[32m          applyCallback();[m
[32m+[m[32m        }[m
 [m
[31m-  forEach(object, function(val, key) {[m
[31m-    result.push(key);[m
[31m-  });[m
[31m-  return result;[m
[31m-}[m
[32m+[m[32m        function applyCallback() {[m
[32m+[m[32m          if (!self.hasString && !self.hasFalse) {[m
[32m+[m[32m            onTrue();[m
[32m+[m[32m          } else if (!self.hasString && self.hasFalse) {[m
[32m+[m[32m            onFalse();[m
[32m+[m[32m          } else {[m
[32m+[m[32m            onString();[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
 [m
[31m-/**[m
[31m- * IE8-safe wrapper for `Array.prototype.indexOf()`.[m
[31m- *[m
[31m- * @param {Array} array A JavaScript array.[m
[31m- * @param {*} value A value to search the array for.[m
[31m- * @return {Number} Returns the array index value of `value`, or `-1` if not present.[m
[31m- */[m
[31m-function indexOf(array, value) {[m
[31m-  if (Array.prototype.indexOf) {[m
[31m-    return array.indexOf(value, Number(arguments[2]) || 0);[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
   }[m
[31m-  var len = array.length >>> 0, from = Number(arguments[2]) || 0;[m
[31m-  from = (from < 0) ? Math.ceil(from) : Math.floor(from);[m
 [m
[31m-  if (from < 0) from += len;[m
[32m+[m[32m  return promiseCollection;[m
 [m
[31m-  for (; from < len; from++) {[m
[31m-    if (from in array && array[from] === value) return from;[m
[31m-  }[m
[31m-  return -1;[m
[31m-}[m
[32m+[m[32m}]);[m
 [m
 /**[m
[31m- * Merges a set of parameters with all parameters inherited between the common parents of the[m
[31m- * current state and a given destination state.[m
[31m- *[m
[31m- * @param {Object} currentParams The value of the current state parameters ($stateParams).[m
[31m- * @param {Object} newParams The set of parameters which will be composited with inherited params.[m
[31m- * @param {Object} $current Internal definition of object representing the current state.[m
[31m- * @param {Object} $to Internal definition of object representing state to transition to.[m
[32m+[m[32m * editableUtils[m
  */[m
[31m-function inheritParams(currentParams, newParams, $current, $to) {[m
[31m-  var parents = ancestors($current, $to), parentParams, inherited = {}, inheritList = [];[m
[32m+[m[32m angular.module('xeditable').factory('editableUtils', [function() {[m
[32m+[m[32m  return {[m
[32m+[m[32m    indexOf: function (array, obj) {[m
[32m+[m[32m      if (array.indexOf) return array.indexOf(obj);[m
 [m
[31m-  for (var i in parents) {[m
[31m-    if (!parents[i].params) continue;[m
[31m-    parentParams = objectKeys(parents[i].params);[m
[31m-    if (!parentParams.length) continue;[m
[32m+[m[32m      for ( var i = 0; i < array.length; i++) {[m
[32m+[m[32m        if (obj === array[i]) return i;[m
[32m+[m[32m      }[m
[32m+[m[32m      return -1;[m
[32m+[m[32m    },[m
 [m
[31m-    for (var j in parentParams) {[m
[31m-      if (indexOf(inheritList, parentParams[j]) >= 0) continue;[m
[31m-      inheritList.push(parentParams[j]);[m
[31m-      inherited[parentParams[j]] = currentParams[parentParams[j]];[m
[31m-    }[m
[31m-  }[m
[31m-  return extend({}, inherited, newParams);[m
[31m-}[m
[32m+[m[32m    arrayRemove: function (array, value) {[m
[32m+[m[32m      var index = this.indexOf(array, value);[m
[32m+[m[32m      if (index >= 0) {[m
[32m+[m[32m        array.splice(index, 1);[m
[32m+[m[32m      }[m
[32m+[m[32m      return value;[m
[32m+[m[32m    },[m
 [m
[31m-/**[m
[31m- * Performs a non-strict comparison of the subset of two objects, defined by a list of keys.[m
[31m- *[m
[31m- * @param {Object} a The first object.[m
[31m- * @param {Object} b The second object.[m
[31m- * @param {Array} keys The list of keys within each object to compare. If the list is empty or not specified,[m
[31m- *                     it defaults to the list of keys in `a`.[m
[31m- * @return {Boolean} Returns `true` if the keys match, otherwise `false`.[m
[31m- */[m
[31m-function equalForKeys(a, b, keys) {[m
[31m-  if (!keys) {[m
[31m-    keys = [];[m
[31m-    for (var n in a) keys.push(n); // Used instead of Object.keys() for IE8 compatibility[m
[31m-  }[m
[32m+[m[32m    // copy from https://github.com/angular/angular.js/blob/master/src/Angular.js[m
[32m+[m[32m    camelToDash: function(str) {[m
[32m+[m[32m      var SNAKE_CASE_REGEXP = /[A-Z]/g;[m
[32m+[m[32m      return str.replace(SNAKE_CASE_REGEXP, function(letter, pos) {[m
[32m+[m[32m        return (pos ? '-' : '') + letter.toLowerCase();[m
[32m+[m[32m      });[m
[32m+[m[32m    },[m
 [m
[31m-  for (var i=0; i<keys.length; i++) {[m
[31m-    var k = keys[i];[m
[31m-    if (a[k] != b[k]) return false; // Not '===', values aren't necessarily normalized[m
[31m-  }[m
[31m-  return true;[m
[31m-}[m
[32m+[m[32m    dashToCamel: function(str) {[m
[32m+[m[32m      var SPECIAL_CHARS_REGEXP = /([\:\-\_]+(.))/g;[m
[32m+[m[32m      var MOZ_HACK_REGEXP = /^moz([A-Z])/;[m
[32m+[m[32m      return str.[m
[32m+[m[32m      replace(SPECIAL_CHARS_REGEXP, function(_, separator, letter, offset) {[m
[32m+[m[32m        return offset ? letter.toUpperCase() : letter;[m
[32m+[m[32m      }).[m
[32m+[m[32m      replace(MOZ_HACK_REGEXP, 'Moz$1');[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m[32m}]);[m
 [m
 /**[m
[31m- * Returns the subset of an object, based on a list of keys.[m
[32m+[m[32m * editableNgOptionsParser[m
  *[m
[31m- * @param {Array} keys[m
[31m- * @param {Object} values[m
[31m- * @return {Boolean} Returns a subset of `values`.[m
[32m+[m[32m * see: https://github.com/angular/angular.js/blob/master/src/ng/directive/select.js#L131[m
  */[m
[31m-function filterByKeys(keys, values) {[m
[31m-  var filtered = {};[m
[31m-[m
[31m-  forEach(keys, function (name) {[m
[31m-    filtered[name] = values[name];[m
[31m-  });[m
[31m-  return filtered;[m
[31m-}[m
[31m-[m
[31m-// like _.indexBy[m
[31m-// when you know that your index values will be unique, or you want last-one-in to win[m
[31m-function indexBy(array, propName) {[m
[31m-  var result = {};[m
[31m-  forEach(array, function(item) {[m
[31m-    result[item[propName]] = item;[m
[31m-  });[m
[31m-  return result;[m
[31m-}[m
[31m-[m
[31m-// extracted from underscore.js[m
[31m-// Return a copy of the object only containing the whitelisted properties.[m
[31m-function pick(obj) {[m
[31m-  var copy = {};[m
[31m-  var keys = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));[m
[31m-  forEach(keys, function(key) {[m
[31m-    if (key in obj) copy[key] = obj[key];[m
[31m-  });[m
[31m-  return copy;[m
[31m-}[m
[31m-[m
[31m-// extracted from underscore.js[m
[31m-// Return a copy of the object omitting the blacklisted properties.[m
[31m-function omit(obj) {[m
[31m-  var copy = {};[m
[31m-  var keys = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));[m
[31m-  for (var key in obj) {[m
[31m-    if (indexOf(keys, key) == -1) copy[key] = obj[key];[m
[31m-  }[m
[31m-  return copy;[m
[31m-}[m
[31m-[m
[31m-function pluck(collection, key) {[m
[31m-  var result = isArray(collection) ? [] : {};[m
[32m+[m[32m angular.module('xeditable').factory('editableNgOptionsParser', [function() {[m
[32m+[m[32m  //0000111110000000000022220000000000000000000000333300000000000000444444444444444000000000555555555555555000000066666666666666600000000000000007777000000000000000000088888[m
[32m+[m[32m  var NG_OPTIONS_REGEXP = /^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;[m
 [m
[31m-  forEach(collection, function(val, i) {[m
[31m-    result[i] = isFunction(key) ? key(val) : val[key];[m
[31m-  });[m
[31m-  return result;[m
[31m-}[m
[32m+[m[32m  function parser(optionsExp) {[m
[32m+[m[32m    var match;[m
 [m
[31m-function filter(collection, callback) {[m
[31m-  var array = isArray(collection);[m
[31m-  var result = array ? [] : {};[m
[31m-  forEach(collection, function(val, i) {[m
[31m-    if (callback(val, i)) {[m
[31m-      result[array ? result.length : i] = val;[m
[32m+[m[32m    if (! (match = optionsExp.match(NG_OPTIONS_REGEXP))) {[m
[32m+[m[32m      throw 'ng-options parse error';[m
     }[m
[31m-  });[m
[31m-  return result;[m
[31m-}[m
[31m-[m
[31m-function map(collection, callback) {[m
[31m-  var result = isArray(collection) ? [] : {};[m
 [m
[31m-  forEach(collection, function(val, i) {[m
[31m-    result[i] = callback(val, i);[m
[31m-  });[m
[31m-  return result;[m
[31m-}[m
[32m+[m[32m    var[m[41m [m
[32m+[m[32m    displayFn = match[2] || match[1],[m
[32m+[m[32m    valueName = match[4] || match[6],[m
[32m+[m[32m    keyName = match[5],[m
[32m+[m[32m    groupByFn = match[3] || '',[m
[32m+[m[32m    valueFn = match[2] ? match[1] : valueName,[m
[32m+[m[32m    valuesFn = match[7],[m
[32m+[m[32m    track = match[8],[m
[32m+[m[32m    trackFn = track ? match[8] : null;[m
 [m
[31m-/**[m
[31m- * @ngdoc overview[m
[31m- * @name ui.router.util[m
[31m- *[m
[31m- * @description[m
[31m- * # ui.router.util sub-module[m
[31m- *[m
[31m- * This module is a dependency of other sub-modules. Do not include this module as a dependency[m
[31m- * in your angular app (use {@link ui.router} module instead).[m
[31m- *[m
[31m- */[m
[31m-angular.module('ui.router.util', ['ng']);[m
[32m+[m[32m    var ngRepeat;[m
[32m+[m[32m    if (keyName === undefined) { // array[m
[32m+[m[32m      ngRepeat = valueName + ' in ' + valuesFn;[m
[32m+[m[32m      if (track !== undefined) {[m
[32m+[m[32m        ngRepeat += ' track by '+trackFn;[m
[32m+[m[32m      }[m
[32m+[m[32m    } else { // object[m
[32m+[m[32m      ngRepeat = '('+keyName+', '+valueName+') in '+valuesFn;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // group not supported yet[m
[32m+[m[32m    return {[m
[32m+[m[32m      ngRepeat: ngRepeat,[m
[32m+[m[32m      locals: {[m
[32m+[m[32m        valueName: valueName,[m
[32m+[m[32m        keyName: keyName,[m
[32m+[m[32m        valueFn: valueFn,[m
[32m+[m[32m        displayFn: displayFn[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
[32m+[m[32m  }[m
 [m
[31m-/**[m
[31m- * @ngdoc overview[m
[31m- * @name ui.router.router[m
[31m- * [m
[31m- * @requires ui.router.util[m
[31m- *[m
[31m- * @description[m
[31m- * # ui.router.router sub-module[m
[31m- *[m
[31m- * This module is a dependency of other sub-modules. Do not include this module as a dependency[m
[31m- * in your angular app (use {@link ui.router} module instead).[m
[31m- */[m
[31m-angular.module('ui.router.router', ['ui.router.util']);[m
[32m+[m[32m  return parser;[m
[32m+[m[32m}]);[m
 [m
 /**[m
[31m- * @ngdoc overview[m
[31m- * @name ui.router.state[m
[31m- * [m
[31m- * @requires ui.router.router[m
[31m- * @requires ui.router.util[m
[31m- *[m
[31m- * @description[m
[31m- * # ui.router.state sub-module[m
[32m+[m[32m * editableCombodate[m
  *[m
[31m- * This module is a dependency of the main ui.router module. Do not include this module as a dependency[m
[31m- * in your angular app (use {@link ui.router} module instead).[m
[31m- * [m
[32m+[m[32m * angular version of https://github.com/vitalets/combodate[m
  */[m
[31m-angular.module('ui.router.state', ['ui.router.router', 'ui.router.util']);[m
[32m+[m[32mangular.module('xeditable').factory('editableCombodate', [function() {[m
[32m+[m[32m  function Combodate(element, options) {[m
[32m+[m[32m    this.$element = angular.element(element);[m
 [m
[31m-/**[m
[31m- * @ngdoc overview[m
[31m- * @name ui.router[m
[31m- *[m
[31m- * @requires ui.router.state[m
[31m- *[m
[31m- * @description[m
[31m- * # ui.router[m
[31m- * [m
[31m- * ## The main module for ui.router [m
[31m- * There are several sub-modules included with the ui.router module, however only this module is needed[m
[31m- * as a dependency within your angular app. The other modules are for organization purposes. [m
[31m- *[m
[31m- * The modules are:[m
[31m- * * ui.router - the main "umbrella" module[m
[31m- * * ui.router.router - [m
[31m- * [m
[31m- * *You'll need to include **only** this module as the dependency within your angular app.*[m
[31m- * [m
[31m- * <pre>[m
[31m- * <!doctype html>[m
[31m- * <html ng-app="myApp">[m
[31m- * <head>[m
[31m- *   <script src="js/angular.js"></script>[m
[31m- *   <!-- Include the ui-router script -->[m
[31m- *   <script src="js/angular-ui-router.min.js"></script>[m
[31m- *   <script>[m
[31m- *     // ...and add 'ui.router' as a dependency[m
[31m- *     var myApp = angular.module('myApp', ['ui.router']);[m
[31m- *   </script>[m
[31m- * </head>[m
[31m- * <body>[m
[31m- * </body>[m
[31m- * </html>[m
[31m- * </pre>[m
[31m- */[m
[31m-angular.module('ui.router', ['ui.router.state']);[m
[32m+[m[32m    if(this.$element[0].nodeName != 'INPUT') {[m
[32m+[m[32m      throw 'Combodate should be applied to INPUT element';[m
[32m+[m[32m    }[m
 [m
[31m-angular.module('ui.router.compat', ['ui.router']);[m
[32m+[m[32m    this.defaults = {[m
[32m+[m[32m      //in this format value stored in original input[m
[32m+[m[32m      format: 'YYYY-MM-DD HH:mm',[m
[32m+[m[32m      //in this format items in dropdowns are displayed[m
[32m+[m[32m      template: 'D / MMM / YYYY   H : mm',[m
[32m+[m[32m      //initial value, can be `new Date()`[m
[32m+[m[32m      value: null,[m
[32m+[m[32m      minYear: 1970,[m
[32m+[m[32m      maxYear: 2015,[m
[32m+[m[32m      yearDescending: true,[m
[32m+[m[32m      minuteStep: 5,[m
[32m+[m[32m      secondStep: 1,[m
[32m+[m[32m      firstItem: 'empty', //'name', 'empty', 'none'[m
[32m+[m[32m      errorClass: null,[m
[32m+[m[32m      customClass: '',[m
[32m+[m[32m      roundTime: true, // whether to round minutes and seconds if step > 1[m
[32m+[m[32m      smartDays: true // whether days in combo depend on selected month: 31, 30, 28[m
[32m+[m[32m    };[m
 [m
[31m-/**[m
[31m- * @ngdoc object[m
[31m- * @name ui.router.util.$resolve[m
[31m- *[m
[31m- * @requires $q[m
[31m- * @requires $injector[m
[31m- *[m
[31m- * @description[m
[31m- * Manages resolution of (acyclic) graphs of promises.[m
[31m- */[m
[31m-$Resolve.$inject = ['$q', '$injector'];[m
[31m-function $Resolve(  $q,    $injector) {[m
[31m-  [m
[31m-  var VISIT_IN_PROGRESS = 1,[m
[31m-      VISIT_DONE = 2,[m
[31m-      NOTHING = {},[m
[31m-      NO_DEPENDENCIES = [],[m
[31m-      NO_LOCALS = NOTHING,[m
[31m-      NO_PARENT = extend($q.when(NOTHING), { $$promises: NOTHING, $$values: NOTHING });[m
[31m-  [m
[32m+[m[32m    this.options = angular.extend({}, this.defaults, options);[m
[32m+[m[32m    this.init();[m
[32m+[m[32m  }[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$resolve#study[m
[31m-   * @methodOf ui.router.util.$resolve[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Studies a set of invocables that are likely to be used multiple times.[m
[31m-   * <pre>[m
[31m-   * $resolve.study(invocables)(locals, parent, self)[m
[31m-   * </pre>[m
[31m-   * is equivalent to[m
[31m-   * <pre>[m
[31m-   * $resolve.resolve(invocables, locals, parent, self)[m
[31m-   * </pre>[m
[31m-   * but the former is more efficient (in fact `resolve` just calls `study` [m
[31m-   * internally).[m
[31m-   *[m
[31m-   * @param {object} invocables Invocable objects[m
[31m-   * @return {function} a function to pass in locals, parent and self[m
[31m-   */[m
[31m-  this.study = function (invocables) {[m
[31m-    if (!isObject(invocables)) throw new Error("'invocables' must be an object");[m
[31m-    var invocableKeys = objectKeys(invocables || {});[m
[31m-    [m
[31m-    // Perform a topological sort of invocables to build an ordered plan[m
[31m-    var plan = [], cycle = [], visited = {};[m
[31m-    function visit(value, key) {[m
[31m-      if (visited[key] === VISIT_DONE) return;[m
[31m-      [m
[31m-      cycle.push(key);[m
[31m-      if (visited[key] === VISIT_IN_PROGRESS) {[m
[31m-        cycle.splice(0, indexOf(cycle, key));[m
[31m-        throw new Error("Cyclic dependency: " + cycle.join(" -> "));[m
[31m-      }[m
[31m-      visited[key] = VISIT_IN_PROGRESS;[m
[31m-      [m
[31m-      if (isString(value)) {[m
[31m-        plan.push(key, [ function() { return $injector.get(value); }], NO_DEPENDENCIES);[m
[31m-      } else {[m
[31m-        var params = $injector.annotate(value);[m
[31m-        forEach(params, function (param) {[m
[31m-          if (param !== key && invocables.hasOwnProperty(param)) visit(invocables[param], param);[m
[31m-        });[m
[31m-        plan.push(key, value, params);[m
[31m-      }[m
[32m+[m[32m  Combodate.prototype = {[m
[32m+[m[32m    constructor: Combodate,[m
[32m+[m[32m    init: function () {[m
[32m+[m[32m      this.map = {[m
[32m+[m[32m        //key   regexp    moment.method[m
[32m+[m[32m        day:    ['D',    'date'],[m[41m [m
[32m+[m[32m        month:  ['M',    'month'],[m[41m [m
[32m+[m[32m        year:   ['Y',    'year'],[m[41m [m
[32m+[m[32m        hour:   ['[Hh]', 'hours'],[m
[32m+[m[32m        minute: ['m',    'minutes'],[m[41m [m
[32m+[m[32m        second: ['s',    'seconds'],[m
[32m+[m[32m        ampm:   ['[Aa]', ''][m[41m [m
[32m+[m[32m      };[m
       [m
[31m-      cycle.pop();[m
[31m-      visited[key] = VISIT_DONE;[m
[31m-    }[m
[31m-    forEach(invocables, visit);[m
[31m-    invocables = cycle = visited = null; // plan is all that's required[m
[31m-    [m
[31m-    function isResolve(value) {[m
[31m-      return isObject(value) && value.then && value.$$promises;[m
[31m-    }[m
[31m-    [m
[31m-    return function (locals, parent, self) {[m
[31m-      if (isResolve(locals) && self === undefined) {[m
[31m-        self = parent; parent = locals; locals = null;[m
[31m-      }[m
[31m-      if (!locals) locals = NO_LOCALS;[m
[31m-      else if (!isObject(locals)) {[m
[31m-        throw new Error("'locals' must be an object");[m
[31m-      }       [m
[31m-      if (!parent) parent = NO_PARENT;[m
[31m-      else if (!isResolve(parent)) {[m
[31m-        throw new Error("'parent' must be a promise returned by $resolve.resolve()");[m
[31m-      }[m
[32m+[m[32m      this.$widget = angular.element('<span class="combodate"></span>').html(this.getTemplate());[m
       [m
[31m-      // To complete the overall resolution, we have to wait for the parent[m
[31m-      // promise and for the promise for each invokable in our plan.[m
[31m-      var resolution = $q.defer(),[m
[31m-          result = resolution.promise,[m
[31m-          promises = result.$$promises = {},[m
[31m-          values = extend({}, locals),[m
[31m-          wait = 1 + plan.length/3,[m
[31m-          merged = false;[m
[31m-          [m
[31m-      function done() {[m
[31m-        // Merge parent values we haven't got yet and publish our own $$values[m
[31m-        if (!--wait) {[m
[31m-          if (!merged) merge(values, parent.$$values); [m
[31m-          result.$$values = values;[m
[31m-          result.$$promises = result.$$promises || true; // keep for isResolve()[m
[31m-          delete result.$$inheritedValues;[m
[31m-          resolution.resolve(values);[m
[31m-        }[m
[31m-      }[m
[32m+[m[32m      this.initCombos();[m
       [m
[31m-      function fail(reason) {[m
[31m-        result.$$failure = reason;[m
[31m-        resolution.reject(reason);[m
[32m+[m[32m      if (this.options.smartDays) {[m
[32m+[m[32m        var combo = this;[m
[32m+[m[32m        this.$widget.find('select').bind('change', function(e) {[m
[32m+[m[32m          // update days count if month or year changes[m
[32m+[m[32m          if (angular.element(e.target).hasClass('month') || angular.element(e.target).hasClass('year')) {[m
[32m+[m[32m            combo.fillCombo('day');[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m[41m        [m
       }[m
 [m
[31m-      // Short-circuit if parent has already failed[m
[31m-      if (isDefined(parent.$$failure)) {[m
[31m-        fail(parent.$$failure);[m
[31m-        return result;[m
[31m-      }[m
[32m+[m[32m      this.$widget.find('select').css('width', 'auto');[m
[32m+[m
[32m+[m[32m      // hide original input and insert widget[m[41m                                       [m
[32m+[m[32m      this.$element.css('display', 'none').after(this.$widget);[m
       [m
[31m-      if (parent.$$inheritedValues) {[m
[31m-        merge(values, omit(parent.$$inheritedValues, invocableKeys));[m
[32m+[m[32m      // set initial value[m
[32m+[m[32m      this.setValue(this.$element.val() || this.options.value);[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    /*[m
[32m+[m[32m     Replace tokens in template with <select> elements[m[41m [m
[32m+[m[32m     */[m[41m         [m
[32m+[m[32m     getTemplate: function() {[m
[32m+[m[32m      var tpl = this.options.template;[m
[32m+[m[32m      var customClass = this.options.customClass;[m
[32m+[m
[32m+[m[32m      //first pass[m
[32m+[m[32m      angular.forEach(this.map, function(v, k) {[m
[32m+[m[32m        v = v[0];[m[41m [m
[32m+[m[32m        var r = new RegExp(v+'+');[m
[32m+[m[32m        var token = v.length > 1 ? v.substring(1, 2) : v;[m
[32m+[m[41m        [m
[32m+[m[32m        tpl = tpl.replace(r, '{'+token+'}');[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      //replace spaces with &nbsp;[m
[32m+[m[32m      tpl = tpl.replace(/ /g, '&nbsp;');[m
[32m+[m
[32m+[m[32m      //second pass[m
[32m+[m[32m      angular.forEach(this.map, function(v, k) {[m
[32m+[m[32m        v = v[0];[m
[32m+[m[32m        var token = v.length > 1 ? v.substring(1, 2) : v;[m
[32m+[m
[32m+[m[32m        tpl = tpl.replace('{'+token+'}', '<select class="'+k+' '+customClass+'"></select>');[m
[32m+[m[32m      });[m[41m   [m
[32m+[m
[32m+[m[32m      return tpl;[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    /*[m
[32m+[m[32m     Initialize combos that presents in template[m[41m [m
[32m+[m[32m     */[m[41m        [m
[32m+[m[32m     initCombos: function() {[m
[32m+[m[32m      for (var k in this.map) {[m
[32m+[m[32m        var c = this.$widget[0].querySelectorAll('.'+k);[m
[32m+[m[32m        // set properties like this.$day, this.$month etc.[m
[32m+[m[32m        this['$'+k] = c.length ? angular.element(c) : null;[m
[32m+[m[32m        // fill with items[m
[32m+[m[32m        this.fillCombo(k);[m
       }[m
[32m+[m[32m    },[m
 [m
[31m-      // Merge parent values if the parent has already resolved, or merge[m
[31m-      // parent promises and wait if the parent resolve is still in progress.[m
[31m-      extend(promises, parent.$$promises);[m
[31m-      if (parent.$$values) {[m
[31m-        merged = merge(values, omit(parent.$$values, invocableKeys));[m
[31m-        result.$$inheritedValues = omit(parent.$$values, invocableKeys);[m
[31m-        done();[m
[31m-      } else {[m
[31m-        if (parent.$$inheritedValues) {[m
[31m-          result.$$inheritedValues = omit(parent.$$inheritedValues, invocableKeys);[m
[31m-        }        [m
[31m-        parent.then(done, fail);[m
[31m-      }[m
[31m-      [m
[31m-      // Process each invocable in the plan, but ignore any where a local of the same name exists.[m
[31m-      for (var i=0, ii=plan.length; i<ii; i+=3) {[m
[31m-        if (locals.hasOwnProperty(plan[i])) done();[m
[31m-        else invoke(plan[i], plan[i+1], plan[i+2]);[m
[31m-      }[m
[31m-      [m
[31m-      function invoke(key, invocable, params) {[m
[31m-        // Create a deferred for this invocation. Failures will propagate to the resolution as well.[m
[31m-        var invocation = $q.defer(), waitParams = 0;[m
[31m-        function onfailure(reason) {[m
[31m-          invocation.reject(reason);[m
[31m-          fail(reason);[m
[31m-        }[m
[31m-        // Wait for any parameter that we have a promise for (either from parent or from this[m
[31m-        // resolve; in that case study() will have made sure it's ordered before us in the plan).[m
[31m-        forEach(params, function (dep) {[m
[31m-          if (promises.hasOwnProperty(dep) && !locals.hasOwnProperty(dep)) {[m
[31m-            waitParams++;[m
[31m-            promises[dep].then(function (result) {[m
[31m-              values[dep] = result;[m
[31m-              if (!(--waitParams)) proceed();[m
[31m-            }, onfailure);[m
[31m-          }[m
[31m-        });[m
[31m-        if (!waitParams) proceed();[m
[31m-        function proceed() {[m
[31m-          if (isDefined(result.$$failure)) return;[m
[31m-          try {[m
[31m-            invocation.resolve($injector.invoke(invocable, self, values));[m
[31m-            invocation.promise.then(function (result) {[m
[31m-              values[key] = result;[m
[31m-              done();[m
[31m-            }, onfailure);[m
[31m-          } catch (e) {[m
[31m-            onfailure(e);[m
[31m-          }[m
[31m-        }[m
[31m-        // Publish promise synchronously; invocations further down in the plan may depend on it.[m
[31m-        promises[key] = invocation.promise;[m
[32m+[m[32m    /*[m
[32m+[m[32m     Fill combo with items[m[41m [m
[32m+[m[32m     */[m[41m        [m
[32m+[m[32m     fillCombo: function(k) {[m
[32m+[m[32m      var $combo = this['$'+k];[m
[32m+[m[32m      if (!$combo) {[m
[32m+[m[32m        return;[m
       }[m
[31m-      [m
[31m-      return result;[m
[31m-    };[m
[31m-  };[m
[31m-  [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$resolve#resolve[m
[31m-   * @methodOf ui.router.util.$resolve[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Resolves a set of invocables. An invocable is a function to be invoked via [m
[31m-   * `$injector.invoke()`, and can have an arbitrary number of dependencies. [m
[31m-   * An invocable can either return a value directly,[m
[31m-   * or a `$q` promise. If a promise is returned it will be resolved and the [m
[31m-   * resulting value will be used instead. Dependencies of invocables are resolved [m
[31m-   * (in this order of precedence)[m
[31m-   *[m
[31m-   * - from the specified `locals`[m
[31m-   * - from another invocable that is part of this `$resolve` call[m
[31m-   * - from an invocable that is inherited from a `parent` call to `$resolve` [m
[31m-   *   (or recursively[m
[31m-   * - from any ancestor `$resolve` of that parent).[m
[31m-   *[m
[31m-   * The return value of `$resolve` is a promise for an object that contains [m
[31m-   * (in this order of precedence)[m
[31m-   *[m
[31m-   * - any `locals` (if specified)[m
[31m-   * - the resolved return values of all injectables[m
[31m-   * - any values inherited from a `parent` call to `$resolve` (if specified)[m
[31m-   *[m
[31m-   * The promise will resolve after the `parent` promise (if any) and all promises [m
[31m-   * returned by injectables have been resolved. If any invocable [m
[31m-   * (or `$injector.invoke`) throws an exception, or if a promise returned by an [m
[31m-   * invocable is rejected, the `$resolve` promise is immediately rejected with the [m
[31m-   * same error. A rejection of a `parent` promise (if specified) will likewise be [m
[31m-   * propagated immediately. Once the `$resolve` promise has been rejected, no [m
[31m-   * further invocables will be called.[m
[31m-   * [m
[31m-   * Cyclic dependencies between invocables are not permitted and will caues `$resolve`[m
[31m-   * to throw an error. As a special case, an injectable can depend on a parameter [m
[31m-   * with the same name as the injectable, which will be fulfilled from the `parent` [m
[31m-   * injectable of the same name. This allows inherited values to be decorated. [m
[31m-   * Note that in this case any other injectable in the same `$resolve` with the same[m
[31m-   * dependency would see the decorated value, not the inherited value.[m
[31m-   *[m
[31m-   * Note that missing dependencies -- unlike cyclic dependencies -- will cause an [m
[31m-   * (asynchronous) rejection of the `$resolve` promise rather than a (synchronous) [m
[31m-   * exception.[m
[31m-   *[m
[31m-   * Invocables are invoked eagerly as soon as all dependencies are available. [m
[31m-   * This is true even for dependencies inherited from a `parent` call to `$resolve`.[m
[31m-   *[m
[31m-   * As a special case, an invocable can be a string, in which case it is taken to [m
[31m-   * be a service name to be passed to `$injector.get()`. This is supported primarily [m
[31m-   * for backwards-compatibility with the `resolve` property of `$routeProvider` [m
[31m-   * routes.[m
[31m-   *[m
[31m-   * @param {object} invocables functions to invoke or [m
[31m-   * `$injector` services to fetch.[m
[31m-   * @param {object} locals  values to make available to the injectables[m
[31m-   * @param {object} parent  a promise returned by another call to `$resolve`.[m
[31m-   * @param {object} self  the `this` for the invoked methods[m
[31m-   * @return {object} Promise for an object that contains the resolved return value[m
[31m-   * of all invocables, as well as any inherited and local values.[m
[31m-   */[m
[31m-  this.resolve = function (invocables, locals, parent, self) {[m
[31m-    return this.study(invocables)(locals, parent, self);[m
[31m-  };[m
[31m-}[m
 [m
[31m-angular.module('ui.router.util').service('$resolve', $Resolve);[m
[32m+[m[32m      // define method name to fill items, e.g `fillDays`[m
[32m+[m[32m      var f = 'fill' + k.charAt(0).toUpperCase() + k.slice(1);[m[41m [m
[32m+[m[32m      var items = this[f]();[m
[32m+[m[32m      var value = $combo.val();[m
 [m
[32m+[m[32m      $combo.html('');[m
[32m+[m[32m      for(var i=0; i<items.length; i++) {[m
[32m+[m[32m        $combo.append('<option value="'+items[i][0]+'">'+items[i][1]+'</option>');[m
[32m+[m[32m      }[m
 [m
[31m-/**[m
[31m- * @ngdoc object[m
[31m- * @name ui.router.util.$templateFactory[m
[31m- *[m
[31m- * @requires $http[m
[31m- * @requires $templateCache[m
[31m- * @requires $injector[m
[31m- *[m
[31m- * @description[m
[31m- * Service. Manages loading of templates.[m
[31m- */[m
[31m-$TemplateFactory.$inject = ['$http', '$templateCache', '$injector'];[m
[31m-function $TemplateFactory(  $http,   $templateCache,   $injector) {[m
[32m+[m[32m      $combo.val(value);[m
[32m+[m[32m    },[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$templateFactory#fromConfig[m
[31m-   * @methodOf ui.router.util.$templateFactory[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Creates a template from a configuration object. [m
[31m-   *[m
[31m-   * @param {object} config Configuration object for which to load a template. [m
[31m-   * The following properties are search in the specified order, and the first one [m
[31m-   * that is defined is used to create the template:[m
[31m-   *[m
[31m-   * @param {string|object} config.template html string template or function to [m
[31m-   * load via {@link ui.router.util.$templateFactory#fromString fromString}.[m
[31m-   * @param {string|object} config.templateUrl url to load or a function returning [m
[31m-   * the url to load via {@link ui.router.util.$templateFactory#fromUrl fromUrl}.[m
[31m-   * @param {Function} config.templateProvider function to invoke via [m
[31m-   * {@link ui.router.util.$templateFactory#fromProvider fromProvider}.[m
[31m-   * @param {object} params  Parameters to pass to the template function.[m
[31m-   * @param {object} locals Locals to pass to `invoke` if the template is loaded [m
[31m-   * via a `templateProvider`. Defaults to `{ params: params }`.[m
[31m-   *[m
[31m-   * @return {string|object}  The template html as a string, or a promise for [m
[31m-   * that string,or `null` if no template is configured.[m
[31m-   */[m
[31m-  this.fromConfig = function (config, params, locals) {[m
[31m-    return ([m
[31m-      isDefined(config.template) ? this.fromString(config.template, params) :[m
[31m-      isDefined(config.templateUrl) ? this.fromUrl(config.templateUrl, params) :[m
[31m-      isDefined(config.templateProvider) ? this.fromProvider(config.templateProvider, params, locals) :[m
[31m-      null[m
[31m-    );[m
[31m-  };[m
[32m+[m[32m    /*[m
[32m+[m[32m     Initialize items of combos. Handles `firstItem` option[m[41m [m
[32m+[m[32m     */[m
[32m+[m[32m     fillCommon: function(key) {[m
[32m+[m[32m      var values = [], relTime;[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$templateFactory#fromString[m
[31m-   * @methodOf ui.router.util.$templateFactory[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Creates a template from a string or a function returning a string.[m
[31m-   *[m
[31m-   * @param {string|object} template html template as a string or function that [m
[31m-   * returns an html template as a string.[m
[31m-   * @param {object} params Parameters to pass to the template function.[m
[31m-   *[m
[31m-   * @return {string|object} The template html as a string, or a promise for that [m
[31m-   * string.[m
[31m-   */[m
[31m-  this.fromString = function (template, params) {[m
[31m-    return isFunction(template) ? template(params) : template;[m
[31m-  };[m
[32m+[m[32m      if(this.options.firstItem === 'name') {[m
[32m+[m[32m        //need both to support moment ver < 2 and  >= 2[m
[32m+[m[32m        relTime = moment.relativeTime || moment.langData()._relativeTime;[m[41m [m
[32m+[m[32m        var header = typeof relTime[key] === 'function' ? relTime[key](1, true, key, false) : relTime[key];[m
[32m+[m[32m        //take last entry (see momentjs lang files structure)[m[41m [m
[32m+[m[32m        header = header.split(' ').reverse()[0];[m[41m                [m
[32m+[m[32m        values.push(['', header]);[m
[32m+[m[32m      } else if(this.options.firstItem === 'empty') {[m
[32m+[m[32m        values.push(['', '']);[m
[32m+[m[32m      }[m
[32m+[m[32m      return values;[m
[32m+[m[32m    },[m[41m  [m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$templateFactory#fromUrl[m
[31m-   * @methodOf ui.router.util.$templateFactory[m
[31m-   * [m
[31m-   * @description[m
[31m-   * Loads a template from the a URL via `$http` and `$templateCache`.[m
[31m-   *[m
[31m-   * @param {string|Function} url url of the template to load, or a function [m
[31m-   * that returns a url.[m
[31m-   * @param {Object} params Parameters to pass to the url function.[m
[31m-   * @return {string|Promise.<string>} The template html as a string, or a promise [m
[31m-   * for that string.[m
[31m-   */[m
[31m-  this.fromUrl = function (url, params) {[m
[31m-    if (isFunction(url)) url = url(params);[m
[31m-    if (url == null) return null;[m
[31m-    else return $http[m
[31m-        .get(url, { cache: $templateCache, headers: { Accept: 'text/html' }})[m
[31m-        .then(function(response) { return response.data; });[m
[31m-  };[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$templateFactory#fromProvider[m
[31m-   * @methodOf ui.router.util.$templateFactory[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Creates a template by invoking an injectable provider function.[m
[31m-   *[m
[31m-   * @param {Function} provider Function to invoke via `$injector.invoke`[m
[31m-   * @param {Object} params Parameters for the template.[m
[31m-   * @param {Object} locals Locals to pass to `invoke`. Defaults to [m
[31m-   * `{ params: params }`.[m
[31m-   * @return {string|Promise.<string>} The template html as a string, or a promise [m
[31m-   * for that string.[m
[31m-   */[m
[31m-  this.fromProvider = function (provider, params, locals) {[m
[31m-    return $injector.invoke(provider, null, locals || { params: params });[m
[31m-  };[m
[31m-}[m
[32m+[m[32m    /*[m
[32m+[m[32m    fill day[m
[32m+[m[32m    */[m
[32m+[m[32m    fillDay: function() {[m
[32m+[m[32m      var items = this.fillCommon('d'), name, i,[m
[32m+[m[32m      twoDigit = this.options.template.indexOf('DD') !== -1,[m
[32m+[m[32m      daysCount = 31;[m
 [m
[31m-angular.module('ui.router.util').service('$templateFactory', $TemplateFactory);[m
[32m+[m[32m      // detect days count (depends on month and year)[m
[32m+[m[32m      // originally https://github.com/vitalets/combodate/pull/7[m
[32m+[m[32m      if (this.options.smartDays && this.$month && this.$year) {[m
[32m+[m[32m        var month = parseInt(this.$month.val(), 10);[m
[32m+[m[32m        var year = parseInt(this.$year.val(), 10);[m
 [m
[31m-var $$UMFP; // reference to $UrlMatcherFactoryProvider[m
[32m+[m[32m        if (!isNaN(month) && !isNaN(year)) {[m
[32m+[m[32m          daysCount = moment([year, month]).daysInMonth();[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
 [m
[31m-/**[m
[31m- * @ngdoc object[m
[31m- * @name ui.router.util.type:UrlMatcher[m
[31m- *[m
[31m- * @description[m
[31m- * Matches URLs against patterns and extracts named parameters from the path or the search[m
[31m- * part of the URL. A URL pattern consists of a path pattern, optionally followed by '?' and a list[m
[31m- * of search parameters. Multiple search parameter names are separated by '&'. Search parameters[m
[31m- * do not influence whether or not a URL is matched, but their values are passed through into[m
[31m- * the matched parameters returned by {@link ui.router.util.type:UrlMatcher#methods_exec exec}.[m
[31m- *[m
[31m- * Path parameter placeholders can be specified using simple colon/catch-all syntax or curly brace[m
[31m- * syntax, which optionally allows a regular expression for the parameter to be specified:[m
[31m- *[m
[31m- * * `':'` name - colon placeholder[m
[31m- * * `'*'` name - catch-all placeholder[m
[31m- * * `'{' name '}'` - curly placeholder[m
[31m- * * `'{' name ':' regexp|type '}'` - curly placeholder with regexp or type name. Should the[m
[31m- *   regexp itself contain curly braces, they must be in matched pairs or escaped with a backslash.[m
[31m- *[m
[31m- * Parameter names may contain only word characters (latin letters, digits, and underscore) and[m
[31m- * must be unique within the pattern (across both path and search parameters). For colon[m
[31m- * placeholders or curly placeholders without an explicit regexp, a path parameter matches any[m
[31m- * number of characters other than '/'. For catch-all placeholders the path parameter matches[m
[31m- * any number of characters.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- * * `'/hello/'` - Matches only if the path is exactly '/hello/'. There is no special treatment for[m
[31m- *   trailing slashes, and patterns have to match the entire path, not just a prefix.[m
[31m- * * `'/user/:id'` - Matches '/user/bob' or '/user/1234!!!' or even '/user/' but not '/user' or[m
[31m- *   '/user/bob/details'. The second path segment will be captured as the parameter 'id'.[m
[31m- * * `'/user/{id}'` - Same as the previous example, but using curly brace syntax.[m
[31m- * * `'/user/{id:[^/]*}'` - Same as the previous example.[m
[31m- * * `'/user/{id:[0-9a-fA-F]{1,8}}'` - Similar to the previous example, but only matches if the id[m
[31m- *   parameter consists of 1 to 8 hex digits.[m
[31m- * * `'/files/{path:.*}'` - Matches any URL starting with '/files/' and captures the rest of the[m
[31m- *   path into the parameter 'path'.[m
[31m- * * `'/files/*path'` - ditto.[m
[31m- * * `'/calendar/{start:date}'` - Matches "/calendar/2014-11-12" (because the pattern defined[m
[31m- *   in the built-in  `date` Type matches `2014-11-12`) and provides a Date object in $stateParams.start[m
[31m- *[m
[31m- * @param {string} pattern  The pattern to compile into a matcher.[m
[31m- * @param {Object} config  A configuration object hash:[m
[31m- * @param {Object=} parentMatcher Used to concatenate the pattern/config onto[m
[31m- *   an existing UrlMatcher[m
[31m- *[m
[31m- * * `caseInsensitive` - `true` if URL matching should be case insensitive, otherwise `false`, the default value (for backward compatibility) is `false`.[m
[31m- * * `strict` - `false` if matching against a URL with a trailing slash should be treated as equivalent to a URL without a trailing slash, the default value is `true`.[m
[31m- *[m
[31m- * @property {string} prefix  A static prefix of this pattern. The matcher guarantees that any[m
[31m- *   URL matching this matcher (i.e. any string for which {@link ui.router.util.type:UrlMatcher#methods_exec exec()} returns[m
[31m- *   non-null) will start with this prefix.[m
[31m- *[m
[31m- * @property {string} source  The pattern that was passed into the constructor[m
[31m- *[m
[31m- * @property {string} sourcePath  The path portion of the source property[m
[31m- *[m
[31m- * @property {string} sourceSearch  The search portion of the source property[m
[31m- *[m
[31m- * @property {string} regex  The constructed regex that will be used to match against the url when[m
[31m- *   it is time to determine which url will match.[m
[31m- *[m
[31m- * @returns {Object}  New `UrlMatcher` object[m
[31m- */[m
[31m-function UrlMatcher(pattern, config, parentMatcher) {[m
[31m-  config = extend({ params: {} }, isObject(config) ? config : {});[m
[32m+[m[32m      for (i = 1; i <= daysCount; i++) {[m
[32m+[m[32m        name = twoDigit ? this.leadZero(i) : i;[m
[32m+[m[32m        items.push([i, name]);[m
[32m+[m[32m      }[m
[32m+[m[32m      return items;[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    /*[m
[32m+[m[32m    fill month[m
[32m+[m[32m    */[m
[32m+[m[32m    fillMonth: function() {[m
[32m+[m[32m      var items = this.fillCommon('M'), name, i,[m[41m [m
[32m+[m[32m      longNames = this.options.template.indexOf('MMMM') !== -1,[m
[32m+[m[32m      shortNames = this.options.template.indexOf('MMM') !== -1,[m
[32m+[m[32m      twoDigit = this.options.template.indexOf('MM') !== -1;[m
 [m
[31m-  // Find all placeholders and create a compiled pattern, using either classic or curly syntax:[m
[31m-  //   '*' name[m
[31m-  //   ':' name[m
[31m-  //   '{' name '}'[m
[31m-  //   '{' name ':' regexp '}'[m
[31m-  // The regular expression is somewhat complicated due to the need to allow curly braces[m
[31m-  // inside the regular expression. The placeholder regexp breaks down as follows:[m
[31m-  //    ([:*])([\w\[\]]+)              - classic placeholder ($1 / $2) (search version has - for snake-case)[m
[31m-  //    \{([\w\[\]]+)(?:\:( ... ))?\}  - curly brace placeholder ($3) with optional regexp/type ... ($4) (search version has - for snake-case[m
[31m-  //    (?: ... | ... | ... )+         - the regexp consists of any number of atoms, an atom being either[m
[31m-  //    [^{}\\]+                       - anything other than curly braces or backslash[m
[31m-  //    \\.                            - a backslash escape[m
[31m-  //    \{(?:[^{}\\]+|\\.)*\}          - a matched set of curly braces containing other atoms[m
[31m-  var placeholder       = /([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,[m
[31m-      searchPlaceholder = /([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,[m
[31m-      compiled = '^', last = 0, m,[m
[31m-      segments = this.segments = [],[m
[31m-      parentParams = parentMatcher ? parentMatcher.params : {},[m
[31m-      params = this.params = parentMatcher ? parentMatcher.params.$$new() : new $$UMFP.ParamSet(),[m
[31m-      paramNames = [];[m
[32m+[m[32m      for(i=0; i<=11; i++) {[m
[32m+[m[32m        if(longNames) {[m
[32m+[m[32m          //see https://github.com/timrwood/momentjs.com/pull/36[m
[32m+[m[32m          name = moment().date(1).month(i).format('MMMM');[m
[32m+[m[32m        } else if(shortNames) {[m
[32m+[m[32m          name = moment().date(1).month(i).format('MMM');[m
[32m+[m[32m        } else if(twoDigit) {[m
[32m+[m[32m          name = this.leadZero(i+1);[m
[32m+[m[32m        } else {[m
[32m+[m[32m          name = i+1;[m
[32m+[m[32m        }[m
[32m+[m[32m        items.push([i, name]);[m
[32m+[m[32m      }[m[41m [m
[32m+[m[32m      return items;[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    /*[m
[32m+[m[32m    fill year[m
[32m+[m[32m    */[m
[32m+[m[32m    fillYear: function() {[m
[32m+[m[32m      var items = [], name, i,[m[41m [m
[32m+[m[32m      longNames = this.options.template.indexOf('YYYY') !== -1;[m
 [m
[31m-  function addParameter(id, type, config, location) {[m
[31m-    paramNames.push(id);[m
[31m-    if (parentParams[id]) return parentParams[id];[m
[31m-    if (!/^\w+(-+\w+)*(?:\[\])?$/.test(id)) throw new Error("Invalid parameter name '" + id + "' in pattern '" + pattern + "'");[m
[31m-    if (params[id]) throw new Error("Duplicate parameter name '" + id + "' in pattern '" + pattern + "'");[m
[31m-    params[id] = new $$UMFP.Param(id, type, config, location);[m
[31m-    return params[id];[m
[31m-  }[m
[32m+[m[32m      for(i=this.options.maxYear; i>=this.options.minYear; i--) {[m
[32m+[m[32m        name = longNames ? i : (i+'').substring(2);[m
[32m+[m[32m        items[this.options.yearDescending ? 'push' : 'unshift']([i, name]);[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      items = this.fillCommon('y').concat(items);[m
[32m+[m[41m      [m
[32m+[m[32m      return items;[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    /*[m
[32m+[m[32m    fill hour[m
[32m+[m[32m    */[m
[32m+[m[32m    fillHour: function() {[m
[32m+[m[32m      var items = this.fillCommon('h'), name, i,[m
[32m+[m[32m      h12 = this.options.template.indexOf('h') !== -1,[m
[32m+[m[32m      h24 = this.options.template.indexOf('H') !== -1,[m
[32m+[m[32m      twoDigit = this.options.template.toLowerCase().indexOf('hh') !== -1,[m
[32m+[m[32m      min = h12 ? 1 : 0,[m[41m [m
[32m+[m[32m      max = h12 ? 12 : 23;[m
 [m
[31m-  function quoteRegExp(string, pattern, squash, optional) {[m
[31m-    var surroundPattern = ['',''], result = string.replace(/[\\\[\]\^$*+?.()|{}]/g, "\\$&");[m
[31m-    if (!pattern) return result;[m
[31m-    switch(squash) {[m
[31m-      case false: surroundPattern = ['(', ')' + (optional ? "?" : "")]; break;[m
[31m-      case true:  surroundPattern = ['?(', ')?']; break;[m
[31m-      default:    surroundPattern = ['(' + squash + "|", ')?']; break;[m
[31m-    }[m
[31m-    return result + surroundPattern[0] + pattern + surroundPattern[1];[m
[31m-  }[m
[32m+[m[32m      for(i=min; i<=max; i++) {[m
[32m+[m[32m        name = twoDigit ? this.leadZero(i) : i;[m
[32m+[m[32m        items.push([i, name]);[m
[32m+[m[32m      }[m[41m [m
[32m+[m[32m      return items;[m
[32m+[m[32m    },[m
 [m
[31m-  this.source = pattern;[m
[32m+[m[32m    /*[m
[32m+[m[32m    fill minute[m
[32m+[m[32m    */[m
[32m+[m[32m    fillMinute: function() {[m
[32m+[m[32m      var items = this.fillCommon('m'), name, i,[m
[32m+[m[32m      twoDigit = this.options.template.indexOf('mm') !== -1;[m
 [m
[31m-  // Split into static segments separated by path parameter placeholders.[m
[31m-  // The number of segments is always 1 more than the number of parameters.[m
[31m-  function matchDetails(m, isSearch) {[m
[31m-    var id, regexp, segment, type, cfg, arrayMode;[m
[31m-    id          = m[2] || m[3]; // IE[78] returns '' for unmatched groups instead of null[m
[31m-    cfg         = config.params[id];[m
[31m-    segment     = pattern.substring(last, m.index);[m
[31m-    regexp      = isSearch ? m[4] : m[4] || (m[1] == '*' ? '.*' : null);[m
[31m-    type        = $$UMFP.type(regexp || "string") || inherit($$UMFP.type("string"), { pattern: new RegExp(regexp, config.caseInsensitive ? 'i' : undefined) });[m
[31m-    return {[m
[31m-      id: id, regexp: regexp, segment: segment, type: type, cfg: cfg[m
[31m-    };[m
[31m-  }[m
[32m+[m[32m      for(i=0; i<=59; i+= this.options.minuteStep) {[m
[32m+[m[32m        name = twoDigit ? this.leadZero(i) : i;[m
[32m+[m[32m        items.push([i, name]);[m
[32m+[m[32m      }[m
[32m+[m[32m      return items;[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    /*[m
[32m+[m[32m    fill second[m
[32m+[m[32m    */[m
[32m+[m[32m    fillSecond: function() {[m
[32m+[m[32m      var items = this.fillCommon('s'), name, i,[m
[32m+[m[32m      twoDigit = this.options.template.indexOf('ss') !== -1;[m
 [m
[31m-  var p, param, segment;[m
[31m-  while ((m = placeholder.exec(pattern))) {[m
[31m-    p = matchDetails(m, false);[m
[31m-    if (p.segment.indexOf('?') >= 0) break; // we're into the search part[m
[32m+[m[32m      for(i=0; i<=59; i+= this.options.secondStep) {[m
[32m+[m[32m        name = twoDigit ? this.leadZero(i) : i;[m
[32m+[m[32m        items.push([i, name]);[m
[32m+[m[32m      }[m[41m    [m
[32m+[m[32m      return items;[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    /*[m
[32m+[m[32m    fill ampm[m
[32m+[m[32m    */[m
[32m+[m[32m    fillAmpm: function() {[m
[32m+[m[32m      var ampmL = this.options.template.indexOf('a') !== -1,[m
[32m+[m[32m      ampmU = this.options.template.indexOf('A') !== -1,[m[41m            [m
[32m+[m[32m      items = [[m
[32m+[m[32m      ['am', ampmL ? 'am' : 'AM'],[m
[32m+[m[32m      ['pm', ampmL ? 'pm' : 'PM'][m
[32m+[m[32m      ];[m
[32m+[m[32m      return items;[m
[32m+[m[32m    },[m
 [m
[31m-    param = addParameter(p.id, p.type, p.cfg, "path");[m
[31m-    compiled += quoteRegExp(p.segment, param.type.pattern.source, param.squash, param.isOptional);[m
[31m-    segments.push(p.segment);[m
[31m-    last = placeholder.lastIndex;[m
[31m-  }[m
[31m-  segment = pattern.substring(last);[m
[32m+[m[32m    /*[m
[32m+[m[32m     Returns current date value from combos.[m[41m [m
[32m+[m[32m     If format not specified - `options.format` used.[m
[32m+[m[32m     If format = `null` - Moment object returned.[m
[32m+[m[32m     */[m
[32m+[m[32m     getValue: function(format) {[m
[32m+[m[32m      var dt, values = {},[m[41m [m
[32m+[m[32m      that = this,[m
[32m+[m[32m      notSelected = false;[m
 [m
[31m-  // Find any search parameter names and remove them from the last segment[m
[31m-  var i = segment.indexOf('?');[m
[32m+[m[32m      //getting selected values[m[41m    [m
[32m+[m[32m      angular.forEach(this.map, function(v, k) {[m
[32m+[m[32m        if(k === 'ampm') {[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m[32m        var def = k === 'day' ? 1 : 0;[m
 [m
[31m-  if (i >= 0) {[m
[31m-    var search = this.sourceSearch = segment.substring(i);[m
[31m-    segment = segment.substring(0, i);[m
[31m-    this.sourcePath = pattern.substring(0, last + i);[m
[32m+[m[32m        values[k] = that['$'+k] ? parseInt(that['$'+k].val(), 10) : def;[m[41m [m
[32m+[m[41m        [m
[32m+[m[32m        if(isNaN(values[k])) {[m
[32m+[m[32m         notSelected = true;[m
[32m+[m[32m         return false;[m[41m [m
[32m+[m[32m       }[m
[32m+[m[32m     });[m
[32m+[m[41m      [m
[32m+[m[32m      //if at least one visible combo not selected - return empty string[m
[32m+[m[32m      if(notSelected) {[m
[32m+[m[32m       return '';[m
[32m+[m[32m     }[m
 [m
[31m-    if (search.length > 0) {[m
[31m-      last = 0;[m
[31m-      while ((m = searchPlaceholder.exec(search))) {[m
[31m-        p = matchDetails(m, true);[m
[31m-        param = addParameter(p.id, p.type, p.cfg, "search");[m
[31m-        last = placeholder.lastIndex;[m
[31m-        // check if ?&[m
[32m+[m[32m      //convert hours 12h --> 24h[m[41m [m
[32m+[m[32m      if(this.$ampm) {[m
[32m+[m[32m        //12:00 pm --> 12:00 (24-h format, midday), 12:00 am --> 00:00 (24-h format, midnight, start of day)[m
[32m+[m[32m        if(values.hour === 12) {[m
[32m+[m[32m          values.hour = this.$ampm.val() === 'am' ? 0 : 12;[m[41m                    [m
[32m+[m[32m        } else {[m
[32m+[m[32m          values.hour = this.$ampm.val() === 'am' ? values.hour : values.hour+12;[m
[32m+[m[32m        }[m
       }[m
[31m-    }[m
[31m-  } else {[m
[31m-    this.sourcePath = pattern;[m
[31m-    this.sourceSearch = '';[m
[31m-  }[m
[31m-[m
[31m-  compiled += quoteRegExp(segment) + (config.strict === false ? '\/?' : '') + '$';[m
[31m-  segments.push(segment);[m
[32m+[m[41m      [m
[32m+[m[32m      dt = moment([values.year, values.month, values.day, values.hour, values.minute, values.second]);[m
[32m+[m[41m      [m
[32m+[m[32m      //highlight invalid date[m
[32m+[m[32m      this.highlight(dt);[m
 [m
[31m-  this.regexp = new RegExp(compiled, config.caseInsensitive ? 'i' : undefined);[m
[31m-  this.prefix = segments[0];[m
[31m-  this.$$paramNames = paramNames;[m
[31m-}[m
[32m+[m[32m      format = format === undefined ? this.options.format : format;[m
[32m+[m[32m      if(format === null) {[m
[32m+[m[32m       return dt.isValid() ? dt : null;[m[41m [m
[32m+[m[32m     } else {[m
[32m+[m[32m       return dt.isValid() ? dt.format(format) : '';[m[41m [m
[32m+[m[32m     }[m
[32m+[m[32m   },[m
 [m
[31m-/**[m
[31m- * @ngdoc function[m
[31m- * @name ui.router.util.type:UrlMatcher#concat[m
[31m- * @methodOf ui.router.util.type:UrlMatcher[m
[31m- *[m
[31m- * @description[m
[31m- * Returns a new matcher for a pattern constructed by appending the path part and adding the[m
[31m- * search parameters of the specified pattern to this pattern. The current pattern is not[m
[31m- * modified. This can be understood as creating a pattern for URLs that are relative to (or[m
[31m- * suffixes of) the current pattern.[m
[31m- *[m
[31m- * @example[m
[31m- * The following two matchers are equivalent:[m
[31m- * <pre>[m
[31m- * new UrlMatcher('/user/{id}?q').concat('/details?date');[m
[31m- * new UrlMatcher('/user/{id}/details?q&date');[m
[31m- * </pre>[m
[31m- *[m
[31m- * @param {string} pattern  The pattern to append.[m
[31m- * @param {Object} config  An object hash of the configuration for the matcher.[m
[31m- * @returns {UrlMatcher}  A matcher for the concatenated pattern.[m
[31m- */[m
[31m-UrlMatcher.prototype.concat = function (pattern, config) {[m
[31m-  // Because order of search parameters is irrelevant, we can add our own search[m
[31m-  // parameters to the end of the new pattern. Parse the new pattern by itself[m
[31m-  // and then join the bits together, but it's much easier to do this on a string level.[m
[31m-  var defaultConfig = {[m
[31m-    caseInsensitive: $$UMFP.caseInsensitive(),[m
[31m-    strict: $$UMFP.strictMode(),[m
[31m-    squash: $$UMFP.defaultSquashPolicy()[m
[31m-  };[m
[31m-  return new UrlMatcher(this.sourcePath + pattern + this.sourceSearch, extend(defaultConfig, config), this);[m
[31m-};[m
[32m+[m[32m   setValue: function(value) {[m
[32m+[m[32m    if(!value) {[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
 [m
[31m-UrlMatcher.prototype.toString = function () {[m
[31m-  return this.source;[m
[31m-};[m
[32m+[m[32m      // parse in strict mode (third param `true`)[m
[32m+[m[32m      var dt = typeof value === 'string' ? moment(value, this.options.format, true) : moment(value),[m
[32m+[m[32m      that = this,[m
[32m+[m[32m      values = {};[m
[32m+[m[41m      [m
[32m+[m[32m      //function to find nearest value in select options[m
[32m+[m[32m      function getNearest($select, value) {[m
[32m+[m[32m        var delta = {};[m
[32m+[m[32m        angular.forEach($select.children('option'), function(opt, i){[m
[32m+[m[32m          var optValue = angular.element(opt).attr('value');[m
 [m
[31m-/**[m
[31m- * @ngdoc function[m
[31m- * @name ui.router.util.type:UrlMatcher#exec[m
[31m- * @methodOf ui.router.util.type:UrlMatcher[m
[31m- *[m
[31m- * @description[m
[31m- * Tests the specified path against this matcher, and returns an object containing the captured[m
[31m- * parameter values, or null if the path does not match. The returned object contains the values[m
[31m- * of any search parameters that are mentioned in the pattern, but their value may be null if[m
[31m- * they are not present in `searchParams`. This means that search parameters are always treated[m
[31m- * as optional.[m
[31m- *[m
[31m- * @example[m
[31m- * <pre>[m
[31m- * new UrlMatcher('/user/{id}?q&r').exec('/user/bob', {[m
[31m- *   x: '1', q: 'hello'[m
[31m- * });[m
[31m- * // returns { id: 'bob', q: 'hello', r: null }[m
[31m- * </pre>[m
[31m- *[m
[31m- * @param {string} path  The URL path to match, e.g. `$location.path()`.[m
[31m- * @param {Object} searchParams  URL search parameters, e.g. `$location.search()`.[m
[31m- * @returns {Object}  The captured parameter values.[m
[31m- */[m
[31m-UrlMatcher.prototype.exec = function (path, searchParams) {[m
[31m-  var m = this.regexp.exec(path);[m
[31m-  if (!m) return null;[m
[31m-  searchParams = searchParams || {};[m
[32m+[m[32m          if(optValue === '') return;[m
[32m+[m[32m          var distance = Math.abs(optValue - value);[m[41m [m
[32m+[m[32m          if(typeof delta.distance === 'undefined' || distance < delta.distance) {[m
[32m+[m[32m            delta = {value: optValue, distance: distance};[m
[32m+[m[32m          }[m[41m [m
[32m+[m[32m        });[m[41m [m
[32m+[m[32m        return delta.value;[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      if(dt.isValid()) {[m
[32m+[m[32m        //read values from date object[m
[32m+[m[32m        angular.forEach(this.map, function(v, k) {[m
[32m+[m[32m          if(k === 'ampm') {[m
[32m+[m[32m            return;[m[41m [m
[32m+[m[32m          }[m
[32m+[m[32m          values[k] = dt[v[1]]();[m
[32m+[m[32m        });[m
 [m
[31m-  var paramNames = this.parameters(), nTotal = paramNames.length,[m
[31m-    nPath = this.segments.length - 1,[m
[31m-    values = {}, i, j, cfg, paramName;[m
[32m+[m[32m        if(this.$ampm) {[m
[32m+[m[32m          //12:00 pm --> 12:00 (24-h format, midday), 12:00 am --> 00:00 (24-h format, midnight, start of day)[m
[32m+[m[32m          if(values.hour >= 12) {[m
[32m+[m[32m            values.ampm = 'pm';[m
[32m+[m[32m            if(values.hour > 12) {[m
[32m+[m[32m              values.hour -= 12;[m
[32m+[m[32m            }[m
[32m+[m[32m          } else {[m
[32m+[m[32m            values.ampm = 'am';[m
[32m+[m[32m            if(values.hour === 0) {[m
[32m+[m[32m              values.hour = 12;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
 [m
[31m-  if (nPath !== m.length - 1) throw new Error("Unbalanced capture group in route '" + this.source + "'");[m
[32m+[m[32m        angular.forEach(values, function(v, k) {[m
[32m+[m[32m          //call val() for each existing combo, e.g. this.$hour.val()[m
[32m+[m[32m          if(that['$'+k]) {[m
 [m
[31m-  function decodePathArray(string) {[m
[31m-    function reverseString(str) { return str.split("").reverse().join(""); }[m
[31m-    function unquoteDashes(str) { return str.replace(/\\-/g, "-"); }[m
[32m+[m[32m            if(k === 'minute' && that.options.minuteStep > 1 && that.options.roundTime) {[m
[32m+[m[32m             v = getNearest(that['$'+k], v);[m
[32m+[m[32m           }[m
[32m+[m[41m           [m
[32m+[m[32m           if(k === 'second' && that.options.secondStep > 1 && that.options.roundTime) {[m
[32m+[m[32m             v = getNearest(that['$'+k], v);[m
[32m+[m[32m           }[m[41m                       [m
[32m+[m[41m           [m
[32m+[m[32m           that['$'+k].val(v);[m
[32m+[m[32m         }[m
[32m+[m[32m       });[m
 [m
[31m-    var split = reverseString(string).split(/-(?!\\)/);[m
[31m-    var allReversed = map(split, reverseString);[m
[31m-    return map(allReversed, unquoteDashes).reverse();[m
[31m-  }[m
[32m+[m[32m        // update days count[m
[32m+[m[32m        if (this.options.smartDays) {[m
[32m+[m[32m          this.fillCombo('day');[m
[32m+[m[32m        }[m
 [m
[31m-  for (i = 0; i < nPath; i++) {[m
[31m-    paramName = paramNames[i];[m
[31m-    var param = this.params[paramName];[m
[31m-    var paramVal = m[i+1];[m
[31m-    // if the param value matches a pre-replace pair, replace the value before decoding.[m
[31m-    for (j = 0; j < param.replace; j++) {[m
[31m-      if (param.replace[j].from === paramVal) paramVal = param.replace[j].to;[m
[32m+[m[32m        this.$element.val(dt.format(this.options.format)).triggerHandler('change');[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    /*[m
[32m+[m[32m     highlight combos if date is invalid[m
[32m+[m[32m     */[m
[32m+[m[32m     highlight: function(dt) {[m
[32m+[m[32m      if(!dt.isValid()) {[m
[32m+[m[32m        if(this.options.errorClass) {[m
[32m+[m[32m          this.$widget.addClass(this.options.errorClass);[m
[32m+[m[32m        } else {[m
[32m+[m[32m          //store original border color[m
[32m+[m[32m          if(!this.borderColor) {[m
[32m+[m[32m            this.borderColor = this.$widget.find('select').css('border-color');[m[41m [m
[32m+[m[32m          }[m
[32m+[m[32m          this.$widget.find('select').css('border-color', 'red');[m
[32m+[m[32m        }[m
[32m+[m[32m      } else {[m
[32m+[m[32m        if(this.options.errorClass) {[m
[32m+[m[32m          this.$widget.removeClass(this.options.errorClass);[m
[32m+[m[32m        } else {[m
[32m+[m[32m          this.$widget.find('select').css('border-color', this.borderColor);[m
[32m+[m[32m        }[m[41m  [m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    leadZero: function(v) {[m
[32m+[m[32m      return v <= 9 ? '0' + v : v;[m[41m [m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    destroy: function() {[m
[32m+[m[32m      this.$widget.remove();[m
[32m+[m[32m      this.$element.removeData('combodate').show();[m
     }[m
[31m-    if (paramVal && param.array === true) paramVal = decodePathArray(paramVal);[m
[31m-    values[paramName] = param.value(paramVal);[m
[31m-  }[m
[31m-  for (/**/; i < nTotal; i++) {[m
[31m-    paramName = paramNames[i];[m
[31m-    values[paramName] = this.params[paramName].value(searchParams[paramName]);[m
[31m-  }[m
 [m
[31m-  return values;[m
[31m-};[m
[32m+[m[32m  };[m
 [m
[31m-/**[m
[31m- * @ngdoc function[m
[31m- * @name ui.router.util.type:UrlMatcher#parameters[m
[31m- * @methodOf ui.router.util.type:UrlMatcher[m
[31m- *[m
[31m- * @description[m
[31m- * Returns the names of all path and search parameters of this pattern in an unspecified order.[m
[31m- *[m
[31m- * @returns {Array.<string>}  An array of parameter names. Must be treated as read-only. If the[m
[31m- *    pattern has no parameters, an empty array is returned.[m
[31m- */[m
[31m-UrlMatcher.prototype.parameters = function (param) {[m
[31m-  if (!isDefined(param)) return this.$$paramNames;[m
[31m-  return this.params[param] || null;[m
[31m-};[m
[32m+[m[32m  return {[m
[32m+[m[32m    getInstance: function(element, options) {[m
[32m+[m[32m      return new Combodate(element, options);[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m[32m}]);[m
 [m
[31m-/**[m
[31m- * @ngdoc function[m
[31m- * @name ui.router.util.type:UrlMatcher#validate[m
[31m- * @methodOf ui.router.util.type:UrlMatcher[m
[31m- *[m
[31m- * @description[m
[31m- * Checks an object hash of parameters to validate their correctness according to the parameter[m
[31m- * types of this `UrlMatcher`.[m
[31m- *[m
[31m- * @param {Object} params The object hash of parameters to validate.[m
[31m- * @returns {boolean} Returns `true` if `params` validates, otherwise `false`.[m
[31m- */[m
[31m-UrlMatcher.prototype.validates = function (params) {[m
[31m-  return this.params.$$validates(params);[m
[31m-};[m
[32m+[m[32m/*[m
[32m+[m[32mEditable icons:[m
[32m+[m[32m- default[m
[32m+[m[32m- font-awesome[m
 [m
[31m-/**[m
[31m- * @ngdoc function[m
[31m- * @name ui.router.util.type:UrlMatcher#format[m
[31m- * @methodOf ui.router.util.type:UrlMatcher[m
[31m- *[m
[31m- * @description[m
[31m- * Creates a URL that matches this pattern by substituting the specified values[m
[31m- * for the path and search parameters. Null values for path parameters are[m
[31m- * treated as empty strings.[m
[31m- *[m
[31m- * @example[m
[31m- * <pre>[m
[31m- * new UrlMatcher('/user/{id}?q').format({ id:'bob', q:'yes' });[m
[31m- * // returns '/user/bob?q=yes'[m
[31m- * </pre>[m
[31m- *[m
[31m- * @param {Object} values  the values to substitute for the parameters in this pattern.[m
[31m- * @returns {string}  the formatted URL (path and optionally search part).[m
[31m- */[m
[31m-UrlMatcher.prototype.format = function (values) {[m
[31m-  values = values || {};[m
[31m-  var segments = this.segments, params = this.parameters(), paramset = this.params;[m
[31m-  if (!this.validates(values)) return null;[m
[32m+[m[32m*/[m
[32m+[m[32mangular.module('xeditable').factory('editableIcons', function() {[m
 [m
[31m-  var i, search = false, nPath = segments.length - 1, nTotal = params.length, result = segments[0];[m
[32m+[m[32m  var icons = {[m
[32m+[m[32m    //Icon-set to use, defaults to bootstrap icons[m
[32m+[m[32m    default: {[m
[32m+[m[32m      'bs2': {[m
[32m+[m[32m        ok: 'icon-ok icon-white',[m
[32m+[m[32m        cancel: 'icon-remove'[m
[32m+[m[32m      },[m
[32m+[m[32m      'bs3': {[m
[32m+[m[32m        ok: 'glyphicon glyphicon-ok',[m
[32m+[m[32m        cancel: 'glyphicon glyphicon-remove'[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
[32m+[m[32m    external: {[m
[32m+[m[32m      'font-awesome': {[m
[32m+[m[32m        ok: 'fa fa-check',[m
[32m+[m[32m        cancel: 'fa fa-times'[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
 [m
[31m-  function encodeDashes(str) { // Replace dashes with encoded "\-"[m
[31m-    return encodeURIComponent(str).replace(/-/g, function(c) { return '%5C%' + c.charCodeAt(0).toString(16).toUpperCase(); });[m
[31m-  }[m
[32m+[m[32m  return icons;[m
[32m+[m[32m});[m
 [m
[31m-  for (i = 0; i < nTotal; i++) {[m
[31m-    var isPathParam = i < nPath;[m
[31m-    var name = params[i], param = paramset[name], value = param.value(values[name]);[m
[31m-    var isDefaultValue = param.isOptional && param.type.equals(param.value(), value);[m
[31m-    var squash = isDefaultValue ? param.squash : false;[m
[31m-    var encoded = param.type.encode(value);[m
[32m+[m[32m/*[m
[32m+[m[32mEditable themes:[m
[32m+[m[32m- default[m
[32m+[m[32m- bootstrap 2[m
[32m+[m[32m- bootstrap 3[m
 [m
[31m-    if (isPathParam) {[m
[31m-      var nextSegment = segments[i + 1];[m
[31m-      if (squash === false) {[m
[31m-        if (encoded != null) {[m
[31m-          if (isArray(encoded)) {[m
[31m-            result += map(encoded, encodeDashes).join("-");[m
[31m-          } else {[m
[31m-            result += encodeURIComponent(encoded);[m
[31m-          }[m
[31m-        }[m
[31m-        result += nextSegment;[m
[31m-      } else if (squash === true) {[m
[31m-        var capture = result.match(/\/$/) ? /\/?(.*)/ : /(.*)/;[m
[31m-        result += nextSegment.match(capture)[1];[m
[31m-      } else if (isString(squash)) {[m
[31m-        result += squash + nextSegment;[m
[31m-      }[m
[31m-    } else {[m
[31m-      if (encoded == null || (isDefaultValue && squash !== false)) continue;[m
[31m-      if (!isArray(encoded)) encoded = [ encoded ];[m
[31m-      encoded = map(encoded, encodeURIComponent).join('&' + name + '=');[m
[31m-      result += (search ? '&' : '?') + (name + '=' + encoded);[m
[31m-      search = true;[m
[31m-    }[m
[31m-  }[m
[32m+[m[32mNote: in postrender() `this` is instance of editableController[m
[32m+[m[32m*/[m
[32m+[m[32mangular.module('xeditable').factory('editableThemes', function() {[m
[32m+[m[32m  var themes = {[m
[32m+[m[32m    //default[m
[32m+[m[32m    'default': {[m
[32m+[m[32m      formTpl:      '<form class="editable-wrap"></form>',[m
[32m+[m[32m      noformTpl:    '<span class="editable-wrap"></span>',[m
[32m+[m[32m      controlsTpl:  '<span class="editable-controls"></span>',[m
[32m+[m[32m      inputTpl:     '',[m
[32m+[m[32m      errorTpl:     '<div class="editable-error" ng-show="$error" ng-bind="$error"></div>',[m
[32m+[m[32m      buttonsTpl:   '<span class="editable-buttons"></span>',[m
[32m+[m[32m      submitTpl:    '<button type="submit">save</button>',[m
[32m+[m[32m      cancelTpl:    '<button type="button" ng-click="$form.$cancel()">cancel</button>'[m
[32m+[m[32m    },[m
 [m
[31m-  return result;[m
[31m-};[m
[32m+[m[32m    //bs2[m
[32m+[m[32m    'bs2': {[m
[32m+[m[32m      formTpl:     '<form class="form-inline editable-wrap" role="form"></form>',[m
[32m+[m[32m      noformTpl:   '<span class="editable-wrap"></span>',[m
[32m+[m[32m      controlsTpl: '<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',[m
[32m+[m[32m      inputTpl:    '',[m
[32m+[m[32m      errorTpl:    '<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',[m
[32m+[m[32m      buttonsTpl:  '<span class="editable-buttons"></span>',[m
[32m+[m[32m      submitTpl:   '<button type="submit" class="btn btn-primary"><span></span></button>',[m
[32m+[m[32m      cancelTpl:   '<button type="button" class="btn" ng-click="$form.$cancel()">'+[m
[32m+[m[32m                      '<span></span>'+[m
[32m+[m[32m                   '</button>'[m
 [m
[31m-/**[m
[31m- * @ngdoc object[m
[31m- * @name ui.router.util.type:Type[m
[31m- *[m
[31m- * @description[m
[31m- * Implements an interface to define custom parameter types that can be decoded from and encoded to[m
[31m- * string parameters matched in a URL. Used by {@link ui.router.util.type:UrlMatcher `UrlMatcher`}[m
[31m- * objects when matching or formatting URLs, or comparing or validating parameter values.[m
[31m- *[m
[31m- * See {@link ui.router.util.$urlMatcherFactory#methods_type `$urlMatcherFactory#type()`} for more[m
[31m- * information on registering custom types.[m
[31m- *[m
[31m- * @param {Object} config  A configuration object which contains the custom type definition.  The object's[m
[31m- *        properties will override the default methods and/or pattern in `Type`'s public interface.[m
[31m- * @example[m
[31m- * <pre>[m
[31m- * {[m
[31m- *   decode: function(val) { return parseInt(val, 10); },[m
[31m- *   encode: function(val) { return val && val.toString(); },[m
[31m- *   equals: function(a, b) { return this.is(a) && a === b; },[m
[31m- *   is: function(val) { return angular.isNumber(val) isFinite(val) && val % 1 === 0; },[m
[31m- *   pattern: /\d+/[m
[31m- * }[m
[31m- * </pre>[m
[31m- *[m
[31m- * @property {RegExp} pattern The regular expression pattern used to match values of this type when[m
[31m- *           coming from a substring of a URL.[m
[31m- *[m
[31m- * @returns {Object}  Returns a new `Type` object.[m
[31m- */[m
[31m-function Type(config) {[m
[31m-  extend(this, config);[m
[31m-}[m
[32m+[m[32m    },[m
 [m
[31m-/**[m
[31m- * @ngdoc function[m
[31m- * @name ui.router.util.type:Type#is[m
[31m- * @methodOf ui.router.util.type:Type[m
[31m- *[m
[31m- * @description[m
[31m- * Detects whether a value is of a particular type. Accepts a native (decoded) value[m
[31m- * and determines whether it matches the current `Type` object.[m
[31m- *[m
[31m- * @param {*} val  The value to check.[m
[31m- * @param {string} key  Optional. If the type check is happening in the context of a specific[m
[31m- *        {@link ui.router.util.type:UrlMatcher `UrlMatcher`} object, this is the name of the[m
[31m- *        parameter in which `val` is stored. Can be used for meta-programming of `Type` objects.[m
[31m- * @returns {Boolean}  Returns `true` if the value matches the type, otherwise `false`.[m
[31m- */[m
[31m-Type.prototype.is = function(val, key) {[m
[31m-  return true;[m
[31m-};[m
[32m+[m[32m    //bs3[m
[32m+[m[32m    'bs3': {[m
[32m+[m[32m      formTpl:     '<form class="form-inline editable-wrap" role="form"></form>',[m
[32m+[m[32m      noformTpl:   '<span class="editable-wrap"></span>',[m
[32m+[m[32m      controlsTpl: '<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',[m
[32m+[m[32m      inputTpl:    '',[m
[32m+[m[32m      errorTpl:    '<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',[m
[32m+[m[32m      buttonsTpl:  '<span class="editable-buttons"></span>',[m
[32m+[m[32m      submitTpl:   '<button type="submit" class="btn btn-primary"><span></span></button>',[m
[32m+[m[32m      cancelTpl:   '<button type="button" class="btn btn-default" ng-click="$form.$cancel()">'+[m
[32m+[m[32m                     '<span></span>'+[m
[32m+[m[32m                   '</button>',[m
[32m+[m
[32m+[m[32m      //bs3 specific prop to change buttons class: btn-sm, btn-lg[m
[32m+[m[32m      buttonsClass: '',[m
[32m+[m[32m      //bs3 specific prop to change standard inputs class: input-sm, input-lg[m
[32m+[m[32m      inputClass: '',[m
[32m+[m[32m      postrender: function() {[m
[32m+[m[32m        //apply `form-control` class to std inputs[m
[32m+[m[32m        switch(this.directiveName) {[m
[32m+[m[32m          case 'editableText':[m
[32m+[m[32m          case 'editableSelect':[m
[32m+[m[32m          case 'editableTextarea':[m
[32m+[m[32m          case 'editableEmail':[m
[32m+[m[32m          case 'editableTel':[m
[32m+[m[32m          case 'editableNumber':[m
[32m+[m[32m          case 'editableUrl':[m
[32m+[m[32m          case 'editableSearch':[m
[32m+[m[32m          case 'editableDate':[m
[32m+[m[32m          case 'editableDatetime':[m
[32m+[m[32m          case 'editableBsdate':[m
[32m+[m[32m          case 'editableTime':[m
[32m+[m[32m          case 'editableMonth':[m
[32m+[m[32m          case 'editableWeek':[m
[32m+[m[32m            this.inputEl.addClass('form-control');[m
[32m+[m[32m            if(this.theme.inputClass) {[m
[32m+[m[32m              // don`t apply `input-sm` and `input-lg` to select multiple[m
[32m+[m[32m              // should be fixed in bs itself![m
[32m+[m[32m              if(this.inputEl.attr('multiple') &&[m
[32m+[m[32m                (this.theme.inputClass === 'input-sm' || this.theme.inputClass === 'input-lg')) {[m
[32m+[m[32m                  break;[m
[32m+[m[32m              }[m
[32m+[m[32m              this.inputEl.addClass(this.theme.inputClass);[m
[32m+[m[32m            }[m
[32m+[m[32m          break;[m
[32m+[m[32m          case 'editableCheckbox':[m
[32m+[m[32m              this.editorEl.addClass('checkbox');[m
[32m+[m[32m        }[m
 [m
[31m-/**[m
[31m- * @ngdoc function[m
[31m- * @name ui.router.util.type:Type#encode[m
[31m- * @methodOf ui.router.util.type:Type[m
[31m- *[m
[31m- * @description[m
[31m- * Encodes a custom/native type value to a string that can be embedded in a URL. Note that the[m
[31m- * return value does *not* need to be URL-safe (i.e. passed through `encodeURIComponent()`), it[m
[31m- * only needs to be a representation of `val` that has been coerced to a string.[m
[31m- *[m
[31m- * @param {*} val  The value to encode.[m
[31m- * @param {string} key  The name of the parameter in which `val` is stored. Can be used for[m
[31m- *        meta-programming of `Type` objects.[m
[31m- * @returns {string}  Returns a string representation of `val` that can be encoded in a URL.[m
[31m- */[m
[31m-Type.prototype.encode = function(val, key) {[m
[31m-  return val;[m
[31m-};[m
[32m+[m[32m        //apply buttonsClass (bs3 specific!)[m
[32m+[m[32m        if(this.buttonsEl && this.theme.buttonsClass) {[m
[32m+[m[32m          this.buttonsEl.find('button').addClass(this.theme.buttonsClass);[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
 [m
[31m-/**[m
[31m- * @ngdoc function[m
[31m- * @name ui.router.util.type:Type#decode[m
[31m- * @methodOf ui.router.util.type:Type[m
[31m- *[m
[31m- * @description[m
[31m- * Converts a parameter value (from URL string or transition param) to a custom/native value.[m
[31m- *[m
[31m- * @param {string} val  The URL parameter value to decode.[m
[31m- * @param {string} key  The name of the parameter in which `val` is stored. Can be used for[m
[31m- *        meta-programming of `Type` objects.[m
[31m- * @returns {*}  Returns a custom representation of the URL parameter value.[m
[31m- */[m
[31m-Type.prototype.decode = function(val, key) {[m
[31m-  return val;[m
[31m-};[m
[32m+[m[32m  return themes;[m
[32m+[m[32m});[m
 [m
[31m-/**[m
[31m- * @ngdoc function[m
[31m- * @name ui.router.util.type:Type#equals[m
[31m- * @methodOf ui.router.util.type:Type[m
[31m- *[m
[31m- * @description[m
[31m- * Determines whether two decoded values are equivalent.[m
[31m- *[m
[31m- * @param {*} a  A value to compare against.[m
[31m- * @param {*} b  A value to compare against.[m
[31m- * @returns {Boolean}  Returns `true` if the values are equivalent/equal, otherwise `false`.[m
[32m+[m[32m/*![m
[32m+[m[32m * Bootstrap v3.3.2 (http://getbootstrap.com)[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
  */[m
[31m-Type.prototype.equals = function(a, b) {[m
[31m-  return a == b;[m
[31m-};[m
 [m
[31m-Type.prototype.$subPattern = function() {[m
[31m-  var sub = this.pattern.toString();[m
[31m-  return sub.substr(1, sub.length - 2);[m
[31m-};[m
[32m+[m[32mif (typeof jQuery === 'undefined') {[m
[32m+[m[32m  throw new Error('Bootstrap\'s JavaScript requires jQuery')[m
[32m+[m[32m}[m
 [m
[31m-Type.prototype.pattern = /.*/;[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
[32m+[m[32m  var version = $.fn.jquery.split(' ')[0].split('.')[m
[32m+[m[32m  if ((version[0] < 2 && version[1] < 9) || (version[0] == 1 && version[1] == 9 && version[2] < 1)) {[m
[32m+[m[32m    throw new Error('Bootstrap\'s JavaScript requires jQuery version 1.9.1 or higher')[m
[32m+[m[32m  }[m
[32m+[m[32m}(jQuery);[m
 [m
[31m-Type.prototype.toString = function() { return "{Type:" + this.name + "}"; };[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: transition.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#transitions[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
 [m
[31m-/** Given an encoded string, or a decoded object, returns a decoded object */[m
[31m-Type.prototype.$normalize = function(val) {[m
[31m-  return this.is(val) ? val : this.decode(val);[m
[31m-};[m
 [m
[31m-/*[m
[31m- * Wraps an existing custom Type as an array of Type, depending on 'mode'.[m
[31m- * e.g.:[m
[31m- * - urlmatcher pattern "/path?{queryParam[]:int}"[m
[31m- * - url: "/path?queryParam=1&queryParam=2[m
[31m- * - $stateParams.queryParam will be [1, 2][m
[31m- * if `mode` is "auto", then[m
[31m- * - url: "/path?queryParam=1 will create $stateParams.queryParam: 1[m
[31m- * - url: "/path?queryParam=1&queryParam=2 will create $stateParams.queryParam: [1, 2][m
[31m- */[m
[31m-Type.prototype.$asArray = function(mode, isSearch) {[m
[31m-  if (!mode) return this;[m
[31m-  if (mode === "auto" && !isSearch) throw new Error("'auto' array mode is for query parameters only");[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
 [m
[31m-  function ArrayType(type, mode) {[m
[31m-    function bindTo(type, callbackName) {[m
[31m-      return function() {[m
[31m-        return type[callbackName].apply(type, arguments);[m
[31m-      };[m
[31m-    }[m
[32m+[m[32m  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)[m
[32m+[m[32m  // ============================================================[m
 [m
[31m-    // Wrap non-array value as array[m
[31m-    function arrayWrap(val) { return isArray(val) ? val : (isDefined(val) ? [ val ] : []); }[m
[31m-    // Unwrap array value for "auto" mode. Return undefined for empty array.[m
[31m-    function arrayUnwrap(val) {[m
[31m-      switch(val.length) {[m
[31m-        case 0: return undefined;[m
[31m-        case 1: return mode === "auto" ? val[0] : val;[m
[31m-        default: return val;[m
[31m-      }[m
[31m-    }[m
[31m-    function falsey(val) { return !val; }[m
[32m+[m[32m  function transitionEnd() {[m
[32m+[m[32m    var el = document.createElement('bootstrap')[m
 [m
[31m-    // Wraps type (.is/.encode/.decode) functions to operate on each value of an array[m
[31m-    function arrayHandler(callback, allTruthyMode) {[m
[31m-      return function handleArray(val) {[m
[31m-        val = arrayWrap(val);[m
[31m-        var result = map(val, callback);[m
[31m-        if (allTruthyMode === true)[m
[31m-          return filter(result, falsey).length === 0;[m
[31m-        return arrayUnwrap(result);[m
[31m-      };[m
[32m+[m[32m    var transEndEventNames = {[m
[32m+[m[32m      WebkitTransition : 'webkitTransitionEnd',[m
[32m+[m[32m      MozTransition    : 'transitionend',[m
[32m+[m[32m      OTransition      : 'oTransitionEnd otransitionend',[m
[32m+[m[32m      transition       : 'transitionend'[m
     }[m
 [m
[31m-    // Wraps type (.equals) functions to operate on each value of an array[m
[31m-    function arrayEqualsHandler(callback) {[m
[31m-      return function handleArray(val1, val2) {[m
[31m-        var left = arrayWrap(val1), right = arrayWrap(val2);[m
[31m-        if (left.length !== right.length) return false;[m
[31m-        for (var i = 0; i < left.length; i++) {[m
[31m-          if (!callback(left[i], right[i])) return false;[m
[31m-        }[m
[31m-        return true;[m
[31m-      };[m
[32m+[m[32m    for (var name in transEndEventNames) {[m
[32m+[m[32m      if (el.style[name] !== undefined) {[m
[32m+[m[32m        return { end: transEndEventNames[name] }[m
[32m+[m[32m      }[m
     }[m
 [m
[31m-    this.encode = arrayHandler(bindTo(type, 'encode'));[m
[31m-    this.decode = arrayHandler(bindTo(type, 'decode'));[m
[31m-    this.is     = arrayHandler(bindTo(type, 'is'), true);[m
[31m-    this.equals = arrayEqualsHandler(bindTo(type, 'equals'));[m
[31m-    this.pattern = type.pattern;[m
[31m-    this.$normalize = arrayHandler(bindTo(type, '$normalize'));[m
[31m-    this.name = type.name;[m
[31m-    this.$arrayMode = mode;[m
[32m+[m[32m    return false // explicit for ie8 (  ._.)[m
   }[m
 [m
[31m-  return new ArrayType(this, mode);[m
[31m-};[m
[32m+[m[32m  // http://blog.alexmaccaw.com/css-transitions[m
[32m+[m[32m  $.fn.emulateTransitionEnd = function (duration) {[m
[32m+[m[32m    var called = false[m
[32m+[m[32m    var $el = this[m
[32m+[m[32m    $(this).one('bsTransitionEnd', function () { called = true })[m
[32m+[m[32m    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }[m
[32m+[m[32m    setTimeout(callback, duration)[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[32m+[m[32m  $(function () {[m
[32m+[m[32m    $.support.transition = transitionEnd()[m
 [m
[32m+[m[32m    if (!$.support.transition) return[m
 [m
[31m-/**[m
[31m- * @ngdoc object[m
[31m- * @name ui.router.util.$urlMatcherFactory[m
[31m- *[m
[31m- * @description[m
[31m- * Factory for {@link ui.router.util.type:UrlMatcher `UrlMatcher`} instances. The factory[m
[31m- * is also available to providers under the name `$urlMatcherFactoryProvider`.[m
[31m- */[m
[31m-function $UrlMatcherFactory() {[m
[31m-  $$UMFP = this;[m
[32m+[m[32m    $.event.special.bsTransitionEnd = {[m
[32m+[m[32m      bindType: $.support.transition.end,[m
[32m+[m[32m      delegateType: $.support.transition.end,[m
[32m+[m[32m      handle: function (e) {[m
[32m+[m[32m        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
 [m
[31m-  var isCaseInsensitive = false, isStrictMode = true, defaultSquashPolicy = false;[m
[32m+[m[32m}(jQuery);[m
 [m
[31m-  function valToString(val) { return val != null ? val.toString().replace(/\//g, "%2F") : val; }[m
[31m-  function valFromString(val) { return val != null ? val.toString().replace(/%2F/g, "/") : val; }[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: alert.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#alerts[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
 [m
[31m-  var $types = {}, enqueue = true, typeQueue = [], injector, defaultTypes = {[m
[31m-    string: {[m
[31m-      encode: valToString,[m
[31m-      decode: valFromString,[m
[31m-      // TODO: in 1.0, make string .is() return false if value is undefined/null by default.[m
[31m-      // In 0.2.x, string params are optional by default for backwards compat[m
[31m-      is: function(val) { return val == null || !isDefined(val) || typeof val === "string"; },[m
[31m-      pattern: /[^/]*/[m
[31m-    },[m
[31m-    int: {[m
[31m-      encode: valToString,[m
[31m-      decode: function(val) { return parseInt(val, 10); },[m
[31m-      is: function(val) { return isDefined(val) && this.decode(val.toString()) === val; },[m
[31m-      pattern: /\d+/[m
[31m-    },[m
[31m-    bool: {[m
[31m-      encode: function(val) { return val ? 1 : 0; },[m
[31m-      decode: function(val) { return parseInt(val, 10) !== 0; },[m
[31m-      is: function(val) { return val === true || val === false; },[m
[31m-      pattern: /0|1/[m
[31m-    },[m
[31m-    date: {[m
[31m-      encode: function (val) {[m
[31m-        if (!this.is(val))[m
[31m-          return undefined;[m
[31m-        return [ val.getFullYear(),[m
[31m-          ('0' + (val.getMonth() + 1)).slice(-2),[m
[31m-          ('0' + val.getDate()).slice(-2)[m
[31m-        ].join("-");[m
[31m-      },[m
[31m-      decode: function (val) {[m
[31m-        if (this.is(val)) return val;[m
[31m-        var match = this.capture.exec(val);[m
[31m-        return match ? new Date(match[1], match[2] - 1, match[3]) : undefined;[m
[31m-      },[m
[31m-      is: function(val) { return val instanceof Date && !isNaN(val.valueOf()); },[m
[31m-      equals: function (a, b) { return this.is(a) && this.is(b) && a.toISOString() === b.toISOString(); },[m
[31m-      pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,[m
[31m-      capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/[m
[31m-    },[m
[31m-    json: {[m
[31m-      encode: angular.toJson,[m
[31m-      decode: angular.fromJson,[m
[31m-      is: angular.isObject,[m
[31m-      equals: angular.equals,[m
[31m-      pattern: /[^/]*/[m
[31m-    },[m
[31m-    any: { // does not encode/decode[m
[31m-      encode: angular.identity,[m
[31m-      decode: angular.identity,[m
[31m-      equals: angular.equals,[m
[31m-      pattern: /.*/[m
[31m-    }[m
[31m-  };[m
 [m
[31m-  function getDefaultConfig() {[m
[31m-    return {[m
[31m-      strict: isStrictMode,[m
[31m-      caseInsensitive: isCaseInsensitive[m
[31m-    };[m
[31m-  }[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
 [m
[31m-  function isInjectable(value) {[m
[31m-    return (isFunction(value) || (isArray(value) && isFunction(value[value.length - 1])));[m
[32m+[m[32m  // ALERT CLASS DEFINITION[m
[32m+[m[32m  // ======================[m
[32m+[m
[32m+[m[32m  var dismiss = '[data-dismiss="alert"]'[m
[32m+[m[32m  var Alert   = function (el) {[m
[32m+[m[32m    $(el).on('click', dismiss, this.close)[m
   }[m
 [m
[31m-  /**[m
[31m-   * [Internal] Get the default value of a parameter, which may be an injectable function.[m
[31m-   */[m
[31m-  $UrlMatcherFactory.$$getDefaultValue = function(config) {[m
[31m-    if (!isInjectable(config.value)) return config.value;[m
[31m-    if (!injector) throw new Error("Injectable functions cannot be called at configuration time");[m
[31m-    return injector.invoke(config.value);[m
[31m-  };[m
[32m+[m[32m  Alert.VERSION = '3.3.2'[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$urlMatcherFactory#caseInsensitive[m
[31m-   * @methodOf ui.router.util.$urlMatcherFactory[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Defines whether URL matching should be case sensitive (the default behavior), or not.[m
[31m-   *[m
[31m-   * @param {boolean} value `false` to match URL in a case sensitive manner; otherwise `true`;[m
[31m-   * @returns {boolean} the current value of caseInsensitive[m
[31m-   */[m
[31m-  this.caseInsensitive = function(value) {[m
[31m-    if (isDefined(value))[m
[31m-      isCaseInsensitive = value;[m
[31m-    return isCaseInsensitive;[m
[31m-  };[m
[32m+[m[32m  Alert.TRANSITION_DURATION = 150[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$urlMatcherFactory#strictMode[m
[31m-   * @methodOf ui.router.util.$urlMatcherFactory[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Defines whether URLs should match trailing slashes, or not (the default behavior).[m
[31m-   *[m
[31m-   * @param {boolean=} value `false` to match trailing slashes in URLs, otherwise `true`.[m
[31m-   * @returns {boolean} the current value of strictMode[m
[31m-   */[m
[31m-  this.strictMode = function(value) {[m
[31m-    if (isDefined(value))[m
[31m-      isStrictMode = value;[m
[31m-    return isStrictMode;[m
[31m-  };[m
[32m+[m[32m  Alert.prototype.close = function (e) {[m
[32m+[m[32m    var $this    = $(this)[m
[32m+[m[32m    var selector = $this.attr('data-target')[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$urlMatcherFactory#defaultSquashPolicy[m
[31m-   * @methodOf ui.router.util.$urlMatcherFactory[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Sets the default behavior when generating or matching URLs with default parameter values.[m
[31m-   *[m
[31m-   * @param {string} value A string that defines the default parameter URL squashing behavior.[m
[31m-   *    `nosquash`: When generating an href with a default parameter value, do not squash the parameter value from the URL[m
[31m-   *    `slash`: When generating an href with a default parameter value, squash (remove) the parameter value, and, if the[m
[31m-   *             parameter is surrounded by slashes, squash (remove) one slash from the URL[m
[31m-   *    any other string, e.g. "~": When generating an href with a default parameter value, squash (remove)[m
[31m-   *             the parameter value from the URL and replace it with this string.[m
[31m-   */[m
[31m-  this.defaultSquashPolicy = function(value) {[m
[31m-    if (!isDefined(value)) return defaultSquashPolicy;[m
[31m-    if (value !== true && value !== false && !isString(value))[m
[31m-      throw new Error("Invalid squash policy: " + value + ". Valid policies: false, true, arbitrary-string");[m
[31m-    defaultSquashPolicy = value;[m
[31m-    return value;[m
[31m-  };[m
[32m+[m[32m    if (!selector) {[m
[32m+[m[32m      selector = $this.attr('href')[m
[32m+[m[32m      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7[m
[32m+[m[32m    }[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$urlMatcherFactory#compile[m
[31m-   * @methodOf ui.router.util.$urlMatcherFactory[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Creates a {@link ui.router.util.type:UrlMatcher `UrlMatcher`} for the specified pattern.[m
[31m-   *[m
[31m-   * @param {string} pattern  The URL pattern.[m
[31m-   * @param {Object} config  The config object hash.[m
[31m-   * @returns {UrlMatcher}  The UrlMatcher.[m
[31m-   */[m
[31m-  this.compile = function (pattern, config) {[m
[31m-    return new UrlMatcher(pattern, extend(getDefaultConfig(), config));[m
[31m-  };[m
[32m+[m[32m    var $parent = $(selector)[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$urlMatcherFactory#isMatcher[m
[31m-   * @methodOf ui.router.util.$urlMatcherFactory[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Returns true if the specified object is a `UrlMatcher`, or false otherwise.[m
[31m-   *[m
[31m-   * @param {Object} object  The object to perform the type check against.[m
[31m-   * @returns {Boolean}  Returns `true` if the object matches the `UrlMatcher` interface, by[m
[31m-   *          implementing all the same methods.[m
[31m-   */[m
[31m-  this.isMatcher = function (o) {[m
[31m-    if (!isObject(o)) return false;[m
[31m-    var result = true;[m
[32m+[m[32m    if (e) e.preventDefault()[m
 [m
[31m-    forEach(UrlMatcher.prototype, function(val, name) {[m
[31m-      if (isFunction(val)) {[m
[31m-        result = result && (isDefined(o[name]) && isFunction(o[name]));[m
[31m-      }[m
[31m-    });[m
[31m-    return result;[m
[31m-  };[m
[32m+[m[32m    if (!$parent.length) {[m
[32m+[m[32m      $parent = $this.closest('.alert')[m
[32m+[m[32m    }[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.util.$urlMatcherFactory#type[m
[31m-   * @methodOf ui.router.util.$urlMatcherFactory[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Registers a custom {@link ui.router.util.type:Type `Type`} object that can be used to[m
[31m-   * generate URLs with typed parameters.[m
[31m-   *[m
[31m-   * @param {string} name  The type name.[m
[31m-   * @param {Object|Function} definition   The type definition. See[m
[31m-   *        {@link ui.router.util.type:Type `Type`} for information on the values accepted.[m
[31m-   * @param {Object|Function} definitionFn (optional) A function that is injected before the app[m
[31m-   *        runtime starts.  The result of this function is merged into the existing `definition`.[m
[31m-   *        See {@link ui.router.util.type:Type `Type`} for information on the values accepted.[m
[31m-   *[m
[31m-   * @returns {Object}  Returns `$urlMatcherFactoryProvider`.[m
[31m-   *[m
[31m-   * @example[m
[31m-   * This is a simple example of a custom type that encodes and decodes items from an[m
[31m-   * array, using the array index as the URL-encoded value:[m
[31m-   *[m
[31m-   * <pre>[m
[31m-   * var list = ['John', 'Paul', 'George', 'Ringo'];[m
[31m-   *[m
[31m-   * $urlMatcherFactoryProvider.type('listItem', {[m
[31m-   *   encode: function(item) {[m
[31m-   *     // Represent the list item in the URL using its corresponding index[m
[31m-   *     return list.indexOf(item);[m
[31m-   *   },[m
[31m-   *   decode: function(item) {[m
[31m-   *     // Look up the list item by index[m
[31m-   *     return list[parseInt(item, 10)];[m
[31m-   *   },[m
[31m-   *   is: function(item) {[m
[31m-   *     // Ensure the item is valid by checking to see that it appears[m
[31m-   *     // in the list[m
[31m-   *     return list.indexOf(item) > -1;[m
[31m-   *   }[m
[31m-   * });[m
[31m-   *[m
[31m-   * $stateProvider.state('list', {[m
[31m-   *   url: "/list/{item:listItem}",[m
[31m-   *   controller: function($scope, $stateParams) {[m
[31m-   *     console.log($stateParams.item);[m
[31m-   *   }[m
[31m-   * });[m
[31m-   *[m
[31m-   * // ...[m
[31m-   *[m
[31m-   * // Changes URL to '/list/3', logs "Ringo" to the console[m
[31m-   * $state.go('list', { item: "Ringo" });[m
[31m-   * </pre>[m
[31m-   *[m
[31m-   * This is a more complex example of a type that relies on dependency injection to[m
[31m-   * interact with services, and uses the parameter name from the URL to infer how to[m
[31m-   * handle encoding and decoding parameter values:[m
[31m-   *[m
[31m-   * <pre>[m
[31m-   * // Defines a custom type that gets a value from a service,[m
[31m-   * // where each service gets different types of values from[m
[31m-   * // a backend API:[m
[31m-   * $urlMatcherFactoryProvider.type('dbObject', {}, function(Users, Posts) {[m
[31m-   *[m
[31m-   *   // Matches up services to URL parameter names[m
[31m-   *   var services = {[m
[31m-   *     user: Users,[m
[31m-   *     post: Posts[m
[31m-   *   };[m
[31m-   *[m
[31m-   *   return {[m
[31m-   *     encode: function(object) {[m
[31m-   *       // Represent the object in the URL using its unique ID[m
[31m-   *       return object.id;[m
[31m-   *     },[m
[31m-   *     decode: function(value, key) {[m
[31m-   *       // Look up the object by ID, using the parameter[m
[31m-   *       // name (key) to call the correct service[m
[31m-   *       return services[key].findById(value);[m
[31m-   *     },[m
[31m-   *     is: function(object, key) {[m
[31m-   *       // Check that object is a valid dbObject[m
[31m-   *       return angular.isObject(object) && object.id && services[key];[m
[31m-   *     }[m
[31m-   *     equals: function(a, b) {[m
[31m-   *       // Check the equality of decoded objects by comparing[m
[31m-   *       // their unique IDs[m
[31m-   *       return a.id === b.id;[m
[31m-   *     }[m
[31m-   *   };[m
[31m-   * });[m
[31m-   *[m
[31m-   * // In a config() block, you can then attach URLs with[m
[31m-   * // type-annotated parameters:[m
[31m-   * $stateProvider.state('users', {[m
[31m-   *   url: "/users",[m
[31m-   *   // ...[m
[31m-   * }).state('users.item', {[m
[31m-   *   url: "/{user:dbObject}",[m
[31m-   *   controller: function($scope, $stateParams) {[m
[31m-   *     // $stateParams.user will now be an object returned from[m
[31m-   *     // the Users service[m
[31m-   *   },[m
[31m-   *   // ...[m
[31m-   * });[m
[31m-   * </pre>[m
[31m-   */[m
[31m-  this.type = function (name, definition, definitionFn) {[m
[31m-    if (!isDefined(definition)) return $types[name];[m
[31m-    if ($types.hasOwnProperty(name)) throw new Error("A type named '" + name + "' has already been defined.");[m
[32m+[m[32m    $parent.trigger(e = $.Event('close.bs.alert'))[m
[32m+[m
[32m+[m[32m    if (e.isDefaultPrevented()) return[m
[32m+[m
[32m+[m[32m    $parent.removeClass('in')[m
[32m+[m
[32m+[m[32m    function removeElement() {[m
[32m+[m[32m      // detach from parent, fire event then clean up data[m
[32m+[m[32m      $parent.detach().trigger('closed.bs.alert').remove()[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    $.support.transition && $parent.hasClass('fade') ?[m
[32m+[m[32m      $parent[m
[32m+[m[32m        .one('bsTransitionEnd', removeElement)[m
[32m+[m[32m        .emulateTransitionEnd(Alert.TRANSITION_DURATION) :[m
[32m+[m[32m      removeElement()[m
[32m+[m[32m  }[m
 [m
[31m-    $types[name] = new Type(extend({ name: name }, definition));[m
[31m-    if (definitionFn) {[m
[31m-      typeQueue.push({ name: name, def: definitionFn });[m
[31m-      if (!enqueue) flushTypeQueue();[m
[31m-    }[m
[31m-    return this;[m
[31m-  };[m
 [m
[31m-  // `flushTypeQueue()` waits until `$urlMatcherFactory` is injected before invoking the queued `definitionFn`s[m
[31m-  function flushTypeQueue() {[m
[31m-    while(typeQueue.length) {[m
[31m-      var type = typeQueue.shift();[m
[31m-      if (type.pattern) throw new Error("You cannot override a type's .pattern at runtime.");[m
[31m-      angular.extend($types[type.name], injector.invoke(type.def));[m
[31m-    }[m
[32m+[m[32m  // ALERT PLUGIN DEFINITION[m
[32m+[m[32m  // =======================[m
[32m+[m
[32m+[m[32m  function Plugin(option) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this = $(this)[m
[32m+[m[32m      var data  = $this.data('bs.alert')[m
[32m+[m
[32m+[m[32m      if (!data) $this.data('bs.alert', (data = new Alert(this)))[m
[32m+[m[32m      if (typeof option == 'string') data[option].call($this)[m
[32m+[m[32m    })[m
   }[m
 [m
[31m-  // Register default types. Store them in the prototype of $types.[m
[31m-  forEach(defaultTypes, function(type, name) { $types[name] = new Type(extend({name: name}, type)); });[m
[31m-  $types = inherit($types, {});[m
[32m+[m[32m  var old = $.fn.alert[m
 [m
[31m-  /* No need to document $get, since it returns this */[m
[31m-  this.$get = ['$injector', function ($injector) {[m
[31m-    injector = $injector;[m
[31m-    enqueue = false;[m
[31m-    flushTypeQueue();[m
[32m+[m[32m  $.fn.alert             = Plugin[m
[32m+[m[32m  $.fn.alert.Constructor = Alert[m
 [m
[31m-    forEach(defaultTypes, function(type, name) {[m
[31m-      if (!$types[name]) $types[name] = new Type(type);[m
[31m-    });[m
[31m-    return this;[m
[31m-  }];[m
 [m
[31m-  this.Param = function Param(id, type, config, location) {[m
[31m-    var self = this;[m
[31m-    config = unwrapShorthand(config);[m
[31m-    type = getType(config, type, location);[m
[31m-    var arrayMode = getArrayMode();[m
[31m-    type = arrayMode ? type.$asArray(arrayMode, location === "search") : type;[m
[31m-    if (type.name === "string" && !arrayMode && location === "path" && config.value === undefined)[m
[31m-      config.value = ""; // for 0.2.x; in 0.3.0+ do not automatically default to ""[m
[31m-    var isOptional = config.value !== undefined;[m
[31m-    var squash = getSquashPolicy(config, isOptional);[m
[31m-    var replace = getReplace(config, arrayMode, isOptional, squash);[m
[32m+[m[32m  // ALERT NO CONFLICT[m
[32m+[m[32m  // =================[m
 [m
[31m-    function unwrapShorthand(config) {[m
[31m-      var keys = isObject(config) ? objectKeys(config) : [];[m
[31m-      var isShorthand = indexOf(keys, "value") === -1 && indexOf(keys, "type") === -1 &&[m
[31m-                        indexOf(keys, "squash") === -1 && indexOf(keys, "array") === -1;[m
[31m-      if (isShorthand) config = { value: config };[m
[31m-      config.$$fn = isInjectable(config.value) ? config.value : function () { return config.value; };[m
[31m-      return config;[m
[31m-    }[m
[32m+[m[32m  $.fn.alert.noConflict = function () {[m
[32m+[m[32m    $.fn.alert = old[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-    function getType(config, urlType, location) {[m
[31m-      if (config.type && urlType) throw new Error("Param '"+id+"' has two type configurations.");[m
[31m-      if (urlType) return urlType;[m
[31m-      if (!config.type) return (location === "config" ? $types.any : $types.string);[m
[31m-      return config.type instanceof Type ? config.type : new Type(config.type);[m
[31m-    }[m
 [m
[31m-    // array config: param name (param[]) overrides default settings.  explicit config overrides param name.[m
[31m-    function getArrayMode() {[m
[31m-      var arrayDefaults = { array: (location === "search" ? "auto" : false) };[m
[31m-      var arrayParamNomenclature = id.match(/\[\]$/) ? { array: true } : {};[m
[31m-      return extend(arrayDefaults, arrayParamNomenclature, config).array;[m
[31m-    }[m
[32m+[m[32m  // ALERT DATA-API[m
[32m+[m[32m  // ==============[m
 [m
[31m-    /**[m
[31m-     * returns false, true, or the squash value to indicate the "default parameter url squash policy".[m
[31m-     */[m
[31m-    function getSquashPolicy(config, isOptional) {[m
[31m-      var squash = config.squash;[m
[31m-      if (!isOptional || squash === false) return false;[m
[31m-      if (!isDefined(squash) || squash == null) return defaultSquashPolicy;[m
[31m-      if (squash === true || isString(squash)) return squash;[m
[31m-      throw new Error("Invalid squash policy: '" + squash + "'. Valid policies: false, true, or arbitrary string");[m
[31m-    }[m
[32m+[m[32m  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)[m
 [m
[31m-    function getReplace(config, arrayMode, isOptional, squash) {[m
[31m-      var replace, configuredKeys, defaultPolicy = [[m
[31m-        { from: "",   to: (isOptional || arrayMode ? undefined : "") },[m
[31m-        { from: null, to: (isOptional || arrayMode ? undefined : "") }[m
[31m-      ];[m
[31m-      replace = isArray(config.replace) ? config.replace : [];[m
[31m-      if (isString(squash))[m
[31m-        replace.push({ from: squash, to: undefined });[m
[31m-      configuredKeys = map(replace, function(item) { return item.from; } );[m
[31m-      return filter(defaultPolicy, function(item) { return indexOf(configuredKeys, item.from) === -1; }).concat(replace);[m
[31m-    }[m
[32m+[m[32m}(jQuery);[m
 [m
[31m-    /**[m
[31m-     * [Internal] Get the default value of a parameter, which may be an injectable function.[m
[31m-     */[m
[31m-    function $$getDefaultValue() {[m
[31m-      if (!injector) throw new Error("Injectable functions cannot be called at configuration time");[m
[31m-      var defaultValue = injector.invoke(config.$$fn);[m
[31m-      if (defaultValue !== null && defaultValue !== undefined && !self.type.is(defaultValue))[m
[31m-        throw new Error("Default value (" + defaultValue + ") for parameter '" + self.id + "' is not an instance of Type (" + self.type.name + ")");[m
[31m-      return defaultValue;[m
[31m-    }[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: button.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#buttons[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
 [m
[31m-    /**[m
[31m-     * [Internal] Gets the decoded representation of a value if the value is defined, otherwise, returns the[m
[31m-     * default value, which may be the result of an injectable function.[m
[31m-     */[m
[31m-    function $value(value) {[m
[31m-      function hasReplaceVal(val) { return function(obj) { return obj.from === val; }; }[m
[31m-      function $replace(value) {[m
[31m-        var replacement = map(filter(self.replace, hasReplaceVal(value)), function(obj) { return obj.to; });[m
[31m-        return replacement.length ? replacement[0] : value;[m
[31m-      }[m
[31m-      value = $replace(value);[m
[31m-      return !isDefined(value) ? $$getDefaultValue() : self.type.$normalize(value);[m
[31m-    }[m
 [m
[31m-    function toString() { return "{Param:" + id + " " + type + " squash: '" + squash + "' optional: " + isOptional + "}"; }[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
 [m
[31m-    extend(this, {[m
[31m-      id: id,[m
[31m-      type: type,[m
[31m-      location: location,[m
[31m-      array: arrayMode,[m
[31m-      squash: squash,[m
[31m-      replace: replace,[m
[31m-      isOptional: isOptional,[m
[31m-      value: $value,[m
[31m-      dynamic: undefined,[m
[31m-      config: config,[m
[31m-      toString: toString[m
[31m-    });[m
[31m-  };[m
[32m+[m[32m  // BUTTON PUBLIC CLASS DEFINITION[m
[32m+[m[32m  // ==============================[m
 [m
[31m-  function ParamSet(params) {[m
[31m-    extend(this, params || {});[m
[32m+[m[32m  var Button = function (element, options) {[m
[32m+[m[32m    this.$element  = $(element)[m
[32m+[m[32m    this.options   = $.extend({}, Button.DEFAULTS, options)[m
[32m+[m[32m    this.isLoading = false[m
   }[m
 [m
[31m-  ParamSet.prototype = {[m
[31m-    $$new: function() {[m
[31m-      return inherit(this, extend(new ParamSet(), { $$parent: this}));[m
[31m-    },[m
[31m-    $$keys: function () {[m
[31m-      var keys = [], chain = [], parent = this,[m
[31m-        ignore = objectKeys(ParamSet.prototype);[m
[31m-      while (parent) { chain.push(parent); parent = parent.$$parent; }[m
[31m-      chain.reverse();[m
[31m-      forEach(chain, function(paramset) {[m
[31m-        forEach(objectKeys(paramset), function(key) {[m
[31m-            if (indexOf(keys, key) === -1 && indexOf(ignore, key) === -1) keys.push(key);[m
[31m-        });[m
[31m-      });[m
[31m-      return keys;[m
[31m-    },[m
[31m-    $$values: function(paramValues) {[m
[31m-      var values = {}, self = this;[m
[31m-      forEach(self.$$keys(), function(key) {[m
[31m-        values[key] = self[key].value(paramValues && paramValues[key]);[m
[31m-      });[m
[31m-      return values;[m
[31m-    },[m
[31m-    $$equals: function(paramValues1, paramValues2) {[m
[31m-      var equal = true, self = this;[m
[31m-      forEach(self.$$keys(), function(key) {[m
[31m-        var left = paramValues1 && paramValues1[key], right = paramValues2 && paramValues2[key];[m
[31m-        if (!self[key].type.equals(left, right)) equal = false;[m
[31m-      });[m
[31m-      return equal;[m
[31m-    },[m
[31m-    $$validates: function $$validate(paramValues) {[m
[31m-      var keys = this.$$keys(), i, param, rawVal, normalized, encoded;[m
[31m-      for (i = 0; i < keys.length; i++) {[m
[31m-        param = this[keys[i]];[m
[31m-        rawVal = paramValues[keys[i]];[m
[31m-        if ((rawVal === undefined || rawVal === null) && param.isOptional)[m
[31m-          break; // There was no parameter value, but the param is optional[m
[31m-        normalized = param.type.$normalize(rawVal);[m
[31m-        if (!param.type.is(normalized))[m
[31m-          return false; // The value was not of the correct Type, and could not be decoded to the correct Type[m
[31m-        encoded = param.type.encode(normalized);[m
[31m-        if (angular.isString(encoded) && !param.type.pattern.exec(encoded))[m
[31m-          return false; // The value was of the correct type, but when encoded, did not match the Type's regexp[m
[31m-      }[m
[31m-      return true;[m
[31m-    },[m
[31m-    $$parent: undefined[m
[31m-  };[m
[32m+[m[32m  Button.VERSION  = '3.3.2'[m
 [m
[31m-  this.ParamSet = ParamSet;[m
[31m-}[m
[32m+[m[32m  Button.DEFAULTS = {[m
[32m+[m[32m    loadingText: 'loading...'[m
[32m+[m[32m  }[m
 [m
[31m-// Register as a provider so it's available to other providers[m
[31m-angular.module('ui.router.util').provider('$urlMatcherFactory', $UrlMatcherFactory);[m
[31m-angular.module('ui.router.util').run(['$urlMatcherFactory', function($urlMatcherFactory) { }]);[m
[32m+[m[32m  Button.prototype.setState = function (state) {[m
[32m+[m[32m    var d    = 'disabled'[m
[32m+[m[32m    var $el  = this.$element[m
[32m+[m[32m    var val  = $el.is('input') ? 'val' : 'html'[m
[32m+[m[32m    var data = $el.data()[m
 [m
[31m-/**[m
[31m- * @ngdoc object[m
[31m- * @name ui.router.router.$urlRouterProvider[m
[31m- *[m
[31m- * @requires ui.router.util.$urlMatcherFactoryProvider[m
[31m- * @requires $locationProvider[m
[31m- *[m
[31m- * @description[m
[31m- * `$urlRouterProvider` has the responsibility of watching `$location`. [m
[31m- * When `$location` changes it runs through a list of rules one by one until a [m
[31m- * match is found. `$urlRouterProvider` is used behind the scenes anytime you specify [m
[31m- * a url in a state configuration. All urls are compiled into a UrlMatcher object.[m
[31m- *[m
[31m- * There are several methods on `$urlRouterProvider` that make it useful to use directly[m
[31m- * in your module config.[m
[31m- */[m
[31m-$UrlRouterProvider.$inject = ['$locationProvider', '$urlMatcherFactoryProvider'];[m
[31m-function $UrlRouterProvider(   $locationProvider,   $urlMatcherFactory) {[m
[31m-  var rules = [], otherwise = null, interceptDeferred = false, listener;[m
[32m+[m[32m    state = state + 'Text'[m
 [m
[31m-  // Returns a string that is a prefix of all strings matching the RegExp[m
[31m-  function regExpPrefix(re) {[m
[31m-    var prefix = /^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);[m
[31m-    return (prefix != null) ? prefix[1].replace(/\\(.)/g, "$1") : '';[m
[31m-  }[m
[32m+[m[32m    if (data.resetText == null) $el.data('resetText', $el[val]())[m
 [m
[31m-  // Interpolates matched values into a String.replace()-style pattern[m
[31m-  function interpolate(pattern, match) {[m
[31m-    return pattern.replace(/\$(\$|\d{1,2})/, function (m, what) {[m
[31m-      return match[what === '$' ? 0 : Number(what)];[m
[31m-    });[m
[32m+[m[32m    // push to event loop to allow forms to submit[m
[32m+[m[32m    setTimeout($.proxy(function () {[m
[32m+[m[32m      $el[val](data[state] == null ? this.options[state] : data[state])[m
[32m+[m
[32m+[m[32m      if (state == 'loadingText') {[m
[32m+[m[32m        this.isLoading = true[m
[32m+[m[32m        $el.addClass(d).attr(d, d)[m
[32m+[m[32m      } else if (this.isLoading) {[m
[32m+[m[32m        this.isLoading = false[m
[32m+[m[32m        $el.removeClass(d).removeAttr(d)[m
[32m+[m[32m      }[m
[32m+[m[32m    }, this), 0)[m
   }[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.router.$urlRouterProvider#rule[m
[31m-   * @methodOf ui.router.router.$urlRouterProvider[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Defines rules that are used by `$urlRouterProvider` to find matches for[m
[31m-   * specific URLs.[m
[31m-   *[m
[31m-   * @example[m
[31m-   * <pre>[m
[31m-   * var app = angular.module('app', ['ui.router.router']);[m
[31m-   *[m
[31m-   * app.config(function ($urlRouterProvider) {[m
[31m-   *   // Here's an example of how you might allow case insensitive urls[m
[31m-   *   $urlRouterProvider.rule(function ($injector, $location) {[m
[31m-   *     var path = $location.path(),[m
[31m-   *         normalized = path.toLowerCase();[m
[31m-   *[m
[31m-   *     if (path !== normalized) {[m
[31m-   *       return normalized;[m
[31m-   *     }[m
[31m-   *   });[m
[31m-   * });[m
[31m-   * </pre>[m
[31m-   *[m
[31m-   * @param {object} rule Handler function that takes `$injector` and `$location`[m
[31m-   * services as arguments. You can use them to return a valid path as a string.[m
[31m-   *[m
[31m-   * @return {object} `$urlRouterProvider` - `$urlRouterProvider` instance[m
[31m-   */[m
[31m-  this.rule = function (rule) {[m
[31m-    if (!isFunction(rule)) throw new Error("'rule' must be a function");[m
[31m-    rules.push(rule);[m
[31m-    return this;[m
[31m-  };[m
[32m+[m[32m  Button.prototype.toggle = function () {[m
[32m+[m[32m    var changed = true[m
[32m+[m[32m    var $parent = this.$element.closest('[data-toggle="buttons"]')[m
 [m
[31m-  /**[m
[31m-   * @ngdoc object[m
[31m-   * @name ui.router.router.$urlRouterProvider#otherwise[m
[31m-   * @methodOf ui.router.router.$urlRouterProvider[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Defines a path that is used when an invalid route is requested.[m
[31m-   *[m
[31m-   * @example[m
[31m-   * <pre>[m
[31m-   * var app = angular.module('app', ['ui.router.router']);[m
[31m-   *[m
[31m-   * app.config(function ($urlRouterProvider) {[m
[31m-   *   // if the path doesn't match any of the urls you configured[m
[31m-   *   // otherwise will take care of routing the user to the[m
[31m-   *   // specified url[m
[31m-   *   $urlRouterProvider.otherwise('/index');[m
[31m-   *[m
[31m-   *   // Example of using function rule as param[m
[31m-   *   $urlRouterProvider.otherwise(function ($injector, $location) {[m
[31m-   *     return '/a/valid/url';[m
[31m-   *   });[m
[31m-   * });[m
[31m-   * </pre>[m
[31m-   *[m
[31m-   * @param {string|object} rule The url path you want to redirect to or a function [m
[31m-   * rule that returns the url path. The function version is passed two params: [m
[31m-   * `$injector` and `$location` services, and must return a url string.[m
[31m-   *[m
[31m-   * @return {object} `$urlRouterProvider` - `$urlRouterProvider` instance[m
[31m-   */[m
[31m-  this.otherwise = function (rule) {[m
[31m-    if (isString(rule)) {[m
[31m-      var redirect = rule;[m
[31m-      rule = function () { return redirect; };[m
[32m+[m[32m    if ($parent.length) {[m
[32m+[m[32m      var $input = this.$element.find('input')[m
[32m+[m[32m      if ($input.prop('type') == 'radio') {[m
[32m+[m[32m        if ($input.prop('checked') && this.$element.hasClass('active')) changed = false[m
[32m+[m[32m        else $parent.find('.active').removeClass('active')[m
[32m+[m[32m      }[m
[32m+[m[32m      if (changed) $input.prop('checked', !this.$element.hasClass('active')).trigger('change')[m
[32m+[m[32m    } else {[m
[32m+[m[32m      this.$element.attr('aria-pressed', !this.$element.hasClass('active'))[m
     }[m
[31m-    else if (!isFunction(rule)) throw new Error("'rule' must be a function");[m
[31m-    otherwise = rule;[m
[31m-    return this;[m
[31m-  };[m
[32m+[m
[32m+[m[32m    if (changed) this.$element.toggleClass('active')[m
[32m+[m[32m  }[m
 [m
 [m
[31m-  function handleIfMatch($injector, handler, match) {[m
[31m-    if (!match) return false;[m
[31m-    var result = $injector.invoke(handler, handler, { $match: match });[m
[31m-    return isDefined(result) ? result : true;[m
[32m+[m[32m  // BUTTON PLUGIN DEFINITION[m
[32m+[m[32m  // ========================[m
[32m+[m
[32m+[m[32m  function Plugin(option) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this   = $(this)[m
[32m+[m[32m      var data    = $this.data('bs.button')[m
[32m+[m[32m      var options = typeof option == 'object' && option[m
[32m+[m
[32m+[m[32m      if (!data) $this.data('bs.button', (data = new Button(this, options)))[m
[32m+[m
[32m+[m[32m      if (option == 'toggle') data.toggle()[m
[32m+[m[32m      else if (option) data.setState(option)[m
[32m+[m[32m    })[m
   }[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.router.$urlRouterProvider#when[m
[31m-   * @methodOf ui.router.router.$urlRouterProvider[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Registers a handler for a given url matching. if handle is a string, it is[m
[31m-   * treated as a redirect, and is interpolated according to the syntax of match[m
[31m-   * (i.e. like `String.replace()` for `RegExp`, or like a `UrlMatcher` pattern otherwise).[m
[31m-   *[m
[31m-   * If the handler is a function, it is injectable. It gets invoked if `$location`[m
[31m-   * matches. You have the option of inject the match object as `$match`.[m
[31m-   *[m
[31m-   * The handler can return[m
[31m-   *[m
[31m-   * - **falsy** to indicate that the rule didn't match after all, then `$urlRouter`[m
[31m-   *   will continue trying to find another one that matches.[m
[31m-   * - **string** which is treated as a redirect and passed to `$location.url()`[m
[31m-   * - **void** or any **truthy** value tells `$urlRouter` that the url was handled.[m
[31m-   *[m
[31m-   * @example[m
[31m-   * <pre>[m
[31m-   * var app = angular.module('app', ['ui.router.router']);[m
[31m-   *[m
[31m-   * app.config(function ($urlRouterProvider) {[m
[31m-   *   $urlRouterProvider.when($state.url, function ($match, $stateParams) {[m
[31m-   *     if ($state.$current.navigable !== state ||[m
[31m-   *         !equalForKeys($match, $stateParams) {[m
[31m-   *      $state.transitionTo(state, $match, false);[m
[31m-   *     }[m
[31m-   *   });[m
[31m-   * });[m
[31m-   * </pre>[m
[31m-   *[m
[31m-   * @param {string|object} what The incoming path that you want to redirect.[m
[31m-   * @param {string|object} handler The path you want to redirect your user to.[m
[31m-   */[m
[31m-  this.when = function (what, handler) {[m
[31m-    var redirect, handlerIsString = isString(handler);[m
[31m-    if (isString(what)) what = $urlMatcherFactory.compile(what);[m
[32m+[m[32m  var old = $.fn.button[m
 [m
[31m-    if (!handlerIsString && !isFunction(handler) && !isArray(handler))[m
[31m-      throw new Error("invalid 'handler' in when()");[m
[32m+[m[32m  $.fn.button             = Plugin[m
[32m+[m[32m  $.fn.button.Constructor = Button[m
 [m
[31m-    var strategies = {[m
[31m-      matcher: function (what, handler) {[m
[31m-        if (handlerIsString) {[m
[31m-          redirect = $urlMatcherFactory.compile(handler);[m
[31m-          handler = ['$match', function ($match) { return redirect.format($match); }];[m
[31m-        }[m
[31m-        return extend(function ($injector, $location) {[m
[31m-          return handleIfMatch($injector, handler, what.exec($location.path(), $location.search()));[m
[31m-        }, {[m
[31m-          prefix: isString(what.prefix) ? what.prefix : ''[m
[31m-        });[m
[31m-      },[m
[31m-      regex: function (what, handler) {[m
[31m-        if (what.global || what.sticky) throw new Error("when() RegExp must not be global or sticky");[m
 [m
[31m-        if (handlerIsString) {[m
[31m-          redirect = handler;[m
[31m-          handler = ['$match', function ($match) { return interpolate(redirect, $match); }];[m
[31m-        }[m
[31m-        return extend(function ($injector, $location) {[m
[31m-          return handleIfMatch($injector, handler, what.exec($location.path()));[m
[31m-        }, {[m
[31m-          prefix: regExpPrefix(what)[m
[31m-        });[m
[31m-      }[m
[31m-    };[m
[32m+[m[32m  // BUTTON NO CONFLICT[m
[32m+[m[32m  // ==================[m
 [m
[31m-    var check = { matcher: $urlMatcherFactory.isMatcher(what), regex: what instanceof RegExp };[m
[32m+[m[32m  $.fn.button.noConflict = function () {[m
[32m+[m[32m    $.fn.button = old[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-    for (var n in check) {[m
[31m-      if (check[n]) return this.rule(strategies[n](what, handler));[m
[31m-    }[m
 [m
[31m-    throw new Error("invalid 'what' in when()");[m
[31m-  };[m
[32m+[m[32m  // BUTTON DATA-API[m
[32m+[m[32m  // ===============[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.router.$urlRouterProvider#deferIntercept[m
[31m-   * @methodOf ui.router.router.$urlRouterProvider[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Disables (or enables) deferring location change interception.[m
[31m-   *[m
[31m-   * If you wish to customize the behavior of syncing the URL (for example, if you wish to[m
[31m-   * defer a transition but maintain the current URL), call this method at configuration time.[m
[31m-   * Then, at run time, call `$urlRouter.listen()` after you have configured your own[m
[31m-   * `$locationChangeSuccess` event handler.[m
[31m-   *[m
[31m-   * @example[m
[31m-   * <pre>[m
[31m-   * var app = angular.module('app', ['ui.router.router']);[m
[31m-   *[m
[31m-   * app.config(function ($urlRouterProvider) {[m
[31m-   *[m
[31m-   *   // Prevent $urlRouter from automatically intercepting URL changes;[m
[31m-   *   // this allows you to configure custom behavior in between[m
[31m-   *   // location changes and route synchronization:[m
[31m-   *   $urlRouterProvider.deferIntercept();[m
[31m-   *[m
[31m-   * }).run(function ($rootScope, $urlRouter, UserService) {[m
[31m-   *[m
[31m-   *   $rootScope.$on('$locationChangeSuccess', function(e) {[m
[31m-   *     // UserService is an example service for managing user state[m
[31m-   *     if (UserService.isLoggedIn()) return;[m
[31m-   *[m
[31m-   *     // Prevent $urlRouter's default handler from firing[m
[31m-   *     e.preventDefault();[m
[31m-   *[m
[31m-   *     UserService.handleLogin().then(function() {[m
[31m-   *       // Once the user has logged in, sync the current URL[m
[31m-   *       // to the router:[m
[31m-   *       $urlRouter.sync();[m
[31m-   *     });[m
[31m-   *   });[m
[31m-   *[m
[31m-   *   // Configures $urlRouter's listener *after* your custom listener[m
[31m-   *   $urlRouter.listen();[m
[31m-   * });[m
[31m-   * </pre>[m
[31m-   *[m
[31m-   * @param {boolean} defer Indicates whether to defer location change interception. Passing[m
[31m-            no parameter is equivalent to `true`.[m
[31m-   */[m
[31m-  this.deferIntercept = function (defer) {[m
[31m-    if (defer === undefined) defer = true;[m
[31m-    interceptDeferred = defer;[m
[31m-  };[m
[32m+[m[32m  $(document)[m
[32m+[m[32m    .on('click.bs.button.data-api', '[data-toggle^="button"]', function (e) {[m
[32m+[m[32m      var $btn = $(e.target)[m
[32m+[m[32m      if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')[m
[32m+[m[32m      Plugin.call($btn, 'toggle')[m
[32m+[m[32m      e.preventDefault()[m
[32m+[m[32m    })[m
[32m+[m[32m    .on('focus.bs.button.data-api blur.bs.button.data-api', '[data-toggle^="button"]', function (e) {[m
[32m+[m[32m      $(e.target).closest('.btn').toggleClass('focus', /^focus(in)?$/.test(e.type))[m
[32m+[m[32m    })[m
 [m
[31m-  /**[m
[31m-   * @ngdoc object[m
[31m-   * @name ui.router.router.$urlRouter[m
[31m-   *[m
[31m-   * @requires $location[m
[31m-   * @requires $rootScope[m
[31m-   * @requires $injector[m
[31m-   * @requires $browser[m
[31m-   *[m
[31m-   * @description[m
[31m-   *[m
[31m-   */[m
[31m-  this.$get = $get;[m
[31m-  $get.$inject = ['$location', '$rootScope', '$injector', '$browser'];[m
[31m-  function $get(   $location,   $rootScope,   $injector,   $browser) {[m
[32m+[m[32m}(jQuery);[m
 [m
[31m-    var baseHref = $browser.baseHref(), location = $location.url(), lastPushedUrl;[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: carousel.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#carousel[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
 [m
[31m-    function appendBasePath(url, isHtml5, absolute) {[m
[31m-      if (baseHref === '/') return url;[m
[31m-      if (isHtml5) return baseHref.slice(0, -1) + url;[m
[31m-      if (absolute) return baseHref.slice(1) + url;[m
[31m-      return url;[m
[31m-    }[m
 [m
[31m-    // TODO: Optimize groups of rules with non-empty prefix into some sort of decision tree[m
[31m-    function update(evt) {[m
[31m-      if (evt && evt.defaultPrevented) return;[m
[31m-      var ignoreUpdate = lastPushedUrl && $location.url() === lastPushedUrl;[m
[31m-      lastPushedUrl = undefined;[m
[31m-      // TODO: Re-implement this in 1.0 for https://github.com/angular-ui/ui-router/issues/1573[m
[31m-      //if (ignoreUpdate) return true;[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
 [m
[31m-      function check(rule) {[m
[31m-        var handled = rule($injector, $location);[m
[32m+[m[32m  // CAROUSEL CLASS DEFINITION[m
[32m+[m[32m  // =========================[m
 [m
[31m-        if (!handled) return false;[m
[31m-        if (isString(handled)) $location.replace().url(handled);[m
[31m-        return true;[m
[31m-      }[m
[31m-      var n = rules.length, i;[m
[32m+[m[32m  var Carousel = function (element, options) {[m
[32m+[m[32m    this.$element    = $(element)[m
[32m+[m[32m    this.$indicators = this.$element.find('.carousel-indicators')[m
[32m+[m[32m    this.options     = options[m
[32m+[m[32m    this.paused      =[m
[32m+[m[32m    this.sliding     =[m
[32m+[m[32m    this.interval    =[m
[32m+[m[32m    this.$active     =[m
[32m+[m[32m    this.$items      = null[m
 [m
[31m-      for (i = 0; i < n; i++) {[m
[31m-        if (check(rules[i])) return;[m
[31m-      }[m
[31m-      // always check otherwise last to allow dynamic updates to the set of rules[m
[31m-      if (otherwise) check(otherwise);[m
[31m-    }[m
[32m+[m[32m    this.options.keyboard && this.$element.on('keydown.bs.carousel', $.proxy(this.keydown, this))[m
 [m
[31m-    function listen() {[m
[31m-      listener = listener || $rootScope.$on('$locationChangeSuccess', update);[m
[31m-      return listener;[m
[32m+[m[32m    this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element[m
[32m+[m[32m      .on('mouseenter.bs.carousel', $.proxy(this.pause, this))[m
[32m+[m[32m      .on('mouseleave.bs.carousel', $.proxy(this.cycle, this))[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  Carousel.VERSION  = '3.3.2'[m
[32m+[m
[32m+[m[32m  Carousel.TRANSITION_DURATION = 600[m
[32m+[m
[32m+[m[32m  Carousel.DEFAULTS = {[m
[32m+[m[32m    interval: 5000,[m
[32m+[m[32m    pause: 'hover',[m
[32m+[m[32m    wrap: true,[m
[32m+[m[32m    keyboard: true[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  Carousel.prototype.keydown = function (e) {[m
[32m+[m[32m    if (/input|textarea/i.test(e.target.tagName)) return[m
[32m+[m[32m    switch (e.which) {[m
[32m+[m[32m      case 37: this.prev(); break[m
[32m+[m[32m      case 39: this.next(); break[m
[32m+[m[32m      default: return[m
     }[m
 [m
[31m-    if (!interceptDeferred) listen();[m
[32m+[m[32m    e.preventDefault()[m
[32m+[m[32m  }[m
 [m
[31m-    return {[m
[31m-      /**[m
[31m-       * @ngdoc function[m
[31m-       * @name ui.router.router.$urlRouter#sync[m
[31m-       * @methodOf ui.router.router.$urlRouter[m
[31m-       *[m
[31m-       * @description[m
[31m-       * Triggers an update; the same update that happens when the address bar url changes, aka `$locationChangeSuccess`.[m
[31m-       * This method is useful when you need to use `preventDefault()` on the `$locationChangeSuccess` event,[m
[31m-       * perform some custom logic (route protection, auth, config, redirection, etc) and then finally proceed[m
[31m-       * with the transition by calling `$urlRouter.sync()`.[m
[31m-       *[m
[31m-       * @example[m
[31m-       * <pre>[m
[31m-       * angular.module('app', ['ui.router'])[m
[31m-       *   .run(function($rootScope, $urlRouter) {[m
[31m-       *     $rootScope.$on('$locationChangeSuccess', function(evt) {[m
[31m-       *       // Halt state change from even starting[m
[31m-       *       evt.preventDefault();[m
[31m-       *       // Perform custom logic[m
[31m-       *       var meetsRequirement = ...[m
[31m-       *       // Continue with the update and state transition if logic allows[m
[31m-       *       if (meetsRequirement) $urlRouter.sync();[m
[31m-       *     });[m
[31m-       * });[m
[31m-       * </pre>[m
[31m-       */[m
[31m-      sync: function() {[m
[31m-        update();[m
[31m-      },[m
[32m+[m[32m  Carousel.prototype.cycle = function (e) {[m
[32m+[m[32m    e || (this.paused = false)[m
 [m
[31m-      listen: function() {[m
[31m-        return listen();[m
[31m-      },[m
[32m+[m[32m    this.interval && clearInterval(this.interval)[m
 [m
[31m-      update: function(read) {[m
[31m-        if (read) {[m
[31m-          location = $location.url();[m
[31m-          return;[m
[31m-        }[m
[31m-        if ($location.url() === location) return;[m
[32m+[m[32m    this.options.interval[m
[32m+[m[32m      && !this.paused[m
[32m+[m[32m      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))[m
 [m
[31m-        $location.url(location);[m
[31m-        $location.replace();[m
[31m-      },[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-      push: function(urlMatcher, params, options) {[m
[31m-         var url = urlMatcher.format(params || {});[m
[32m+[m[32m  Carousel.prototype.getItemIndex = function (item) {[m
[32m+[m[32m    this.$items = item.parent().children('.item')[m
[32m+[m[32m    return this.$items.index(item || this.$active)[m
[32m+[m[32m  }[m
 [m
[31m-        // Handle the special hash param, if needed[m
[31m-        if (url !== null && params && params['#']) {[m
[31m-            url += '#' + params['#'];[m
[31m-        }[m
[32m+[m[32m  Carousel.prototype.getItemForDirection = function (direction, active) {[m
[32m+[m[32m    var activeIndex = this.getItemIndex(active)[m
[32m+[m[32m    var willWrap = (direction == 'prev' && activeIndex === 0)[m
[32m+[m[32m                || (direction == 'next' && activeIndex == (this.$items.length - 1))[m
[32m+[m[32m    if (willWrap && !this.options.wrap) return active[m
[32m+[m[32m    var delta = direction == 'prev' ? -1 : 1[m
[32m+[m[32m    var itemIndex = (activeIndex + delta) % this.$items.length[m
[32m+[m[32m    return this.$items.eq(itemIndex)[m
[32m+[m[32m  }[m
 [m
[31m-        $location.url(url);[m
[31m-        lastPushedUrl = options && options.$$avoidResync ? $location.url() : undefined;[m
[31m-        if (options && options.replace) $location.replace();[m
[31m-      },[m
[32m+[m[32m  Carousel.prototype.to = function (pos) {[m
[32m+[m[32m    var that        = this[m
[32m+[m[32m    var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))[m
 [m
[31m-      /**[m
[31m-       * @ngdoc function[m
[31m-       * @name ui.router.router.$urlRouter#href[m
[31m-       * @methodOf ui.router.router.$urlRouter[m
[31m-       *[m
[31m-       * @description[m
[31m-       * A URL generation method that returns the compiled URL for a given[m
[31m-       * {@link ui.router.util.type:UrlMatcher `UrlMatcher`}, populated with the provided parameters.[m
[31m-       *[m
[31m-       * @example[m
[31m-       * <pre>[m
[31m-       * $bob = $urlRouter.href(new UrlMatcher("/about/:person"), {[m
[31m-       *   person: "bob"[m
[31m-       * });[m
[31m-       * // $bob == "/about/bob";[m
[31m-       * </pre>[m
[31m-       *[m
[31m-       * @param {UrlMatcher} urlMatcher The `UrlMatcher` object which is used as the template of the URL to generate.[m
[31m-       * @param {object=} params An object of parameter values to fill the matcher's required parameters.[m
[31m-       * @param {object=} options Options object. The options are:[m
[31m-       *[m
[31m-       * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. "http://www.example.com/fullurl".[m
[31m-       *[m
[31m-       * @returns {string} Returns the fully compiled URL, or `null` if `params` fail validation against `urlMatcher`[m
[31m-       */[m
[31m-      href: function(urlMatcher, params, options) {[m
[31m-        if (!urlMatcher.validates(params)) return null;[m
[32m+[m[32m    if (pos > (this.$items.length - 1) || pos < 0) return[m
 [m
[31m-        var isHtml5 = $locationProvider.html5Mode();[m
[31m-        if (angular.isObject(isHtml5)) {[m
[31m-          isHtml5 = isHtml5.enabled;[m
[31m-        }[m
[31m-        [m
[31m-        var url = urlMatcher.format(params);[m
[31m-        options = options || {};[m
[32m+[m[32m    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) }) // yes, "slid"[m
[32m+[m[32m    if (activeIndex == pos) return this.pause().cycle()[m
 [m
[31m-        if (!isHtml5 && url !== null) {[m
[31m-          url = "#" + $locationProvider.hashPrefix() + url;[m
[31m-        }[m
[32m+[m[32m    return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))[m
[32m+[m[32m  }[m
 [m
[31m-        // Handle special hash param, if needed[m
[31m-        if (url !== null && params && params['#']) {[m
[31m-          url += '#' + params['#'];[m
[31m-        }[m
[32m+[m[32m  Carousel.prototype.pause = function (e) {[m
[32m+[m[32m    e || (this.paused = true)[m
 [m
[31m-        url = appendBasePath(url, isHtml5, options.absolute);[m
[32m+[m[32m    if (this.$element.find('.next, .prev').length && $.support.transition) {[m
[32m+[m[32m      this.$element.trigger($.support.transition.end)[m
[32m+[m[32m      this.cycle(true)[m
[32m+[m[32m    }[m
 [m
[31m-        if (!options.absolute || !url) {[m
[31m-          return url;[m
[31m-        }[m
[32m+[m[32m    this.interval = clearInterval(this.interval)[m
 [m
[31m-        var slash = (!isHtml5 && url ? '/' : ''), port = $location.port();[m
[31m-        port = (port === 80 || port === 443 ? '' : ':' + port);[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-        return [$location.protocol(), '://', $location.host(), port, slash, url].join('');[m
[31m-      }[m
[31m-    };[m
[32m+[m[32m  Carousel.prototype.next = function () {[m
[32m+[m[32m    if (this.sliding) return[m
[32m+[m[32m    return this.slide('next')[m
   }[m
[31m-}[m
 [m
[31m-angular.module('ui.router.router').provider('$urlRouter', $UrlRouterProvider);[m
[32m+[m[32m  Carousel.prototype.prev = function () {[m
[32m+[m[32m    if (this.sliding) return[m
[32m+[m[32m    return this.slide('prev')[m
[32m+[m[32m  }[m
 [m
[31m-/**[m
[31m- * @ngdoc object[m
[31m- * @name ui.router.state.$stateProvider[m
[31m- *[m
[31m- * @requires ui.router.router.$urlRouterProvider[m
[31m- * @requires ui.router.util.$urlMatcherFactoryProvider[m
[31m- *[m
[31m- * @description[m
[31m- * The new `$stateProvider` works similar to Angular's v1 router, but it focuses purely[m
[31m- * on state.[m
[31m- *[m
[31m- * A state corresponds to a "place" in the application in terms of the overall UI and[m
[31m- * navigation. A state describes (via the controller / template / view properties) what[m
[31m- * the UI looks like and does at that place.[m
[31m- *[m
[31m- * States often have things in common, and the primary way of factoring out these[m
[31m- * commonalities in this model is via the state hierarchy, i.e. parent/child states aka[m
[31m- * nested states.[m
[31m- *[m
[31m- * The `$stateProvider` provides interfaces to declare these states for your app.[m
[31m- */[m
[31m-$StateProvider.$inject = ['$urlRouterProvider', '$urlMatcherFactoryProvider'];[m
[31m-function $StateProvider(   $urlRouterProvider,   $urlMatcherFactory) {[m
[32m+[m[32m  Carousel.prototype.slide = function (type, next) {[m
[32m+[m[32m    var $active   = this.$element.find('.item.active')[m
[32m+[m[32m    var $next     = next || this.getItemForDirection(type, $active)[m
[32m+[m[32m    var isCycling = this.interval[m
[32m+[m[32m    var direction = type == 'next' ? 'left' : 'right'[m
[32m+[m[32m    var that      = this[m
 [m
[31m-  var root, states = {}, $state, queue = {}, abstractKey = 'abstract';[m
[32m+[m[32m    if ($next.hasClass('active')) return (this.sliding = false)[m
 [m
[31m-  // Builds state properties from definition passed to registerState()[m
[31m-  var stateBuilder = {[m
[32m+[m[32m    var relatedTarget = $next[0][m
[32m+[m[32m    var slideEvent = $.Event('slide.bs.carousel', {[m
[32m+[m[32m      relatedTarget: relatedTarget,[m
[32m+[m[32m      direction: direction[m
[32m+[m[32m    })[m
[32m+[m[32m    this.$element.trigger(slideEvent)[m
[32m+[m[32m    if (slideEvent.isDefaultPrevented()) return[m
 [m
[31m-    // Derive parent state from a hierarchical name only if 'parent' is not explicitly defined.[m
[31m-    // state.children = [];[m
[31m-    // if (parent) parent.children.push(state);[m
[31m-    parent: function(state) {[m
[31m-      if (isDefined(state.parent) && state.parent) return findState(state.parent);[m
[31m-      // regex matches any valid composite state name[m
[31m-      // would match "contact.list" but not "contacts"[m
[31m-      var compositeName = /^(.+)\.[^.]+$/.exec(state.name);[m
[31m-      return compositeName ? findState(compositeName[1]) : root;[m
[31m-    },[m
[32m+[m[32m    this.sliding = true[m
 [m
[31m-    // inherit 'data' from parent and override by own values (if any)[m
[31m-    data: function(state) {[m
[31m-      if (state.parent && state.parent.data) {[m
[31m-        state.data = state.self.data = extend({}, state.parent.data, state.data);[m
[31m-      }[m
[31m-      return state.data;[m
[31m-    },[m
[32m+[m[32m    isCycling && this.pause()[m
 [m
[31m-    // Build a URLMatcher if necessary, either via a relative or absolute URL[m
[31m-    url: function(state) {[m
[31m-      var url = state.url, config = { params: state.params || {} };[m
[32m+[m[32m    if (this.$indicators.length) {[m
[32m+[m[32m      this.$indicators.find('.active').removeClass('active')[m
[32m+[m[32m      var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])[m
[32m+[m[32m      $nextIndicator && $nextIndicator.addClass('active')[m
[32m+[m[32m    }[m
 [m
[31m-      if (isString(url)) {[m
[31m-        if (url.charAt(0) == '^') return $urlMatcherFactory.compile(url.substring(1), config);[m
[31m-        return (state.parent.navigable || root).url.concat(url, config);[m
[31m-      }[m
[32m+[m[32m    var slidEvent = $.Event('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, "slid"[m
[32m+[m[32m    if ($.support.transition && this.$element.hasClass('slide')) {[m
[32m+[m[32m      $next.addClass(type)[m
[32m+[m[32m      $next[0].offsetWidth // force reflow[m
[32m+[m[32m      $active.addClass(direction)[m
[32m+[m[32m      $next.addClass(direction)[m
[32m+[m[32m      $active[m
[32m+[m[32m        .one('bsTransitionEnd', function () {[m
[32m+[m[32m          $next.removeClass([type, direction].join(' ')).addClass('active')[m
[32m+[m[32m          $active.removeClass(['active', direction].join(' '))[m
[32m+[m[32m          that.sliding = false[m
[32m+[m[32m          setTimeout(function () {[m
[32m+[m[32m            that.$element.trigger(slidEvent)[m
[32m+[m[32m          }, 0)[m
[32m+[m[32m        })[m
[32m+[m[32m        .emulateTransitionEnd(Carousel.TRANSITION_DURATION)[m
[32m+[m[32m    } else {[m
[32m+[m[32m      $active.removeClass('active')[m
[32m+[m[32m      $next.addClass('active')[m
[32m+[m[32m      this.sliding = false[m
[32m+[m[32m      this.$element.trigger(slidEvent)[m
[32m+[m[32m    }[m
 [m
[31m-      if (!url || $urlMatcherFactory.isMatcher(url)) return url;[m
[31m-      throw new Error("Invalid url '" + url + "' in state '" + state + "'");[m
[31m-    },[m
[32m+[m[32m    isCycling && this.cycle()[m
 [m
[31m-    // Keep track of the closest ancestor state that has a URL (i.e. is navigable)[m
[31m-    navigable: function(state) {[m
[31m-      return state.url ? state : (state.parent ? state.parent.navigable : null);[m
[31m-    },[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-    // Own parameters for this state. state.url.params is already built at this point. Create and add non-url params[m
[31m-    ownParams: function(state) {[m
[31m-      var params = state.url && state.url.params || new $$UMFP.ParamSet();[m
[31m-      forEach(state.params || {}, function(config, id) {[m
[31m-        if (!params[id]) params[id] = new $$UMFP.Param(id, null, config, "config");[m
[31m-      });[m
[31m-      return params;[m
[31m-    },[m
 [m
[31m-    // Derive parameters for this state and ensure they're a super-set of parent's parameters[m
[31m-    params: function(state) {[m
[31m-      return state.parent && state.parent.params ? extend(state.parent.params.$$new(), state.ownParams) : new $$UMFP.ParamSet();[m
[31m-    },[m
[32m+[m[32m  // CAROUSEL PLUGIN DEFINITION[m
[32m+[m[32m  // ==========================[m
 [m
[31m-    // If there is no explicit multi-view configuration, make one up so we don't have[m
[31m-    // to handle both cases in the view directive later. Note that having an explicit[m
[31m-    // 'views' property will mean the default unnamed view properties are ignored. This[m
[31m-    // is also a good time to resolve view names to absolute names, so everything is a[m
[31m-    // straight lookup at link time.[m
[31m-    views: function(state) {[m
[31m-      var views = {};[m
[32m+[m[32m  function Plugin(option) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this   = $(this)[m
[32m+[m[32m      var data    = $this.data('bs.carousel')[m
[32m+[m[32m      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)[m
[32m+[m[32m      var action  = typeof option == 'string' ? option : options.slide[m
 [m
[31m-      forEach(isDefined(state.views) ? state.views : { '': state }, function (view, name) {[m
[31m-        if (name.indexOf('@') < 0) name += '@' + state.parent.name;[m
[31m-        views[name] = view;[m
[31m-      });[m
[31m-      return views;[m
[31m-    },[m
[32m+[m[32m      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))[m
[32m+[m[32m      if (typeof option == 'number') data.to(option)[m
[32m+[m[32m      else if (action) data[action]()[m
[32m+[m[32m      else if (options.interval) data.pause().cycle()[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-    // Keep a full path from the root down to this state as this is needed for state activation.[m
[31m-    path: function(state) {[m
[31m-      return state.parent ? state.parent.path.concat(state) : []; // exclude root from path[m
[31m-    },[m
[32m+[m[32m  var old = $.fn.carousel[m
 [m
[31m-    // Speed up $state.contains() as it's used a lot[m
[31m-    includes: function(state) {[m
[31m-      var includes = state.parent ? extend({}, state.parent.includes) : {};[m
[31m-      includes[state.name] = true;[m
[31m-      return includes;[m
[31m-    },[m
[32m+[m[32m  $.fn.carousel             = Plugin[m
[32m+[m[32m  $.fn.carousel.Constructor = Carousel[m
 [m
[31m-    $delegates: {}[m
[31m-  };[m
 [m
[31m-  function isRelative(stateName) {[m
[31m-    return stateName.indexOf(".") === 0 || stateName.indexOf("^") === 0;[m
[32m+[m[32m  // CAROUSEL NO CONFLICT[m
[32m+[m[32m  // ====================[m
[32m+[m
[32m+[m[32m  $.fn.carousel.noConflict = function () {[m
[32m+[m[32m    $.fn.carousel = old[m
[32m+[m[32m    return this[m
   }[m
 [m
[31m-  function findState(stateOrName, base) {[m
[31m-    if (!stateOrName) return undefined;[m
 [m
[31m-    var isStr = isString(stateOrName),[m
[31m-        name  = isStr ? stateOrName : stateOrName.name,[m
[31m-        path  = isRelative(name);[m
[32m+[m[32m  // CAROUSEL DATA-API[m
[32m+[m[32m  // =================[m
 [m
[31m-    if (path) {[m
[31m-      if (!base) throw new Error("No reference point given for path '"  + name + "'");[m
[31m-      base = findState(base);[m
[31m-      [m
[31m-      var rel = name.split("."), i = 0, pathLength = rel.length, current = base;[m
[32m+[m[32m  var clickHandler = function (e) {[m
[32m+[m[32m    var href[m
[32m+[m[32m    var $this   = $(this)[m
[32m+[m[32m    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) // strip for ie7[m
[32m+[m[32m    if (!$target.hasClass('carousel')) return[m
[32m+[m[32m    var options = $.extend({}, $target.data(), $this.data())[m
[32m+[m[32m    var slideIndex = $this.attr('data-slide-to')[m
[32m+[m[32m    if (slideIndex) options.interval = false[m
 [m
[31m-      for (; i < pathLength; i++) {[m
[31m-        if (rel[i] === "" && i === 0) {[m
[31m-          current = base;[m
[31m-          continue;[m
[31m-        }[m
[31m-        if (rel[i] === "^") {[m
[31m-          if (!current.parent) throw new Error("Path '" + name + "' not valid for state '" + base.name + "'");[m
[31m-          current = current.parent;[m
[31m-          continue;[m
[31m-        }[m
[31m-        break;[m
[31m-      }[m
[31m-      rel = rel.slice(i).join(".");[m
[31m-      name = current.name + (current.name && rel ? "." : "") + rel;[m
[31m-    }[m
[31m-    var state = states[name];[m
[32m+[m[32m    Plugin.call($target, options)[m
 [m
[31m-    if (state && (isStr || (!isStr && (state === stateOrName || state.self === stateOrName)))) {[m
[31m-      return state;[m
[32m+[m[32m    if (slideIndex) {[m
[32m+[m[32m      $target.data('bs.carousel').to(slideIndex)[m
     }[m
[31m-    return undefined;[m
[31m-  }[m
 [m
[31m-  function queueState(parentName, state) {[m
[31m-    if (!queue[parentName]) {[m
[31m-      queue[parentName] = [];[m
[31m-    }[m
[31m-    queue[parentName].push(state);[m
[32m+[m[32m    e.preventDefault()[m
   }[m
 [m
[31m-  function flushQueuedChildren(parentName) {[m
[31m-    var queued = queue[parentName] || [];[m
[31m-    while(queued.length) {[m
[31m-      registerState(queued.shift());[m
[31m-    }[m
[31m-  }[m
[32m+[m[32m  $(document)[m
[32m+[m[32m    .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)[m
[32m+[m[32m    .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)[m
 [m
[31m-  function registerState(state) {[m
[31m-    // Wrap a new object around the state so we can store our private details easily.[m
[31m-    state = inherit(state, {[m
[31m-      self: state,[m
[31m-      resolve: state.resolve || {},[m
[31m-      toString: function() { return this.name; }[m
[31m-    });[m
[32m+[m[32m  $(window).on('load', function () {[m
[32m+[m[32m    $('[data-ride="carousel"]').each(function () {[m
[32m+[m[32m      var $carousel = $(this)[m
[32m+[m[32m      Plugin.call($carousel, $carousel.data())[m
[32m+[m[32m    })[m
[32m+[m[32m  })[m
 [m
[31m-    var name = state.name;[m
[31m-    if (!isString(name) || name.indexOf('@') >= 0) throw new Error("State must have a valid name");[m
[31m-    if (states.hasOwnProperty(name)) throw new Error("State '" + name + "'' is already defined");[m
[32m+[m[32m}(jQuery);[m
 [m
[31m-    // Get parent name[m
[31m-    var parentName = (name.indexOf('.') !== -1) ? name.substring(0, name.lastIndexOf('.'))[m
[31m-        : (isString(state.parent)) ? state.parent[m
[31m-        : (isObject(state.parent) && isString(state.parent.name)) ? state.parent.name[m
[31m-        : '';[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: collapse.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#collapse[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
 [m
[31m-    // If parent is not registered yet, add state to queue and register later[m
[31m-    if (parentName && !states[parentName]) {[m
[31m-      return queueState(parentName, state.self);[m
[31m-    }[m
 [m
[31m-    for (var key in stateBuilder) {[m
[31m-      if (isFunction(stateBuilder[key])) state[key] = stateBuilder[key](state, stateBuilder.$delegates[key]);[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
[32m+[m
[32m+[m[32m  // COLLAPSE PUBLIC CLASS DEFINITION[m
[32m+[m[32m  // ================================[m
[32m+[m
[32m+[m[32m  var Collapse = function (element, options) {[m
[32m+[m[32m    this.$element      = $(element)[m
[32m+[m[32m    this.options       = $.extend({}, Collapse.DEFAULTS, options)[m
[32m+[m[32m    this.$trigger      = $(this.options.trigger).filter('[href="#' + element.id + '"], [data-target="#' + element.id + '"]')[m
[32m+[m[32m    this.transitioning = null[m
[32m+[m
[32m+[m[32m    if (this.options.parent) {[m
[32m+[m[32m      this.$parent = this.getParent()[m
[32m+[m[32m    } else {[m
[32m+[m[32m      this.addAriaAndCollapsedClass(this.$element, this.$trigger)[m
     }[m
[31m-    states[name] = state;[m
 [m
[31m-    // Register the state in the global state list and with $urlRouter if necessary.[m
[31m-    if (!state[abstractKey] && state.url) {[m
[31m-      $urlRouterProvider.when(state.url, ['$match', '$stateParams', function ($match, $stateParams) {[m
[31m-        if ($state.$current.navigable != state || !equalForKeys($match, $stateParams)) {[m
[31m-          $state.transitionTo(state, $match, { inherit: true, location: false });[m
[31m-        }[m
[31m-      }]);[m
[31m-    }[m
[32m+[m[32m    if (this.options.toggle) this.toggle()[m
[32m+[m[32m  }[m
 [m
[31m-    // Register any queued children[m
[31m-    flushQueuedChildren(name);[m
[32m+[m[32m  Collapse.VERSION  = '3.3.2'[m
 [m
[31m-    return state;[m
[31m-  }[m
[32m+[m[32m  Collapse.TRANSITION_DURATION = 350[m
 [m
[31m-  // Checks text to see if it looks like a glob.[m
[31m-  function isGlob (text) {[m
[31m-    return text.indexOf('*') > -1;[m
[32m+[m[32m  Collapse.DEFAULTS = {[m
[32m+[m[32m    toggle: true,[m
[32m+[m[32m    trigger: '[data-toggle="collapse"]'[m
   }[m
 [m
[31m-  // Returns true if glob matches current $state name.[m
[31m-  function doesStateMatchGlob (glob) {[m
[31m-    var globSegments = glob.split('.'),[m
[31m-        segments = $state.$current.name.split('.');[m
[32m+[m[32m  Collapse.prototype.dimension = function () {[m
[32m+[m[32m    var hasWidth = this.$element.hasClass('width')[m
[32m+[m[32m    return hasWidth ? 'width' : 'height'[m
[32m+[m[32m  }[m
 [m
[31m-    //match single stars[m
[31m-    for (var i = 0, l = globSegments.length; i < l; i++) {[m
[31m-      if (globSegments[i] === '*') {[m
[31m-        segments[i] = '*';[m
[31m-      }[m
[31m-    }[m
[32m+[m[32m  Collapse.prototype.show = function () {[m
[32m+[m[32m    if (this.transitioning || this.$element.hasClass('in')) return[m
 [m
[31m-    //match greedy starts[m
[31m-    if (globSegments[0] === '**') {[m
[31m-       segments = segments.slice(indexOf(segments, globSegments[1]));[m
[31m-       segments.unshift('**');[m
[31m-    }[m
[31m-    //match greedy ends[m
[31m-    if (globSegments[globSegments.length - 1] === '**') {[m
[31m-       segments.splice(indexOf(segments, globSegments[globSegments.length - 2]) + 1, Number.MAX_VALUE);[m
[31m-       segments.push('**');[m
[31m-    }[m
[32m+[m[32m    var activesData[m
[32m+[m[32m    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')[m
 [m
[31m-    if (globSegments.length != segments.length) {[m
[31m-      return false;[m
[32m+[m[32m    if (actives && actives.length) {[m
[32m+[m[32m      activesData = actives.data('bs.collapse')[m
[32m+[m[32m      if (activesData && activesData.transitioning) return[m
     }[m
 [m
[31m-    return segments.join('') === globSegments.join('');[m
[31m-  }[m
[32m+[m[32m    var startEvent = $.Event('show.bs.collapse')[m
[32m+[m[32m    this.$element.trigger(startEvent)[m
[32m+[m[32m    if (startEvent.isDefaultPrevented()) return[m
 [m
[32m+[m[32m    if (actives && actives.length) {[m
[32m+[m[32m      Plugin.call(actives, 'hide')[m
[32m+[m[32m      activesData || actives.data('bs.collapse', null)[m
[32m+[m[32m    }[m
 [m
[31m-  // Implicit root state that is always active[m
[31m-  root = registerState({[m
[31m-    name: '',[m
[31m-    url: '^',[m
[31m-    views: null,[m
[31m-    'abstract': true[m
[31m-  });[m
[31m-  root.navigable = null;[m
[32m+[m[32m    var dimension = this.dimension()[m
 [m
[32m+[m[32m    this.$element[m
[32m+[m[32m      .removeClass('collapse')[m
[32m+[m[32m      .addClass('collapsing')[dimension](0)[m
[32m+[m[32m      .attr('aria-expanded', true)[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.state.$stateProvider#decorator[m
[31m-   * @methodOf ui.router.state.$stateProvider[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Allows you to extend (carefully) or override (at your own peril) the [m
[31m-   * `stateBuilder` object used internally by `$stateProvider`. This can be used [m
[31m-   * to add custom functionality to ui-router, for example inferring templateUrl [m
[31m-   * based on the state name.[m
[31m-   *[m
[31m-   * When passing only a name, it returns the current (original or decorated) builder[m
[31m-   * function that matches `name`.[m
[31m-   *[m
[31m-   * The builder functions that can be decorated are listed below. Though not all[m
[31m-   * necessarily have a good use case for decoration, that is up to you to decide.[m
[31m-   *[m
[31m-   * In addition, users can attach custom decorators, which will generate new [m
[31m-   * properties within the state's internal definition. There is currently no clear [m
[31m-   * use-case for this beyond accessing internal states (i.e. $state.$current), [m
[31m-   * however, expect this to become increasingly relevant as we introduce additional [m
[31m-   * meta-programming features.[m
[31m-   *[m
[31m-   * **Warning**: Decorators should not be interdependent because the order of [m
[31m-   * execution of the builder functions in non-deterministic. Builder functions [m
[31m-   * should only be dependent on the state definition object and super function.[m
[31m-   *[m
[31m-   *[m
[31m-   * Existing builder functions and current return values:[m
[31m-   *[m
[31m-   * - **parent** `{object}` - returns the parent state object.[m
[31m-   * - **data** `{object}` - returns state data, including any inherited data that is not[m
[31m-   *   overridden by own values (if any).[m
[31m-   * - **url** `{object}` - returns a {@link ui.router.util.type:UrlMatcher UrlMatcher}[m
[31m-   *   or `null`.[m
[31m-   * - **navigable** `{object}` - returns closest ancestor state that has a URL (aka is [m
[31m-   *   navigable).[m
[31m-   * - **params** `{object}` - returns an array of state params that are ensured to [m
[31m-   *   be a super-set of parent's params.[m
[31m-   * - **views** `{object}` - returns a views object where each key is an absolute view [m
[31m-   *   name (i.e. "viewName@stateName") and each value is the config object [m
[31m-   *   (template, controller) for the view. Even when you don't use the views object [m
[31m-   *   explicitly on a state config, one is still created for you internally.[m
[31m-   *   So by decorating this builder function you have access to decorating template [m
[31m-   *   and controller properties.[m
[31m-   * - **ownParams** `{object}` - returns an array of params that belong to the state, [m
[31m-   *   not including any params defined by ancestor states.[m
[31m-   * - **path** `{string}` - returns the full path from the root down to this state. [m
[31m-   *   Needed for state activation.[m
[31m-   * - **includes** `{object}` - returns an object that includes every state that [m
[31m-   *   would pass a `$state.includes()` test.[m
[31m-   *[m
[31m-   * @example[m
[31m-   * <pre>[m
[31m-   * // Override the internal 'views' builder with a function that takes the state[m
[31m-   * // definition, and a reference to the internal function being overridden:[m
[31m-   * $stateProvider.decorator('views', function (state, parent) {[m
[31m-   *   var result = {},[m
[31m-   *       views = parent(state);[m
[31m-   *[m
[31m-   *   angular.forEach(views, function (config, name) {[m
[31m-   *     var autoName = (state.name + '.' + name).replace('.', '/');[m
[31m-   *     config.templateUrl = config.templateUrl || '/partials/' + autoName + '.html';[m
[31m-   *     result[name] = config;[m
[31m-   *   });[m
[31m-   *   return result;[m
[31m-   * });[m
[31m-   *[m
[31m-   * $stateProvider.state('home', {[m
[31m-   *   views: {[m
[31m-   *     'contact.list': { controller: 'ListController' },[m
[31m-   *     'contact.item': { controller: 'ItemController' }[m
[31m-   *   }[m
[31m-   * });[m
[31m-   *[m
[31m-   * // ...[m
[31m-   *[m
[31m-   * $state.go('home');[m
[31m-   * // Auto-populates list and item views with /partials/home/contact/list.html,[m
[31m-   * // and /partials/home/contact/item.html, respectively.[m
[31m-   * </pre>[m
[31m-   *[m
[31m-   * @param {string} name The name of the builder function to decorate. [m
[31m-   * @param {object} func A function that is responsible for decorating the original [m
[31m-   * builder function. The function receives two parameters:[m
[31m-   *[m
[31m-   *   - `{object}` - state - The state config object.[m
[31m-   *   - `{object}` - super - The original builder function.[m
[31m-   *[m
[31m-   * @return {object} $stateProvider - $stateProvider instance[m
[31m-   */[m
[31m-  this.decorator = decorator;[m
[31m-  function decorator(name, func) {[m
[31m-    /*jshint validthis: true */[m
[31m-    if (isString(name) && !isDefined(func)) {[m
[31m-      return stateBuilder[name];[m
[31m-    }[m
[31m-    if (!isFunction(func) || !isString(name)) {[m
[31m-      return this;[m
[31m-    }[m
[31m-    if (stateBuilder[name] && !stateBuilder.$delegates[name]) {[m
[31m-      stateBuilder.$delegates[name] = stateBuilder[name];[m
[31m-    }[m
[31m-    stateBuilder[name] = func;[m
[31m-    return this;[m
[31m-  }[m
[32m+[m[32m    this.$trigger[m
[32m+[m[32m      .removeClass('collapsed')[m
[32m+[m[32m      .attr('aria-expanded', true)[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.state.$stateProvider#state[m
[31m-   * @methodOf ui.router.state.$stateProvider[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Registers a state configuration under a given state name. The stateConfig object[m
[31m-   * has the following acceptable properties.[m
[31m-   *[m
[31m-   * @param {string} name A unique state name, e.g. "home", "about", "contacts".[m
[31m-   * To create a parent/child state use a dot, e.g. "about.sales", "home.newest".[m
[31m-   * @param {object} stateConfig State configuration object.[m
[31m-   * @param {string|function=} stateConfig.template[m
[31m-   * <a id='template'></a>[m
[31m-   *   html template as a string or a function that returns[m
[31m-   *   an html template as a string which should be used by the uiView directives. This property [m
[31m-   *   takes precedence over templateUrl.[m
[31m-   *   [m
[31m-   *   If `template` is a function, it will be called with the following parameters:[m
[31m-   *[m
[31m-   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by[m
[31m-   *     applying the current state[m
[31m-   *[m
[31m-   * <pre>template:[m
[31m-   *   "<h1>inline template definition</h1>" +[m
[31m-   *   "<div ui-view></div>"</pre>[m
[31m-   * <pre>template: function(params) {[m
[31m-   *       return "<h1>generated template</h1>"; }</pre>[m
[31m-   * </div>[m
[31m-   *[m
[31m-   * @param {string|function=} stateConfig.templateUrl[m
[31m-   * <a id='templateUrl'></a>[m
[31m-   *[m
[31m-   *   path or function that returns a path to an html[m
[31m-   *   template that should be used by uiView.[m
[31m-   *   [m
[31m-   *   If `templateUrl` is a function, it will be called with the following parameters:[m
[31m-   *[m
[31m-   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by [m
[31m-   *     applying the current state[m
[31m-   *[m
[31m-   * <pre>templateUrl: "home.html"</pre>[m
[31m-   * <pre>templateUrl: function(params) {[m
[31m-   *     return myTemplates[params.pageId]; }</pre>[m
[31m-   *[m
[31m-   * @param {function=} stateConfig.templateProvider[m
[31m-   * <a id='templateProvider'></a>[m
[31m-   *    Provider function that returns HTML content string.[m
[31m-   * <pre> templateProvider:[m
[31m-   *       function(MyTemplateService, params) {[m
[31m-   *         return MyTemplateService.getTemplate(params.pageId);[m
[31m-   *       }</pre>[m
[31m-   *[m
[31m-   * @param {string|function=} stateConfig.controller[m
[31m-   * <a id='controller'></a>[m
[31m-   *[m
[31m-   *  Controller fn that should be associated with newly[m
[31m-   *   related scope or the name of a registered controller if passed as a string.[m
[31m-   *   Optionally, the ControllerAs may be declared here.[m
[31m-   * <pre>controller: "MyRegisteredController"</pre>[m
[31m-   * <pre>controller:[m
[31m-   *     "MyRegisteredController as fooCtrl"}</pre>[m
[31m-   * <pre>controller: function($scope, MyService) {[m
[31m-   *     $scope.data = MyService.getData(); }</pre>[m
[31m-   *[m
[31m-   * @param {function=} stateConfig.controllerProvider[m
[31m-   * <a id='controllerProvider'></a>[m
[31m-   *[m
[31m-   * Injectable provider function that returns the actual controller or string.[m
[31m-   * <pre>controllerProvider:[m
[31m-   *   function(MyResolveData) {[m
[31m-   *     if (MyResolveData.foo)[m
[31m-   *       return "FooCtrl"[m
[31m-   *     else if (MyResolveData.bar)[m
[31m-   *       return "BarCtrl";[m
[31m-   *     else return function($scope) {[m
[31m-   *       $scope.baz = "Qux";[m
[31m-   *     }[m
[31m-   *   }</pre>[m
[31m-   *[m
[31m-   * @param {string=} stateConfig.controllerAs[m
[31m-   * <a id='controllerAs'></a>[m
[31m-   * [m
[31m-   * A controller alias name. If present the controller will be[m
[31m-   *   published to scope under the controllerAs name.[m
[31m-   * <pre>controllerAs: "myCtrl"</pre>[m
[31m-   *[m
[31m-   * @param {string|object=} stateConfig.parent[m
[31m-   * <a id='parent'></a>[m
[31m-   * Optionally specifies the parent state of this state.[m
[31m-   *[m
[31m-   * <pre>parent: 'parentState'</pre>[m
[31m-   * <pre>parent: parentState // JS variable</pre>[m
[31m-   *[m
[31m-   * @param {object=} stateConfig.resolve[m
[31m-   * <a id='resolve'></a>[m
[31m-   *[m
[31m-   * An optional map&lt;string, function&gt; of dependencies which[m
[31m-   *   should be injected into the controller. If any of these dependencies are promises, [m
[31m-   *   the router will wait for them all to be resolved before the controller is instantiated.[m
[31m-   *   If all the promises are resolved successfully, the $stateChangeSuccess event is fired[m
[31m-   *   and the values of the resolved promises are injected into any controllers that reference them.[m
[31m-   *   If any  of the promises are rejected the $stateChangeError event is fired.[m
[31m-   *[m
[31m-   *   The map object is:[m
[31m-   *   [m
[31m-   *   - key - {string}: name of dependency to be injected into controller[m
[31m-   *   - factory - {string|function}: If string then it is alias for service. Otherwise if function, [m
[31m-   *     it is injected and return value it treated as dependency. If result is a promise, it is [m
[31m-   *     resolved before its value is injected into controller.[m
[31m-   *[m
[31m-   * <pre>resolve: {[m
[31m-   *     myResolve1:[m
[31m-   *       function($http, $stateParams) {[m
[31m-   *         return $http.get("/api/foos/"+stateParams.fooID);[m
[31m-   *       }[m
[31m-   *     }</pre>[m
[31m-   *[m
[31m-   * @param {string=} stateConfig.url[m
[31m-   * <a id='url'></a>[m
[31m-   *[m
[31m-   *   A url fragment with optional parameters. When a state is navigated or[m
[31m-   *   transitioned to, the `$stateParams` service will be populated with any [m
[31m-   *   parameters that were passed.[m
[31m-   *[m
[31m-   *   (See {@link ui.router.util.type:UrlMatcher UrlMatcher} `UrlMatcher`} for[m
[31m-   *   more details on acceptable patterns )[m
[31m-   *[m
[31m-   * examples:[m
[31m-   * <pre>url: "/home"[m
[31m-   * url: "/users/:userid"[m
[31m-   * url: "/books/{bookid:[a-zA-Z_-]}"[m
[31m-   * url: "/books/{categoryid:int}"[m
[31m-   * url: "/books/{publishername:string}/{categoryid:int}"[m
[31m-   * url: "/messages?before&after"[m
[31m-   * url: "/messages?{before:date}&{after:date}"[m
[31m-   * url: "/messages/:mailboxid?{before:date}&{after:date}"[m
[31m-   * </pre>[m
[31m-   *[m
[31m-   * @param {object=} stateConfig.views[m
[31m-   * <a id='views'></a>[m
[31m-   * an optional map&lt;string, object&gt; which defined multiple views, or targets views[m
[31m-   * manually/explicitly.[m
[31m-   *[m
[31m-   * Examples:[m
[31m-   *[m
[31m-   * Targets three named `ui-view`s in the parent state's template[m
[31m-   * <pre>views: {[m
[31m-   *     header: {[m
[31m-   *       controller: "headerCtrl",[m
[31m-   *       templateUrl: "header.html"[m
[31m-   *     }, body: {[m
[31m-   *       controller: "bodyCtrl",[m
[31m-   *       templateUrl: "body.html"[m
[31m-   *     }, footer: {[m
[31m-   *       controller: "footCtrl",[m
[31m-   *       templateUrl: "footer.html"[m
[31m-   *     }[m
[31m-   *   }</pre>[m
[31m-   *[m
[31m-   * Targets named `ui-view="header"` from grandparent state 'top''s template, and named `ui-view="body" from parent state's template.[m
[31m-   * <pre>views: {[m
[31m-   *     'header@top': {[m
[31m-   *       controller: "msgHeaderCtrl",[m
[31m-   *       templateUrl: "msgHeader.html"[m
[31m-   *     }, 'body': {[m
[31m-   *       controller: "messagesCtrl",[m
[31m-   *       templateUrl: "messages.html"[m
[31m-   *     }[m
[31m-   *   }</pre>[m
[31m-   *[m
[31m-   * @param {boolean=} [stateConfig.abstract=false][m
[31m-   * <a id='abstract'></a>[m
[31m-   * An abstract state will never be directly activated,[m
[31m-   *   but can provide inherited properties to its common children states.[m
[31m-   * <pre>abstract: true</pre>[m
[31m-   *[m
[31m-   * @param {function=} stateConfig.onEnter[m
[31m-   * <a id='onEnter'></a>[m
[31m-   *[m
[31m-   * Callback function for when a state is entered. Good way[m
[31m-   *   to trigger an action or dispatch an event, such as opening a dialog.[m
[31m-   * If minifying your scripts, make sure to explictly annotate this function,[m
[31m-   * because it won't be automatically annotated by your build tools.[m
[31m-   *[m
[31m-   * <pre>onEnter: function(MyService, $stateParams) {[m
[31m-   *     MyService.foo($stateParams.myParam);[m
[31m-   * }</pre>[m
[31m-   *[m
[31m-   * @param {function=} stateConfig.onExit[m
[31m-   * <a id='onExit'></a>[m
[31m-   *[m
[31m-   * Callback function for when a state is exited. Good way to[m
[31m-   *   trigger an action or dispatch an event, such as opening a dialog.[m
[31m-   * If minifying your scripts, make sure to explictly annotate this function,[m
[31m-   * because it won't be automatically annotated by your build tools.[m
[31m-   *[m
[31m-   * <pre>onExit: function(MyService, $stateParams) {[m
[31m-   *     MyService.cleanup($stateParams.myParam);[m
[31m-   * }</pre>[m
[31m-   *[m
[31m-   * @param {boolean=} [stateConfig.reloadOnSearch=true][m
[31m-   * <a id='reloadOnSearch'></a>[m
[31m-   *[m
[31m-   * If `false`, will not retrigger the same state[m
[31m-   *   just because a search/query parameter has changed (via $location.search() or $location.hash()). [m
[31m-   *   Useful for when you'd like to modify $location.search() without triggering a reload.[m
[31m-   * <pre>reloadOnSearch: false</pre>[m
[31m-   *[m
[31m-   * @param {object=} stateConfig.data[m
[31m-   * <a id='data'></a>[m
[31m-   *[m
[31m-   * Arbitrary data object, useful for custom configuration.  The parent state's `data` is[m
[31m-   *   prototypally inherited.  In other words, adding a data property to a state adds it to[m
[31m-   *   the entire subtree via prototypal inheritance.[m
[31m-   *[m
[31m-   * <pre>data: {[m
[31m-   *     requiredRole: 'foo'[m
[31m-   * } </pre>[m
[31m-   *[m
[31m-   * @param {object=} stateConfig.params[m
[31m-   * <a id='params'></a>[m
[31m-   *[m
[31m-   * A map which optionally configures parameters declared in the `url`, or[m
[31m-   *   defines additional non-url parameters.  For each parameter being[m
[31m-   *   configured, add a configuration object keyed to the name of the parameter.[m
[31m-   *[m
[31m-   *   Each parameter configuration object may contain the following properties:[m
[31m-   *[m
[31m-   *   - ** value ** - {object|function=}: specifies the default value for this[m
[31m-   *     parameter.  This implicitly sets this parameter as optional.[m
[31m-   *[m
[31m-   *     When UI-Router routes to a state and no value is[m
[31m-   *     specified for this parameter in the URL or transition, the[m
[31m-   *     default value will be used instead.  If `value` is a function,[m
[31m-   *     it will be injected and invoked, and the return value used.[m
[31m-   *[m
[31m-   *     *Note*: `undefined` is treated as "no default value" while `null`[m
[31m-   *     is treated as "the default value is `null`".[m
[31m-   *[m
[31m-   *     *Shorthand*: If you only need to configure the default value of the[m
[31m-   *     parameter, you may use a shorthand syntax.   In the **`params`**[m
[31m-   *     map, instead mapping the param name to a full parameter configuration[m
[31m-   *     object, simply set map it to the default parameter value, e.g.:[m
[31m-   *[m
[31m-   * <pre>// define a parameter's default value[m
[31m-   * params: {[m
[31m-   *     param1: { value: "defaultValue" }[m
[31m-   * }[m
[31m-   * // shorthand default values[m
[31m-   * params: {[m
[31m-   *     param1: "defaultValue",[m
[31m-   *     param2: "param2Default"[m
[31m-   * }</pre>[m
[31m-   *[m
[31m-   *   - ** array ** - {boolean=}: *(default: false)* If true, the param value will be[m
[31m-   *     treated as an array of values.  If you specified a Type, the value will be[m
[31m-   *     treated as an array of the specified Type.  Note: query parameter values[m
[31m-   *     default to a special `"auto"` mode.[m
[31m-   *[m
[31m-   *     For query parameters in `"auto"` mode, if multiple  values for a single parameter[m
[31m-   *     are present in the URL (e.g.: `/foo?bar=1&bar=2&bar=3`) then the values[m
[31m-   *     are mapped to an array (e.g.: `{ foo: [ '1', '2', '3' ] }`).  However, if[m
[31m-   *     only one value is present (e.g.: `/foo?bar=1`) then the value is treated as single[m
[31m-   *     value (e.g.: `{ foo: '1' }`).[m
[31m-   *[m
[31m-   * <pre>params: {[m
[31m-   *     param1: { array: true }[m
[31m-   * }</pre>[m
[31m-   *[m
[31m-   *   - ** squash ** - {bool|string=}: `squash` configures how a default parameter value is represented in the URL when[m
[31m-   *     the current parameter value is the same as the default value. If `squash` is not set, it uses the[m
[31m-   *     configured default squash policy.[m
[31m-   *     (See {@link ui.router.util.$urlMatcherFactory#methods_defaultSquashPolicy `defaultSquashPolicy()`})[m
[31m-   *[m
[31m-   *   There are three squash settings:[m
[31m-   *[m
[31m-   *     - false: The parameter's default value is not squashed.  It is encoded and included in the URL[m
[31m-   *     - true: The parameter's default value is omitted from the URL.  If the parameter is preceeded and followed[m
[31m-   *       by slashes in the state's `url` declaration, then one of those slashes are omitted.[m
[31m-   *       This can allow for cleaner looking URLs.[m
[31m-   *     - `"<arbitrary string>"`: The parameter's default value is replaced with an arbitrary placeholder of  your choice.[m
[31m-   *[m
[31m-   * <pre>params: {[m
[31m-   *     param1: {[m
[31m-   *       value: "defaultId",[m
[31m-   *       squash: true[m
[31m-   * } }[m
[31m-   * // squash "defaultValue" to "~"[m
[31m-   * params: {[m
[31m-   *     param1: {[m
[31m-   *       value: "defaultValue",[m
[31m-   *       squash: "~"[m
[31m-   * } }[m
[31m-   * </pre>[m
[31m-   *[m
[31m-   *[m
[31m-   * @example[m
[31m-   * <pre>[m
[31m-   * // Some state name examples[m
[31m-   *[m
[31m-   * // stateName can be a single top-level name (must be unique).[m
[31m-   * $stateProvider.state("home", {});[m
[31m-   *[m
[31m-   * // Or it can be a nested state name. This state is a child of the[m
[31m-   * // above "home" state.[m
[31m-   * $stateProvider.state("home.newest", {});[m
[31m-   *[m
[31m-   * // Nest states as deeply as needed.[m
[31m-   * $stateProvider.state("home.newest.abc.xyz.inception", {});[m
[31m-   *[m
[31m-   * // state() returns $stateProvider, so you can chain state declarations.[m
[31m-   * $stateProvider[m
[31m-   *   .state("home", {})[m
[31m-   *   .state("about", {})[m
[31m-   *   .state("contacts", {});[m
[31m-   * </pre>[m
[31m-   *[m
[31m-   */[m
[31m-  this.state = state;[m
[31m-  function state(name, definition) {[m
[31m-    /*jshint validthis: true */[m
[31m-    if (isObject(name)) definition = name;[m
[31m-    else definition.name = name;[m
[31m-    registerState(definition);[m
[31m-    return this;[m
[32m+[m[32m    this.transitioning = 1[m
[32m+[m
[32m+[m[32m    var complete = function () {[m
[32m+[m[32m      this.$element[m
[32m+[m[32m        .removeClass('collapsing')[m
[32m+[m[32m        .addClass('collapse in')[dimension]('')[m
[32m+[m[32m      this.transitioning = 0[m
[32m+[m[32m      this.$element[m
[32m+[m[32m        .trigger('shown.bs.collapse')[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    if (!$.support.transition) return complete.call(this)[m
[32m+[m
[32m+[m[32m    var scrollSize = $.camelCase(['scroll', dimension].join('-'))[m
[32m+[m
[32m+[m[32m    this.$element[m
[32m+[m[32m      .one('bsTransitionEnd', $.proxy(complete, this))[m
[32m+[m[32m      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])[m
   }[m
 [m
[31m-  /**[m
[31m-   * @ngdoc object[m
[31m-   * @name ui.router.state.$state[m
[31m-   *[m
[31m-   * @requires $rootScope[m
[31m-   * @requires $q[m
[31m-   * @requires ui.router.state.$view[m
[31m-   * @requires $injector[m
[31m-   * @requires ui.router.util.$resolve[m
[31m-   * @requires ui.router.state.$stateParams[m
[31m-   * @requires ui.router.router.$urlRouter[m
[31m-   *[m
[31m-   * @property {object} params A param object, e.g. {sectionId: section.id)}, that [m
[31m-   * you'd like to test against the current active state.[m
[31m-   * @property {object} current A reference to the state's config object. However [m
[31m-   * you passed it in. Useful for accessing custom data.[m
[31m-   * @property {object} transition Currently pending transition. A promise that'll [m
[31m-   * resolve or reject.[m
[31m-   *[m
[31m-   * @description[m
[31m-   * `$state` service is responsible for representing states as well as transitioning[m
[31m-   * between them. It also provides interfaces to ask for current state or even states[m
[31m-   * you're coming from.[m
[31m-   */[m
[31m-  this.$get = $get;[m
[31m-  $get.$inject = ['$rootScope', '$q', '$view', '$injector', '$resolve', '$stateParams', '$urlRouter', '$location', '$urlMatcherFactory'];[m
[31m-  function $get(   $rootScope,   $q,   $view,   $injector,   $resolve,   $stateParams,   $urlRouter,   $location,   $urlMatcherFactory) {[m
[32m+[m[32m  Collapse.prototype.hide = function () {[m
[32m+[m[32m    if (this.transitioning || !this.$element.hasClass('in')) return[m
 [m
[31m-    var TransitionSuperseded = $q.reject(new Error('transition superseded'));[m
[31m-    var TransitionPrevented = $q.reject(new Error('transition prevented'));[m
[31m-    var TransitionAborted = $q.reject(new Error('transition aborted'));[m
[31m-    var TransitionFailed = $q.reject(new Error('transition failed'));[m
[32m+[m[32m    var startEvent = $.Event('hide.bs.collapse')[m
[32m+[m[32m    this.$element.trigger(startEvent)[m
[32m+[m[32m    if (startEvent.isDefaultPrevented()) return[m
 [m
[31m-    // Handles the case where a state which is the target of a transition is not found, and the user[m
[31m-    // can optionally retry or defer the transition[m
[31m-    function handleRedirect(redirect, state, params, options) {[m
[31m-      /**[m
[31m-       * @ngdoc event[m
[31m-       * @name ui.router.state.$state#$stateNotFound[m
[31m-       * @eventOf ui.router.state.$state[m
[31m-       * @eventType broadcast on root scope[m
[31m-       * @description[m
[31m-       * Fired when a requested state **cannot be found** using the provided state name during transition.[m
[31m-       * The event is broadcast allowing any handlers a single chance to deal with the error (usually by[m
[31m-       * lazy-loading the unfound state). A special `unfoundState` object is passed to the listener handler,[m
[31m-       * you can see its three properties in the example. You can use `event.preventDefault()` to abort the[m
[31m-       * transition and the promise returned from `go` will be rejected with a `'transition aborted'` value.[m
[31m-       *[m
[31m-       * @param {Object} event Event object.[m
[31m-       * @param {Object} unfoundState Unfound State information. Contains: `to, toParams, options` properties.[m
[31m-       * @param {State} fromState Current state object.[m
[31m-       * @param {Object} fromParams Current state params.[m
[31m-       *[m
[31m-       * @example[m
[31m-       *[m
[31m-       * <pre>[m
[31m-       * // somewhere, assume lazy.state has not been defined[m
[31m-       * $state.go("lazy.state", {a:1, b:2}, {inherit:false});[m
[31m-       *[m
[31m-       * // somewhere else[m
[31m-       * $scope.$on('$stateNotFound',[m
[31m-       * function(event, unfoundState, fromState, fromParams){[m
[31m-       *     console.log(unfoundState.to); // "lazy.state"[m
[31m-       *     console.log(unfoundState.toParams); // {a:1, b:2}[m
[31m-       *     console.log(unfoundState.options); // {inherit:false} + default options[m
[31m-       * })[m
[31m-       * </pre>[m
[31m-       */[m
[31m-      var evt = $rootScope.$broadcast('$stateNotFound', redirect, state, params);[m
[32m+[m[32m    var dimension = this.dimension()[m
 [m
[31m-      if (evt.defaultPrevented) {[m
[31m-        $urlRouter.update();[m
[31m-        return TransitionAborted;[m
[31m-      }[m
[32m+[m[32m    this.$element[dimension](this.$element[dimension]())[0].offsetHeight[m
 [m
[31m-      if (!evt.retry) {[m
[31m-        return null;[m
[31m-      }[m
[32m+[m[32m    this.$element[m
[32m+[m[32m      .addClass('collapsing')[m
[32m+[m[32m      .removeClass('collapse in')[m
[32m+[m[32m      .attr('aria-expanded', false)[m
 [m
[31m-      // Allow the handler to return a promise to defer state lookup retry[m
[31m-      if (options.$retry) {[m
[31m-        $urlRouter.update();[m
[31m-        return TransitionFailed;[m
[31m-      }[m
[31m-      var retryTransition = $state.transition = $q.when(evt.retry);[m
[32m+[m[32m    this.$trigger[m
[32m+[m[32m      .addClass('collapsed')[m
[32m+[m[32m      .attr('aria-expanded', false)[m
 [m
[31m-      retryTransition.then(function() {[m
[31m-        if (retryTransition !== $state.transition) return TransitionSuperseded;[m
[31m-        redirect.options.$retry = true;[m
[31m-        return $state.transitionTo(redirect.to, redirect.toParams, redirect.options);[m
[31m-      }, function() {[m
[31m-        return TransitionAborted;[m
[31m-      });[m
[31m-      $urlRouter.update();[m
[32m+[m[32m    this.transitioning = 1[m
 [m
[31m-      return retryTransition;[m
[32m+[m[32m    var complete = function () {[m
[32m+[m[32m      this.transitioning = 0[m
[32m+[m[32m      this.$element[m
[32m+[m[32m        .removeClass('collapsing')[m
[32m+[m[32m        .addClass('collapse')[m
[32m+[m[32m        .trigger('hidden.bs.collapse')[m
     }[m
 [m
[31m-    root.locals = { resolve: null, globals: { $stateParams: {} } };[m
[32m+[m[32m    if (!$.support.transition) return complete.call(this)[m
 [m
[31m-    $state = {[m
[31m-      params: {},[m
[31m-      current: root.self,[m
[31m-      $current: root,[m
[31m-      transition: null[m
[31m-    };[m
[32m+[m[32m    this.$element[m
[32m+[m[32m      [dimension](0)[m
[32m+[m[32m      .one('bsTransitionEnd', $.proxy(complete, this))[m
[32m+[m[32m      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[m
[32m+[m[32m  }[m
 [m
[31m-    /**[m
[31m-     * @ngdoc function[m
[31m-     * @name ui.router.state.$state#reload[m
[31m-     * @methodOf ui.router.state.$state[m
[31m-     *[m
[31m-     * @description[m
[31m-     * A method that force reloads the current state. All resolves are re-resolved,[m
[31m-     * controllers reinstantiated, and events re-fired.[m
[31m-     *[m
[31m-     * @example[m
[31m-     * <pre>[m
[31m-     * var app angular.module('app', ['ui.router']);[m
[31m-     *[m
[31m-     * app.controller('ctrl', function ($scope, $state) {[m
[31m-     *   $scope.reload = function(){[m
[31m-     *     $state.reload();[m
[31m-     *   }[m
[31m-     * });[m
[31m-     * </pre>[m
[31m-     *[m
[31m-     * `reload()` is just an alias for:[m
[31m-     * <pre>[m
[31m-     * $state.transitionTo($state.current, $stateParams, { [m
[31m-     *   reload: true, inherit: false, notify: true[m
[31m-     * });[m
[31m-     * </pre>[m
[31m-     *[m
[31m-     * @param {string=|object=} state - A state name or a state object, which is the root of the resolves to be re-resolved.[m
[31m-     * @example[m
[31m-     * <pre>[m
[31m-     * //assuming app application consists of 3 states: 'contacts', 'contacts.detail', 'contacts.detail.item' [m
[31m-     * //and current state is 'contacts.detail.item'[m
[31m-     * var app angular.module('app', ['ui.router']);[m
[31m-     *[m
[31m-     * app.controller('ctrl', function ($scope, $state) {[m
[31m-     *   $scope.reload = function(){[m
[31m-     *     //will reload 'contact.detail' and 'contact.detail.item' states[m
[31m-     *     $state.reload('contact.detail');[m
[31m-     *   }[m
[31m-     * });[m
[31m-     * </pre>[m
[31m-     *[m
[31m-     * `reload()` is just an alias for:[m
[31m-     * <pre>[m
[31m-     * $state.transitionTo($state.current, $stateParams, { [m
[31m-     *   reload: true, inherit: false, notify: true[m
[31m-     * });[m
[31m-     * </pre>[m
[32m+[m[32m  Collapse.prototype.toggle = function () {[m
[32m+[m[32m    this[this.$element.hasClass('in') ? 'hide' : 'show']()[m
[32m+[m[32m  }[m
 [m
[31m-     * @returns {promise} A promise representing the state of the new transition. See[m
[31m-     * {@link ui.router.state.$state#methods_go $state.go}.[m
[31m-     */[m
[31m-    $state.reload = function reload(state) {[m
[31m-      return $state.transitionTo($state.current, $stateParams, { reload: state || true, inherit: false, notify: true});[m
[31m-    };[m
[32m+[m[32m  Collapse.prototype.getParent = function () {[m
[32m+[m[32m    return $(this.options.parent)[m
[32m+[m[32m      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')[m
[32m+[m[32m      .each($.proxy(function (i, element) {[m
[32m+[m[32m        var $element = $(element)[m
[32m+[m[32m        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)[m
[32m+[m[32m      }, this))[m
[32m+[m[32m      .end()[m
[32m+[m[32m  }[m
 [m
[31m-    /**[m
[31m-     * @ngdoc function[m
[31m-     * @name ui.router.state.$state#go[m
[31m-     * @methodOf ui.router.state.$state[m
[31m-     *[m
[31m-     * @description[m
[31m-     * Convenience method for transitioning to a new state. `$state.go` calls [m
[31m-     * `$state.transitionTo` internally but automatically sets options to [m
[31m-     * `{ location: true, inherit: true, relative: $state.$current, notify: true }`. [m
[31m-     * This allows you to easily use an absolute or relative to path and specify [m
[31m-     * only the parameters you'd like to update (while letting unspecified parameters [m
[31m-     * inherit from the currently active ancestor states).[m
[31m-     *[m
[31m-     * @example[m
[31m-     * <pre>[m
[31m-     * var app = angular.module('app', ['ui.router']);[m
[31m-     *[m
[31m-     * app.controller('ctrl', function ($scope, $state) {[m
[31m-     *   $scope.changeState = function () {[m
[31m-     *     $state.go('contact.detail');[m
[31m-     *   };[m
[31m-     * });[m
[31m-     * </pre>[m
[31m-     * <img src='../ngdoc_assets/StateGoExamples.png'/>[m
[31m-     *[m
[31m-     * @param {string} to Absolute state name or relative state path. Some examples:[m
[31m-     *[m
[31m-     * - `$state.go('contact.detail')` - will go to the `contact.detail` state[m
[31m-     * - `$state.go('^')` - will go to a parent state[m
[31m-     * - `$state.go('^.sibling')` - will go to a sibling state[m
[31m-     * - `$state.go('.child.grandchild')` - will go to grandchild state[m
[31m-     *[m
[31m-     * @param {object=} params A map of the parameters that will be sent to the state, [m
[31m-     * will populate $stateParams. Any parameters that are not specified will be inherited from currently [m
[31m-     * defined parameters. This allows, for example, going to a sibling state that shares parameters[m
[31m-     * specified in a parent state. Parameter inheritance only works between common ancestor states, I.e.[m
[31m-     * transitioning to a sibling will get you the parameters for all parents, transitioning to a child[m
[31m-     * will get you all current parameters, etc.[m
[31m-     * @param {object=} options Options object. The options are:[m
[31m-     *[m
[31m-     * - **`location`** - {boolean=true|string=} - If `true` will update the url in the location bar, if `false`[m
[31m-     *    will not. If string, must be `"replace"`, which will update url and also replace last history record.[m
[31m-     * - **`inherit`** - {boolean=true}, If `true` will inherit url parameters from current url.[m
[31m-     * - **`relative`** - {object=$state.$current}, When transitioning with relative path (e.g '^'), [m
[31m-     *    defines which state to be relative from.[m
[31m-     * - **`notify`** - {boolean=true}, If `true` will broadcast $stateChangeStart and $stateChangeSuccess events.[m
[31m-     * - **`reload`** (v0.2.5) - {boolean=false}, If `true` will force transition even if the state or params [m
[31m-     *    have not changed, aka a reload of the same state. It differs from reloadOnSearch because you'd[m
[31m-     *    use this when you want to force a reload when *everything* is the same, including search params.[m
[31m-     *[m
[31m-     * @returns {promise} A promise representing the state of the new transition.[m
[31m-     *[m
[31m-     * Possible success values:[m
[31m-     *[m
[31m-     * - $state.current[m
[31m-     *[m
[31m-     * <br/>Possible rejection values:[m
[31m-     *[m
[31m-     * - 'transition superseded' - when a newer transition has been started after this one[m
[31m-     * - 'transition prevented' - when `event.preventDefault()` has been called in a `$stateChangeStart` listener[m
[31m-     * - 'transition aborted' - when `event.preventDefault()` has been called in a `$stateNotFound` listener or[m
[31m-     *   when a `$stateNotFound` `event.retry` promise errors.[m
[31m-     * - 'transition failed' - when a state has been unsuccessfully found after 2 tries.[m
[31m-     * - *resolve error* - when an error has occurred with a `resolve`[m
[31m-     *[m
[31m-     */[m
[31m-    $state.go = function go(to, params, options) {[m
[31m-      return $state.transitionTo(to, params, extend({ inherit: true, relative: $state.$current }, options));[m
[31m-    };[m
[32m+[m[32m  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {[m
[32m+[m[32m    var isOpen = $element.hasClass('in')[m
 [m
[31m-    /**[m
[31m-     * @ngdoc function[m
[31m-     * @name ui.router.state.$state#transitionTo[m
[31m-     * @methodOf ui.router.state.$state[m
[31m-     *[m
[31m-     * @description[m
[31m-     * Low-level method for transitioning to a new state. {@link ui.router.state.$state#methods_go $state.go}[m
[31m-     * uses `transitionTo` internally. `$state.go` is recommended in most situations.[m
[31m-     *[m
[31m-     * @example[m
[31m-     * <pre>[m
[31m-     * var app = angular.module('app', ['ui.router']);[m
[31m-     *[m
[31m-     * app.controller('ctrl', function ($scope, $state) {[m
[31m-     *   $scope.changeState = function () {[m
[31m-     *     $state.transitionTo('contact.detail');[m
[31m-     *   };[m
[31m-     * });[m
[31m-     * </pre>[m
[31m-     *[m
[31m-     * @param {string} to State name.[m
[31m-     * @param {object=} toParams A map of the parameters that will be sent to the state,[m
[31m-     * will populate $stateParams.[m
[31m-     * @param {object=} options Options object. The options are:[m
[31m-     *[m
[31m-     * - **`location`** - {boolean=true|string=} - If `true` will update the url in the location bar, if `false`[m
[31m-     *    will not. If string, must be `"replace"`, which will update url and also replace last history record.[m
[31m-     * - **`inherit`** - {boolean=false}, If `true` will inherit url parameters from current url.[m
[31m-     * - **`relative`** - {object=}, When transitioning with relative path (e.g '^'), [m
[31m-     *    defines which state to be relative from.[m
[31m-     * - **`notify`** - {boolean=true}, If `true` will broadcast $stateChangeStart and $stateChangeSuccess events.[m
[31m-     * - **`reload`** (v0.2.5) - {boolean=false|string=|object=}, If `true` will force transition even if the state or params [m
[31m-     *    have not changed, aka a reload of the same state. It differs from reloadOnSearch because you'd[m
[31m-     *    use this when you want to force a reload when *everything* is the same, including search params.[m
[31m-     *    if String, then will reload the state with the name given in reload, and any children.[m
[31m-     *    if Object, then a stateObj is expected, will reload the state found in stateObj, and any children.[m
[31m-     *[m
[31m-     * @returns {promise} A promise representing the state of the new transition. See[m
[31m-     * {@link ui.router.state.$state#methods_go $state.go}.[m
[31m-     */[m
[31m-    $state.transitionTo = function transitionTo(to, toParams, options) {[m
[31m-      toParams = toParams || {};[m
[31m-      options = extend({[m
[31m-        location: true, inherit: false, relative: null, notify: true, reload: false, $retry: false[m
[31m-      }, options || {});[m
[32m+[m[32m    $element.attr('aria-expanded', isOpen)[m
[32m+[m[32m    $trigger[m
[32m+[m[32m      .toggleClass('collapsed', !isOpen)[m
[32m+[m[32m      .attr('aria-expanded', isOpen)[m
[32m+[m[32m  }[m
 [m
[31m-      var from = $state.$current, fromParams = $state.params, fromPath = from.path;[m
[31m-      var evt, toState = findState(to, options.relative);[m
[32m+[m[32m  function getTargetFromTrigger($trigger) {[m
[32m+[m[32m    var href[m
[32m+[m[32m    var target = $trigger.attr('data-target')[m
[32m+[m[32m      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7[m
 [m
[31m-      // Store the hash param for later (since it will be stripped out by various methods)[m
[31m-      var hash = toParams['#'];[m
[32m+[m[32m    return $(target)[m
[32m+[m[32m  }[m
 [m
[31m-      if (!isDefined(toState)) {[m
[31m-        var redirect = { to: to, toParams: toParams, options: options };[m
[31m-        var redirectResult = handleRedirect(redirect, from.self, fromParams, options);[m
 [m
[31m-        if (redirectResult) {[m
[31m-          return redirectResult;[m
[31m-        }[m
[32m+[m[32m  // COLLAPSE PLUGIN DEFINITION[m
[32m+[m[32m  // ==========================[m
 [m
[31m-        // Always retry once if the $stateNotFound was not prevented[m
[31m-        // (handles either redirect changed or state lazy-definition)[m
[31m-        to = redirect.to;[m
[31m-        toParams = redirect.toParams;[m
[31m-        options = redirect.options;[m
[31m-        toState = findState(to, options.relative);[m
[32m+[m[32m  function Plugin(option) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this   = $(this)[m
[32m+[m[32m      var data    = $this.data('bs.collapse')[m
[32m+[m[32m      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)[m
 [m
[31m-        if (!isDefined(toState)) {[m
[31m-          if (!options.relative) throw new Error("No such state '" + to + "'");[m
[31m-          throw new Error("Could not resolve '" + to + "' from state '" + options.relative + "'");[m
[31m-        }[m
[31m-      }[m
[31m-      if (toState[abstractKey]) throw new Error("Cannot transition to abstract state '" + to + "'");[m
[31m-      if (options.inherit) toParams = inheritParams($stateParams, toParams || {}, $state.$current, toState);[m
[31m-      if (!toState.params.$$validates(toParams)) return TransitionFailed;[m
[32m+[m[32m      if (!data && options.toggle && option == 'show') options.toggle = false[m
[32m+[m[32m      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))[m
[32m+[m[32m      if (typeof option == 'string') data[option]()[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-      toParams = toState.params.$$values(toParams);[m
[31m-      to = toState;[m
[32m+[m[32m  var old = $.fn.collapse[m
 [m
[31m-      var toPath = to.path;[m
[32m+[m[32m  $.fn.collapse             = Plugin[m
[32m+[m[32m  $.fn.collapse.Constructor = Collapse[m
 [m
[31m-      // Starting from the root of the path, keep all levels that haven't changed[m
[31m-      var keep = 0, state = toPath[keep], locals = root.locals, toLocals = [];[m
 [m
[31m-      if (!options.reload) {[m
[31m-        while (state && state === fromPath[keep] && state.ownParams.$$equals(toParams, fromParams)) {[m
[31m-          locals = toLocals[keep] = state.locals;[m
[31m-          keep++;[m
[31m-          state = toPath[keep];[m
[31m-        }[m
[31m-      } else if (isString(options.reload) || isObject(options.reload)) {[m
[31m-        if (isObject(options.reload) && !options.reload.name) {[m
[31m-          throw new Error('Invalid reload state object');[m
[31m-        }[m
[31m-        [m
[31m-        var reloadState = options.reload === true ? fromPath[0] : findState(options.reload);[m
[31m-        if (options.reload && !reloadState) {[m
[31m-          throw new Error("No such reload state '" + (isString(options.reload) ? options.reload : options.reload.name) + "'");[m
[31m-        }[m
[32m+[m[32m  // COLLAPSE NO CONFLICT[m
[32m+[m[32m  // ====================[m
 [m
[31m-        while (state && state === fromPath[keep] && state !== reloadState) {[m
[31m-          locals = toLocals[keep] = state.locals;[m
[31m-          keep++;[m
[31m-          state = toPath[keep];[m
[31m-        }[m
[31m-      }[m
[32m+[m[32m  $.fn.collapse.noConflict = function () {[m
[32m+[m[32m    $.fn.collapse = old[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-      // If we're going to the same state and all locals are kept, we've got nothing to do.[m
[31m-      // But clear 'transition', as we still want to cancel any other pending transitions.[m
[31m-      // TODO: We may not want to bump 'transition' if we're called from a location change[m
[31m-      // that we've initiated ourselves, because we might accidentally abort a legitimate[m
[31m-      // transition initiated from code?[m
[31m-      if (shouldSkipReload(to, toParams, from, fromParams, locals, options)) {[m
[31m-        if (hash) toParams['#'] = hash;[m
[31m-        $state.params = toParams;[m
[31m-        copy($state.params, $stateParams);[m
[31m-        if (options.location && to.navigable && to.navigable.url) {[m
[31m-          $urlRouter.push(to.navigable.url, toParams, {[m
[31m-            $$avoidResync: true, replace: options.location === 'replace'[m
[31m-          });[m
[31m-          $urlRouter.update(true);[m
[31m-        }[m
[31m-        $state.transition = null;[m
[31m-        return $q.when($state.current);[m
[31m-      }[m
 [m
[31m-      // Filter parameters before we pass them to event handlers etc.[m
[31m-      toParams = filterByKeys(to.params.$$keys(), toParams || {});[m
[32m+[m[32m  // COLLAPSE DATA-API[m
[32m+[m[32m  // =================[m
 [m
[31m-      // Broadcast start event and cancel the transition if requested[m
[31m-      if (options.notify) {[m
[31m-        /**[m
[31m-         * @ngdoc event[m
[31m-         * @name ui.router.state.$state#$stateChangeStart[m
[31m-         * @eventOf ui.router.state.$state[m
[31m-         * @eventType broadcast on root scope[m
[31m-         * @description[m
[31m-         * Fired when the state transition **begins**. You can use `event.preventDefault()`[m
[31m-         * to prevent the transition from happening and then the transition promise will be[m
[31m-         * rejected with a `'transition prevented'` value.[m
[31m-         *[m
[31m-         * @param {Object} event Event object.[m
[31m-         * @param {State} toState The state being transitioned to.[m
[31m-         * @param {Object} toParams The params supplied to the `toState`.[m
[31m-         * @param {State} fromState The current state, pre-transition.[m
[31m-         * @param {Object} fromParams The params supplied to the `fromState`.[m
[31m-         *[m
[31m-         * @example[m
[31m-         *[m
[31m-         * <pre>[m
[31m-         * $rootScope.$on('$stateChangeStart',[m
[31m-         * function(event, toState, toParams, fromState, fromParams){[m
[31m-         *     event.preventDefault();[m
[31m-         *     // transitionTo() promise will be rejected with[m
[31m-         *     // a 'transition prevented' error[m
[31m-         * })[m
[31m-         * </pre>[m
[31m-         */[m
[31m-        if ($rootScope.$broadcast('$stateChangeStart', to.self, toParams, from.self, fromParams).defaultPrevented) {[m
[31m-          $rootScope.$broadcast('$stateChangeCancel', to.self, toParams, from.self, fromParams);[m
[31m-          $urlRouter.update();[m
[31m-          return TransitionPrevented;[m
[31m-        }[m
[31m-      }[m
[32m+[m[32m  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {[m
[32m+[m[32m    var $this   = $(this)[m
 [m
[31m-      // Resolve locals for the remaining states, but don't update any global state just[m
[31m-      // yet -- if anything fails to resolve the current state needs to remain untouched.[m
[31m-      // We also set up an inheritance chain for the locals here. This allows the view directive[m
[31m-      // to quickly look up the correct definition for each view in the current state. Even[m
[31m-      // though we create the locals object itself outside resolveState(), it is initially[m
[31m-      // empty and gets filled asynchronously. We need to keep track of the promise for the[m
[31m-      // (fully resolved) current locals, and pass this down the chain.[m
[31m-      var resolved = $q.when(locals);[m
[32m+[m[32m    if (!$this.attr('data-target')) e.preventDefault()[m
 [m
[31m-      for (var l = keep; l < toPath.length; l++, state = toPath[l]) {[m
[31m-        locals = toLocals[l] = inherit(locals);[m
[31m-        resolved = resolveState(state, toParams, state === to, resolved, locals, options);[m
[32m+[m[32m    var $target = getTargetFromTrigger($this)[m
[32m+[m[32m    var data    = $target.data('bs.collapse')[m
[32m+[m[32m    var option  = data ? 'toggle' : $.extend({}, $this.data(), { trigger: this })[m
[32m+[m
[32m+[m[32m    Plugin.call($target, option)[m
[32m+[m[32m  })[m
[32m+[m
[32m+[m[32m}(jQuery);[m
[32m+[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: dropdown.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#dropdowns[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
[32m+[m
[32m+[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
[32m+[m
[32m+[m[32m  // DROPDOWN CLASS DEFINITION[m
[32m+[m[32m  // =========================[m
[32m+[m
[32m+[m[32m  var backdrop = '.dropdown-backdrop'[m
[32m+[m[32m  var toggle   = '[data-toggle="dropdown"]'[m
[32m+[m[32m  var Dropdown = function (element) {[m
[32m+[m[32m    $(element).on('click.bs.dropdown', this.toggle)[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  Dropdown.VERSION = '3.3.2'[m
[32m+[m
[32m+[m[32m  Dropdown.prototype.toggle = function (e) {[m
[32m+[m[32m    var $this = $(this)[m
[32m+[m
[32m+[m[32m    if ($this.is('.disabled, :disabled')) return[m
[32m+[m
[32m+[m[32m    var $parent  = getParent($this)[m
[32m+[m[32m    var isActive = $parent.hasClass('open')[m
[32m+[m
[32m+[m[32m    clearMenus()[m
[32m+[m
[32m+[m[32m    if (!isActive) {[m
[32m+[m[32m      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {[m
[32m+[m[32m        // if mobile we use a backdrop because click events don't delegate[m
[32m+[m[32m        $('<div class="dropdown-backdrop"/>').insertAfter($(this)).on('click', clearMenus)[m
       }[m
 [m
[31m-      // Once everything is resolved, we are ready to perform the actual transition[m
[31m-      // and return a promise for the new state. We also keep track of what the[m
[31m-      // current promise is, so that we can detect overlapping transitions and[m
[31m-      // keep only the outcome of the last transition.[m
[31m-      var transition = $state.transition = resolved.then(function () {[m
[31m-        var l, entering, exiting;[m
[32m+[m[32m      var relatedTarget = { relatedTarget: this }[m
[32m+[m[32m      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))[m
 [m
[31m-        if ($state.transition !== transition) return TransitionSuperseded;[m
[32m+[m[32m      if (e.isDefaultPrevented()) return[m
 [m
[31m-        // Exit 'from' states not kept[m
[31m-        for (l = fromPath.length - 1; l >= keep; l--) {[m
[31m-          exiting = fromPath[l];[m
[31m-          if (exiting.self.onExit) {[m
[31m-            $injector.invoke(exiting.self.onExit, exiting.self, exiting.locals.globals);[m
[31m-          }[m
[31m-          exiting.locals = null;[m
[31m-        }[m
[32m+[m[32m      $this[m
[32m+[m[32m        .trigger('focus')[m
[32m+[m[32m        .attr('aria-expanded', 'true')[m
 [m
[31m-        // Enter 'to' states not kept[m
[31m-        for (l = keep; l < toPath.length; l++) {[m
[31m-          entering = toPath[l];[m
[31m-          entering.locals = toLocals[l];[m
[31m-          if (entering.self.onEnter) {[m
[31m-            $injector.invoke(entering.self.onEnter, entering.self, entering.locals.globals);[m
[31m-          }[m
[31m-        }[m
[32m+[m[32m      $parent[m
[32m+[m[32m        .toggleClass('open')[m
[32m+[m[32m        .trigger('shown.bs.dropdown', relatedTarget)[m
[32m+[m[32m    }[m
 [m
[31m-        // Re-add the saved hash before we start returning things[m
[31m-        if (hash) toParams['#'] = hash;[m
[32m+[m[32m    return false[m
[32m+[m[32m  }[m
 [m
[31m-        // Run it again, to catch any transitions in callbacks[m
[31m-        if ($state.transition !== transition) return TransitionSuperseded;[m
[32m+[m[32m  Dropdown.prototype.keydown = function (e) {[m
[32m+[m[32m    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return[m
 [m
[31m-        // Update globals in $state[m
[31m-        $state.$current = to;[m
[31m-        $state.current = to.self;[m
[31m-        $state.params = toParams;[m
[31m-        copy($state.params, $stateParams);[m
[31m-        $state.transition = null;[m
[32m+[m[32m    var $this = $(this)[m
 [m
[31m-        if (options.location && to.navigable) {[m
[31m-          $urlRouter.push(to.navigable.url, to.navigable.locals.globals.$stateParams, {[m
[31m-            $$avoidResync: true, replace: options.location === 'replace'[m
[31m-          });[m
[31m-        }[m
[32m+[m[32m    e.preventDefault()[m
[32m+[m[32m    e.stopPropagation()[m
 [m
[31m-        if (options.notify) {[m
[31m-        /**[m
[31m-         * @ngdoc event[m
[31m-         * @name ui.router.state.$state#$stateChangeSuccess[m
[31m-         * @eventOf ui.router.state.$state[m
[31m-         * @eventType broadcast on root scope[m
[31m-         * @description[m
[31m-         * Fired once the state transition is **complete**.[m
[31m-         *[m
[31m-         * @param {Object} event Event object.[m
[31m-         * @param {State} toState The state being transitioned to.[m
[31m-         * @param {Object} toParams The params supplied to the `toState`.[m
[31m-         * @param {State} fromState The current state, pre-transition.[m
[31m-         * @param {Object} fromParams The params supplied to the `fromState`.[m
[31m-         */[m
[31m-          $rootScope.$broadcast('$stateChangeSuccess', to.self, toParams, from.self, fromParams);[m
[31m-        }[m
[31m-        $urlRouter.update(true);[m
[32m+[m[32m    if ($this.is('.disabled, :disabled')) return[m
 [m
[31m-        return $state.current;[m
[31m-      }, function (error) {[m
[31m-        if ($state.transition !== transition) return TransitionSuperseded;[m
[32m+[m[32m    var $parent  = getParent($this)[m
[32m+[m[32m    var isActive = $parent.hasClass('open')[m
 [m
[31m-        $state.transition = null;[m
[31m-        /**[m
[31m-         * @ngdoc event[m
[31m-         * @name ui.router.state.$state#$stateChangeError[m
[31m-         * @eventOf ui.router.state.$state[m
[31m-         * @eventType broadcast on root scope[m
[31m-         * @description[m
[31m-         * Fired when an **error occurs** during transition. It's important to note that if you[m
[31m-         * have any errors in your resolve functions (javascript errors, non-existent services, etc)[m
[31m-         * they will not throw traditionally. You must listen for this $stateChangeError event to[m
[31m-         * catch **ALL** errors.[m
[31m-         *[m
[31m-         * @param {Object} event Event object.[m
[31m-         * @param {State} toState The state being transitioned to.[m
[31m-         * @param {Object} toParams The params supplied to the `toState`.[m
[31m-         * @param {State} fromState The current state, pre-transition.[m
[31m-         * @param {Object} fromParams The params supplied to the `fromState`.[m
[31m-         * @param {Error} error The resolve error object.[m
[31m-         */[m
[31m-        evt = $rootScope.$broadcast('$stateChangeError', to.self, toParams, from.self, fromParams, error);[m
[32m+[m[32m    if ((!isActive && e.which != 27) || (isActive && e.which == 27)) {[m
[32m+[m[32m      if (e.which == 27) $parent.find(toggle).trigger('focus')[m
[32m+[m[32m      return $this.trigger('click')[m
[32m+[m[32m    }[m
 [m
[31m-        if (!evt.defaultPrevented) {[m
[31m-            $urlRouter.update();[m
[31m-        }[m
[32m+[m[32m    var desc = ' li:not(.divider):visible a'[m
[32m+[m[32m    var $items = $parent.find('[role="menu"]' + desc + ', [role="listbox"]' + desc)[m
 [m
[31m-        return $q.reject(error);[m
[31m-      });[m
[32m+[m[32m    if (!$items.length) return[m
 [m
[31m-      return transition;[m
[31m-    };[m
[32m+[m[32m    var index = $items.index(e.target)[m
 [m
[31m-    /**[m
[31m-     * @ngdoc function[m
[31m-     * @name ui.router.state.$state#is[m
[31m-     * @methodOf ui.router.state.$state[m
[31m-     *[m
[31m-     * @description[m
[31m-     * Similar to {@link ui.router.state.$state#methods_includes $state.includes},[m
[31m-     * but only checks for the full state name. If params is supplied then it will be[m
[31m-     * tested for strict equality against the current active params object, so all params[m
[31m-     * must match with none missing and no extras.[m
[31m-     *[m
[31m-     * @example[m
[31m-     * <pre>[m
[31m-     * $state.$current.name = 'contacts.details.item';[m
[31m-     *[m
[31m-     * // absolute name[m
[31m-     * $state.is('contact.details.item'); // returns true[m
[31m-     * $state.is(contactDetailItemStateObject); // returns true[m
[31m-     *[m
[31m-     * // relative name (. and ^), typically from a template[m
[31m-     * // E.g. from the 'contacts.details' template[m
[31m-     * <div ng-class="{highlighted: $state.is('.item')}">Item</div>[m
[31m-     * </pre>[m
[31m-     *[m
[31m-     * @param {string|object} stateOrName The state name (absolute or relative) or state object you'd like to check.[m
[31m-     * @param {object=} params A param object, e.g. `{sectionId: section.id}`, that you'd like[m
[31m-     * to test against the current active state.[m
[31m-     * @param {object=} options An options object.  The options are:[m
[31m-     *[m
[31m-     * - **`relative`** - {string|object} -  If `stateOrName` is a relative state name and `options.relative` is set, .is will[m
[31m-     * test relative to `options.relative` state (or name).[m
[31m-     *[m
[31m-     * @returns {boolean} Returns true if it is the state.[m
[31m-     */[m
[31m-    $state.is = function is(stateOrName, params, options) {[m
[31m-      options = extend({ relative: $state.$current }, options || {});[m
[31m-      var state = findState(stateOrName, options.relative);[m
[32m+[m[32m    if (e.which == 38 && index > 0)                 index--                        // up[m
[32m+[m[32m    if (e.which == 40 && index < $items.length - 1) index++                        // down[m
[32m+[m[32m    if (!~index)                                      index = 0[m
 [m
[31m-      if (!isDefined(state)) { return undefined; }[m
[31m-      if ($state.$current !== state) { return false; }[m
[31m-      return params ? equalForKeys(state.params.$$values(params), $stateParams) : true;[m
[31m-    };[m
[32m+[m[32m    $items.eq(index).trigger('focus')[m
[32m+[m[32m  }[m
 [m
[31m-    /**[m
[31m-     * @ngdoc function[m
[31m-     * @name ui.router.state.$state#includes[m
[31m-     * @methodOf ui.router.state.$state[m
[31m-     *[m
[31m-     * @description[m
[31m-     * A method to determine if the current active state is equal to or is the child of the[m
[31m-     * state stateName. If any params are passed then they will be tested for a match as well.[m
[31m-     * Not all the parameters need to be passed, just the ones you'd like to test for equality.[m
[31m-     *[m
[31m-     * @example[m
[31m-     * Partial and relative names[m
[31m-     * <pre>[m
[31m-     * $state.$current.name = 'contacts.details.item';[m
[31m-     *[m
[31m-     * // Using partial names[m
[31m-     * $state.includes("contacts"); // returns true[m
[31m-     * $state.includes("contacts.details"); // returns true[m
[31m-     * $state.includes("contacts.details.item"); // returns true[m
[31m-     * $state.includes("contacts.list"); // returns false[m
[31m-     * $state.includes("about"); // returns false[m
[31m-     *[m
[31m-     * // Using relative names (. and ^), typically from a template[m
[31m-     * // E.g. from the 'contacts.details' template[m
[31m-     * <div ng-class="{highlighted: $state.includes('.item')}">Item</div>[m
[31m-     * </pre>[m
[31m-     *[m
[31m-     * Basic globbing patterns[m
[31m-     * <pre>[m
[31m-     * $state.$current.name = 'contacts.details.item.url';[m
[31m-     *[m
[31m-     * $state.includes("*.details.*.*"); // returns true[m
[31m-     * $state.includes("*.details.**"); // returns true[m
[31m-     * $state.includes("**.item.**"); // returns true[m
[31m-     * $state.includes("*.details.item.url"); // returns true[m
[31m-     * $state.includes("*.details.*.url"); // returns true[m
[31m-     * $state.includes("*.details.*"); // returns false[m
[31m-     * $state.includes("item.**"); // returns false[m
[31m-     * </pre>[m
[31m-     *[m
[31m-     * @param {string} stateOrName A partial name, relative name, or glob pattern[m
[31m-     * to be searched for within the current state name.[m
[31m-     * @param {object=} params A param object, e.g. `{sectionId: section.id}`,[m
[31m-     * that you'd like to test against the current active state.[m
[31m-     * @param {object=} options An options object.  The options are:[m
[31m-     *[m
[31m-     * - **`relative`** - {string|object=} -  If `stateOrName` is a relative state reference and `options.relative` is set,[m
[31m-     * .includes will test relative to `options.relative` state (or name).[m
[31m-     *[m
[31m-     * @returns {boolean} Returns true if it does include the state[m
[31m-     */[m
[31m-    $state.includes = function includes(stateOrName, params, options) {[m
[31m-      options = extend({ relative: $state.$current }, options || {});[m
[31m-      if (isString(stateOrName) && isGlob(stateOrName)) {[m
[31m-        if (!doesStateMatchGlob(stateOrName)) {[m
[31m-          return false;[m
[31m-        }[m
[31m-        stateOrName = $state.$current.name;[m
[31m-      }[m
[32m+[m[32m  function clearMenus(e) {[m
[32m+[m[32m    if (e && e.which === 3) return[m
[32m+[m[32m    $(backdrop).remove()[m
[32m+[m[32m    $(toggle).each(function () {[m
[32m+[m[32m      var $this         = $(this)[m
[32m+[m[32m      var $parent       = getParent($this)[m
[32m+[m[32m      var relatedTarget = { relatedTarget: this }[m
 [m
[31m-      var state = findState(stateOrName, options.relative);[m
[31m-      if (!isDefined(state)) { return undefined; }[m
[31m-      if (!isDefined($state.$current.includes[state.name])) { return false; }[m
[31m-      return params ? equalForKeys(state.params.$$values(params), $stateParams, objectKeys(params)) : true;[m
[31m-    };[m
[32m+[m[32m      if (!$parent.hasClass('open')) return[m
 [m
[32m+[m[32m      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))[m
 [m
[31m-    /**[m
[31m-     * @ngdoc function[m
[31m-     * @name ui.router.state.$state#href[m
[31m-     * @methodOf ui.router.state.$state[m
[31m-     *[m
[31m-     * @description[m
[31m-     * A url generation method that returns the compiled url for the given state populated with the given params.[m
[31m-     *[m
[31m-     * @example[m
[31m-     * <pre>[m
[31m-     * expect($state.href("about.person", { person: "bob" })).toEqual("/about/bob");[m
[31m-     * </pre>[m
[31m-     *[m
[31m-     * @param {string|object} stateOrName The state name or state object you'd like to generate a url from.[m
[31m-     * @param {object=} params An object of parameter values to fill the state's required parameters.[m
[31m-     * @param {object=} options Options object. The options are:[m
[31m-     *[m
[31m-     * - **`lossy`** - {boolean=true} -  If true, and if there is no url associated with the state provided in the[m
[31m-     *    first parameter, then the constructed href url will be built from the first navigable ancestor (aka[m
[31m-     *    ancestor with a valid url).[m
[31m-     * - **`inherit`** - {boolean=true}, If `true` will inherit url parameters from current url.[m
[31m-     * - **`relative`** - {object=$state.$current}, When transitioning with relative path (e.g '^'), [m
[31m-     *    defines which state to be relative from.[m
[31m-     * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. "http://www.example.com/fullurl".[m
[31m-     * [m
[31m-     * @returns {string} compiled state url[m
[31m-     */[m
[31m-    $state.href = function href(stateOrName, params, options) {[m
[31m-      options = extend({[m
[31m-        lossy:    true,[m
[31m-        inherit:  true,[m
[31m-        absolute: false,[m
[31m-        relative: $state.$current[m
[31m-      }, options || {});[m
[32m+[m[32m      if (e.isDefaultPrevented()) return[m
 [m
[31m-      var state = findState(stateOrName, options.relative);[m
[32m+[m[32m      $this.attr('aria-expanded', 'false')[m
[32m+[m[32m      $parent.removeClass('open').trigger('hidden.bs.dropdown', relatedTarget)[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-      if (!isDefined(state)) return null;[m
[31m-      if (options.inherit) params = inheritParams($stateParams, params || {}, $state.$current, state);[m
[31m-      [m
[31m-      var nav = (state && options.lossy) ? state.navigable : state;[m
[32m+[m[32m  function getParent($this) {[m
[32m+[m[32m    var selector = $this.attr('data-target')[m
 [m
[31m-      if (!nav || nav.url === undefined || nav.url === null) {[m
[31m-        return null;[m
[31m-      }[m
[31m-      return $urlRouter.href(nav.url, filterByKeys(state.params.$$keys().concat('#'), params || {}), {[m
[31m-        absolute: options.absolute[m
[31m-      });[m
[31m-    };[m
[32m+[m[32m    if (!selector) {[m
[32m+[m[32m      selector = $this.attr('href')[m
[32m+[m[32m      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7[m
[32m+[m[32m    }[m
 [m
[31m-    /**[m
[31m-     * @ngdoc function[m
[31m-     * @name ui.router.state.$state#get[m
[31m-     * @methodOf ui.router.state.$state[m
[31m-     *[m
[31m-     * @description[m
[31m-     * Returns the state configuration object for any specific state or all states.[m
[31m-     *[m
[31m-     * @param {string|object=} stateOrName (absolute or relative) If provided, will only get the config for[m
[31m-     * the requested state. If not provided, returns an array of ALL state configs.[m
[31m-     * @param {string|object=} context When stateOrName is a relative state reference, the state will be retrieved relative to context.[m
[31m-     * @returns {Object|Array} State configuration object or array of all objects.[m
[31m-     */[m
[31m-    $state.get = function (stateOrName, context) {[m
[31m-      if (arguments.length === 0) return map(objectKeys(states), function(name) { return states[name].self; });[m
[31m-      var state = findState(stateOrName, context || $state.$current);[m
[31m-      return (state && state.self) ? state.self : null;[m
[31m-    };[m
[32m+[m[32m    var $parent = selector && $(selector)[m
 [m
[31m-    function resolveState(state, params, paramsAreFiltered, inherited, dst, options) {[m
[31m-      // Make a restricted $stateParams with only the parameters that apply to this state if[m
[31m-      // necessary. In addition to being available to the controller and onEnter/onExit callbacks,[m
[31m-      // we also need $stateParams to be available for any $injector calls we make during the[m
[31m-      // dependency resolution process.[m
[31m-      var $stateParams = (paramsAreFiltered) ? params : filterByKeys(state.params.$$keys(), params);[m
[31m-      var locals = { $stateParams: $stateParams };[m
[32m+[m[32m    return $parent && $parent.length ? $parent : $this.parent()[m
[32m+[m[32m  }[m
 [m
[31m-      // Resolve 'global' dependencies for the state, i.e. those not specific to a view.[m
[31m-      // We're also including $stateParams in this; that way the parameters are restricted[m
[31m-      // to the set that should be visible to the state, and are independent of when we update[m
[31m-      // the global $state and $stateParams values.[m
[31m-      dst.resolve = $resolve.resolve(state.resolve, locals, dst.resolve, state);[m
[31m-      var promises = [dst.resolve.then(function (globals) {[m
[31m-        dst.globals = globals;[m
[31m-      })];[m
[31m-      if (inherited) promises.push(inherited);[m
 [m
[31m-      function resolveViews() {[m
[31m-        var viewsPromises = [];[m
[32m+[m[32m  // DROPDOWN PLUGIN DEFINITION[m
[32m+[m[32m  // ==========================[m
 [m
[31m-        // Resolve template and dependencies for all views.[m
[31m-        forEach(state.views, function (view, name) {[m
[31m-          var injectables = (view.resolve && view.resolve !== state.resolve ? view.resolve : {});[m
[31m-          injectables.$template = [ function () {[m
[31m-            return $view.load(name, { view: view, locals: dst.globals, params: $stateParams, notify: options.notify }) || '';[m
[31m-          }];[m
[32m+[m[32m  function Plugin(option) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this = $(this)[m
[32m+[m[32m      var data  = $this.data('bs.dropdown')[m
 [m
[31m-          viewsPromises.push($resolve.resolve(injectables, dst.globals, dst.resolve, state).then(function (result) {[m
[31m-            // References to the controller (only instantiated at link time)[m
[31m-            if (isFunction(view.controllerProvider) || isArray(view.controllerProvider)) {[m
[31m-              var injectLocals = angular.extend({}, injectables, dst.globals);[m
[31m-              result.$$controller = $injector.invoke(view.controllerProvider, null, injectLocals);[m
[31m-            } else {[m
[31m-              result.$$controller = view.controller;[m
[31m-            }[m
[31m-            // Provide access to the state itself for internal use[m
[31m-            result.$$state = state;[m
[31m-            result.$$controllerAs = view.controllerAs;[m
[31m-            dst[name] = result;[m
[31m-          }));[m
[31m-        });[m
[32m+[m[32m      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))[m
[32m+[m[32m      if (typeof option == 'string') data[option].call($this)[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-        return $q.all(viewsPromises).then(function(){[m
[31m-          return dst.globals;[m
[31m-        });[m
[31m-      }[m
[32m+[m[32m  var old = $.fn.dropdown[m
 [m
[31m-      // Wait for all the promises and then return the activation object[m
[31m-      return $q.all(promises).then(resolveViews).then(function (values) {[m
[31m-        return dst;[m
[31m-      });[m
[31m-    }[m
[32m+[m[32m  $.fn.dropdown             = Plugin[m
[32m+[m[32m  $.fn.dropdown.Constructor = Dropdown[m
 [m
[31m-    return $state;[m
[31m-  }[m
 [m
[31m-  function shouldSkipReload(to, toParams, from, fromParams, locals, options) {[m
[31m-    // Return true if there are no differences in non-search (path/object) params, false if there are differences[m
[31m-    function nonSearchParamsEqual(fromAndToState, fromParams, toParams) {[m
[31m-      // Identify whether all the parameters that differ between `fromParams` and `toParams` were search params.[m
[31m-      function notSearchParam(key) {[m
[31m-        return fromAndToState.params[key].location != "search";[m
[31m-      }[m
[31m-      var nonQueryParamKeys = fromAndToState.params.$$keys().filter(notSearchParam);[m
[31m-      var nonQueryParams = pick.apply({}, [fromAndToState.params].concat(nonQueryParamKeys));[m
[31m-      var nonQueryParamSet = new $$UMFP.ParamSet(nonQueryParams);[m
[31m-      return nonQueryParamSet.$$equals(fromParams, toParams);[m
[31m-    }[m
[32m+[m[32m  // DROPDOWN NO CONFLICT[m
[32m+[m[32m  // ====================[m
 [m
[31m-    // If reload was not explicitly requested[m
[31m-    // and we're transitioning to the same state we're already in[m
[31m-    // and    the locals didn't change[m
[31m-    //     or they changed in a way that doesn't merit reloading[m
[31m-    //        (reloadOnParams:false, or reloadOnSearch.false and only search params changed)[m
[31m-    // Then return true.[m
[31m-    if (!options.reload && to === from &&[m
[31m-      (locals === from.locals || (to.self.reloadOnSearch === false && nonSearchParamsEqual(from, fromParams, toParams)))) {[m
[31m-      return true;[m
[31m-    }[m
[32m+[m[32m  $.fn.dropdown.noConflict = function () {[m
[32m+[m[32m    $.fn.dropdown = old[m
[32m+[m[32m    return this[m
   }[m
[31m-}[m
 [m
[31m-angular.module('ui.router.state')[m
[31m-  .value('$stateParams', {})[m
[31m-  .provider('$state', $StateProvider);[m
 [m
[32m+[m[32m  // APPLY TO STANDARD DROPDOWN ELEMENTS[m
[32m+[m[32m  // ===================================[m
 [m
[31m-$ViewProvider.$inject = [];[m
[31m-function $ViewProvider() {[m
[32m+[m[32m  $(document)[m
[32m+[m[32m    .on('click.bs.dropdown.data-api', clearMenus)[m
[32m+[m[32m    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })[m
[32m+[m[32m    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)[m
[32m+[m[32m    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)[m
[32m+[m[32m    .on('keydown.bs.dropdown.data-api', '[role="menu"]', Dropdown.prototype.keydown)[m
[32m+[m[32m    .on('keydown.bs.dropdown.data-api', '[role="listbox"]', Dropdown.prototype.keydown)[m
 [m
[31m-  this.$get = $get;[m
[31m-  /**[m
[31m-   * @ngdoc object[m
[31m-   * @name ui.router.state.$view[m
[31m-   *[m
[31m-   * @requires ui.router.util.$templateFactory[m
[31m-   * @requires $rootScope[m
[31m-   *[m
[31m-   * @description[m
[31m-   *[m
[31m-   */[m
[31m-  $get.$inject = ['$rootScope', '$templateFactory'];[m
[31m-  function $get(   $rootScope,   $templateFactory) {[m
[31m-    return {[m
[31m-      // $view.load('full.viewName', { template: ..., controller: ..., resolve: ..., async: false, params: ... })[m
[31m-      /**[m
[31m-       * @ngdoc function[m
[31m-       * @name ui.router.state.$view#load[m
[31m-       * @methodOf ui.router.state.$view[m
[31m-       *[m
[31m-       * @description[m
[31m-       *[m
[31m-       * @param {string} name name[m
[31m-       * @param {object} options option object.[m
[31m-       */[m
[31m-      load: function load(name, options) {[m
[31m-        var result, defaults = {[m
[31m-          template: null, controller: null, view: null, locals: null, notify: true, async: true, params: {}[m
[31m-        };[m
[31m-        options = extend(defaults, options);[m
[32m+[m[32m}(jQuery);[m
 [m
[31m-        if (options.view) {[m
[31m-          result = $templateFactory.fromConfig(options.view, options.params, options.locals);[m
[31m-        }[m
[31m-        if (result && options.notify) {[m
[31m-        /**[m
[31m-         * @ngdoc event[m
[31m-         * @name ui.router.state.$state#$viewContentLoading[m
[31m-         * @eventOf ui.router.state.$view[m
[31m-         * @eventType broadcast on root scope[m
[31m-         * @description[m
[31m-         *[m
[31m-         * Fired once the view **begins loading**, *before* the DOM is rendered.[m
[31m-         *[m
[31m-         * @param {Object} event Event object.[m
[31m-         * @param {Object} viewConfig The view config properties (template, controller, etc).[m
[31m-         *[m
[31m-         * @example[m
[31m-         *[m
[31m-         * <pre>[m
[31m-         * $scope.$on('$viewContentLoading',[m
[31m-         * function(event, viewConfig){[m
[31m-         *     // Access to all the view config properties.[m
[31m-         *     // and one special property 'targetView'[m
[31m-         *     // viewConfig.targetView[m
[31m-         * });[m
[31m-         * </pre>[m
[31m-         */[m
[31m-          $rootScope.$broadcast('$viewContentLoading', options);[m
[31m-        }[m
[31m-        return result;[m
[31m-      }[m
[31m-    };[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: modal.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#modals[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
[32m+[m
[32m+[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
[32m+[m
[32m+[m[32m  // MODAL CLASS DEFINITION[m
[32m+[m[32m  // ======================[m
[32m+[m
[32m+[m[32m  var Modal = function (element, options) {[m
[32m+[m[32m    this.options        = options[m
[32m+[m[32m    this.$body          = $(document.body)[m
[32m+[m[32m    this.$element       = $(element)[m
[32m+[m[32m    this.$backdrop      =[m
[32m+[m[32m    this.isShown        = null[m
[32m+[m[32m    this.scrollbarWidth = 0[m
[32m+[m
[32m+[m[32m    if (this.options.remote) {[m
[32m+[m[32m      this.$element[m
[32m+[m[32m        .find('.modal-content')[m
[32m+[m[32m        .load(this.options.remote, $.proxy(function () {[m
[32m+[m[32m          this.$element.trigger('loaded.bs.modal')[m
[32m+[m[32m        }, this))[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  Modal.VERSION  = '3.3.2'[m
[32m+[m
[32m+[m[32m  Modal.TRANSITION_DURATION = 300[m
[32m+[m[32m  Modal.BACKDROP_TRANSITION_DURATION = 150[m
[32m+[m
[32m+[m[32m  Modal.DEFAULTS = {[m
[32m+[m[32m    backdrop: true,[m
[32m+[m[32m    keyboard: true,[m
[32m+[m[32m    show: true[m
   }[m
[31m-}[m
 [m
[31m-angular.module('ui.router.state').provider('$view', $ViewProvider);[m
[32m+[m[32m  Modal.prototype.toggle = function (_relatedTarget) {[m
[32m+[m[32m    return this.isShown ? this.hide() : this.show(_relatedTarget)[m
[32m+[m[32m  }[m
 [m
[31m-/**[m
[31m- * @ngdoc object[m
[31m- * @name ui.router.state.$uiViewScrollProvider[m
[31m- *[m
[31m- * @description[m
[31m- * Provider that returns the {@link ui.router.state.$uiViewScroll} service function.[m
[31m- */[m
[31m-function $ViewScrollProvider() {[m
[32m+[m[32m  Modal.prototype.show = function (_relatedTarget) {[m
[32m+[m[32m    var that = this[m
[32m+[m[32m    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })[m
 [m
[31m-  var useAnchorScroll = false;[m
[32m+[m[32m    this.$element.trigger(e)[m
 [m
[31m-  /**[m
[31m-   * @ngdoc function[m
[31m-   * @name ui.router.state.$uiViewScrollProvider#useAnchorScroll[m
[31m-   * @methodOf ui.router.state.$uiViewScrollProvider[m
[31m-   *[m
[31m-   * @description[m
[31m-   * Reverts back to using the core [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll) service for[m
[31m-   * scrolling based on the url anchor.[m
[31m-   */[m
[31m-  this.useAnchorScroll = function () {[m
[31m-    useAnchorScroll = true;[m
[31m-  };[m
[32m+[m[32m    if (this.isShown || e.isDefaultPrevented()) return[m
 [m
[31m-  /**[m
[31m-   * @ngdoc object[m
[31m-   * @name ui.router.state.$uiViewScroll[m
[31m-   *[m
[31m-   * @requires $anchorScroll[m
[31m-   * @requires $timeout[m
[31m-   *[m
[31m-   * @description[m
[31m-   * When called with a jqLite element, it scrolls the element into view (after a[m
[31m-   * `$timeout` so the DOM has time to refresh).[m
[31m-   *[m
[31m-   * If you prefer to rely on `$anchorScroll` to scroll the view to the anchor,[m
[31m-   * this can be enabled by calling {@link ui.router.state.$uiViewScrollProvider#methods_useAnchorScroll `$uiViewScrollProvider.useAnchorScroll()`}.[m
[31m-   */[m
[31m-  this.$get = ['$anchorScroll', '$timeout', function ($anchorScroll, $timeout) {[m
[31m-    if (useAnchorScroll) {[m
[31m-      return $anchorScroll;[m
[31m-    }[m
[32m+[m[32m    this.isShown = true[m
 [m
[31m-    return function ($element) {[m
[31m-      return $timeout(function () {[m
[31m-        $element[0].scrollIntoView();[m
[31m-      }, 0, false);[m
[31m-    };[m
[31m-  }];[m
[31m-}[m
[32m+[m[32m    this.checkScrollbar()[m
[32m+[m[32m    this.setScrollbar()[m
[32m+[m[32m    this.$body.addClass('modal-open')[m
 [m
[31m-angular.module('ui.router.state').provider('$uiViewScroll', $ViewScrollProvider);[m
[32m+[m[32m    this.escape()[m
[32m+[m[32m    this.resize()[m
 [m
[31m-/**[m
[31m- * @ngdoc directive[m
[31m- * @name ui.router.state.directive:ui-view[m
[31m- *[m
[31m- * @requires ui.router.state.$state[m
[31m- * @requires $compile[m
[31m- * @requires $controller[m
[31m- * @requires $injector[m
[31m- * @requires ui.router.state.$uiViewScroll[m
[31m- * @requires $document[m
[31m- *[m
[31m- * @restrict ECA[m
[31m- *[m
[31m- * @description[m
[31m- * The ui-view directive tells $state where to place your templates.[m
[31m- *[m
[31m- * @param {string=} name A view name. The name should be unique amongst the other views in the[m
[31m- * same state. You can have views of the same name that live in different states.[m
[31m- *[m
[31m- * @param {string=} autoscroll It allows you to set the scroll behavior of the browser window[m
[31m- * when a view is populated. By default, $anchorScroll is overridden by ui-router's custom scroll[m
[31m- * service, {@link ui.router.state.$uiViewScroll}. This custom service let's you[m
[31m- * scroll ui-view elements into view when they are populated during a state activation.[m
[31m- *[m
[31m- * *Note: To revert back to old [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll)[m
[31m- * functionality, call `$uiViewScrollProvider.useAnchorScroll()`.*[m
[31m- *[m
[31m- * @param {string=} onload Expression to evaluate whenever the view updates.[m
[31m- * [m
[31m- * @example[m
[31m- * A view can be unnamed or named. [m
[31m- * <pre>[m
[31m- * <!-- Unnamed -->[m
[31m- * <div ui-view></div> [m
[31m- * [m
[31m- * <!-- Named -->[m
[31m- * <div ui-view="viewName"></div>[m
[31m- * </pre>[m
[31m- *[m
[31m- * You can only have one unnamed view within any template (or root html). If you are only using a [m
[31m- * single view and it is unnamed then you can populate it like so:[m
[31m- * <pre>[m
[31m- * <div ui-view></div> [m
[31m- * $stateProvider.state("home", {[m
[31m- *   template: "<h1>HELLO!</h1>"[m
[31m- * })[m
[31m- * </pre>[m
[31m- * [m
[31m- * The above is a convenient shortcut equivalent to specifying your view explicitly with the {@link ui.router.state.$stateProvider#views `views`}[m
[31m- * config property, by name, in this case an empty name:[m
[31m- * <pre>[m
[31m- * $stateProvider.state("home", {[m
[31m- *   views: {[m
[31m- *     "": {[m
[31m- *       template: "<h1>HELLO!</h1>"[m
[31m- *     }[m
[31m- *   }    [m
[31m- * })[m
[31m- * </pre>[m
[31m- * [m
[31m- * But typically you'll only use the views property if you name your view or have more than one view [m
[31m- * in the same template. There's not really a compelling reason to name a view if its the only one, [m
[31m- * but you could if you wanted, like so:[m
[31m- * <pre>[m
[31m- * <div ui-view="main"></div>[m
[31m- * </pre> [m
[31m- * <pre>[m
[31m- * $stateProvider.state("home", {[m
[31m- *   views: {[m
[31m- *     "main": {[m
[31m- *       template: "<h1>HELLO!</h1>"[m
[31m- *     }[m
[31m- *   }    [m
[31m- * })[m
[31m- * </pre>[m
[31m- * [m
[31m- * Really though, you'll use views to set up multiple views:[m
[31m- * <pre>[m
[31m- * <div ui-view></div>[m
[31m- * <div ui-view="chart"></div> [m
[31m- * <div ui-view="data"></div> [m
[31m- * </pre>[m
[31m- * [m
[31m- * <pre>[m
[31m- * $stateProvider.state("home", {[m
[31m- *   views: {[m
[31m- *     "": {[m
[31m- *       template: "<h1>HELLO!</h1>"[m
[31m- *     },[m
[31m- *     "chart": {[m
[31m- *       template: "<chart_thing/>"[m
[31m- *     },[m
[31m- *     "data": {[m
[31m- *       template: "<data_thing/>"[m
[31m- *     }[m
[31m- *   }    [m
[31m- * })[m
[31m- * </pre>[m
[31m- *[m
[31m- * Examples for `autoscroll`:[m
[31m- *[m
[31m- * <pre>[m
[31m- * <!-- If autoscroll present with no expression,[m
[31m- *      then scroll ui-view into view -->[m
[31m- * <ui-view autoscroll/>[m
[31m- *[m
[31m- * <!-- If autoscroll present with valid expression,[m
[31m- *      then scroll ui-view into view if expression evaluates to true -->[m
[31m- * <ui-view autoscroll='true'/>[m
[31m- * <ui-view autoscroll='false'/>[m
[31m- * <ui-view autoscroll='scopeVariable'/>[m
[31m- * </pre>[m
[31m- */[m
[31m-$ViewDirective.$inject = ['$state', '$injector', '$uiViewScroll', '$interpolate'];[m
[31m-function $ViewDirective(   $state,   $injector,   $uiViewScroll,   $interpolate) {[m
[32m+[m[32m    this.$element.on('click.dismiss.bs.modal', '[data-dismiss="modal"]', $.proxy(this.hide, this))[m
 [m
[31m-  function getService() {[m
[31m-    return ($injector.has) ? function(service) {[m
[31m-      return $injector.has(service) ? $injector.get(service) : null;[m
[31m-    } : function(service) {[m
[31m-      try {[m
[31m-        return $injector.get(service);[m
[31m-      } catch (e) {[m
[31m-        return null;[m
[32m+[m[32m    this.backdrop(function () {[m
[32m+[m[32m      var transition = $.support.transition && that.$element.hasClass('fade')[m
[32m+[m
[32m+[m[32m      if (!that.$element.parent().length) {[m
[32m+[m[32m        that.$element.appendTo(that.$body) // don't move modals dom position[m
       }[m
[31m-    };[m
[32m+[m
[32m+[m[32m      that.$element[m
[32m+[m[32m        .show()[m
[32m+[m[32m        .scrollTop(0)[m
[32m+[m
[32m+[m[32m      if (that.options.backdrop) that.adjustBackdrop()[m
[32m+[m[32m      that.adjustDialog()[m
[32m+[m
[32m+[m[32m      if (transition) {[m
[32m+[m[32m        that.$element[0].offsetWidth // force reflow[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      that.$element[m
[32m+[m[32m        .addClass('in')[m
[32m+[m[32m        .attr('aria-hidden', false)[m
[32m+[m
[32m+[m[32m      that.enforceFocus()[m
[32m+[m
[32m+[m[32m      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })[m
[32m+[m
[32m+[m[32m      transition ?[m
[32m+[m[32m        that.$element.find('.modal-dialog') // wait for modal to slide in[m
[32m+[m[32m          .one('bsTransitionEnd', function () {[m
[32m+[m[32m            that.$element.trigger('focus').trigger(e)[m
[32m+[m[32m          })[m
[32m+[m[32m          .emulateTransitionEnd(Modal.TRANSITION_DURATION) :[m
[32m+[m[32m        that.$element.trigger('focus').trigger(e)[m
[32m+[m[32m    })[m
   }[m
 [m
[31m-  var service = getService(),[m
[31m-      $animator = service('$animator'),[m
[31m-      $animate = service('$animate');[m
[32m+[m[32m  Modal.prototype.hide = function (e) {[m
[32m+[m[32m    if (e) e.preventDefault()[m
 [m
[31m-  // Returns a set of DOM manipulation functions based on which Angular version[m
[31m-  // it should use[m
[31m-  function getRenderer(attrs, scope) {[m
[31m-    var statics = function() {[m
[31m-      return {[m
[31m-        enter: function (element, target, cb) { target.after(element); cb(); },[m
[31m-        leave: function (element, cb) { element.remove(); cb(); }[m
[31m-      };[m
[31m-    };[m
[32m+[m[32m    e = $.Event('hide.bs.modal')[m
 [m
[31m-    if ($animate) {[m
[31m-      return {[m
[31m-        enter: function(element, target, cb) {[m
[31m-          var promise = $animate.enter(element, null, target, cb);[m
[31m-          if (promise && promise.then) promise.then(cb);[m
[31m-        },[m
[31m-        leave: function(element, cb) {[m
[31m-          var promise = $animate.leave(element, cb);[m
[31m-          if (promise && promise.then) promise.then(cb);[m
[31m-        }[m
[31m-      };[m
[31m-    }[m
[32m+[m[32m    this.$element.trigger(e)[m
 [m
[31m-    if ($animator) {[m
[31m-      var animate = $animator && $animator(scope, attrs);[m
[32m+[m[32m    if (!this.isShown || e.isDefaultPrevented()) return[m
 [m
[31m-      return {[m
[31m-        enter: function(element, target, cb) {animate.enter(element, null, target); cb(); },[m
[31m-        leave: function(element, cb) { animate.leave(element); cb(); }[m
[31m-      };[m
[32m+[m[32m    this.isShown = false[m
[32m+[m
[32m+[m[32m    this.escape()[m
[32m+[m[32m    this.resize()[m
[32m+[m
[32m+[m[32m    $(document).off('focusin.bs.modal')[m
[32m+[m
[32m+[m[32m    this.$element[m
[32m+[m[32m      .removeClass('in')[m
[32m+[m[32m      .attr('aria-hidden', true)[m
[32m+[m[32m      .off('click.dismiss.bs.modal')[m
[32m+[m
[32m+[m[32m    $.support.transition && this.$element.hasClass('fade') ?[m
[32m+[m[32m      this.$element[m
[32m+[m[32m        .one('bsTransitionEnd', $.proxy(this.hideModal, this))[m
[32m+[m[32m        .emulateTransitionEnd(Modal.TRANSITION_DURATION) :[m
[32m+[m[32m      this.hideModal()[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  Modal.prototype.enforceFocus = function () {[m
[32m+[m[32m    $(document)[m
[32m+[m[32m      .off('focusin.bs.modal') // guard against infinite focus loop[m
[32m+[m[32m      .on('focusin.bs.modal', $.proxy(function (e) {[m
[32m+[m[32m        if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {[m
[32m+[m[32m          this.$element.trigger('focus')[m
[32m+[m[32m        }[m
[32m+[m[32m      }, this))[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  Modal.prototype.escape = function () {[m
[32m+[m[32m    if (this.isShown && this.options.keyboard) {[m
[32m+[m[32m      this.$element.on('keydown.dismiss.bs.modal', $.proxy(function (e) {[m
[32m+[m[32m        e.which == 27 && this.hide()[m
[32m+[m[32m      }, this))[m
[32m+[m[32m    } else if (!this.isShown) {[m
[32m+[m[32m      this.$element.off('keydown.dismiss.bs.modal')[m
     }[m
[32m+[m[32m  }[m
 [m
[31m-    return statics();[m
[32m+[m[32m  Modal.prototype.resize = function () {[m
[32m+[m[32m    if (this.isShown) {[m
[32m+[m[32m      $(window).on('resize.bs.modal', $.proxy(this.handleUpdate, this))[m
[32m+[m[32m    } else {[m
[32m+[m[32m      $(window).off('resize.bs.modal')[m
[32m+[m[32m    }[m
   }[m
 [m
[31m-  var directive = {[m
[31m-    restrict: 'ECA',[m
[31m-    terminal: true,[m
[31m-    priority: 400,[m
[31m-    transclude: 'element',[m
[31m-    compile: function (tElement, tAttrs, $transclude) {[m
[31m-      return function (scope, $element, attrs) {[m
[31m-        var previousEl, currentEl, currentScope, latestLocals,[m
[31m-            onloadExp     = attrs.onload || '',[m
[31m-            autoScrollExp = attrs.autoscroll,[m
[31m-            renderer      = getRenderer(attrs, scope);[m
[32m+[m[32m  Modal.prototype.hideModal = function () {[m
[32m+[m[32m    var that = this[m
[32m+[m[32m    this.$element.hide()[m
[32m+[m[32m    this.backdrop(function () {[m
[32m+[m[32m      that.$body.removeClass('modal-open')[m
[32m+[m[32m      that.resetAdjustments()[m
[32m+[m[32m      that.resetScrollbar()[m
[32m+[m[32m      that.$element.trigger('hidden.bs.modal')[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-        scope.$on('$stateChangeSuccess', function() {[m
[31m-          updateView(false);[m
[31m-        });[m
[31m-        scope.$on('$viewContentLoading', function() {[m
[31m-          updateView(false);[m
[31m-        });[m
[32m+[m[32m  Modal.prototype.removeBackdrop = function () {[m
[32m+[m[32m    this.$backdrop && this.$backdrop.remove()[m
[32m+[m[32m    this.$backdrop = null[m
[32m+[m[32m  }[m
 [m
[31m-        updateView(true);[m
[32m+[m[32m  Modal.prototype.backdrop = function (callback) {[m
[32m+[m[32m    var that = this[m
[32m+[m[32m    var animate = this.$element.hasClass('fade') ? 'fade' : ''[m
 [m
[31m-        function cleanupLastView() {[m
[31m-          if (previousEl) {[m
[31m-            previousEl.remove();[m
[31m-            previousEl = null;[m
[31m-          }[m
[32m+[m[32m    if (this.isShown && this.options.backdrop) {[m
[32m+[m[32m      var doAnimate = $.support.transition && animate[m
 [m
[31m-          if (currentScope) {[m
[31m-            currentScope.$destroy();[m
[31m-            currentScope = null;[m
[31m-          }[m
[32m+[m[32m      this.$backdrop = $('<div class="modal-backdrop ' + animate + '" />')[m
[32m+[m[32m        .prependTo(this.$element)[m
[32m+[m[32m        .on('click.dismiss.bs.modal', $.proxy(function (e) {[m
[32m+[m[32m          if (e.target !== e.currentTarget) return[m
[32m+[m[32m          this.options.backdrop == 'static'[m
[32m+[m[32m            ? this.$element[0].focus.call(this.$element[0])[m
[32m+[m[32m            : this.hide.call(this)[m
[32m+[m[32m        }, this))[m
 [m
[31m-          if (currentEl) {[m
[31m-            renderer.leave(currentEl, function() {[m
[31m-              previousEl = null;[m
[31m-            });[m
[32m+[m[32m      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow[m
 [m
[31m-            previousEl = currentEl;[m
[31m-            currentEl = null;[m
[31m-          }[m
[31m-        }[m
[32m+[m[32m      this.$backdrop.addClass('in')[m
 [m
[31m-        function updateView(firstTime) {[m
[31m-          var newScope,[m
[31m-              name            = getUiViewName(scope, attrs, $element, $interpolate),[m
[31m-              previousLocals  = name && $state.$current && $state.$current.locals[name];[m
[32m+[m[32m      if (!callback) return[m
 [m
[31m-          if (!firstTime && previousLocals === latestLocals) return; // nothing to do[m
[31m-          newScope = scope.$new();[m
[31m-          latestLocals = $state.$current.locals[name];[m
[32m+[m[32m      doAnimate ?[m
[32m+[m[32m        this.$backdrop[m
[32m+[m[32m          .one('bsTransitionEnd', callback)[m
[32m+[m[32m          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :[m
[32m+[m[32m        callback()[m
 [m
[31m-          var clone = $transclude(newScope, function(clone) {[m
[31m-            renderer.enter(clone, $element, function onUiViewEnter() {[m
[31m-              if(currentScope) {[m
[31m-                currentScope.$emit('$viewContentAnimationEnded');[m
[31m-              }[m
[32m+[m[32m    } else if (!this.isShown && this.$backdrop) {[m
[32m+[m[32m      this.$backdrop.removeClass('in')[m
 [m
[31m-              if (angular.isDefined(autoScrollExp) && !autoScrollExp || scope.$eval(autoScrollExp)) {[m
[31m-                $uiViewScroll(clone);[m
[31m-              }[m
[31m-            });[m
[31m-            cleanupLastView();[m
[31m-          });[m
[32m+[m[32m      var callbackRemove = function () {[m
[32m+[m[32m        that.removeBackdrop()[m
[32m+[m[32m        callback && callback()[m
[32m+[m[32m      }[m
[32m+[m[32m      $.support.transition && this.$element.hasClass('fade') ?[m
[32m+[m[32m        this.$backdrop[m
[32m+[m[32m          .one('bsTransitionEnd', callbackRemove)[m
[32m+[m[32m          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :[m
[32m+[m[32m        callbackRemove()[m
 [m
[31m-          currentEl = clone;[m
[31m-          currentScope = newScope;[m
[31m-          /**[m
[31m-           * @ngdoc event[m
[31m-           * @name ui.router.state.directive:ui-view#$viewContentLoaded[m
[31m-           * @eventOf ui.router.state.directive:ui-view[m
[31m-           * @eventType emits on ui-view directive scope[m
[31m-           * @description           *[m
[31m-           * Fired once the view is **loaded**, *after* the DOM is rendered.[m
[31m-           *[m
[31m-           * @param {Object} event Event object.[m
[31m-           */[m
[31m-          currentScope.$emit('$viewContentLoaded');[m
[31m-          currentScope.$eval(onloadExp);[m
[31m-        }[m
[31m-      };[m
[32m+[m[32m    } else if (callback) {[m
[32m+[m[32m      callback()[m
     }[m
[31m-  };[m
[32m+[m[32m  }[m
 [m
[31m-  return directive;[m
[31m-}[m
[32m+[m[32m  // these following methods are used to handle overflowing modals[m
 [m
[31m-$ViewDirectiveFill.$inject = ['$compile', '$controller', '$state', '$interpolate'];[m
[31m-function $ViewDirectiveFill (  $compile,   $controller,   $state,   $interpolate) {[m
[31m-  return {[m
[31m-    restrict: 'ECA',[m
[31m-    priority: -400,[m
[31m-    compile: function (tElement) {[m
[31m-      var initial = tElement.html();[m
[31m-      return function (scope, $element, attrs) {[m
[31m-        var current = $state.$current,[m
[31m-            name = getUiViewName(scope, attrs, $element, $interpolate),[m
[31m-            locals  = current && current.locals[name];[m
[32m+[m[32m  Modal.prototype.handleUpdate = function () {[m
[32m+[m[32m    if (this.options.backdrop) this.adjustBackdrop()[m
[32m+[m[32m    this.adjustDialog()[m
[32m+[m[32m  }[m
 [m
[31m-        if (! locals) {[m
[31m-          return;[m
[31m-        }[m
[32m+[m[32m  Modal.prototype.adjustBackdrop = function () {[m
[32m+[m[32m    this.$backdrop[m
[32m+[m[32m      .css('height', 0)[m
[32m+[m[32m      .css('height', this.$element[0].scrollHeight)[m
[32m+[m[32m  }[m
 [m
[31m-        $element.data('$uiView', { name: name, state: locals.$$state });[m
[31m-        $element.html(locals.$template ? locals.$template : initial);[m
[32m+[m[32m  Modal.prototype.adjustDialog = function () {[m
[32m+[m[32m    var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight[m
 [m
[31m-        var link = $compile($element.contents());[m
[32m+[m[32m    this.$element.css({[m
[32m+[m[32m      paddingLeft:  !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : '',[m
[32m+[m[32m      paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ''[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-        if (locals.$$controller) {[m
[31m-          locals.$scope = scope;[m
[31m-          locals.$element = $element;[m
[31m-          var controller = $controller(locals.$$controller, locals);[m
[31m-          if (locals.$$controllerAs) {[m
[31m-            scope[locals.$$controllerAs] = controller;[m
[31m-          }[m
[31m-          $element.data('$ngControllerController', controller);[m
[31m-          $element.children().data('$ngControllerController', controller);[m
[31m-        }[m
[32m+[m[32m  Modal.prototype.resetAdjustments = function () {[m
[32m+[m[32m    this.$element.css({[m
[32m+[m[32m      paddingLeft: '',[m
[32m+[m[32m      paddingRight: ''[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-        link(scope);[m
[31m-      };[m
[31m-    }[m
[31m-  };[m
[31m-}[m
[32m+[m[32m  Modal.prototype.checkScrollbar = function () {[m
[32m+[m[32m    this.bodyIsOverflowing = document.body.scrollHeight > document.documentElement.clientHeight[m
[32m+[m[32m    this.scrollbarWidth = this.measureScrollbar()[m
[32m+[m[32m  }[m
 [m
[31m-/**[m
[31m- * Shared ui-view code for both directives:[m
[31m- * Given scope, element, and its attributes, return the view's name[m
[31m- */[m
[31m-function getUiViewName(scope, attrs, element, $interpolate) {[m
[31m-  var name = $interpolate(attrs.uiView || attrs.name || '')(scope);[m
[31m-  var inherited = element.inheritedData('$uiView');[m
[31m-  return name.indexOf('@') >= 0 ?  name :  (name + '@' + (inherited ? inherited.state.name : ''));[m
[31m-}[m
[32m+[m[32m  Modal.prototype.setScrollbar = function () {[m
[32m+[m[32m    var bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)[m
[32m+[m[32m    if (this.bodyIsOverflowing) this.$body.css('padding-right', bodyPad + this.scrollbarWidth)[m
[32m+[m[32m  }[m
 [m
[31m-angular.module('ui.router.state').directive('uiView', $ViewDirective);[m
[31m-angular.module('ui.router.state').directive('uiView', $ViewDirectiveFill);[m
[32m+[m[32m  Modal.prototype.resetScrollbar = function () {[m
[32m+[m[32m    this.$body.css('padding-right', '')[m
[32m+[m[32m  }[m
 [m
[31m-function parseStateRef(ref, current) {[m
[31m-  var preparsed = ref.match(/^\s*({[^}]*})\s*$/), parsed;[m
[31m-  if (preparsed) ref = current + '(' + preparsed[1] + ')';[m
[31m-  parsed = ref.replace(/\n/g, " ").match(/^([^(]+?)\s*(\((.*)\))?$/);[m
[31m-  if (!parsed || parsed.length !== 4) throw new Error("Invalid state ref '" + ref + "'");[m
[31m-  return { state: parsed[1], paramExpr: parsed[3] || null };[m
[31m-}[m
[32m+[m[32m  Modal.prototype.measureScrollbar = function () { // thx walsh[m
[32m+[m[32m    var scrollDiv = document.createElement('div')[m
[32m+[m[32m    scrollDiv.className = 'modal-scrollbar-measure'[m
[32m+[m[32m    this.$body.append(scrollDiv)[m
[32m+[m[32m    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth[m
[32m+[m[32m    this.$body[0].removeChild(scrollDiv)[m
[32m+[m[32m    return scrollbarWidth[m
[32m+[m[32m  }[m
 [m
[31m-function stateContext(el) {[m
[31m-  var stateData = el.parent().inheritedData('$uiView');[m
 [m
[31m-  if (stateData && stateData.state && stateData.state.name) {[m
[31m-    return stateData.state;[m
[32m+[m[32m  // MODAL PLUGIN DEFINITION[m
[32m+[m[32m  // =======================[m
[32m+[m
[32m+[m[32m  function Plugin(option, _relatedTarget) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this   = $(this)[m
[32m+[m[32m      var data    = $this.data('bs.modal')[m
[32m+[m[32m      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)[m
[32m+[m
[32m+[m[32m      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))[m
[32m+[m[32m      if (typeof option == 'string') data[option](_relatedTarget)[m
[32m+[m[32m      else if (options.show) data.show(_relatedTarget)[m
[32m+[m[32m    })[m
   }[m
[31m-}[m
 [m
[31m-/**[m
[31m- * @ngdoc directive[m
[31m- * @name ui.router.state.directive:ui-sref[m
[31m- *[m
[31m- * @requires ui.router.state.$state[m
[31m- * @requires $timeout[m
[31m- *[m
[31m- * @restrict A[m
[31m- *[m
[31m- * @description[m
[31m- * A directive that binds a link (`<a>` tag) to a state. If the state has an associated [m
[31m- * URL, the directive will automatically generate & update the `href` attribute via [m
[31m- * the {@link ui.router.state.$state#methods_href $state.href()} method. Clicking [m
[31m- * the link will trigger a state transition with optional parameters. [m
[31m- *[m
[31m- * Also middle-clicking, right-clicking, and ctrl-clicking on the link will be [m
[31m- * handled natively by the browser.[m
[31m- *[m
[31m- * You can also use relative state paths within ui-sref, just like the relative [m
[31m- * paths passed to `$state.go()`. You just need to be aware that the path is relative[m
[31m- * to the state that the link lives in, in other words the state that loaded the [m
[31m- * template containing the link.[m
[31m- *[m
[31m- * You can specify options to pass to {@link ui.router.state.$state#go $state.go()}[m
[31m- * using the `ui-sref-opts` attribute. Options are restricted to `location`, `inherit`,[m
[31m- * and `reload`.[m
[31m- *[m
[31m- * @example[m
[31m- * Here's an example of how you'd use ui-sref and how it would compile. If you have the [m
[31m- * following template:[m
[31m- * <pre>[m
[31m- * <a ui-sref="home">Home</a> | <a ui-sref="about">About</a> | <a ui-sref="{page: 2}">Next page</a>[m
[31m- * [m
[31m- * <ul>[m
[31m- *     <li ng-repeat="contact in contacts">[m
[31m- *         <a ui-sref="contacts.detail({ id: contact.id })">{{ contact.name }}</a>[m
[31m- *     </li>[m
[31m- * </ul>[m
[31m- * </pre>[m
[31m- * [m
[31m- * Then the compiled html would be (assuming Html5Mode is off and current state is contacts):[m
[31m- * <pre>[m
[31m- * <a href="#/home" ui-sref="home">Home</a> | <a href="#/about" ui-sref="about">About</a> | <a href="#/contacts?page=2" ui-sref="{page: 2}">Next page</a>[m
[31m- * [m
[31m- * <ul>[m
[31m- *     <li ng-repeat="contact in contacts">[m
[31m- *         <a href="#/contacts/1" ui-sref="contacts.detail({ id: contact.id })">Joe</a>[m
[31m- *     </li>[m
[31m- *     <li ng-repeat="contact in contacts">[m
[31m- *         <a href="#/contacts/2" ui-sref="contacts.detail({ id: contact.id })">Alice</a>[m
[31m- *     </li>[m
[31m- *     <li ng-repeat="contact in contacts">[m
[31m- *         <a href="#/contacts/3" ui-sref="contacts.detail({ id: contact.id })">Bob</a>[m
[31m- *     </li>[m
[31m- * </ul>[m
[31m- *[m
[31m- * <a ui-sref="home" ui-sref-opts="{reload: true}">Home</a>[m
[31m- * </pre>[m
[31m- *[m
[31m- * @param {string} ui-sref 'stateName' can be any valid absolute or relative state[m
[31m- * @param {Object} ui-sref-opts options to pass to {@link ui.router.state.$state#go $state.go()}[m
[31m- */[m
[31m-$StateRefDirective.$inject = ['$state', '$timeout'];[m
[31m-function $StateRefDirective($state, $timeout) {[m
[31m-  var allowedOptions = ['location', 'inherit', 'reload', 'absolute'];[m
[32m+[m[32m  var old = $.fn.modal[m
 [m
[31m-  return {[m
[31m-    restrict: 'A',[m
[31m-    require: ['?^uiSrefActive', '?^uiSrefActiveEq'],[m
[31m-    link: function(scope, element, attrs, uiSrefActive) {[m
[31m-      var ref = parseStateRef(attrs.uiSref, $state.current.name);[m
[31m-      var params = null, url = null, base = stateContext(element) || $state.$current;[m
[31m-      // SVGAElement does not use the href attribute, but rather the 'xlinkHref' attribute.[m
[31m-      var hrefKind = Object.prototype.toString.call(element.prop('href')) === '[object SVGAnimatedString]' ?[m
[31m-                 'xlink:href' : 'href';[m
[31m-      var newHref = null, isAnchor = element.prop("tagName").toUpperCase() === "A";[m
[31m-      var isForm = element[0].nodeName === "FORM";[m
[31m-      var attr = isForm ? "action" : hrefKind, nav = true;[m
[32m+[m[32m  $.fn.modal             = Plugin[m
[32m+[m[32m  $.fn.modal.Constructor = Modal[m
 [m
[31m-      var options = { relative: base, inherit: true };[m
[31m-      var optionsOverride = scope.$eval(attrs.uiSrefOpts) || {};[m
 [m
[31m-      angular.forEach(allowedOptions, function(option) {[m
[31m-        if (option in optionsOverride) {[m
[31m-          options[option] = optionsOverride[option];[m
[31m-        }[m
[31m-      });[m
[32m+[m[32m  // MODAL NO CONFLICT[m
[32m+[m[32m  // =================[m
 [m
[31m-      var update = function(newVal) {[m
[31m-        if (newVal) params = angular.copy(newVal);[m
[31m-        if (!nav) return;[m
[32m+[m[32m  $.fn.modal.noConflict = function () {[m
[32m+[m[32m    $.fn.modal = old[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-        newHref = $state.href(ref.state, params, options);[m
 [m
[31m-        var activeDirective = uiSrefActive[1] || uiSrefActive[0];[m
[31m-        if (activeDirective) {[m
[31m-          activeDirective.$$addStateInfo(ref.state, params);[m
[31m-        }[m
[31m-        if (newHref === null) {[m
[31m-          nav = false;[m
[31m-          return false;[m
[31m-        }[m
[31m-        attrs.$set(attr, newHref);[m
[31m-      };[m
[32m+[m[32m  // MODAL DATA-API[m
[32m+[m[32m  // ==============[m
 [m
[31m-      if (ref.paramExpr) {[m
[31m-        scope.$watch(ref.paramExpr, function(newVal, oldVal) {[m
[31m-          if (newVal !== params) update(newVal);[m
[31m-        }, true);[m
[31m-        params = angular.copy(scope.$eval(ref.paramExpr));[m
[31m-      }[m
[31m-      update();[m
[32m+[m[32m  $(document).on('click.bs.modal.data-api', '[data-toggle="modal"]', function (e) {[m
[32m+[m[32m    var $this   = $(this)[m
[32m+[m[32m    var href    = $this.attr('href')[m
[32m+[m[32m    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\s]+$)/, ''))) // strip for ie7[m
[32m+[m[32m    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())[m
 [m
[31m-      if (isForm) return;[m
[32m+[m[32m    if ($this.is('a')) e.preventDefault()[m
 [m
[31m-      element.bind("click", function(e) {[m
[31m-        var button = e.which || e.button;[m
[31m-        if ( !(button > 1 || e.ctrlKey || e.metaKey || e.shiftKey || element.attr('target')) ) {[m
[31m-          // HACK: This is to allow ng-clicks to be processed before the transition is initiated:[m
[31m-          var transition = $timeout(function() {[m
[31m-            $state.go(ref.state, params, options);[m
[31m-          });[m
[31m-          e.preventDefault();[m
[32m+[m[32m    $target.one('show.bs.modal', function (showEvent) {[m
[32m+[m[32m      if (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown[m
[32m+[m[32m      $target.one('hidden.bs.modal', function () {[m
[32m+[m[32m        $this.is(':visible') && $this.trigger('focus')[m
[32m+[m[32m      })[m
[32m+[m[32m    })[m
[32m+[m[32m    Plugin.call($target, option, this)[m
[32m+[m[32m  })[m
 [m
[31m-          // if the state has no URL, ignore one preventDefault from the <a> directive.[m
[31m-          var ignorePreventDefaultCount = isAnchor && !newHref ? 1: 0;[m
[31m-          e.preventDefault = function() {[m
[31m-            if (ignorePreventDefaultCount-- <= 0)[m
[31m-              $timeout.cancel(transition);[m
[31m-          };[m
[31m-        }[m
[31m-      });[m
[31m-    }[m
[31m-  };[m
[31m-}[m
[32m+[m[32m}(jQuery);[m
 [m
[31m-/**[m
[31m- * @ngdoc directive[m
[31m- * @name ui.router.state.directive:ui-sref-active[m
[31m- *[m
[31m- * @requires ui.router.state.$state[m
[31m- * @requires ui.router.state.$stateParams[m
[31m- * @requires $interpolate[m
[31m- *[m
[31m- * @restrict A[m
[31m- *[m
[31m- * @description[m
[31m- * A directive working alongside ui-sref to add classes to an element when the[m
[31m- * related ui-sref directive's state is active, and removing them when it is inactive.[m
[31m- * The primary use-case is to simplify the special appearance of navigation menus[m
[31m- * relying on `ui-sref`, by having the "active" state's menu button appear different,[m
[31m- * distinguishing it from the inactive menu items.[m
[31m- *[m
[31m- * ui-sref-active can live on the same element as ui-sref or on a parent element. The first[m
[31m- * ui-sref-active found at the same level or above the ui-sref will be used.[m
[31m- *[m
[31m- * Will activate when the ui-sref's target state or any child state is active. If you[m
[31m- * need to activate only when the ui-sref target state is active and *not* any of[m
[31m- * it's children, then you will use[m
[31m- * {@link ui.router.state.directive:ui-sref-active-eq ui-sref-active-eq}[m
[31m- *[m
[31m- * @example[m
[31m- * Given the following template:[m
[31m- * <pre>[m
[31m- * <ul>[m
[31m- *   <li ui-sref-active="active" class="item">[m
[31m- *     <a href ui-sref="app.user({user: 'bilbobaggins'})">@bilbobaggins</a>[m
[31m- *   </li>[m
[31m- * </ul>[m
[31m- * </pre>[m
[31m- *[m
[31m- *[m
[31m- * When the app state is "app.user" (or any children states), and contains the state parameter "user" with value "bilbobaggins",[m
[31m- * the resulting HTML will appear as (note the 'active' class):[m
[31m- * <pre>[m
[31m- * <ul>[m
[31m- *   <li ui-sref-active="active" class="item active">[m
[31m- *     <a ui-sref="app.user({user: 'bilbobaggins'})" href="/users/bilbobaggins">@bilbobaggins</a>[m
[31m- *   </li>[m
[31m- * </ul>[m
[31m- * </pre>[m
[31m- *[m
[31m- * The class name is interpolated **once** during the directives link time (any further changes to the[m
[31m- * interpolated value are ignored).[m
[31m- *[m
[31m- * Multiple classes may be specified in a space-separated format:[m
[31m- * <pre>[m
[31m- * <ul>[m
[31m- *   <li ui-sref-active='class1 class2 class3'>[m
[31m- *     <a ui-sref="app.user">link</a>[m
[31m- *   </li>[m
[31m- * </ul>[m
[31m- * </pre>[m
[31m- */[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: tooltip.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#tooltip[m
[32m+[m[32m * Inspired by the original jQuery.tipsy by Jason Frame[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
 [m
[31m-/**[m
[31m- * @ngdoc directive[m
[31m- * @name ui.router.state.directive:ui-sref-active-eq[m
[31m- *[m
[31m- * @requires ui.router.state.$state[m
[31m- * @requires ui.router.state.$stateParams[m
[31m- * @requires $interpolate[m
[31m- *[m
[31m- * @restrict A[m
[31m- *[m
[31m- * @description[m
[31m- * The same as {@link ui.router.state.directive:ui-sref-active ui-sref-active} but will only activate[m
[31m- * when the exact target state used in the `ui-sref` is active; no child states.[m
[31m- *[m
[31m- */[m
[31m-$StateRefActiveDirective.$inject = ['$state', '$stateParams', '$interpolate'];[m
[31m-function $StateRefActiveDirective($state, $stateParams, $interpolate) {[m
[31m-  return  {[m
[31m-    restrict: "A",[m
[31m-    controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {[m
[31m-      var states = [], activeClass;[m
 [m
[31m-      // There probably isn't much point in $observing this[m
[31m-      // uiSrefActive and uiSrefActiveEq share the same directive object with some[m
[31m-      // slight difference in logic routing[m
[31m-      activeClass = $interpolate($attrs.uiSrefActiveEq || $attrs.uiSrefActive || '', false)($scope);[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
 [m
[31m-      // Allow uiSref to communicate with uiSrefActive[Equals][m
[31m-      this.$$addStateInfo = function (newState, newParams) {[m
[31m-        var state = $state.get(newState, stateContext($element));[m
[32m+[m[32m  // TOOLTIP PUBLIC CLASS DEFINITION[m
[32m+[m[32m  // ===============================[m
 [m
[31m-        states.push({[m
[31m-          state: state || { name: newState },[m
[31m-          params: newParams[m
[31m-        });[m
[32m+[m[32m  var Tooltip = function (element, options) {[m
[32m+[m[32m    this.type       =[m
[32m+[m[32m    this.options    =[m
[32m+[m[32m    this.enabled    =[m
[32m+[m[32m    this.timeout    =[m
[32m+[m[32m    this.hoverState =[m
[32m+[m[32m    this.$element   = null[m
 [m
[31m-        update();[m
[31m-      };[m
[32m+[m[32m    this.init('tooltip', element, options)[m
[32m+[m[32m  }[m
 [m
[31m-      $scope.$on('$stateChangeSuccess', update);[m
[32m+[m[32m  Tooltip.VERSION  = '3.3.2'[m
 [m
[31m-      // Update route state[m
[31m-      function update() {[m
[31m-        if (anyMatch()) {[m
[31m-          $element.addClass(activeClass);[m
[31m-        } else {[m
[31m-          $element.removeClass(activeClass);[m
[31m-        }[m
[31m-      }[m
[32m+[m[32m  Tooltip.TRANSITION_DURATION = 150[m
 [m
[31m-      function anyMatch() {[m
[31m-        for (var i = 0; i < states.length; i++) {[m
[31m-          if (isMatch(states[i].state, states[i].params)) {[m
[31m-            return true;[m
[31m-          }[m
[31m-        }[m
[31m-        return false;[m
[31m-      }[m
[32m+[m[32m  Tooltip.DEFAULTS = {[m
[32m+[m[32m    animation: true,[m
[32m+[m[32m    placement: 'top',[m
[32m+[m[32m    selector: false,[m
[32m+[m[32m    template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',[m
[32m+[m[32m    trigger: 'hover focus',[m
[32m+[m[32m    title: '',[m
[32m+[m[32m    delay: 0,[m
[32m+[m[32m    html: false,[m
[32m+[m[32m    container: false,[m
[32m+[m[32m    viewport: {[m
[32m+[m[32m      selector: 'body',[m
[32m+[m[32m      padding: 0[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
 [m
[31m-      function isMatch(state, params) {[m
[31m-        if (typeof $attrs.uiSrefActiveEq !== 'undefined') {[m
[31m-          return $state.is(state.name, params);[m
[31m-        } else {[m
[31m-          return $state.includes(state.name, params);[m
[31m-        }[m
[31m-      }[m
[31m-    }][m
[31m-  };[m
[31m-}[m
[32m+[m[32m  Tooltip.prototype.init = function (type, element, options) {[m
[32m+[m[32m    this.enabled   = true[m
[32m+[m[32m    this.type      = type[m
[32m+[m[32m    this.$element  = $(element)[m
[32m+[m[32m    this.options   = this.getOptions(options)[m
[32m+[m[32m    this.$viewport = this.options.viewport && $(this.options.viewport.selector || this.options.viewport)[m
 [m
[31m-angular.module('ui.router.state')[m
[31m-  .directive('uiSref', $StateRefDirective)[m
[31m-  .directive('uiSrefActive', $StateRefActiveDirective)[m
[31m-  .directive('uiSrefActiveEq', $StateRefActiveDirective);[m
[32m+[m[32m    var triggers = this.options.trigger.split(' ')[m
 [m
[31m-/**[m
[31m- * @ngdoc filter[m
[31m- * @name ui.router.state.filter:isState[m
[31m- *[m
[31m- * @requires ui.router.state.$state[m
[31m- *[m
[31m- * @description[m
[31m- * Translates to {@link ui.router.state.$state#methods_is $state.is("stateName")}.[m
[31m- */[m
[31m-$IsStateFilter.$inject = ['$state'];[m
[31m-function $IsStateFilter($state) {[m
[31m-  var isFilter = function (state) {[m
[31m-    return $state.is(state);[m
[31m-  };[m
[31m-  isFilter.$stateful = true;[m
[31m-  return isFilter;[m
[31m-}[m
[32m+[m[32m    for (var i = triggers.length; i--;) {[m
[32m+[m[32m      var trigger = triggers[i][m
 [m
[31m-/**[m
[31m- * @ngdoc filter[m
[31m- * @name ui.router.state.filter:includedByState[m
[31m- *[m
[31m- * @requires ui.router.state.$state[m
[31m- *[m
[31m- * @description[m
[31m- * Translates to {@link ui.router.state.$state#methods_includes $state.includes('fullOrPartialStateName')}.[m
[31m- */[m
[31m-$IncludedByStateFilter.$inject = ['$state'];[m
[31m-function $IncludedByStateFilter($state) {[m
[31m-  var includesFilter = function (state) {[m
[31m-    return $state.includes(state);[m
[31m-  };[m
[31m-  includesFilter.$stateful = true;[m
[31m-  return  includesFilter;[m
[31m-}[m
[32m+[m[32m      if (trigger == 'click') {[m
[32m+[m[32m        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))[m
[32m+[m[32m      } else if (trigger != 'manual') {[m
[32m+[m[32m        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'[m
[32m+[m[32m        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'[m
 [m
[31m-angular.module('ui.router.state')[m
[31m-  .filter('isState', $IsStateFilter)[m
[31m-  .filter('includedByState', $IncludedByStateFilter);[m
[31m-})(window, window.angular);[m
[31m-/*![m
[31m-angular-xeditable - 0.1.9[m
[31m-Edit-in-place for angular.js[m
[31m-Build date: 2015-03-26 [m
[31m-*/[m
[31m-/**[m
[31m- * Angular-xeditable module [m
[31m- *[m
[31m- */[m
[31m-angular.module('xeditable', [])[m
[32m+[m[32m        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))[m
[32m+[m[32m        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
 [m
[32m+[m[32m    this.options.selector ?[m
[32m+[m[32m      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :[m
[32m+[m[32m      this.fixTitle()[m
[32m+[m[32m  }[m
 [m
[31m-/**[m
[31m- * Default options. [m
[31m- *[m
[31m- * @namespace editable-options[m
[31m- */[m
[31m-//todo: maybe better have editableDefaults, not options...[m
[31m-.value('editableOptions', {[m
[31m-  /**[m
[31m-   * Theme. Possible values `bs3`, `bs2`, `default`.[m
[31m-   * [m
[31m-   * @var {string} theme[m
[31m-   * @memberOf editable-options[m
[31m-   */  [m
[31m-  theme: 'default',[m
[31m-  /**[m
[31m-   * Icon Set. Possible values `font-awesome`, `default`.[m
[31m-   * [m
[31m-   * @var {string} icon set[m
[31m-   * @memberOf editable-options[m
[31m-   */  [m
[31m-  icon_set: 'default',[m
[31m-  /**[m
[31m-   * Whether to show buttons for single editalbe element.  [m
[31m-   * Possible values `right` (default), `no`.[m
[31m-   * [m
[31m-   * @var {string} buttons[m
[31m-   * @memberOf editable-options[m
[31m-   */    [m
[31m-  buttons: 'right',[m
[31m-  /**[m
[31m-   * Default value for `blur` attribute of single editable element.  [m
[31m-   * Can be `cancel|submit|ignore`.[m
[31m-   * [m
[31m-   * @var {string} blurElem[m
[31m-   * @memberOf editable-options[m
[31m-   */[m
[31m-  blurElem: 'cancel',[m
[31m-  /**[m
[31m-   * Default value for `blur` attribute of editable form.  [m
[31m-   * Can be `cancel|submit|ignore`.[m
[31m-   * [m
[31m-   * @var {string} blurForm[m
[31m-   * @memberOf editable-options[m
[31m-   */[m
[31m-  blurForm: 'ignore',[m
[31m-  /**[m
[31m-   * How input elements get activated. Possible values: `focus|select|none`.[m
[31m-   *[m
[31m-   * @var {string} activate[m
[31m-   * @memberOf editable-options[m
[31m-   */[m
[31m-  activate: 'focus',[m
[31m-  /**[m
[31m-   * Whether to disable x-editable. Can be overloaded on each element.[m
[31m-   *[m
[31m-   * @var {boolean} isDisabled[m
[31m-   * @memberOf editable-options[m
[31m-   */[m
[31m-   isDisabled: false,[m
[31m-  [m
[31m-  /**[m
[31m-   * Event, on which the edit mode gets activated. [m
[31m-   * Can be any event.[m
[31m-   *[m
[31m-   * @var {string} activationEvent[m
[31m-   * @memberOf editable-options[m
[31m-   */[m
[31m-  activationEvent: 'click'[m
[32m+[m[32m  Tooltip.prototype.getDefaults = function () {[m
[32m+[m[32m    return Tooltip.DEFAULTS[m
[32m+[m[32m  }[m
 [m
[31m-});[m
[32m+[m[32m  Tooltip.prototype.getOptions = function (options) {[m
[32m+[m[32m    options = $.extend({}, this.getDefaults(), this.$element.data(), options)[m
 [m
[31m-/*[m
[31m-Angular-ui bootstrap datepicker[m
[31m-http://angular-ui.github.io/bootstrap/#/datepicker[m
[31m-*/[m
[31m-angular.module('xeditable').directive('editableBsdate', ['editableDirectiveFactory',[m
[31m-	function(editableDirectiveFactory) {[m
[31m-		return editableDirectiveFactory({[m
[31m-			directiveName: 'editableBsdate',[m
[31m-			inputTpl: '<div></div>',[m
[31m-			render: function() {[m
[31m-				/** This basically renders a datepicker as in the example shown in [m
[31m-				**  http://angular-ui.github.io/bootstrap/#/datepicker[m
[31m-				**  The attributes are all the same as in the bootstrap-ui datepicker with e- as prefix[m
[31m-				**/[m
[31m-				this.parent.render.call(this);[m
[32m+[m[32m    if (options.delay && typeof options.delay == 'number') {[m
[32m+[m[32m      options.delay = {[m
[32m+[m[32m        show: options.delay,[m
[32m+[m[32m        hide: options.delay[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
 [m
[31m-				var inputDatePicker = angular.element('<input type="text" class="form-control" ng-model="$data"/>');[m
[31m-				var buttonDatePicker = angular.element('<button type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>');[m
[31m-				var buttonWrapper = angular.element('<span class="input-group-btn"></span>');[m
[32m+[m[32m    return options[m
[32m+[m[32m  }[m
 [m
[31m-				inputDatePicker.attr('datepicker-popup', this.attrs.eDatepickerPopupXEditable || 'yyyy/MM/dd' );[m
[31m-				inputDatePicker.attr('is-open', this.attrs.eIsOpen);[m
[31m-				inputDatePicker.attr('date-disabled', this.attrs.eDateDisabled);[m
[31m-				inputDatePicker.attr('datepicker-popup', this.attrs.eDatepickerPopup);[m
[31m-				inputDatePicker.attr('datepicker-mode', this.attrs.eDatepickerMode || 'day');[m
[31m-				inputDatePicker.attr('min-date', this.attrs.eMinDate);[m
[31m-				inputDatePicker.attr('max-date', this.attrs.eMaxDate);[m
[31m-				inputDatePicker.attr('show-weeks', this.attrs.eShowWeeks || true);[m
[31m-				inputDatePicker.attr('starting-day', this.attrs.eStartingDay || 0);[m
[31m-				inputDatePicker.attr('init-date', this.attrs.eInitDate || new Date());[m
[31m-				inputDatePicker.attr('min-mode', this.attrs.eMinMode || 'day');[m
[31m-				inputDatePicker.attr('max-mode', this.attrs.eMaxMode || 'year');[m
[31m-				inputDatePicker.attr('format-day', this.attrs.eFormatDay || 'dd');[m
[31m-				inputDatePicker.attr('format-month', this.attrs.eFormatMonth || 'MMMM');[m
[31m-				inputDatePicker.attr('format-year', this.attrs.eFormatYear || 'yyyy');[m
[31m-				inputDatePicker.attr('format-day-header', this.attrs.eFormatDayHeader || 'EEE');[m
[31m-				inputDatePicker.attr('format-day-title', this.attrs.eFormatDayTitle || 'MMMM yyyy');[m
[31m-				inputDatePicker.attr('format-month-title', this.attrs.eFormatMonthTitle || 'yyyy');[m
[31m-				inputDatePicker.attr('year-range', this.attrs.eYearRange || 20);[m
[31m-				inputDatePicker.attr('show-button-bar', this.attrs.eShowButtonBar || true);[m
[31m-				inputDatePicker.attr('current-text', this.attrs.eCurrentText || 'Today');[m
[31m-				inputDatePicker.attr('clear-text', this.attrs.eClearText || 'Clear');[m
[31m-				inputDatePicker.attr('close-text', this.attrs.eCloseText || 'Done');[m
[31m-				inputDatePicker.attr('close-on-date-selection', this.attrs.eCloseOnDateSelection || true);[m
[31m-				inputDatePicker.attr('date-picker-append-to-body', this.attrs.eDatePickerAppendToBody || false);[m
[31m-				inputDatePicker.attr('date-disabled', this.attrs.eDateDisabled);[m
[32m+[m[32m  Tooltip.prototype.getDelegateOptions = function () {[m
[32m+[m[32m    var options  = {}[m
[32m+[m[32m    var defaults = this.getDefaults()[m
 [m
[31m-				buttonDatePicker.attr('ng-click',this.attrs.eNgClick);[m
[32m+[m[32m    this._options && $.each(this._options, function (key, value) {[m
[32m+[m[32m      if (defaults[key] != value) options[key] = value[m
[32m+[m[32m    })[m
 [m
[31m-				buttonWrapper.append(buttonDatePicker);[m
[31m-				this.inputEl.prepend(inputDatePicker);[m
[31m-				this.inputEl.append(buttonWrapper);[m
[32m+[m[32m    return options[m
[32m+[m[32m  }[m
 [m
[31m-				this.inputEl.removeAttr('class');[m
[31m-				this.inputEl.attr('class','input-group');[m
[32m+[m[32m  Tooltip.prototype.enter = function (obj) {[m
[32m+[m[32m    var self = obj instanceof this.constructor ?[m
[32m+[m[32m      obj : $(obj.currentTarget).data('bs.' + this.type)[m
 [m
[31m-			}[m
[31m-    });[m
[31m-}]);[m
[31m-/*[m
[31m-Angular-ui bootstrap editable timepicker[m
[31m-http://angular-ui.github.io/bootstrap/#/timepicker[m
[31m-*/[m
[31m-angular.module('xeditable').directive('editableBstime', ['editableDirectiveFactory',[m
[31m-  function(editableDirectiveFactory) {[m
[31m-    return editableDirectiveFactory({[m
[31m-      directiveName: 'editableBstime',[m
[31m-      inputTpl: '<timepicker></timepicker>',[m
[31m-      render: function() {[m
[31m-        this.parent.render.call(this);[m
[32m+[m[32m    if (self && self.$tip && self.$tip.is(':visible')) {[m
[32m+[m[32m      self.hoverState = 'in'[m
[32m+[m[32m      return[m
[32m+[m[32m    }[m
 [m
[31m-        // timepicker can't update model when ng-model set directly to it[m
[31m-        // see: https://github.com/angular-ui/bootstrap/issues/1141[m
[31m-        // so we wrap it into DIV[m
[31m-        var div = angular.element('<div class="well well-small" style="display:inline-block;"></div>');[m
[32m+[m[32m    if (!self) {[m
[32m+[m[32m      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())[m
[32m+[m[32m      $(obj.currentTarget).data('bs.' + this.type, self)[m
[32m+[m[32m    }[m
 [m
[31m-        // move ng-model to wrapping div[m
[31m-        div.attr('ng-model', this.inputEl.attr('ng-model'));[m
[31m-        this.inputEl.removeAttr('ng-model');[m
[32m+[m[32m    clearTimeout(self.timeout)[m
 [m
[31m-        // move ng-change to wrapping div[m
[31m-        if(this.attrs.eNgChange) {[m
[31m-          div.attr('ng-change', this.inputEl.attr('ng-change'));[m
[31m-          this.inputEl.removeAttr('ng-change');[m
[31m-        }[m
[32m+[m[32m    self.hoverState = 'in'[m
 [m
[31m-        // wrap[m
[31m-        this.inputEl.wrap(div);[m
[31m-      }[m
[31m-    });[m
[31m-}]);[m
[31m-//checkbox[m
[31m-angular.module('xeditable').directive('editableCheckbox', ['editableDirectiveFactory',[m
[31m-  function(editableDirectiveFactory) {[m
[31m-    return editableDirectiveFactory({[m
[31m-      directiveName: 'editableCheckbox',[m
[31m-      inputTpl: '<input type="checkbox">',[m
[31m-      render: function() {[m
[31m-        this.parent.render.call(this);[m
[31m-        if(this.attrs.eTitle) {[m
[31m-          this.inputEl.wrap('<label></label>');[m
[31m-          this.inputEl.parent().append(this.attrs.eTitle);[m
[31m-        }[m
[31m-      },[m
[31m-      autosubmit: function() {[m
[31m-        var self = this;[m
[31m-        self.inputEl.bind('change', function() {[m
[31m-          setTimeout(function() {[m
[31m-            self.scope.$apply(function() {[m
[31m-              self.scope.$form.$submit();[m
[31m-            });[m
[31m-          }, 500);[m
[31m-        });[m
[31m-      }[m
[31m-    });[m
[31m-}]);[m
[32m+[m[32m    if (!self.options.delay || !self.options.delay.show) return self.show()[m
 [m
[31m-// checklist[m
[31m-angular.module('xeditable').directive('editableChecklist', [[m
[31m-  'editableDirectiveFactory',[m
[31m-  'editableNgOptionsParser',[m
[31m-  function(editableDirectiveFactory, editableNgOptionsParser) {[m
[31m-    return editableDirectiveFactory({[m
[31m-      directiveName: 'editableChecklist',[m
[31m-      inputTpl: '<span></span>',[m
[31m-      useCopy: true,[m
[31m-      render: function() {[m
[31m-        this.parent.render.call(this);[m
[31m-        var parsed = editableNgOptionsParser(this.attrs.eNgOptions);[m
[31m-        var html = '<label ng-repeat="'+parsed.ngRepeat+'">'+[m
[31m-          '<input type="checkbox" checklist-model="$parent.$data" checklist-value="'+parsed.locals.valueFn+'">'+[m
[31m-          '<span ng-bind="'+parsed.locals.displayFn+'"></span></label>';[m
[32m+[m[32m    self.timeout = setTimeout(function () {[m
[32m+[m[32m      if (self.hoverState == 'in') self.show()[m
[32m+[m[32m    }, self.options.delay.show)[m
[32m+[m[32m  }[m
 [m
[31m-        this.inputEl.removeAttr('ng-model');[m
[31m-        this.inputEl.removeAttr('ng-options');[m
[31m-        this.inputEl.html(html);[m
[31m-      }[m
[31m-    });[m
[31m-}]);[m
[32m+[m[32m  Tooltip.prototype.leave = function (obj) {[m
[32m+[m[32m    var self = obj instanceof this.constructor ?[m
[32m+[m[32m      obj : $(obj.currentTarget).data('bs.' + this.type)[m
 [m
[31m-angular.module('xeditable').directive('editableCombodate', ['editableDirectiveFactory', 'editableCombodate',[m
[31m-  function(editableDirectiveFactory, editableCombodate) {[m
[31m-    return editableDirectiveFactory({[m
[31m-      directiveName: 'editableCombodate',[m
[31m-      inputTpl: '<input type="text">',[m
[31m-      render: function() {[m
[31m-        this.parent.render.call(this);[m
[31m-        var combodate = editableCombodate.getInstance(this.inputEl, {value: new Date(this.scope.$data)});[m
[32m+[m[32m    if (!self) {[m
[32m+[m[32m      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())[m
[32m+[m[32m      $(obj.currentTarget).data('bs.' + this.type, self)[m
[32m+[m[32m    }[m
 [m
[31m-        var self = this;[m
[31m-        combodate.$widget.find('select').bind('change', function(e) {[m
[31m-          self.scope.$data = (new Date(combodate.getValue())).toISOString();[m
[31m-        });[m
[31m-      }[m
[31m-    });[m
[31m-  }[m
[31m-]);[m
[31m-/*[m
[31m-Input types: text|email|tel|number|url|search|color|date|datetime|time|month|week[m
[31m-*/[m
[32m+[m[32m    clearTimeout(self.timeout)[m
 [m
[31m-(function() {[m
[32m+[m[32m    self.hoverState = 'out'[m
 [m
[31m-  var types = 'text|password|email|tel|number|url|search|color|date|datetime|time|month|week|file'.split('|');[m
[32m+[m[32m    if (!self.options.delay || !self.options.delay.hide) return self.hide()[m
 [m
[31m-  //todo: datalist[m
[31m-  [m
[31m-  // generate directives[m
[31m-  angular.forEach(types, function(type) {[m
[31m-    var directiveName = 'editable'+type.charAt(0).toUpperCase() + type.slice(1);[m
[31m-    angular.module('xeditable').directive(directiveName, ['editableDirectiveFactory',[m
[31m-      function(editableDirectiveFactory) {[m
[31m-        return editableDirectiveFactory({[m
[31m-          directiveName: directiveName,[m
[31m-          inputTpl: '<input type="'+type+'">'[m
[31m-        });[m
[31m-    }]);[m
[31m-  });[m
[32m+[m[32m    self.timeout = setTimeout(function () {[m
[32m+[m[32m      if (self.hoverState == 'out') self.hide()[m
[32m+[m[32m    }, self.options.delay.hide)[m
[32m+[m[32m  }[m
 [m
[31m-  //`range` is bit specific[m
[31m-  angular.module('xeditable').directive('editableRange', ['editableDirectiveFactory',[m
[31m-    function(editableDirectiveFactory) {[m
[31m-      return editableDirectiveFactory({[m
[31m-        directiveName: 'editableRange',[m
[31m-        inputTpl: '<input type="range" id="range" name="range">',[m
[31m-        render: function() {[m
[31m-          this.parent.render.call(this);[m
[31m-          this.inputEl.after('<output>{{$data}}</output>');[m
[31m-        }        [m
[31m-      });[m
[31m-  }]);[m
[32m+[m[32m  Tooltip.prototype.show = function () {[m
[32m+[m[32m    var e = $.Event('show.bs.' + this.type)[m
 [m
[31m-}());[m
[32m+[m[32m    if (this.hasContent() && this.enabled) {[m
[32m+[m[32m      this.$element.trigger(e)[m
 [m
[32m+[m[32m      var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0])[m
[32m+[m[32m      if (e.isDefaultPrevented() || !inDom) return[m
[32m+[m[32m      var that = this[m
 [m
[31m-// radiolist[m
[31m-angular.module('xeditable').directive('editableRadiolist', [[m
[31m-  'editableDirectiveFactory',[m
[31m-  'editableNgOptionsParser',[m
[31m-  function(editableDirectiveFactory, editableNgOptionsParser) {[m
[31m-    return editableDirectiveFactory({[m
[31m-      directiveName: 'editableRadiolist',[m
[31m-      inputTpl: '<span></span>',[m
[31m-      render: function() {[m
[31m-        this.parent.render.call(this);[m
[31m-        var parsed = editableNgOptionsParser(this.attrs.eNgOptions);[m
[31m-        var html = '<label ng-repeat="'+parsed.ngRepeat+'">'+[m
[31m-          '<input type="radio" ng-disabled="' + this.attrs.eNgDisabled + '" ng-model="$parent.$data" value="{{'+parsed.locals.valueFn+'}}">'+[m
[31m-          '<span ng-bind="'+parsed.locals.displayFn+'"></span></label>';[m
[32m+[m[32m      var $tip = this.tip()[m
 [m
[31m-        this.inputEl.removeAttr('ng-model');[m
[31m-        this.inputEl.removeAttr('ng-options');[m
[31m-        this.inputEl.html(html);[m
[31m-      },[m
[31m-      autosubmit: function() {[m
[31m-        var self = this;[m
[31m-        self.inputEl.bind('change', function() {[m
[31m-          setTimeout(function() {[m
[31m-            self.scope.$apply(function() {[m
[31m-              self.scope.$form.$submit();[m
[31m-            });[m
[31m-          }, 500);[m
[31m-        });[m
[31m-      }[m
[31m-    });[m
[31m-}]);[m
[32m+[m[32m      var tipId = this.getUID(this.type)[m
 [m
[31m-//select[m
[31m-angular.module('xeditable').directive('editableSelect', ['editableDirectiveFactory',[m
[31m-  function(editableDirectiveFactory) {[m
[31m-    return editableDirectiveFactory({[m
[31m-      directiveName: 'editableSelect',[m
[31m-      inputTpl: '<select></select>',[m
[31m-      autosubmit: function() {[m
[31m-        var self = this;[m
[31m-        self.inputEl.bind('change', function() {[m
[31m-          self.scope.$apply(function() {[m
[31m-            self.scope.$form.$submit();[m
[31m-          });[m
[31m-        });[m
[31m-      }[m
[31m-    });[m
[31m-}]);[m
[31m-//textarea[m
[31m-angular.module('xeditable').directive('editableTextarea', ['editableDirectiveFactory',[m
[31m-  function(editableDirectiveFactory) {[m
[31m-    return editableDirectiveFactory({[m
[31m-      directiveName: 'editableTextarea',[m
[31m-      inputTpl: '<textarea></textarea>',[m
[31m-      addListeners: function() {[m
[31m-        var self = this;[m
[31m-        self.parent.addListeners.call(self);[m
[31m-        // submit textarea by ctrl+enter even with buttons[m
[31m-        if (self.single && self.buttons !== 'no') {[m
[31m-          self.autosubmit();[m
[31m-        }[m
[31m-      },[m
[31m-      autosubmit: function() {[m
[31m-        var self = this;[m
[31m-        self.inputEl.bind('keydown', function(e) {[m
[31m-          if ((e.ctrlKey || e.metaKey) && (e.keyCode === 13)) {[m
[31m-            self.scope.$apply(function() {[m
[31m-              self.scope.$form.$submit();[m
[31m-            });[m
[31m-          }[m
[31m-        });[m
[31m-      }[m
[31m-    });[m
[31m-}]);[m
[32m+[m[32m      this.setContent()[m
[32m+[m[32m      $tip.attr('id', tipId)[m
[32m+[m[32m      this.$element.attr('aria-describedby', tipId)[m
 [m
[31m-/**[m
[31m- * EditableController class. [m
[31m- * Attached to element with `editable-xxx` directive.[m
[31m- *[m
[31m- * @namespace editable-element[m
[31m- */[m
[31m-/*[m
[31m-TODO: this file should be refactored to work more clear without closures![m
[31m-*/[m
[31m-angular.module('xeditable').factory('editableController', [m
[31m-  ['$q', 'editableUtils',[m
[31m-  function($q, editableUtils) {[m
[32m+[m[32m      if (this.options.animation) $tip.addClass('fade')[m
 [m
[31m-  //EditableController function[m
[31m-  EditableController.$inject = ['$scope', '$attrs', '$element', '$parse', 'editableThemes', 'editableIcons', 'editableOptions', '$rootScope', '$compile', '$q'];[m
[31m-  function EditableController($scope, $attrs, $element, $parse, editableThemes, editableIcons, editableOptions, $rootScope, $compile, $q) {[m
[31m-    var valueGetter;[m
[32m+[m[32m      var placement = typeof this.options.placement == 'function' ?[m
[32m+[m[32m        this.options.placement.call(this, $tip[0], this.$element[0]) :[m
[32m+[m[32m        this.options.placement[m
 [m
[31m-    //if control is disabled - it does not participate in waiting process[m
[31m-    var inWaiting;[m
[32m+[m[32m      var autoToken = /\s?auto?\s?/i[m
[32m+[m[32m      var autoPlace = autoToken.test(placement)[m
[32m+[m[32m      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'[m
 [m
[31m-    var self = this;[m
[32m+[m[32m      $tip[m
[32m+[m[32m        .detach()[m
[32m+[m[32m        .css({ top: 0, left: 0, display: 'block' })[m
[32m+[m[32m        .addClass(placement)[m
[32m+[m[32m        .data('bs.' + this.type, this)[m
 [m
[31m-    self.scope = $scope;[m
[31m-    self.elem = $element;[m
[31m-    self.attrs = $attrs;[m
[31m-    self.inputEl = null;[m
[31m-    self.editorEl = null;[m
[31m-    self.single = true;[m
[31m-    self.error = '';[m
[31m-    self.theme =  editableThemes[editableOptions.theme] || editableThemes['default'];[m
[31m-    self.parent = {};[m
[32m+[m[32m      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)[m
 [m
[31m-    //will be undefined if icon_set is default and theme is default[m
[31m-    self.icon_set = editableOptions.icon_set === 'default' ? editableIcons.default[editableOptions.theme] : editableIcons.external[editableOptions.icon_set];[m
[32m+[m[32m      var pos          = this.getPosition()[m
[32m+[m[32m      var actualWidth  = $tip[0].offsetWidth[m
[32m+[m[32m      var actualHeight = $tip[0].offsetHeight[m
 [m
[31m-    //to be overwritten by directive[m
[31m-    self.inputTpl = '';[m
[31m-    self.directiveName = '';[m
[32m+[m[32m      if (autoPlace) {[m
[32m+[m[32m        var orgPlacement = placement[m
[32m+[m[32m        var $container   = this.options.container ? $(this.options.container) : this.$element.parent()[m
[32m+[m[32m        var containerDim = this.getPosition($container)[m
 [m
[31m-    // with majority of controls copy is not needed, but..[m
[31m-    // copy MUST NOT be used for `select-multiple` with objects as items[m
[31m-    // copy MUST be used for `checklist`[m
[31m-    self.useCopy = false;[m
[32m+[m[32m        placement = placement == 'bottom' && pos.bottom + actualHeight > containerDim.bottom ? 'top'    :[m
[32m+[m[32m                    placement == 'top'    && pos.top    - actualHeight < containerDim.top    ? 'bottom' :[m
[32m+[m[32m                    placement == 'right'  && pos.right  + actualWidth  > containerDim.width  ? 'left'   :[m
[32m+[m[32m                    placement == 'left'   && pos.left   - actualWidth  < containerDim.left   ? 'right'  :[m
[32m+[m[32m                    placement[m
 [m
[31m-    //runtime (defaults)[m
[31m-    self.single = null;[m
[32m+[m[32m        $tip[m
[32m+[m[32m          .removeClass(orgPlacement)[m
[32m+[m[32m          .addClass(placement)[m
[32m+[m[32m      }[m
 [m
[31m-    /**[m
[31m-     * Attributes defined with `e-*` prefix automatically transfered from original element to[m
[31m-     * control.  [m
[31m-     * For example, if you set `<span editable-text="user.name" e-style="width: 100px"`>[m
[31m-     * then input will appear as `<input style="width: 100px">`.  [m
[31m-     * See [demo](#text-customize).[m
[31m-     * [m
[31m-     * @var {any|attribute} e-*[m
[31m-     * @memberOf editable-element[m
[31m-     */ [m
[32m+[m[32m      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)[m
 [m
[31m-    /**[m
[31m-     * Whether to show ok/cancel buttons. Values: `right|no`.[m
[31m-     * If set to `no` control automatically submitted when value changed.  [m
[31m-     * If control is part of form buttons will never be shown. [m
[31m-     * [m
[31m-     * @var {string|attribute} buttons[m
[31m-     * @memberOf editable-element[m
[31m-     */    [m
[31m-    self.buttons = 'right'; [m
[31m-    /**[m
[31m-     * Action when control losses focus. Values: `cancel|submit|ignore`.[m
[31m-     * Has sense only for single editable element.[m
[31m-     * Otherwise, if control is part of form - you should set `blur` of form, not of individual element.[m
[31m-     * [m
[31m-     * @var {string|attribute} blur[m
[31m-     * @memberOf editable-element[m
[31m-     */     [m
[31m-    // no real `blur` property as it is transfered to editable form[m
[32m+[m[32m      this.applyPlacement(calculatedOffset, placement)[m
 [m
[31m-    //init[m
[31m-    self.init = function(single) {[m
[31m-      self.single = single;[m
[32m+[m[32m      var complete = function () {[m
[32m+[m[32m        var prevHoverState = that.hoverState[m
[32m+[m[32m        that.$element.trigger('shown.bs.' + that.type)[m
[32m+[m[32m        that.hoverState = null[m
 [m
[31m-      self.name = $attrs.eName || $attrs[self.directiveName];[m
[31m-      /*[m
[31m-      if(!$attrs[directiveName] && !$attrs.eNgModel && ($attrs.eValue === undefined)) {[m
[31m-        throw 'You should provide value for `'+directiveName+'` or `e-value` in editable element!';[m
[31m-      }[m
[31m-      */[m
[31m-      if($attrs[self.directiveName]) {[m
[31m-        valueGetter = $parse($attrs[self.directiveName]);[m
[31m-      } else {[m
[31m-        throw 'You should provide value for `'+self.directiveName+'` in editable element!';[m
[32m+[m[32m        if (prevHoverState == 'out') that.leave(that)[m
       }[m
 [m
[31m-      // settings for single and non-single[m
[31m-      if (!self.single) {[m
[31m-        // hide buttons for non-single[m
[31m-        self.buttons = 'no';[m
[31m-      } else {[m
[31m-        self.buttons = self.attrs.buttons || editableOptions.buttons;[m
[31m-      }[m
[32m+[m[32m      $.support.transition && this.$tip.hasClass('fade') ?[m
[32m+[m[32m        $tip[m
[32m+[m[32m          .one('bsTransitionEnd', complete)[m
[32m+[m[32m          .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :[m
[32m+[m[32m        complete()[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
 [m
[31m-      //if name defined --> watch changes and update $data in form[m
[31m-      if($attrs.eName) {[m
[31m-        self.scope.$watch('$data', function(newVal){[m
[31m-          self.scope.$form.$data[$attrs.eName] = newVal;[m
[31m-        });[m
[31m-      }[m
[32m+[m[32m  Tooltip.prototype.applyPlacement = function (offset, placement) {[m
[32m+[m[32m    var $tip   = this.tip()[m
[32m+[m[32m    var width  = $tip[0].offsetWidth[m
[32m+[m[32m    var height = $tip[0].offsetHeight[m
 [m
[31m-      /**[m
[31m-       * Called when control is shown.  [m
[31m-       * See [demo](#select-remote).[m
[31m-       * [m
[31m-       * @var {method|attribute} onshow[m
[31m-       * @memberOf editable-element[m
[31m-       */[m
[31m-      if($attrs.onshow) {[m
[31m-        self.onshow = function() {[m
[31m-          return self.catchError($parse($attrs.onshow)($scope));[m
[31m-        };[m
[31m-      }[m
[32m+[m[32m    // manually read margins because getBoundingClientRect includes difference[m
[32m+[m[32m    var marginTop = parseInt($tip.css('margin-top'), 10)[m
[32m+[m[32m    var marginLeft = parseInt($tip.css('margin-left'), 10)[m
 [m
[31m-      /**[m
[31m-       * Called when control is hidden after both save or cancel.  [m
[31m-       * [m
[31m-       * @var {method|attribute} onhide[m
[31m-       * @memberOf editable-element[m
[31m-       */[m
[31m-      if($attrs.onhide) {[m
[31m-        self.onhide = function() {[m
[31m-          return $parse($attrs.onhide)($scope);[m
[31m-        };[m
[31m-      }[m
[32m+[m[32m    // we must check for NaN for ie 8/9[m
[32m+[m[32m    if (isNaN(marginTop))  marginTop  = 0[m
[32m+[m[32m    if (isNaN(marginLeft)) marginLeft = 0[m
 [m
[31m-      /**[m
[31m-       * Called when control is cancelled.  [m
[31m-       * [m
[31m-       * @var {method|attribute} oncancel[m
[31m-       * @memberOf editable-element[m
[31m-       */[m
[31m-      if($attrs.oncancel) {[m
[31m-        self.oncancel = function() {[m
[31m-          return $parse($attrs.oncancel)($scope);[m
[31m-        };[m
[31m-      }          [m
[32m+[m[32m    offset.top  = offset.top  + marginTop[m
[32m+[m[32m    offset.left = offset.left + marginLeft[m
 [m
[31m-      /**[m
[31m-       * Called during submit before value is saved to model.  [m
[31m-       * See [demo](#onbeforesave).[m
[31m-       * [m
[31m-       * @var {method|attribute} onbeforesave[m
[31m-       * @memberOf editable-element[m
[31m-       */[m
[31m-      if ($attrs.onbeforesave) {[m
[31m-        self.onbeforesave = function() {[m
[31m-          return self.catchError($parse($attrs.onbeforesave)($scope));[m
[31m-        };[m
[32m+[m[32m    // $.fn.offset doesn't round pixel values[m
[32m+[m[32m    // so we use setOffset directly with our own function B-0[m
[32m+[m[32m    $.offset.setOffset($tip[0], $.extend({[m
[32m+[m[32m      using: function (props) {[m
[32m+[m[32m        $tip.css({[m
[32m+[m[32m          top: Math.round(props.top),[m
[32m+[m[32m          left: Math.round(props.left)[m
[32m+[m[32m        })[m
       }[m
[32m+[m[32m    }, offset), 0)[m
 [m
[31m-      /**[m
[31m-       * Called during submit after value is saved to model.  [m
[31m-       * See [demo](#onaftersave).[m
[31m-       * [m
[31m-       * @var {method|attribute} onaftersave[m
[31m-       * @memberOf editable-element[m
[31m-       */[m
[31m-      if ($attrs.onaftersave) {[m
[31m-        self.onaftersave = function() {[m
[31m-          return self.catchError($parse($attrs.onaftersave)($scope));[m
[31m-        };[m
[31m-      }[m
[32m+[m[32m    $tip.addClass('in')[m
 [m
[31m-      // watch change of model to update editable element[m
[31m-      // now only add/remove `editable-empty` class.[m
[31m-      // Initially this method called with newVal = undefined, oldVal = undefined[m
[31m-      // so no need initially call handleEmpty() explicitly[m
[31m-      $scope.$parent.$watch($attrs[self.directiveName], function(newVal, oldVal) {[m
[31m-        self.setLocalValue();[m
[31m-        self.handleEmpty();[m
[31m-      });[m
[31m-    };[m
[32m+[m[32m    // check to see if placing tip in new offset caused the tip to resize itself[m
[32m+[m[32m    var actualWidth  = $tip[0].offsetWidth[m
[32m+[m[32m    var actualHeight = $tip[0].offsetHeight[m
 [m
[31m-    self.render = function() {[m
[31m-      var theme = self.theme;[m
[32m+[m[32m    if (placement == 'top' && actualHeight != height) {[m
[32m+[m[32m      offset.top = offset.top + height - actualHeight[m
[32m+[m[32m    }[m
 [m
[31m-      //build input[m
[31m-      self.inputEl = angular.element(self.inputTpl);[m
[32m+[m[32m    var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight)[m
 [m
[31m-      //build controls[m
[31m-      self.controlsEl = angular.element(theme.controlsTpl);[m
[31m-      self.controlsEl.append(self.inputEl);[m
[32m+[m[32m    if (delta.left) offset.left += delta.left[m
[32m+[m[32m    else offset.top += delta.top[m
 [m
[31m-      //build buttons[m
[31m-      if(self.buttons !== 'no') {[m
[31m-        self.buttonsEl = angular.element(theme.buttonsTpl);[m
[31m-        self.submitEl = angular.element(theme.submitTpl);[m
[31m-        self.cancelEl = angular.element(theme.cancelTpl);[m
[31m-        if(self.icon_set) {[m
[31m-          self.submitEl.find('span').addClass(self.icon_set.ok);[m
[31m-          self.cancelEl.find('span').addClass(self.icon_set.cancel);[m
[31m-        }[m
[31m-        self.buttonsEl.append(self.submitEl).append(self.cancelEl);[m
[31m-        self.controlsEl.append(self.buttonsEl);[m
[31m-        [m
[31m-        self.inputEl.addClass('editable-has-buttons');[m
[31m-      }[m
[32m+[m[32m    var isVertical          = /top|bottom/.test(placement)[m
[32m+[m[32m    var arrowDelta          = isVertical ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight[m
[32m+[m[32m    var arrowOffsetPosition = isVertical ? 'offsetWidth' : 'offsetHeight'[m
[32m+[m
[32m+[m[32m    $tip.offset(offset)[m
[32m+[m[32m    this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical)[m
[32m+[m[32m  }[m
 [m
[31m-      //build error[m
[31m-      self.errorEl = angular.element(theme.errorTpl);[m
[31m-      self.controlsEl.append(self.errorEl);[m
[32m+[m[32m  Tooltip.prototype.replaceArrow = function (delta, dimension, isHorizontal) {[m
[32m+[m[32m    this.arrow()[m
[32m+[m[32m      .css(isHorizontal ? 'left' : 'top', 50 * (1 - delta / dimension) + '%')[m
[32m+[m[32m      .css(isHorizontal ? 'top' : 'left', '')[m
[32m+[m[32m  }[m
 [m
[31m-      //build editor[m
[31m-      self.editorEl = angular.element(self.single ? theme.formTpl : theme.noformTpl);[m
[31m-      self.editorEl.append(self.controlsEl);[m
[32m+[m[32m  Tooltip.prototype.setContent = function () {[m
[32m+[m[32m    var $tip  = this.tip()[m
[32m+[m[32m    var title = this.getTitle()[m
 [m
[31m-      // transfer `e-*|data-e-*|x-e-*` attributes[m
[31m-      for(var k in $attrs.$attr) {[m
[31m-        if(k.length <= 1) {[m
[31m-          continue;[m
[31m-        }[m
[31m-        var transferAttr = false;[m
[31m-        var nextLetter = k.substring(1, 2);[m
[32m+[m[32m    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)[m
[32m+[m[32m    $tip.removeClass('fade in top bottom left right')[m
[32m+[m[32m  }[m
 [m
[31m-        // if starts with `e` + uppercase letter[m
[31m-        if(k.substring(0, 1) === 'e' && nextLetter === nextLetter.toUpperCase()) {[m
[31m-          transferAttr = k.substring(1); // cut `e`[m
[31m-        } else {[m
[31m-          continue;[m
[31m-        }[m
[31m-        [m
[31m-        // exclude `form` and `ng-submit`, [m
[31m-        if(transferAttr === 'Form' || transferAttr === 'NgSubmit') {[m
[31m-          continue;[m
[31m-        }[m
[32m+[m[32m  Tooltip.prototype.hide = function (callback) {[m
[32m+[m[32m    var that = this[m
[32m+[m[32m    var $tip = this.tip()[m
[32m+[m[32m    var e    = $.Event('hide.bs.' + this.type)[m
 [m
[31m-        // convert back to lowercase style[m
[31m-        transferAttr = transferAttr.substring(0, 1).toLowerCase() + editableUtils.camelToDash(transferAttr.substring(1));  [m
[32m+[m[32m    function complete() {[m
[32m+[m[32m      if (that.hoverState != 'in') $tip.detach()[m
[32m+[m[32m      that.$element[m
[32m+[m[32m        .removeAttr('aria-describedby')[m
[32m+[m[32m        .trigger('hidden.bs.' + that.type)[m
[32m+[m[32m      callback && callback()[m
[32m+[m[32m    }[m
 [m
[31m-        // workaround for attributes without value (e.g. `multiple = "multiple"`)[m
[31m-        // except for 'e-value'[m
[31m-        var attrValue = (transferAttr !== 'value' && $attrs[k] === '') ? transferAttr : $attrs[k];[m
[32m+[m[32m    this.$element.trigger(e)[m
 [m
[31m-        // set attributes to input[m
[31m-        self.inputEl.attr(transferAttr, attrValue);[m
[31m-      }[m
[32m+[m[32m    if (e.isDefaultPrevented()) return[m
 [m
[31m-      self.inputEl.addClass('editable-input');[m
[31m-      self.inputEl.attr('ng-model', '$data');[m
[32m+[m[32m    $tip.removeClass('in')[m
 [m
[31m-      // add directiveName class to editor, e.g. `editable-text`[m
[31m-      self.editorEl.addClass(editableUtils.camelToDash(self.directiveName));[m
[32m+[m[32m    $.support.transition && this.$tip.hasClass('fade') ?[m
[32m+[m[32m      $tip[m
[32m+[m[32m        .one('bsTransitionEnd', complete)[m
[32m+[m[32m        .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :[m
[32m+[m[32m      complete()[m
 [m
[31m-      if(self.single) {[m
[31m-        self.editorEl.attr('editable-form', '$form');[m
[31m-        // transfer `blur` to form[m
[31m-        self.editorEl.attr('blur', self.attrs.blur || (self.buttons === 'no' ? 'cancel' : editableOptions.blurElem));[m
[31m-      }[m
[32m+[m[32m    this.hoverState = null[m
 [m
[31m-      //apply `postrender` method of theme[m
[31m-      if(angular.isFunction(theme.postrender)) {[m
[31m-        theme.postrender.call(self);[m
[31m-      }[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-    };[m
[32m+[m[32m  Tooltip.prototype.fixTitle = function () {[m
[32m+[m[32m    var $e = this.$element[m
[32m+[m[32m    if ($e.attr('title') || typeof ($e.attr('data-original-title')) != 'string') {[m
[32m+[m[32m      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
 [m
[31m-    // with majority of controls copy is not needed, but..[m
[31m-    // copy MUST NOT be used for `select-multiple` with objects as items[m
[31m-    // copy MUST be used for `checklist`[m
[31m-    self.setLocalValue = function() {[m
[31m-      self.scope.$data = self.useCopy ? [m
[31m-        angular.copy(valueGetter($scope.$parent)) : [m
[31m-        valueGetter($scope.$parent);[m
[31m-    };[m
[32m+[m[32m  Tooltip.prototype.hasContent = function () {[m
[32m+[m[32m    return this.getTitle()[m
[32m+[m[32m  }[m
 [m
[31m-    //show[m
[31m-    self.show = function() {[m
[31m-      // set value of scope.$data[m
[31m-      self.setLocalValue();[m
[32m+[m[32m  Tooltip.prototype.getPosition = function ($element) {[m
[32m+[m[32m    $element   = $element || this.$element[m
 [m
[31m-      /*[m
[31m-      Originally render() was inside init() method, but some directives polluting editorEl,[m
[31m-      so it is broken on second openning.[m
[31m-      Cloning is not a solution as jqLite can not clone with event handler's.[m
[31m-      */[m
[31m-      self.render();[m
[32m+[m[32m    var el     = $element[0][m
[32m+[m[32m    var isBody = el.tagName == 'BODY'[m
 [m
[31m-      // insert into DOM[m
[31m-      $element.after(self.editorEl);[m
[32m+[m[32m    var elRect    = el.getBoundingClientRect()[m
[32m+[m[32m    if (elRect.width == null) {[m
[32m+[m[32m      // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093[m
[32m+[m[32m      elRect = $.extend({}, elRect, { width: elRect.right - elRect.left, height: elRect.bottom - elRect.top })[m
[32m+[m[32m    }[m
[32m+[m[32m    var elOffset  = isBody ? { top: 0, left: 0 } : $element.offset()[m
[32m+[m[32m    var scroll    = { scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop() }[m
[32m+[m[32m    var outerDims = isBody ? { width: $(window).width(), height: $(window).height() } : null[m
 [m
[31m-      // compile (needed to attach ng-* events from markup)[m
[31m-      $compile(self.editorEl)($scope);[m
[32m+[m[32m    return $.extend({}, elRect, scroll, outerDims, elOffset)[m
[32m+[m[32m  }[m
 [m
[31m-      // attach listeners (`escape`, autosubmit, etc)[m
[31m-      self.addListeners();[m
[32m+[m[32m  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {[m
[32m+[m[32m    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2 } :[m
[32m+[m[32m           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2 } :[m
[32m+[m[32m           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :[m
[32m+[m[32m        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width }[m
 [m
[31m-      // hide element[m
[31m-      $element.addClass('editable-hide');[m
[32m+[m[32m  }[m
 [m
[31m-      // onshow[m
[31m-      return self.onshow();[m
[31m-    };[m
[32m+[m[32m  Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {[m
[32m+[m[32m    var delta = { top: 0, left: 0 }[m
[32m+[m[32m    if (!this.$viewport) return delta[m
 [m
[31m-    //hide[m
[31m-    self.hide = function() {[m
[31m-      [m
[31m-      self.editorEl.remove();[m
[31m-      $element.removeClass('editable-hide');[m
[32m+[m[32m    var viewportPadding = this.options.viewport && this.options.viewport.padding || 0[m
[32m+[m[32m    var viewportDimensions = this.getPosition(this.$viewport)[m
 [m
[31m-      // onhide[m
[31m-      return self.onhide();[m
[31m-    };[m
[32m+[m[32m    if (/right|left/.test(placement)) {[m
[32m+[m[32m      var topEdgeOffset    = pos.top - viewportPadding - viewportDimensions.scroll[m
[32m+[m[32m      var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight[m
[32m+[m[32m      if (topEdgeOffset < viewportDimensions.top) { // top overflow[m
[32m+[m[32m        delta.top = viewportDimensions.top - topEdgeOffset[m
[32m+[m[32m      } else if (bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height) { // bottom overflow[m
[32m+[m[32m        delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset[m
[32m+[m[32m      }[m
[32m+[m[32m    } else {[m
[32m+[m[32m      var leftEdgeOffset  = pos.left - viewportPadding[m
[32m+[m[32m      var rightEdgeOffset = pos.left + viewportPadding + actualWidth[m
[32m+[m[32m      if (leftEdgeOffset < viewportDimensions.left) { // left overflow[m
[32m+[m[32m        delta.left = viewportDimensions.left - leftEdgeOffset[m
[32m+[m[32m      } else if (rightEdgeOffset > viewportDimensions.width) { // right overflow[m
[32m+[m[32m        delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
 [m
[31m-    // cancel[m
[31m-    self.cancel = function() {[m
[31m-      // oncancel[m
[31m-      self.oncancel();[m
[31m-      // don't call hide() here as it called in form's code[m
[31m-    };[m
[32m+[m[32m    return delta[m
[32m+[m[32m  }[m
 [m
[31m-    /*[m
[31m-    Called after show to attach listeners[m
[31m-    */[m
[31m-    self.addListeners = function() {[m
[31m-      // bind keyup for `escape`[m
[31m-      self.inputEl.bind('keyup', function(e) {[m
[31m-          if(!self.single) {[m
[31m-            return;[m
[31m-          }[m
[32m+[m[32m  Tooltip.prototype.getTitle = function () {[m
[32m+[m[32m    var title[m
[32m+[m[32m    var $e = this.$element[m
[32m+[m[32m    var o  = this.options[m
 [m
[31m-          // todo: move this to editable-form![m
[31m-          switch(e.keyCode) {[m
[31m-            // hide on `escape` press[m
[31m-            case 27:[m
[31m-              self.scope.$apply(function() {[m
[31m-                self.scope.$form.$cancel();[m
[31m-              });[m
[31m-            break;[m
[31m-          }[m
[31m-      });[m
[32m+[m[32m    title = $e.attr('data-original-title')[m
[32m+[m[32m      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)[m
 [m
[31m-      // autosubmit when `no buttons`[m
[31m-      if (self.single && self.buttons === 'no') {[m
[31m-        self.autosubmit();[m
[31m-      }[m
[32m+[m[32m    return title[m
[32m+[m[32m  }[m
 [m
[31m-      // click - mark element as clicked to exclude in document click handler[m
[31m-      self.editorEl.bind('click', function(e) {[m
[31m-        // ignore right/middle button click[m
[31m-        if (e.which && e.which !== 1) {[m
[31m-          return;[m
[31m-        }[m
[32m+[m[32m  Tooltip.prototype.getUID = function (prefix) {[m
[32m+[m[32m    do prefix += ~~(Math.random() * 1000000)[m
[32m+[m[32m    while (document.getElementById(prefix))[m
[32m+[m[32m    return prefix[m
[32m+[m[32m  }[m
 [m
[31m-        if (self.scope.$form.$visible) {[m
[31m-          self.scope.$form._clicked = true;[m
[31m-        }[m
[31m-      });[m
[31m-    };[m
[32m+[m[32m  Tooltip.prototype.tip = function () {[m
[32m+[m[32m    return (this.$tip = this.$tip || $(this.options.template))[m
[32m+[m[32m  }[m
 [m
[31m-    // setWaiting[m
[31m-    self.setWaiting = function(value) {[m
[31m-      if (value) {[m
[31m-        // participate in waiting only if not disabled[m
[31m-        inWaiting = !self.inputEl.attr('disabled') &&[m
[31m-                    !self.inputEl.attr('ng-disabled') &&[m
[31m-                    !self.inputEl.attr('ng-enabled');[m
[31m-        if (inWaiting) {[m
[31m-          self.inputEl.attr('disabled', 'disabled');[m
[31m-          if(self.buttonsEl) {[m
[31m-            self.buttonsEl.find('button').attr('disabled', 'disabled');[m
[31m-          }[m
[31m-        }[m
[31m-      } else {[m
[31m-        if (inWaiting) {[m
[31m-          self.inputEl.removeAttr('disabled');[m
[31m-          if (self.buttonsEl) {[m
[31m-            self.buttonsEl.find('button').removeAttr('disabled');[m
[31m-          }[m
[31m-        }[m
[31m-      }[m
[31m-    };[m
[32m+[m[32m  Tooltip.prototype.arrow = function () {[m
[32m+[m[32m    return (this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow'))[m
[32m+[m[32m  }[m
 [m
[31m-    self.activate = function(start, end) {[m
[31m-      setTimeout(function() {[m
[31m-        var el = self.inputEl[0];[m
[31m-        if (editableOptions.activate === 'focus' && el.focus) {[m
[31m-          if(start){[m
[31m-            end = end || start;[m
[31m-            el.onfocus = function(){[m
[31m-              var that = this;[m
[31m-              setTimeout(function(){[m
[31m-                that.setSelectionRange(start,end);[m
[31m-              });[m
[31m-            };[m
[31m-          }[m
[31m-          el.focus();[m
[31m-        }[m
[31m-        if (editableOptions.activate === 'select' && el.select) {[m
[31m-          el.select();[m
[31m-        }[m
[31m-      }, 0);[m
[31m-    };[m
[32m+[m[32m  Tooltip.prototype.enable = function () {[m
[32m+[m[32m    this.enabled = true[m
[32m+[m[32m  }[m
 [m
[31m-    self.setError = function(msg) {[m
[31m-      if(!angular.isObject(msg)) {[m
[31m-        $scope.$error = msg;[m
[31m-        self.error = msg;[m
[31m-      }[m
[31m-    };[m
[32m+[m[32m  Tooltip.prototype.disable = function () {[m
[32m+[m[32m    this.enabled = false[m
[32m+[m[32m  }[m
 [m
[31m-    /*[m
[31m-    Checks that result is string or promise returned string and shows it as error message[m
[31m-    Applied to onshow, onbeforesave, onaftersave[m
[31m-    */[m
[31m-    self.catchError = function(result, noPromise) {[m
[31m-      if (angular.isObject(result) && noPromise !== true) {[m
[31m-        $q.when(result).then([m
[31m-          //success and fail handlers are equal[m
[31m-          angular.bind(this, function(r) {[m
[31m-            this.catchError(r, true);[m
[31m-          }),[m
[31m-          angular.bind(this, function(r) {[m
[31m-            this.catchError(r, true);[m
[31m-          })[m
[31m-        );[m
[31m-      //check $http error[m
[31m-      } else if (noPromise && angular.isObject(result) && result.status &&[m
[31m-        (result.status !== 200) && result.data && angular.isString(result.data)) {[m
[31m-        this.setError(result.data);[m
[31m-        //set result to string: to let form know that there was error[m
[31m-        result = result.data;[m
[31m-      } else if (angular.isString(result)) {[m
[31m-        this.setError(result);[m
[32m+[m[32m  Tooltip.prototype.toggleEnabled = function () {[m
[32m+[m[32m    this.enabled = !this.enabled[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  Tooltip.prototype.toggle = function (e) {[m
[32m+[m[32m    var self = this[m
[32m+[m[32m    if (e) {[m
[32m+[m[32m      self = $(e.currentTarget).data('bs.' + this.type)[m
[32m+[m[32m      if (!self) {[m
[32m+[m[32m        self = new this.constructor(e.currentTarget, this.getDelegateOptions())[m
[32m+[m[32m        $(e.currentTarget).data('bs.' + this.type, self)[m
       }[m
[31m-      return result;[m
[31m-    };[m
[32m+[m[32m    }[m
 [m
[31m-    self.save = function() {[m
[31m-      valueGetter.assign($scope.$parent,[m
[31m-          self.useCopy ? angular.copy(self.scope.$data) : self.scope.$data);[m
[32m+[m[32m    self.tip().hasClass('in') ? self.leave(self) : self.enter(self)[m
[32m+[m[32m  }[m
 [m
[31m-      // no need to call handleEmpty here as we are watching change of model value[m
[31m-      // self.handleEmpty();[m
[31m-    };[m
[32m+[m[32m  Tooltip.prototype.destroy = function () {[m
[32m+[m[32m    var that = this[m
[32m+[m[32m    clearTimeout(this.timeout)[m
[32m+[m[32m    this.hide(function () {[m
[32m+[m[32m      that.$element.off('.' + that.type).removeData('bs.' + that.type)[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-    /*[m
[31m-    attach/detach `editable-empty` class to element[m
[31m-    */[m
[31m-    self.handleEmpty = function() {[m
[31m-      var val = valueGetter($scope.$parent);[m
[31m-      var isEmpty = val === null || val === undefined || val === "" || (angular.isArray(val) && val.length === 0); [m
[31m-      $element.toggleClass('editable-empty', isEmpty);[m
[31m-    };[m
 [m
[31m-    /*[m
[31m-    Called when `buttons = "no"` to submit automatically[m
[31m-    */[m
[31m-    self.autosubmit = angular.noop;[m
[32m+[m[32m  // TOOLTIP PLUGIN DEFINITION[m
[32m+[m[32m  // =========================[m
 [m
[31m-    self.onshow = angular.noop;[m
[31m-    self.onhide = angular.noop;[m
[31m-    self.oncancel = angular.noop;[m
[31m-    self.onbeforesave = angular.noop;[m
[31m-    self.onaftersave = angular.noop;[m
[31m-  }[m
[32m+[m[32m  function Plugin(option) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this   = $(this)[m
[32m+[m[32m      var data    = $this.data('bs.tooltip')[m
[32m+[m[32m      var options = typeof option == 'object' && option[m
 [m
[31m-  return EditableController;[m
[31m-}]);[m
[32m+[m[32m      if (!data && option == 'destroy') return[m
[32m+[m[32m      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))[m
[32m+[m[32m      if (typeof option == 'string') data[option]()[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-/*[m
[31m-editableFactory is used to generate editable directives (see `/directives` folder)[m
[31m-Inside it does several things:[m
[31m-- detect form for editable element. Form may be one of three types:[m
[31m-  1. autogenerated form (for single editable elements)[m
[31m-  2. wrapper form (element wrapped by <form> tag)[m
[31m-  3. linked form (element has `e-form` attribute pointing to existing form)[m
[32m+[m[32m  var old = $.fn.tooltip[m
 [m
[31m-- attach editableController to element[m
[32m+[m[32m  $.fn.tooltip             = Plugin[m
[32m+[m[32m  $.fn.tooltip.Constructor = Tooltip[m
 [m
[31m-Depends on: editableController, editableFormFactory[m
[31m-*/[m
[31m-angular.module('xeditable').factory('editableDirectiveFactory',[m
[31m-['$parse', '$compile', 'editableThemes', '$rootScope', '$document', 'editableController', 'editableFormController', 'editableOptions',[m
[31m-function($parse, $compile, editableThemes, $rootScope, $document, editableController, editableFormController, editableOptions) {[m
 [m
[31m-  //directive object[m
[31m-  return function(overwrites) {[m
[31m-    return {[m
[31m-      restrict: 'A',[m
[31m-      scope: true,[m
[31m-      require: [overwrites.directiveName, '?^form'],[m
[31m-      controller: editableController,[m
[31m-      link: function(scope, elem, attrs, ctrl) {[m
[31m-        // editable controller[m
[31m-        var eCtrl = ctrl[0];[m
[32m+[m[32m  // TOOLTIP NO CONFLICT[m
[32m+[m[32m  // ===================[m
 [m
[31m-        // form controller[m
[31m-        var eFormCtrl;[m
[32m+[m[32m  $.fn.tooltip.noConflict = function () {[m
[32m+[m[32m    $.fn.tooltip = old[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-        // this variable indicates is element is bound to some existing form, [m
[31m-        // or it's single element who's form will be generated automatically[m
[31m-        // By default consider single element without any linked form.ÃŸ[m
[31m-        var hasForm = false;[m
[31m-     [m
[31m-        // element wrapped by form[m
[31m-        if(ctrl[1]) {[m
[31m-          eFormCtrl = ctrl[1];[m
[31m-          hasForm = true;[m
[31m-        } else if(attrs.eForm) { // element not wrapped by <form>, but we hane `e-form` attr[m
[31m-          var getter = $parse(attrs.eForm)(scope);[m
[31m-          if(getter) { // form exists in scope (above), e.g. editable column[m
[31m-            eFormCtrl = getter;[m
[31m-            hasForm = true;[m
[31m-          } else { // form exists below or not exist at all: check document.forms[m
[31m-            for(var i=0; i<$document[0].forms.length;i++){[m
[31m-              if($document[0].forms[i].name === attrs.eForm) {[m
[31m-                // form is below and not processed yet[m
[31m-                eFormCtrl = null;[m
[31m-                hasForm = true;[m
[31m-                break;[m
[31m-              }[m
[31m-            }[m
[31m-          }[m
[31m-        }[m
[32m+[m[32m}(jQuery);[m
 [m
[31m-        /*[m
[31m-        if(hasForm && !attrs.eName) {[m
[31m-          throw 'You should provide `e-name` for editable element inside form!';[m
[31m-        }[m
[31m-        */[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: popover.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#popovers[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
 [m
[31m-        //check for `editable-form` attr in form[m
[31m-        /*[m
[31m-        if(eFormCtrl && ) {[m
[31m-          throw 'You should provide `e-name` for editable element inside form!';[m
[31m-        }[m
[31m-        */[m
 [m
[31m-        // store original props to `parent` before merge[m
[31m-        angular.forEach(overwrites, function(v, k) {[m
[31m-          if(eCtrl[k] !== undefined) {[m
[31m-            eCtrl.parent[k] = eCtrl[k];[m
[31m-          }[m
[31m-        });[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
 [m
[31m-        // merge overwrites to base editable controller[m
[31m-        angular.extend(eCtrl, overwrites);[m
[32m+[m[32m  // POPOVER PUBLIC CLASS DEFINITION[m
[32m+[m[32m  // ===============================[m
 [m
[31m-        // x-editable can be disabled using editableOption or edit-disabled attribute[m
[31m-        var disabled = angular.isDefined(attrs.editDisabled) ?[m
[31m-          scope.$eval(attrs.editDisabled) :[m
[31m-          editableOptions.isDisabled;[m
[32m+[m[32m  var Popover = function (element, options) {[m
[32m+[m[32m    this.init('popover', element, options)[m
[32m+[m[32m  }[m
 [m
[31m-        if (disabled) {[m
[31m-          return;[m
[31m-        }[m
[31m-        [m
[31m-        // init editable ctrl[m
[31m-        eCtrl.init(!hasForm);[m
[32m+[m[32m  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')[m
 [m
[31m-        // publich editable controller as `$editable` to be referenced in html[m
[31m-        scope.$editable = eCtrl;[m
[32m+[m[32m  Popover.VERSION  = '3.3.2'[m
 [m
[31m-        // add `editable` class to element[m
[31m-        elem.addClass('editable');[m
[32m+[m[32m  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {[m
[32m+[m[32m    placement: 'right',[m
[32m+[m[32m    trigger: 'click',[m
[32m+[m[32m    content: '',[m
[32m+[m[32m    template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'[m
[32m+[m[32m  })[m
 [m
[31m-        // hasForm[m
[31m-        if(hasForm) {[m
[31m-          if(eFormCtrl) {[m
[31m-            scope.$form = eFormCtrl;[m
[31m-            if(!scope.$form.$addEditable) {[m
[31m-              throw 'Form with editable elements should have `editable-form` attribute.';[m
[31m-            }[m
[31m-            scope.$form.$addEditable(eCtrl);[m
[31m-          } else {[m
[31m-            // future form (below): add editable controller to buffer and add to form later[m
[31m-            $rootScope.$$editableBuffer = $rootScope.$$editableBuffer || {};[m
[31m-            $rootScope.$$editableBuffer[attrs.eForm] = $rootScope.$$editableBuffer[attrs.eForm] || [];[m
[31m-            $rootScope.$$editableBuffer[attrs.eForm].push(eCtrl);[m
[31m-            scope.$form = null; //will be re-assigned later[m
[31m-          }[m
[31m-        // !hasForm[m
[31m-        } else {[m
[31m-          // create editableform controller[m
[31m-          scope.$form = editableFormController();[m
[31m-          // add self to editable controller[m
[31m-          scope.$form.$addEditable(eCtrl);[m
 [m
[31m-          // if `e-form` provided, publish local $form in scope[m
[31m-          if(attrs.eForm) {[m
[31m-            scope.$parent[attrs.eForm] = scope.$form;[m
[31m-          }[m
[32m+[m[32m  // NOTE: POPOVER EXTENDS tooltip.js[m
[32m+[m[32m  // ================================[m
 [m
[31m-          // bind click - if no external form defined[m
[31m-          if(!attrs.eForm || attrs.eClickable) {[m
[31m-            elem.addClass('editable-click');[m
[31m-            elem.bind(editableOptions.activationEvent, function(e) {[m
[31m-              e.preventDefault();[m
[31m-              e.editable = eCtrl;[m
[31m-              scope.$apply(function(){[m
[31m-                scope.$form.$show();[m
[31m-              });[m
[31m-            });[m
[31m-          }[m
[31m-        }[m
[32m+[m[32m  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)[m
 [m
[31m-      }[m
[31m-    };[m
[31m-  };[m
[31m-}]);[m
[32m+[m[32m  Popover.prototype.constructor = Popover[m
 [m
[31m-/*[m
[31m-Returns editableForm controller[m
[31m-*/[m
[31m-angular.module('xeditable').factory('editableFormController', [m
[31m-  ['$parse', '$document', '$rootScope', 'editablePromiseCollection', 'editableUtils',[m
[31m-  function($parse, $document, $rootScope, editablePromiseCollection, editableUtils) {[m
[32m+[m[32m  Popover.prototype.getDefaults = function () {[m
[32m+[m[32m    return Popover.DEFAULTS[m
[32m+[m[32m  }[m
 [m
[31m-  // array of opened editable forms[m
[31m-  var shown = [];[m
[32m+[m[32m  Popover.prototype.setContent = function () {[m
[32m+[m[32m    var $tip    = this.tip()[m
[32m+[m[32m    var title   = this.getTitle()[m
[32m+[m[32m    var content = this.getContent()[m
 [m
[31m-  //Check if the child element correspond or is a descendant of the parent element[m
[31m-  var isSelfOrDescendant = function (parent, child) {[m
[31m-    if (child == parent) {[m
[31m-      return true;[m
[31m-    }[m
[32m+[m[32m    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)[m
[32m+[m[32m    $tip.find('.popover-content').children().detach().end()[ // we use append for html objects to maintain js events[m
[32m+[m[32m      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'[m
[32m+[m[32m    ](content)[m
 [m
[31m-    var node = child.parentNode;[m
[31m-    while (node !== null) {[m
[31m-      if (node == parent) {[m
[31m-        return true;[m
[31m-      }[m
[31m-      node = node.parentNode;[m
[31m-    }[m
[31m-    return false;[m
[31m-  };[m
[31m-  [m
[31m-  //Check if it is a real blur : if the click event appear on a shown editable elem, this is not a blur.[m
[31m-  var isBlur = function(shown, event) {[m
[31m-    var isBlur = true;[m
[32m+[m[32m    $tip.removeClass('fade top bottom left right in')[m
 [m
[31m-    var editables = shown.$editables;[m
[31m-    angular.forEach(editables, function(v){[m
[31m-      var element = v.editorEl[0];[m
[31m-      if (isSelfOrDescendant(element, event.target))[m
[31m-        isBlur = false;[m
[31m-      [m
[31m-    });[m
[31m-    return isBlur;[m
[31m-  };[m
[31m-  [m
[31m-  // bind click to body: cancel|submit|ignore forms[m
[31m-  $document.bind('click', function(e) {[m
[31m-    // ignore right/middle button click[m
[31m-    if ((e.which && e.which !== 1) || e.isDefaultPrevented()) {[m
[31m-      return;[m
[31m-    }[m
[32m+[m[32m    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do[m
[32m+[m[32m    // this manually by checking the contents.[m
[32m+[m[32m    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()[m
[32m+[m[32m  }[m
 [m
[31m-    var toCancel = [];[m
[31m-    var toSubmit = [];[m
[31m-    for (var i=0; i<shown.length; i++) {[m
[32m+[m[32m  Popover.prototype.hasContent = function () {[m
[32m+[m[32m    return this.getTitle() || this.getContent()[m
[32m+[m[32m  }[m
 [m
[31m-      // exclude clicked[m
[31m-      if (shown[i]._clicked) {[m
[31m-        shown[i]._clicked = false;[m
[31m-        continue;[m
[31m-      }[m
[32m+[m[32m  Popover.prototype.getContent = function () {[m
[32m+[m[32m    var $e = this.$element[m
[32m+[m[32m    var o  = this.options[m
 [m
[31m-      // exclude waiting[m
[31m-      if (shown[i].$waiting) {[m
[31m-        continue;[m
[31m-      }[m
[32m+[m[32m    return $e.attr('data-content')[m
[32m+[m[32m      || (typeof o.content == 'function' ?[m
[32m+[m[32m            o.content.call($e[0]) :[m
[32m+[m[32m            o.content)[m
[32m+[m[32m  }[m
 [m
[31m-      if (shown[i]._blur === 'cancel' && isBlur(shown[i], e)) {[m
[31m-        toCancel.push(shown[i]);[m
[31m-      }[m
[32m+[m[32m  Popover.prototype.arrow = function () {[m
[32m+[m[32m    return (this.$arrow = this.$arrow || this.tip().find('.arrow'))[m
[32m+[m[32m  }[m
 [m
[31m-      if (shown[i]._blur === 'submit' && isBlur(shown[i], e)) {[m
[31m-        toSubmit.push(shown[i]);[m
[31m-      }[m
[31m-    }[m
[32m+[m[32m  Popover.prototype.tip = function () {[m
[32m+[m[32m    if (!this.$tip) this.$tip = $(this.options.template)[m
[32m+[m[32m    return this.$tip[m
[32m+[m[32m  }[m
 [m
[31m-    if (toCancel.length || toSubmit.length) {[m
[31m-      $rootScope.$apply(function() {[m
[31m-        angular.forEach(toCancel, function(v){ v.$cancel(); });[m
[31m-        angular.forEach(toSubmit, function(v){ v.$submit(); });[m
[31m-      });[m
[31m-    }[m
[31m-  });[m
[31m- [m
 [m
[31m-  var base = {[m
[31m-    $addEditable: function(editable) {[m
[31m-      //console.log('add editable', editable.elem, editable.elem.bind);[m
[31m-      this.$editables.push(editable);[m
[32m+[m[32m  // POPOVER PLUGIN DEFINITION[m
[32m+[m[32m  // =========================[m
 [m
[31m-      //'on' is not supported in angular 1.0.8[m
[31m-      editable.elem.bind('$destroy', angular.bind(this, this.$removeEditable, editable));[m
[32m+[m[32m  function Plugin(option) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this   = $(this)[m
[32m+[m[32m      var data    = $this.data('bs.popover')[m
[32m+[m[32m      var options = typeof option == 'object' && option[m
 [m
[31m-      //bind editable's local $form to self (if not bound yet, below form) [m
[31m-      if (!editable.scope.$form) {[m
[31m-        editable.scope.$form = this;[m
[31m-      }[m
[32m+[m[32m      if (!data && option == 'destroy') return[m
[32m+[m[32m      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))[m
[32m+[m[32m      if (typeof option == 'string') data[option]()[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-      //if form already shown - call show() of new editable[m
[31m-      if (this.$visible) {[m
[31m-        editable.catchError(editable.show());[m
[31m-      }[m
[31m-    },[m
[32m+[m[32m  var old = $.fn.popover[m
 [m
[31m-    $removeEditable: function(editable) {[m
[31m-      //arrayRemove[m
[31m-      for(var i=0; i < this.$editables.length; i++) {[m
[31m-        if(this.$editables[i] === editable) {[m
[31m-          this.$editables.splice(i, 1);[m
[31m-          return;[m
[31m-        }[m
[31m-      }[m
[31m-    },[m
[32m+[m[32m  $.fn.popover             = Plugin[m
[32m+[m[32m  $.fn.popover.Constructor = Popover[m
 [m
[31m-    /**[m
[31m-     * Shows form with editable controls.[m
[31m-     * [m
[31m-     * @method $show()[m
[31m-     * @memberOf editable-form[m
[31m-     */[m
[31m-    $show: function() {[m
[31m-      if (this.$visible) {[m
[31m-        return;[m
[31m-      }[m
 [m
[31m-      this.$visible = true;[m
[32m+[m[32m  // POPOVER NO CONFLICT[m
[32m+[m[32m  // ===================[m
 [m
[31m-      var pc = editablePromiseCollection();[m
[32m+[m[32m  $.fn.popover.noConflict = function () {[m
[32m+[m[32m    $.fn.popover = old[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-      //own show[m
[31m-      pc.when(this.$onshow());[m
[32m+[m[32m}(jQuery);[m
 [m
[31m-      //clear errors[m
[31m-      this.$setError(null, '');[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: scrollspy.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#scrollspy[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
 [m
[31m-      //children show[m
[31m-      angular.forEach(this.$editables, function(editable) {[m
[31m-        pc.when(editable.show());[m
[31m-      });[m
 [m
[31m-      //wait promises and activate[m
[31m-      pc.then({[m
[31m-        onWait: angular.bind(this, this.$setWaiting), [m
[31m-        onTrue: angular.bind(this, this.$activate), [m
[31m-        onFalse: angular.bind(this, this.$activate), [m
[31m-        onString: angular.bind(this, this.$activate)[m
[31m-      });[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
 [m
[31m-      // add to internal list of shown forms[m
[31m-      // setTimeout needed to prevent closing right after opening (e.g. when trigger by button)[m
[31m-      setTimeout(angular.bind(this, function() {[m
[31m-        // clear `clicked` to get ready for clicks on visible form[m
[31m-        this._clicked = false;[m
[31m-        if(editableUtils.indexOf(shown, this) === -1) {[m
[31m-          shown.push(this);[m
[31m-        }[m
[31m-      }), 0);      [m
[31m-    },[m
[32m+[m[32m  // SCROLLSPY CLASS DEFINITION[m
[32m+[m[32m  // ==========================[m
 [m
[31m-    /**[m
[31m-     * Sets focus on form field specified by `name`.[m
[31m-     * [m
[31m-     * @method $activate(name)[m
[31m-     * @param {string} name name of field[m
[31m-     * @memberOf editable-form[m
[31m-     */[m
[31m-    $activate: function(name) {[m
[31m-      var i;[m
[31m-      if (this.$editables.length) {[m
[31m-        //activate by name[m
[31m-        if (angular.isString(name)) {[m
[31m-          for(i=0; i<this.$editables.length; i++) {[m
[31m-            if (this.$editables[i].name === name) {[m
[31m-              this.$editables[i].activate();[m
[31m-              return;[m
[31m-            }[m
[31m-          }[m
[31m-        }[m
[32m+[m[32m  function ScrollSpy(element, options) {[m
[32m+[m[32m    var process  = $.proxy(this.process, this)[m
 [m
[31m-        //try activate error field[m
[31m-        for(i=0; i<this.$editables.length; i++) {[m
[31m-          if (this.$editables[i].error) {[m
[31m-            this.$editables[i].activate();[m
[31m-            return;[m
[31m-          }[m
[31m-        }[m
[32m+[m[32m    this.$body          = $('body')[m
[32m+[m[32m    this.$scrollElement = $(element).is('body') ? $(window) : $(element)[m
[32m+[m[32m    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)[m
[32m+[m[32m    this.selector       = (this.options.target || '') + ' .nav li > a'[m
[32m+[m[32m    this.offsets        = [][m
[32m+[m[32m    this.targets        = [][m
[32m+[m[32m    this.activeTarget   = null[m
[32m+[m[32m    this.scrollHeight   = 0[m
 [m
[31m-        //by default activate first field[m
[31m-        this.$editables[0].activate(this.$editables[0].elem[0].selectionStart, this.$editables[0].elem[0].selectionEnd);[m
[31m-      }[m
[31m-    },[m
[32m+[m[32m    this.$scrollElement.on('scroll.bs.scrollspy', process)[m
[32m+[m[32m    this.refresh()[m
[32m+[m[32m    this.process()[m
[32m+[m[32m  }[m
 [m
[31m-    /**[m
[31m-     * Hides form with editable controls without saving.[m
[31m-     * [m
[31m-     * @method $hide()[m
[31m-     * @memberOf editable-form[m
[31m-     */[m
[31m-    $hide: function() {[m
[31m-      if (!this.$visible) {[m
[31m-        return;[m
[31m-      }      [m
[31m-      this.$visible = false;[m
[31m-      // self hide[m
[31m-      this.$onhide();[m
[31m-      // children's hide[m
[31m-      angular.forEach(this.$editables, function(editable) {[m
[31m-        editable.hide();[m
[31m-      });[m
[32m+[m[32m  ScrollSpy.VERSION  = '3.3.2'[m
 [m
[31m-      // remove from internal list of shown forms[m
[31m-      editableUtils.arrayRemove(shown, this);[m
[31m-    },[m
[32m+[m[32m  ScrollSpy.DEFAULTS = {[m
[32m+[m[32m    offset: 10[m
[32m+[m[32m  }[m
 [m
[31m-    /**[m
[31m-     * Triggers `oncancel` event and calls `$hide()`.[m
[31m-     * [m
[31m-     * @method $cancel()[m
[31m-     * @memberOf editable-form[m
[31m-     */[m
[31m-    $cancel: function() {[m
[31m-      if (!this.$visible) {[m
[31m-        return;[m
[31m-      }      [m
[31m-      // self cancel[m
[31m-      this.$oncancel();[m
[31m-      // children's cancel      [m
[31m-      angular.forEach(this.$editables, function(editable) {[m
[31m-        editable.cancel();[m
[31m-      });[m
[31m-      // self hide[m
[31m-      this.$hide();[m
[31m-    },    [m
[32m+[m[32m  ScrollSpy.prototype.getScrollHeight = function () {[m
[32m+[m[32m    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)[m
[32m+[m[32m  }[m
 [m
[31m-    $setWaiting: function(value) {[m
[31m-      this.$waiting = !!value;[m
[31m-      // we can't just set $waiting variable and use it via ng-disabled in children[m
[31m-      // because in editable-row form is not accessible[m
[31m-      angular.forEach(this.$editables, function(editable) {[m
[31m-        editable.setWaiting(!!value);[m
[31m-      });[m
[31m-    },[m
[32m+[m[32m  ScrollSpy.prototype.refresh = function () {[m
[32m+[m[32m    var offsetMethod = 'offset'[m
[32m+[m[32m    var offsetBase   = 0[m
 [m
[31m-    /**[m
[31m-     * Shows error message for particular field.[m
[31m-     * [m
[31m-     * @method $setError(name, msg)[m
[31m-     * @param {string} name name of field[m
[31m-     * @param {string} msg error message[m
[31m-     * @memberOf editable-form[m
[31m-     */[m
[31m-    $setError: function(name, msg) {[m
[31m-      angular.forEach(this.$editables, function(editable) {[m
[31m-        if(!name || editable.name === name) {[m
[31m-          editable.setError(msg);[m
[31m-        }[m
[31m-      });[m
[31m-    },[m
[32m+[m[32m    if (!$.isWindow(this.$scrollElement[0])) {[m
[32m+[m[32m      offsetMethod = 'position'[m
[32m+[m[32m      offsetBase   = this.$scrollElement.scrollTop()[m
[32m+[m[32m    }[m
 [m
[31m-    $submit: function() {[m
[31m-      if (this.$waiting) {[m
[31m-        return;[m
[31m-      } [m
[32m+[m[32m    this.offsets = [][m
[32m+[m[32m    this.targets = [][m
[32m+[m[32m    this.scrollHeight = this.getScrollHeight()[m
 [m
[31m-      //clear errors[m
[31m-      this.$setError(null, '');[m
[32m+[m[32m    var self     = this[m
 [m
[31m-      //children onbeforesave[m
[31m-      var pc = editablePromiseCollection();[m
[31m-      angular.forEach(this.$editables, function(editable) {[m
[31m-        pc.when(editable.onbeforesave());[m
[31m-      });[m
[32m+[m[32m    this.$body[m
[32m+[m[32m      .find(this.selector)[m
[32m+[m[32m      .map(function () {[m
[32m+[m[32m        var $el   = $(this)[m
[32m+[m[32m        var href  = $el.data('target') || $el.attr('href')[m
[32m+[m[32m        var $href = /^#./.test(href) && $(href)[m
 [m
[31m-      /*[m
[31m-      onbeforesave result:[m
[31m-      - true/undefined: save data and close form[m
[31m-      - false: close form without saving[m
[31m-      - string: keep form open and show error[m
[31m-      */[m
[31m-      pc.then({[m
[31m-        onWait: angular.bind(this, this.$setWaiting), [m
[31m-        onTrue: angular.bind(this, checkSelf, true), [m
[31m-        onFalse: angular.bind(this, checkSelf, false), [m
[31m-        onString: angular.bind(this, this.$activate)[m
[31m-      });[m
[32m+[m[32m        return ($href[m
[32m+[m[32m          && $href.length[m
[32m+[m[32m          && $href.is(':visible')[m
[32m+[m[32m          && [[$href[offsetMethod]().top + offsetBase, href]]) || null[m
[32m+[m[32m      })[m
[32m+[m[32m      .sort(function (a, b) { return a[0] - b[0] })[m
[32m+[m[32m      .each(function () {[m
[32m+[m[32m        self.offsets.push(this[0])[m
[32m+[m[32m        self.targets.push(this[1])[m
[32m+[m[32m      })[m
[32m+[m[32m  }[m
 [m
[31m-      //save[m
[31m-      function checkSelf(childrenTrue){[m
[31m-        var pc = editablePromiseCollection();[m
[31m-        pc.when(this.$onbeforesave());[m
[31m-        pc.then({[m
[31m-          onWait: angular.bind(this, this.$setWaiting), [m
[31m-          onTrue: childrenTrue ? angular.bind(this, this.$save) : angular.bind(this, this.$hide), [m
[31m-          onFalse: angular.bind(this, this.$hide), [m
[31m-          onString: angular.bind(this, this.$activate)[m
[31m-        });[m
[31m-      }[m
[31m-    },[m
[32m+[m[32m  ScrollSpy.prototype.process = function () {[m
[32m+[m[32m    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset[m
[32m+[m[32m    var scrollHeight = this.getScrollHeight()[m
[32m+[m[32m    var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()[m
[32m+[m[32m    var offsets      = this.offsets[m
[32m+[m[32m    var targets      = this.targets[m
[32m+[m[32m    var activeTarget = this.activeTarget[m
[32m+[m[32m    var i[m
 [m
[31m-    $save: function() {[m
[31m-      // write model for each editable[m
[31m-      angular.forEach(this.$editables, function(editable) {[m
[31m-        editable.save();[m
[31m-      });[m
[32m+[m[32m    if (this.scrollHeight != scrollHeight) {[m
[32m+[m[32m      this.refresh()[m
[32m+[m[32m    }[m
 [m
[31m-      //call onaftersave of self and children[m
[31m-      var pc = editablePromiseCollection();[m
[31m-      pc.when(this.$onaftersave());[m
[31m-      angular.forEach(this.$editables, function(editable) {[m
[31m-        pc.when(editable.onaftersave());[m
[31m-      });[m
[32m+[m[32m    if (scrollTop >= maxScroll) {[m
[32m+[m[32m      return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)[m
[32m+[m[32m    }[m
 [m
[31m-      /*[m
[31m-      onaftersave result:[m
[31m-      - true/undefined/false: just close form[m
[31m-      - string: keep form open and show error[m
[31m-      */[m
[31m-      pc.then({[m
[31m-        onWait: angular.bind(this, this.$setWaiting), [m
[31m-        onTrue: angular.bind(this, this.$hide), [m
[31m-        onFalse: angular.bind(this, this.$hide), [m
[31m-        onString: angular.bind(this, this.$activate)[m
[31m-      });[m
[31m-    },[m
[32m+[m[32m    if (activeTarget && scrollTop < offsets[0]) {[m
[32m+[m[32m      this.activeTarget = null[m
[32m+[m[32m      return this.clear()[m
[32m+[m[32m    }[m
 [m
[31m-    $onshow: angular.noop,[m
[31m-    $oncancel: angular.noop,[m
[31m-    $onhide: angular.noop,[m
[31m-    $onbeforesave: angular.noop,[m
[31m-    $onaftersave: angular.noop[m
[31m-  };[m
[32m+[m[32m    for (i = offsets.length; i--;) {[m
[32m+[m[32m      activeTarget != targets[i][m
[32m+[m[32m        && scrollTop >= offsets[i][m
[32m+[m[32m        && (!offsets[i + 1] || scrollTop <= offsets[i + 1])[m
[32m+[m[32m        && this.activate(targets[i])[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
 [m
[31m-  return function() {[m
[31m-    return angular.extend({[m
[31m-      $editables: [],[m
[31m-      /**[m
[31m-       * Form visibility flag.[m
[31m-       * [m
[31m-       * @var {bool} $visible[m
[31m-       * @memberOf editable-form[m
[31m-       */[m
[31m-      $visible: false,[m
[31m-      /**[m
[31m-       * Form waiting flag. It becomes `true` when form is loading or saving data.[m
[31m-       * [m
[31m-       * @var {bool} $waiting[m
[31m-       * @memberOf editable-form[m
[31m-       */[m
[31m-      $waiting: false,[m
[31m-      $data: {},[m
[31m-      _clicked: false,[m
[31m-      _blur: null[m
[31m-    }, base);[m
[31m-  };[m
[31m-}]);[m
[32m+[m[32m  ScrollSpy.prototype.activate = function (target) {[m
[32m+[m[32m    this.activeTarget = target[m
 [m
[31m-/**[m
[31m- * EditableForm directive. Should be defined in <form> containing editable controls.  [m
[31m- * It add some usefull methods to form variable exposed to scope by `name="myform"` attribute.[m
[31m- *[m
[31m- * @namespace editable-form[m
[31m- */[m
[31m-angular.module('xeditable').directive('editableForm',[m
[31m-  ['$rootScope', '$parse', 'editableFormController', 'editableOptions',[m
[31m-  function($rootScope, $parse, editableFormController, editableOptions) {[m
[31m-    return {[m
[31m-      restrict: 'A',[m
[31m-      require: ['form'],[m
[31m-      //require: ['form', 'editableForm'],[m
[31m-      //controller: EditableFormController,[m
[31m-      compile: function() {[m
[31m-        return {[m
[31m-          pre: function(scope, elem, attrs, ctrl) {[m
[31m-            var form = ctrl[0];[m
[31m-            var eForm;[m
[32m+[m[32m    this.clear()[m
 [m
[31m-            //if `editableForm` has value - publish smartly under this value[m
[31m-            //this is required only for single editor form that is created and removed[m
[31m-            if(attrs.editableForm) {[m
[31m-              if(scope[attrs.editableForm] && scope[attrs.editableForm].$show) {[m
[31m-                eForm = scope[attrs.editableForm];[m
[31m-                angular.extend(form, eForm);[m
[31m-              } else {[m
[31m-                eForm = editableFormController();[m
[31m-                scope[attrs.editableForm] = eForm;[m
[31m-                angular.extend(eForm, form);[m
[31m-              }[m
[31m-            } else { //just merge to form and publish if form has name[m
[31m-              eForm = editableFormController();[m
[31m-              angular.extend(form, eForm);[m
[31m-            }[m
[32m+[m[32m    var selector = this.selector +[m
[32m+[m[32m        '[data-target="' + target + '"],' +[m
[32m+[m[32m        this.selector + '[href="' + target + '"]'[m
 [m
[31m-            //read editables from buffer (that appeared before FORM tag)[m
[31m-            var buf = $rootScope.$$editableBuffer;[m
[31m-            var name = form.$name;[m
[31m-            if(name && buf && buf[name]) {[m
[31m-              angular.forEach(buf[name], function(editable) {[m
[31m-                eForm.$addEditable(editable);[m
[31m-              });[m
[31m-              delete buf[name];[m
[31m-            }[m
[31m-          },[m
[31m-          post: function(scope, elem, attrs, ctrl) {[m
[31m-            var eForm;[m
[32m+[m[32m    var active = $(selector)[m
[32m+[m[32m      .parents('li')[m
[32m+[m[32m      .addClass('active')[m
 [m
[31m-            if(attrs.editableForm && scope[attrs.editableForm] && scope[attrs.editableForm].$show) {[m
[31m-              eForm = scope[attrs.editableForm];[m
[31m-            } else {[m
[31m-              eForm = ctrl[0];[m
[31m-            }[m
[32m+[m[32m    if (active.parent('.dropdown-menu').length) {[m
[32m+[m[32m      active = active[m
[32m+[m[32m        .closest('li.dropdown')[m
[32m+[m[32m        .addClass('active')[m
[32m+[m[32m    }[m
 [m
[31m-            /**[m
[31m-             * Called when form is shown.[m
[31m-             * [m
[31m-             * @var {method|attribute} onshow [m
[31m-             * @memberOf editable-form[m
[31m-             */[m
[31m-            if(attrs.onshow) {[m
[31m-              eForm.$onshow = angular.bind(eForm, $parse(attrs.onshow), scope);[m
[31m-            }[m
[32m+[m[32m    active.trigger('activate.bs.scrollspy')[m
[32m+[m[32m  }[m
 [m
[31m-            /**[m
[31m-             * Called when form hides after both save or cancel.[m
[31m-             * [m
[31m-             * @var {method|attribute} onhide [m
[31m-             * @memberOf editable-form[m
[31m-             */[m
[31m-            if(attrs.onhide) {[m
[31m-              eForm.$onhide = angular.bind(eForm, $parse(attrs.onhide), scope);[m
[31m-            }[m
[32m+[m[32m  ScrollSpy.prototype.clear = function () {[m
[32m+[m[32m    $(this.selector)[m
[32m+[m[32m      .parentsUntil(this.options.target, '.active')[m
[32m+[m[32m      .removeClass('active')[m
[32m+[m[32m  }[m
 [m
[31m-            /**[m
[31m-             * Called when form is cancelled.[m
[31m-             * [m
[31m-             * @var {method|attribute} oncancel[m
[31m-             * @memberOf editable-form[m
[31m-             */[m
[31m-            if(attrs.oncancel) {[m
[31m-              eForm.$oncancel = angular.bind(eForm, $parse(attrs.oncancel), scope);[m
[31m-            }[m
 [m
[31m-            /**[m
[31m-             * Whether form initially rendered in shown state.[m
[31m-             *[m
[31m-             * @var {bool|attribute} shown[m
[31m-             * @memberOf editable-form[m
[31m-             */[m
[31m-            if(attrs.shown && $parse(attrs.shown)(scope)) {[m
[31m-              eForm.$show();[m
[31m-            }[m
[32m+[m[32m  // SCROLLSPY PLUGIN DEFINITION[m
[32m+[m[32m  // ===========================[m
 [m
[31m-            /**[m
[31m-             * Action when form losses focus. Values: `cancel|submit|ignore`.[m
[31m-             * Default is `ignore`.[m
[31m-             * [m
[31m-             * @var {string|attribute} blur[m
[31m-             * @memberOf editable-form[m
[31m-             */[m
[31m-            eForm._blur = attrs.blur || editableOptions.blurForm;[m
[32m+[m[32m  function Plugin(option) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this   = $(this)[m
[32m+[m[32m      var data    = $this.data('bs.scrollspy')[m
[32m+[m[32m      var options = typeof option == 'object' && option[m
 [m
[31m-            // onbeforesave, onaftersave[m
[31m-            if(!attrs.ngSubmit && !attrs.submit) {[m
[31m-              /**[m
[31m-               * Called after all children `onbeforesave` callbacks but before saving form values[m
[31m-               * to model.  [m
[31m-               * If at least one children callback returns `non-string` - it will not not be called.  [m
[31m-               * See [editable-form demo](#editable-form) for details.[m
[31m-               * [m
[31m-               * @var {method|attribute} onbeforesave[m
[31m-               * @memberOf editable-form[m
[31m-               * [m
[31m-               */[m
[31m-              if(attrs.onbeforesave) {[m
[31m-                eForm.$onbeforesave = function() {[m
[31m-                  return $parse(attrs.onbeforesave)(scope, {$data: eForm.$data});[m
[31m-                };[m
[31m-              }[m
[32m+[m[32m      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))[m
[32m+[m[32m      if (typeof option == 'string') data[option]()[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-              /**[m
[31m-               * Called when form values are saved to model.  [m
[31m-               * See [editable-form demo](#editable-form) for details.[m
[31m-               * [m
[31m-               * @var {method|attribute} onaftersave [m
[31m-               * @memberOf editable-form[m
[31m-               * [m
[31m-               */[m
[31m-              if(attrs.onaftersave) {[m
[31m-                eForm.$onaftersave = function() {[m
[31m-                  return $parse(attrs.onaftersave)(scope, {$data: eForm.$data});[m
[31m-                };[m
[31m-              }[m
[32m+[m[32m  var old = $.fn.scrollspy[m
 [m
[31m-              elem.bind('submit', function(event) {[m
[31m-                event.preventDefault();[m
[31m-                scope.$apply(function() {[m
[31m-                  eForm.$submit();[m
[31m-                });[m
[31m-              });[m
[31m-            }[m
[32m+[m[32m  $.fn.scrollspy             = Plugin[m
[32m+[m[32m  $.fn.scrollspy.Constructor = ScrollSpy[m
 [m
 [m
[31m-            // click - mark form as clicked to exclude in document click handler[m
[31m-            elem.bind('click', function(e) {[m
[31m-              // ignore right/middle button click[m
[31m-              if (e.which && e.which !== 1) {[m
[31m-                return;[m
[31m-              }[m
[32m+[m[32m  // SCROLLSPY NO CONFLICT[m
[32m+[m[32m  // =====================[m
 [m
[31m-              if (eForm.$visible) {[m
[31m-                eForm._clicked = true;[m
[31m-              }[m
[31m-            });   [m
[32m+[m[32m  $.fn.scrollspy.noConflict = function () {[m
[32m+[m[32m    $.fn.scrollspy = old[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-          }[m
[31m-        };[m
[31m-      }[m
[31m-    };[m
[31m-}]);[m
[31m-/**[m
[31m- * editablePromiseCollection[m
[31m- *  [m
[31m- * Collect results of function calls. Shows waiting if there are promises. [m
[31m- * Finally, applies callbacks if:[m
[31m- * - onTrue(): all results are true and all promises resolved to true[m
[31m- * - onFalse(): at least one result is false or promise resolved to false[m
[31m- * - onString(): at least one result is string or promise rejected or promise resolved to string[m
[31m- */[m
 [m
[31m-angular.module('xeditable').factory('editablePromiseCollection', ['$q', function($q) { [m
[32m+[m[32m  // SCROLLSPY DATA-API[m
[32m+[m[32m  // ==================[m
 [m
[31m-  function promiseCollection() {[m
[31m-    return {[m
[31m-      promises: [],[m
[31m-      hasFalse: false,[m
[31m-      hasString: false,[m
[31m-      when: function(result, noPromise) {[m
[31m-        if (result === false) {[m
[31m-          this.hasFalse = true;[m
[31m-        } else if (!noPromise && angular.isObject(result)) {[m
[31m-          this.promises.push($q.when(result));[m
[31m-        } else if (angular.isString(result)){[m
[31m-          this.hasString = true;[m
[31m-        } else { //result === true || result === undefined || result === null[m
[31m-          return;[m
[31m-        }[m
[31m-      },[m
[31m-      //callbacks: onTrue, onFalse, onString[m
[31m-      then: function(callbacks) {[m
[31m-        callbacks = callbacks || {};[m
[31m-        var onTrue = callbacks.onTrue || angular.noop;[m
[31m-        var onFalse = callbacks.onFalse || angular.noop;[m
[31m-        var onString = callbacks.onString || angular.noop;[m
[31m-        var onWait = callbacks.onWait || angular.noop;[m
[32m+[m[32m  $(window).on('load.bs.scrollspy.data-api', function () {[m
[32m+[m[32m    $('[data-spy="scroll"]').each(function () {[m
[32m+[m[32m      var $spy = $(this)[m
[32m+[m[32m      Plugin.call($spy, $spy.data())[m
[32m+[m[32m    })[m
[32m+[m[32m  })[m
 [m
[31m-        var self = this;[m
[32m+[m[32m}(jQuery);[m
 [m
[31m-        if (this.promises.length) {[m
[31m-          onWait(true);[m
[31m-          $q.all(this.promises).then([m
[31m-            //all resolved       [m
[31m-            function(results) {[m
[31m-              onWait(false);[m
[31m-              //check all results via same `when` method (without checking promises)[m
[31m-              angular.forEach(results, function(result) {[m
[31m-                self.when(result, true);  [m
[31m-              });[m
[31m-              applyCallback();[m
[31m-            },[m
[31m-            //some rejected[m
[31m-            function(error) { [m
[31m-              onWait(false);[m
[31m-              onString();[m
[31m-            }[m
[31m-            );[m
[31m-        } else {[m
[31m-          applyCallback();[m
[31m-        }[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: tab.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#tabs[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
 [m
[31m-        function applyCallback() {[m
[31m-          if (!self.hasString && !self.hasFalse) {[m
[31m-            onTrue();[m
[31m-          } else if (!self.hasString && self.hasFalse) {[m
[31m-            onFalse();[m
[31m-          } else {[m
[31m-            onString();[m
[31m-          }[m
[31m-        }[m
 [m
[31m-      }[m
[31m-    };[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
[32m+[m
[32m+[m[32m  // TAB CLASS DEFINITION[m
[32m+[m[32m  // ====================[m
[32m+[m
[32m+[m[32m  var Tab = function (element) {[m
[32m+[m[32m    this.element = $(element)[m
   }[m
 [m
[31m-  return promiseCollection;[m
[32m+[m[32m  Tab.VERSION = '3.3.2'[m
 [m
[31m-}]);[m
[32m+[m[32m  Tab.TRANSITION_DURATION = 150[m
 [m
[31m-/**[m
[31m- * editableUtils[m
[31m- */[m
[31m- angular.module('xeditable').factory('editableUtils', [function() {[m
[31m-  return {[m
[31m-    indexOf: function (array, obj) {[m
[31m-      if (array.indexOf) return array.indexOf(obj);[m
[32m+[m[32m  Tab.prototype.show = function () {[m
[32m+[m[32m    var $this    = this.element[m
[32m+[m[32m    var $ul      = $this.closest('ul:not(.dropdown-menu)')[m
[32m+[m[32m    var selector = $this.data('target')[m
 [m
[31m-      for ( var i = 0; i < array.length; i++) {[m
[31m-        if (obj === array[i]) return i;[m
[31m-      }[m
[31m-      return -1;[m
[31m-    },[m
[32m+[m[32m    if (!selector) {[m
[32m+[m[32m      selector = $this.attr('href')[m
[32m+[m[32m      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7[m
[32m+[m[32m    }[m
 [m
[31m-    arrayRemove: function (array, value) {[m
[31m-      var index = this.indexOf(array, value);[m
[31m-      if (index >= 0) {[m
[31m-        array.splice(index, 1);[m
[31m-      }[m
[31m-      return value;[m
[31m-    },[m
[32m+[m[32m    if ($this.parent('li').hasClass('active')) return[m
 [m
[31m-    // copy from https://github.com/angular/angular.js/blob/master/src/Angular.js[m
[31m-    camelToDash: function(str) {[m
[31m-      var SNAKE_CASE_REGEXP = /[A-Z]/g;[m
[31m-      return str.replace(SNAKE_CASE_REGEXP, function(letter, pos) {[m
[31m-        return (pos ? '-' : '') + letter.toLowerCase();[m
[31m-      });[m
[31m-    },[m
[32m+[m[32m    var $previous = $ul.find('.active:last a')[m
[32m+[m[32m    var hideEvent = $.Event('hide.bs.tab', {[m
[32m+[m[32m      relatedTarget: $this[0][m
[32m+[m[32m    })[m
[32m+[m[32m    var showEvent = $.Event('show.bs.tab', {[m
[32m+[m[32m      relatedTarget: $previous[0][m
[32m+[m[32m    })[m
 [m
[31m-    dashToCamel: function(str) {[m
[31m-      var SPECIAL_CHARS_REGEXP = /([\:\-\_]+(.))/g;[m
[31m-      var MOZ_HACK_REGEXP = /^moz([A-Z])/;[m
[31m-      return str.[m
[31m-      replace(SPECIAL_CHARS_REGEXP, function(_, separator, letter, offset) {[m
[31m-        return offset ? letter.toUpperCase() : letter;[m
[31m-      }).[m
[31m-      replace(MOZ_HACK_REGEXP, 'Moz$1');[m
[31m-    }[m
[31m-  };[m
[31m-}]);[m
[32m+[m[32m    $previous.trigger(hideEvent)[m
[32m+[m[32m    $this.trigger(showEvent)[m
 [m
[31m-/**[m
[31m- * editableNgOptionsParser[m
[31m- *[m
[31m- * see: https://github.com/angular/angular.js/blob/master/src/ng/directive/select.js#L131[m
[31m- */[m
[31m- angular.module('xeditable').factory('editableNgOptionsParser', [function() {[m
[31m-  //0000111110000000000022220000000000000000000000333300000000000000444444444444444000000000555555555555555000000066666666666666600000000000000007777000000000000000000088888[m
[31m-  var NG_OPTIONS_REGEXP = /^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;[m
[32m+[m[32m    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) return[m
 [m
[31m-  function parser(optionsExp) {[m
[31m-    var match;[m
[32m+[m[32m    var $target = $(selector)[m
 [m
[31m-    if (! (match = optionsExp.match(NG_OPTIONS_REGEXP))) {[m
[31m-      throw 'ng-options parse error';[m
[31m-    }[m
[32m+[m[32m    this.activate($this.closest('li'), $ul)[m
[32m+[m[32m    this.activate($target, $target.parent(), function () {[m
[32m+[m[32m      $previous.trigger({[m
[32m+[m[32m        type: 'hidden.bs.tab',[m
[32m+[m[32m        relatedTarget: $this[0][m
[32m+[m[32m      })[m
[32m+[m[32m      $this.trigger({[m
[32m+[m[32m        type: 'shown.bs.tab',[m
[32m+[m[32m        relatedTarget: $previous[0][m
[32m+[m[32m      })[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-    var [m
[31m-    displayFn = match[2] || match[1],[m
[31m-    valueName = match[4] || match[6],[m
[31m-    keyName = match[5],[m
[31m-    groupByFn = match[3] || '',[m
[31m-    valueFn = match[2] ? match[1] : valueName,[m
[31m-    valuesFn = match[7],[m
[31m-    track = match[8],[m
[31m-    trackFn = track ? match[8] : null;[m
[32m+[m[32m  Tab.prototype.activate = function (element, container, callback) {[m
[32m+[m[32m    var $active    = container.find('> .active')[m
[32m+[m[32m    var transition = callback[m
[32m+[m[32m      && $.support.transition[m
[32m+[m[32m      && (($active.length && $active.hasClass('fade')) || !!container.find('> .fade').length)[m
 [m
[31m-    var ngRepeat;[m
[31m-    if (keyName === undefined) { // array[m
[31m-      ngRepeat = valueName + ' in ' + valuesFn;[m
[31m-      if (track !== undefined) {[m
[31m-        ngRepeat += ' track by '+trackFn;[m
[32m+[m[32m    function next() {[m
[32m+[m[32m      $active[m
[32m+[m[32m        .removeClass('active')[m
[32m+[m[32m        .find('> .dropdown-menu > .active')[m
[32m+[m[32m          .removeClass('active')[m
[32m+[m[32m        .end()[m
[32m+[m[32m        .find('[data-toggle="tab"]')[m
[32m+[m[32m          .attr('aria-expanded', false)[m
[32m+[m
[32m+[m[32m      element[m
[32m+[m[32m        .addClass('active')[m
[32m+[m[32m        .find('[data-toggle="tab"]')[m
[32m+[m[32m          .attr('aria-expanded', true)[m
[32m+[m
[32m+[m[32m      if (transition) {[m
[32m+[m[32m        element[0].offsetWidth // reflow for transition[m
[32m+[m[32m        element.addClass('in')[m
[32m+[m[32m      } else {[m
[32m+[m[32m        element.removeClass('fade')[m
       }[m
[31m-    } else { // object[m
[31m-      ngRepeat = '('+keyName+', '+valueName+') in '+valuesFn;[m
[31m-    }[m
[31m-    [m
[31m-    // group not supported yet[m
[31m-    return {[m
[31m-      ngRepeat: ngRepeat,[m
[31m-      locals: {[m
[31m-        valueName: valueName,[m
[31m-        keyName: keyName,[m
[31m-        valueFn: valueFn,[m
[31m-        displayFn: displayFn[m
[32m+[m
[32m+[m[32m      if (element.parent('.dropdown-menu')) {[m
[32m+[m[32m        element[m
[32m+[m[32m          .closest('li.dropdown')[m
[32m+[m[32m            .addClass('active')[m
[32m+[m[32m          .end()[m
[32m+[m[32m          .find('[data-toggle="tab"]')[m
[32m+[m[32m            .attr('aria-expanded', true)[m
       }[m
[31m-    };[m
[31m-  }[m
 [m
[31m-  return parser;[m
[31m-}]);[m
[32m+[m[32m      callback && callback()[m
[32m+[m[32m    }[m
 [m
[31m-/**[m
[31m- * editableCombodate[m
[31m- *[m
[31m- * angular version of https://github.com/vitalets/combodate[m
[31m- */[m
[31m-angular.module('xeditable').factory('editableCombodate', [function() {[m
[31m-  function Combodate(element, options) {[m
[31m-    this.$element = angular.element(element);[m
[32m+[m[32m    $active.length && transition ?[m
[32m+[m[32m      $active[m
[32m+[m[32m        .one('bsTransitionEnd', next)[m
[32m+[m[32m        .emulateTransitionEnd(Tab.TRANSITION_DURATION) :[m
[32m+[m[32m      next()[m
 [m
[31m-    if(this.$element[0].nodeName != 'INPUT') {[m
[31m-      throw 'Combodate should be applied to INPUT element';[m
[31m-    }[m
[32m+[m[32m    $active.removeClass('in')[m
[32m+[m[32m  }[m
 [m
[31m-    this.defaults = {[m
[31m-      //in this format value stored in original input[m
[31m-      format: 'YYYY-MM-DD HH:mm',[m
[31m-      //in this format items in dropdowns are displayed[m
[31m-      template: 'D / MMM / YYYY   H : mm',[m
[31m-      //initial value, can be `new Date()`[m
[31m-      value: null,[m
[31m-      minYear: 1970,[m
[31m-      maxYear: 2015,[m
[31m-      yearDescending: true,[m
[31m-      minuteStep: 5,[m
[31m-      secondStep: 1,[m
[31m-      firstItem: 'empty', //'name', 'empty', 'none'[m
[31m-      errorClass: null,[m
[31m-      customClass: '',[m
[31m-      roundTime: true, // whether to round minutes and seconds if step > 1[m
[31m-      smartDays: true // whether days in combo depend on selected month: 31, 30, 28[m
[31m-    };[m
 [m
[31m-    this.options = angular.extend({}, this.defaults, options);[m
[31m-    this.init();[m
[32m+[m[32m  // TAB PLUGIN DEFINITION[m
[32m+[m[32m  // =====================[m
[32m+[m
[32m+[m[32m  function Plugin(option) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this = $(this)[m
[32m+[m[32m      var data  = $this.data('bs.tab')[m
[32m+[m
[32m+[m[32m      if (!data) $this.data('bs.tab', (data = new Tab(this)))[m
[32m+[m[32m      if (typeof option == 'string') data[option]()[m
[32m+[m[32m    })[m
   }[m
 [m
[31m-  Combodate.prototype = {[m
[31m-    constructor: Combodate,[m
[31m-    init: function () {[m
[31m-      this.map = {[m
[31m-        //key   regexp    moment.method[m
[31m-        day:    ['D',    'date'], [m
[31m-        month:  ['M',    'month'], [m
[31m-        year:   ['Y',    'year'], [m
[31m-        hour:   ['[Hh]', 'hours'],[m
[31m-        minute: ['m',    'minutes'], [m
[31m-        second: ['s',    'seconds'],[m
[31m-        ampm:   ['[Aa]', ''] [m
[31m-      };[m
[31m-      [m
[31m-      this.$widget = angular.element('<span class="combodate"></span>').html(this.getTemplate());[m
[31m-      [m
[31m-      this.initCombos();[m
[31m-      [m
[31m-      if (this.options.smartDays) {[m
[31m-        var combo = this;[m
[31m-        this.$widget.find('select').bind('change', function(e) {[m
[31m-          // update days count if month or year changes[m
[31m-          if (angular.element(e.target).hasClass('month') || angular.element(e.target).hasClass('year')) {[m
[31m-            combo.fillCombo('day');[m
[31m-          }[m
[31m-        });        [m
[31m-      }[m
[32m+[m[32m  var old = $.fn.tab[m
 [m
[31m-      this.$widget.find('select').css('width', 'auto');[m
[32m+[m[32m  $.fn.tab             = Plugin[m
[32m+[m[32m  $.fn.tab.Constructor = Tab[m
 [m
[31m-      // hide original input and insert widget                                       [m
[31m-      this.$element.css('display', 'none').after(this.$widget);[m
[31m-      [m
[31m-      // set initial value[m
[31m-      this.setValue(this.$element.val() || this.options.value);[m
[31m-    },[m
[31m-    [m
[31m-    /*[m
[31m-     Replace tokens in template with <select> elements [m
[31m-     */         [m
[31m-     getTemplate: function() {[m
[31m-      var tpl = this.options.template;[m
[31m-      var customClass = this.options.customClass;[m
 [m
[31m-      //first pass[m
[31m-      angular.forEach(this.map, function(v, k) {[m
[31m-        v = v[0]; [m
[31m-        var r = new RegExp(v+'+');[m
[31m-        var token = v.length > 1 ? v.substring(1, 2) : v;[m
[31m-        [m
[31m-        tpl = tpl.replace(r, '{'+token+'}');[m
[31m-      });[m
[32m+[m[32m  // TAB NO CONFLICT[m
[32m+[m[32m  // ===============[m
 [m
[31m-      //replace spaces with &nbsp;[m
[31m-      tpl = tpl.replace(/ /g, '&nbsp;');[m
[32m+[m[32m  $.fn.tab.noConflict = function () {[m
[32m+[m[32m    $.fn.tab = old[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-      //second pass[m
[31m-      angular.forEach(this.map, function(v, k) {[m
[31m-        v = v[0];[m
[31m-        var token = v.length > 1 ? v.substring(1, 2) : v;[m
 [m
[31m-        tpl = tpl.replace('{'+token+'}', '<select class="'+k+' '+customClass+'"></select>');[m
[31m-      });   [m
[32m+[m[32m  // TAB DATA-API[m
[32m+[m[32m  // ============[m
 [m
[31m-      return tpl;[m
[31m-    },[m
[31m-    [m
[31m-    /*[m
[31m-     Initialize combos that presents in template [m
[31m-     */        [m
[31m-     initCombos: function() {[m
[31m-      for (var k in this.map) {[m
[31m-        var c = this.$widget[0].querySelectorAll('.'+k);[m
[31m-        // set properties like this.$day, this.$month etc.[m
[31m-        this['$'+k] = c.length ? angular.element(c) : null;[m
[31m-        // fill with items[m
[31m-        this.fillCombo(k);[m
[31m-      }[m
[31m-    },[m
[32m+[m[32m  var clickHandler = function (e) {[m
[32m+[m[32m    e.preventDefault()[m
[32m+[m[32m    Plugin.call($(this), 'show')[m
[32m+[m[32m  }[m
 [m
[31m-    /*[m
[31m-     Fill combo with items [m
[31m-     */        [m
[31m-     fillCombo: function(k) {[m
[31m-      var $combo = this['$'+k];[m
[31m-      if (!$combo) {[m
[31m-        return;[m
[31m-      }[m
[32m+[m[32m  $(document)[m
[32m+[m[32m    .on('click.bs.tab.data-api', '[data-toggle="tab"]', clickHandler)[m
[32m+[m[32m    .on('click.bs.tab.data-api', '[data-toggle="pill"]', clickHandler)[m
 [m
[31m-      // define method name to fill items, e.g `fillDays`[m
[31m-      var f = 'fill' + k.charAt(0).toUpperCase() + k.slice(1); [m
[31m-      var items = this[f]();[m
[31m-      var value = $combo.val();[m
[32m+[m[32m}(jQuery);[m
[32m+[m
[32m+[m[32m/* ========================================================================[m
[32m+[m[32m * Bootstrap: affix.js v3.3.2[m
[32m+[m[32m * http://getbootstrap.com/javascript/#affix[m
[32m+[m[32m * ========================================================================[m
[32m+[m[32m * Copyright 2011-2015 Twitter, Inc.[m
[32m+[m[32m * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
[32m+[m[32m * ======================================================================== */[m
 [m
[31m-      $combo.html('');[m
[31m-      for(var i=0; i<items.length; i++) {[m
[31m-        $combo.append('<option value="'+items[i][0]+'">'+items[i][1]+'</option>');[m
[31m-      }[m
 [m
[31m-      $combo.val(value);[m
[31m-    },[m
[32m+[m[32m+function ($) {[m
[32m+[m[32m  'use strict';[m
 [m
[31m-    /*[m
[31m-     Initialize items of combos. Handles `firstItem` option [m
[31m-     */[m
[31m-     fillCommon: function(key) {[m
[31m-      var values = [], relTime;[m
[32m+[m[32m  // AFFIX CLASS DEFINITION[m
[32m+[m[32m  // ======================[m
 [m
[31m-      if(this.options.firstItem === 'name') {[m
[31m-        //need both to support moment ver < 2 and  >= 2[m
[31m-        relTime = moment.relativeTime || moment.langData()._relativeTime; [m
[31m-        var header = typeof relTime[key] === 'function' ? relTime[key](1, true, key, false) : relTime[key];[m
[31m-        //take last entry (see momentjs lang files structure) [m
[31m-        header = header.split(' ').reverse()[0];                [m
[31m-        values.push(['', header]);[m
[31m-      } else if(this.options.firstItem === 'empty') {[m
[31m-        values.push(['', '']);[m
[31m-      }[m
[31m-      return values;[m
[31m-    },  [m
[32m+[m[32m  var Affix = function (element, options) {[m
[32m+[m[32m    this.options = $.extend({}, Affix.DEFAULTS, options)[m
 [m
[32m+[m[32m    this.$target = $(this.options.target)[m
[32m+[m[32m      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))[m
[32m+[m[32m      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))[m
 [m
[31m-    /*[m
[31m-    fill day[m
[31m-    */[m
[31m-    fillDay: function() {[m
[31m-      var items = this.fillCommon('d'), name, i,[m
[31m-      twoDigit = this.options.template.indexOf('DD') !== -1,[m
[31m-      daysCount = 31;[m
[32m+[m[32m    this.$element     = $(element)[m
[32m+[m[32m    this.affixed      =[m
[32m+[m[32m    this.unpin        =[m
[32m+[m[32m    this.pinnedOffset = null[m
 [m
[31m-      // detect days count (depends on month and year)[m
[31m-      // originally https://github.com/vitalets/combodate/pull/7[m
[31m-      if (this.options.smartDays && this.$month && this.$year) {[m
[31m-        var month = parseInt(this.$month.val(), 10);[m
[31m-        var year = parseInt(this.$year.val(), 10);[m
[32m+[m[32m    this.checkPosition()[m
[32m+[m[32m  }[m
 [m
[31m-        if (!isNaN(month) && !isNaN(year)) {[m
[31m-          daysCount = moment([year, month]).daysInMonth();[m
[31m-        }[m
[31m-      }[m
[32m+[m[32m  Affix.VERSION  = '3.3.2'[m
 [m
[31m-      for (i = 1; i <= daysCount; i++) {[m
[31m-        name = twoDigit ? this.leadZero(i) : i;[m
[31m-        items.push([i, name]);[m
[31m-      }[m
[31m-      return items;[m
[31m-    },[m
[31m-    [m
[31m-    /*[m
[31m-    fill month[m
[31m-    */[m
[31m-    fillMonth: function() {[m
[31m-      var items = this.fillCommon('M'), name, i, [m
[31m-      longNames = this.options.template.indexOf('MMMM') !== -1,[m
[31m-      shortNames = this.options.template.indexOf('MMM') !== -1,[m
[31m-      twoDigit = this.options.template.indexOf('MM') !== -1;[m
[32m+[m[32m  Affix.RESET    = 'affix affix-top affix-bottom'[m
 [m
[31m-      for(i=0; i<=11; i++) {[m
[31m-        if(longNames) {[m
[31m-          //see https://github.com/timrwood/momentjs.com/pull/36[m
[31m-          name = moment().date(1).month(i).format('MMMM');[m
[31m-        } else if(shortNames) {[m
[31m-          name = moment().date(1).month(i).format('MMM');[m
[31m-        } else if(twoDigit) {[m
[31m-          name = this.leadZero(i+1);[m
[31m-        } else {[m
[31m-          name = i+1;[m
[31m-        }[m
[31m-        items.push([i, name]);[m
[31m-      } [m
[31m-      return items;[m
[31m-    },[m
[31m-    [m
[31m-    /*[m
[31m-    fill year[m
[31m-    */[m
[31m-    fillYear: function() {[m
[31m-      var items = [], name, i, [m
[31m-      longNames = this.options.template.indexOf('YYYY') !== -1;[m
[32m+[m[32m  Affix.DEFAULTS = {[m
[32m+[m[32m    offset: 0,[m
[32m+[m[32m    target: window[m
[32m+[m[32m  }[m
 [m
[31m-      for(i=this.options.maxYear; i>=this.options.minYear; i--) {[m
[31m-        name = longNames ? i : (i+'').substring(2);[m
[31m-        items[this.options.yearDescending ? 'push' : 'unshift']([i, name]);[m
[31m-      }[m
[31m-      [m
[31m-      items = this.fillCommon('y').concat(items);[m
[31m-      [m
[31m-      return items;[m
[31m-    },[m
[31m-    [m
[31m-    /*[m
[31m-    fill hour[m
[31m-    */[m
[31m-    fillHour: function() {[m
[31m-      var items = this.fillCommon('h'), name, i,[m
[31m-      h12 = this.options.template.indexOf('h') !== -1,[m
[31m-      h24 = this.options.template.indexOf('H') !== -1,[m
[31m-      twoDigit = this.options.template.toLowerCase().indexOf('hh') !== -1,[m
[31m-      min = h12 ? 1 : 0, [m
[31m-      max = h12 ? 12 : 23;[m
[32m+[m[32m  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {[m
[32m+[m[32m    var scrollTop    = this.$target.scrollTop()[m
[32m+[m[32m    var position     = this.$element.offset()[m
[32m+[m[32m    var targetHeight = this.$target.height()[m
 [m
[31m-      for(i=min; i<=max; i++) {[m
[31m-        name = twoDigit ? this.leadZero(i) : i;[m
[31m-        items.push([i, name]);[m
[31m-      } [m
[31m-      return items;[m
[31m-    },[m
[32m+[m[32m    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false[m
 [m
[31m-    /*[m
[31m-    fill minute[m
[31m-    */[m
[31m-    fillMinute: function() {[m
[31m-      var items = this.fillCommon('m'), name, i,[m
[31m-      twoDigit = this.options.template.indexOf('mm') !== -1;[m
[32m+[m[32m    if (this.affixed == 'bottom') {[m
[32m+[m[32m      if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'[m
[32m+[m[32m      return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'[m
[32m+[m[32m    }[m
 [m
[31m-      for(i=0; i<=59; i+= this.options.minuteStep) {[m
[31m-        name = twoDigit ? this.leadZero(i) : i;[m
[31m-        items.push([i, name]);[m
[31m-      }[m
[31m-      return items;[m
[31m-    },[m
[31m-    [m
[31m-    /*[m
[31m-    fill second[m
[31m-    */[m
[31m-    fillSecond: function() {[m
[31m-      var items = this.fillCommon('s'), name, i,[m
[31m-      twoDigit = this.options.template.indexOf('ss') !== -1;[m
[32m+[m[32m    var initializing   = this.affixed == null[m
[32m+[m[32m    var colliderTop    = initializing ? scrollTop : position.top[m
[32m+[m[32m    var colliderHeight = initializing ? targetHeight : height[m
 [m
[31m-      for(i=0; i<=59; i+= this.options.secondStep) {[m
[31m-        name = twoDigit ? this.leadZero(i) : i;[m
[31m-        items.push([i, name]);[m
[31m-      }    [m
[31m-      return items;[m
[31m-    },[m
[31m-    [m
[31m-    /*[m
[31m-    fill ampm[m
[31m-    */[m
[31m-    fillAmpm: function() {[m
[31m-      var ampmL = this.options.template.indexOf('a') !== -1,[m
[31m-      ampmU = this.options.template.indexOf('A') !== -1,            [m
[31m-      items = [[m
[31m-      ['am', ampmL ? 'am' : 'AM'],[m
[31m-      ['pm', ampmL ? 'pm' : 'PM'][m
[31m-      ];[m
[31m-      return items;[m
[31m-    },[m
[32m+[m[32m    if (offsetTop != null && scrollTop <= offsetTop) return 'top'[m
[32m+[m[32m    if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'[m
 [m
[31m-    /*[m
[31m-     Returns current date value from combos. [m
[31m-     If format not specified - `options.format` used.[m
[31m-     If format = `null` - Moment object returned.[m
[31m-     */[m
[31m-     getValue: function(format) {[m
[31m-      var dt, values = {}, [m
[31m-      that = this,[m
[31m-      notSelected = false;[m
[32m+[m[32m    return false[m
[32m+[m[32m  }[m
 [m
[31m-      //getting selected values    [m
[31m-      angular.forEach(this.map, function(v, k) {[m
[31m-        if(k === 'ampm') {[m
[31m-          return;[m
[31m-        }[m
[31m-        var def = k === 'day' ? 1 : 0;[m
[32m+[m[32m  Affix.prototype.getPinnedOffset = function () {[m
[32m+[m[32m    if (this.pinnedOffset) return this.pinnedOffset[m
[32m+[m[32m    this.$element.removeClass(Affix.RESET).addClass('affix')[m
[32m+[m[32m    var scrollTop = this.$target.scrollTop()[m
[32m+[m[32m    var position  = this.$element.offset()[m
[32m+[m[32m    return (this.pinnedOffset = position.top - scrollTop)[m
[32m+[m[32m  }[m
 [m
[31m-        values[k] = that['$'+k] ? parseInt(that['$'+k].val(), 10) : def; [m
[31m-        [m
[31m-        if(isNaN(values[k])) {[m
[31m-         notSelected = true;[m
[31m-         return false; [m
[31m-       }[m
[31m-     });[m
[31m-      [m
[31m-      //if at least one visible combo not selected - return empty string[m
[31m-      if(notSelected) {[m
[31m-       return '';[m
[31m-     }[m
[32m+[m[32m  Affix.prototype.checkPositionWithEventLoop = function () {[m
[32m+[m[32m    setTimeout($.proxy(this.checkPosition, this), 1)[m
[32m+[m[32m  }[m
 [m
[31m-      //convert hours 12h --> 24h [m
[31m-      if(this.$ampm) {[m
[31m-        //12:00 pm --> 12:00 (24-h format, midday), 12:00 am --> 00:00 (24-h format, midnight, start of day)[m
[31m-        if(values.hour === 12) {[m
[31m-          values.hour = this.$ampm.val() === 'am' ? 0 : 12;                    [m
[31m-        } else {[m
[31m-          values.hour = this.$ampm.val() === 'am' ? values.hour : values.hour+12;[m
[31m-        }[m
[31m-      }[m
[31m-      [m
[31m-      dt = moment([values.year, values.month, values.day, values.hour, values.minute, values.second]);[m
[31m-      [m
[31m-      //highlight invalid date[m
[31m-      this.highlight(dt);[m
[32m+[m[32m  Affix.prototype.checkPosition = function () {[m
[32m+[m[32m    if (!this.$element.is(':visible')) return[m
 [m
[31m-      format = format === undefined ? this.options.format : format;[m
[31m-      if(format === null) {[m
[31m-       return dt.isValid() ? dt : null; [m
[31m-     } else {[m
[31m-       return dt.isValid() ? dt.format(format) : ''; [m
[31m-     }[m
[31m-   },[m
[32m+[m[32m    var height       = this.$element.height()[m
[32m+[m[32m    var offset       = this.options.offset[m
[32m+[m[32m    var offsetTop    = offset.top[m
[32m+[m[32m    var offsetBottom = offset.bottom[m
[32m+[m[32m    var scrollHeight = $('body').height()[m
 [m
[31m-   setValue: function(value) {[m
[31m-    if(!value) {[m
[31m-      return;[m
[31m-    }[m
[32m+[m[32m    if (typeof offset != 'object')         offsetBottom = offsetTop = offset[m
[32m+[m[32m    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)[m
[32m+[m[32m    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)[m
 [m
[31m-      // parse in strict mode (third param `true`)[m
[31m-      var dt = typeof value === 'string' ? moment(value, this.options.format, true) : moment(value),[m
[31m-      that = this,[m
[31m-      values = {};[m
[31m-      [m
[31m-      //function to find nearest value in select options[m
[31m-      function getNearest($select, value) {[m
[31m-        var delta = {};[m
[31m-        angular.forEach($select.children('option'), function(opt, i){[m
[31m-          var optValue = angular.element(opt).attr('value');[m
[32m+[m[32m    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)[m
 [m
[31m-          if(optValue === '') return;[m
[31m-          var distance = Math.abs(optValue - value); [m
[31m-          if(typeof delta.distance === 'undefined' || distance < delta.distance) {[m
[31m-            delta = {value: optValue, distance: distance};[m
[31m-          } [m
[31m-        }); [m
[31m-        return delta.value;[m
[31m-      }[m
[31m-      [m
[31m-      if(dt.isValid()) {[m
[31m-        //read values from date object[m
[31m-        angular.forEach(this.map, function(v, k) {[m
[31m-          if(k === 'ampm') {[m
[31m-            return; [m
[31m-          }[m
[31m-          values[k] = dt[v[1]]();[m
[31m-        });[m
[32m+[m[32m    if (this.affixed != affix) {[m
[32m+[m[32m      if (this.unpin != null) this.$element.css('top', '')[m
 [m
[31m-        if(this.$ampm) {[m
[31m-          //12:00 pm --> 12:00 (24-h format, midday), 12:00 am --> 00:00 (24-h format, midnight, start of day)[m
[31m-          if(values.hour >= 12) {[m
[31m-            values.ampm = 'pm';[m
[31m-            if(values.hour > 12) {[m
[31m-              values.hour -= 12;[m
[31m-            }[m
[31m-          } else {[m
[31m-            values.ampm = 'am';[m
[31m-            if(values.hour === 0) {[m
[31m-              values.hour = 12;[m
[31m-            }[m
[31m-          }[m
[31m-        }[m
[32m+[m[32m      var affixType = 'affix' + (affix ? '-' + affix : '')[m
[32m+[m[32m      var e         = $.Event(affixType + '.bs.affix')[m
 [m
[31m-        angular.forEach(values, function(v, k) {[m
[31m-          //call val() for each existing combo, e.g. this.$hour.val()[m
[31m-          if(that['$'+k]) {[m
[32m+[m[32m      this.$element.trigger(e)[m
 [m
[31m-            if(k === 'minute' && that.options.minuteStep > 1 && that.options.roundTime) {[m
[31m-             v = getNearest(that['$'+k], v);[m
[31m-           }[m
[31m-           [m
[31m-           if(k === 'second' && that.options.secondStep > 1 && that.options.roundTime) {[m
[31m-             v = getNearest(that['$'+k], v);[m
[31m-           }                       [m
[31m-           [m
[31m-           that['$'+k].val(v);[m
[31m-         }[m
[31m-       });[m
[32m+[m[32m      if (e.isDefaultPrevented()) return[m
 [m
[31m-        // update days count[m
[31m-        if (this.options.smartDays) {[m
[31m-          this.fillCombo('day');[m
[31m-        }[m
[32m+[m[32m      this.affixed = affix[m
[32m+[m[32m      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null[m
 [m
[31m-        this.$element.val(dt.format(this.options.format)).triggerHandler('change');[m
[31m-      }[m
[31m-    },[m
[31m-    [m
[31m-    /*[m
[31m-     highlight combos if date is invalid[m
[31m-     */[m
[31m-     highlight: function(dt) {[m
[31m-      if(!dt.isValid()) {[m
[31m-        if(this.options.errorClass) {[m
[31m-          this.$widget.addClass(this.options.errorClass);[m
[31m-        } else {[m
[31m-          //store original border color[m
[31m-          if(!this.borderColor) {[m
[31m-            this.borderColor = this.$widget.find('select').css('border-color'); [m
[31m-          }[m
[31m-          this.$widget.find('select').css('border-color', 'red');[m
[31m-        }[m
[31m-      } else {[m
[31m-        if(this.options.errorClass) {[m
[31m-          this.$widget.removeClass(this.options.errorClass);[m
[31m-        } else {[m
[31m-          this.$widget.find('select').css('border-color', this.borderColor);[m
[31m-        }  [m
[31m-      }[m
[31m-    },[m
[31m-    [m
[31m-    leadZero: function(v) {[m
[31m-      return v <= 9 ? '0' + v : v; [m
[31m-    },[m
[31m-    [m
[31m-    destroy: function() {[m
[31m-      this.$widget.remove();[m
[31m-      this.$element.removeData('combodate').show();[m
[32m+[m[32m      this.$element[m
[32m+[m[32m        .removeClass(Affix.RESET)[m
[32m+[m[32m        .addClass(affixType)[m
[32m+[m[32m        .trigger(affixType.replace('affix', 'affixed') + '.bs.affix')[m
     }[m
 [m
[31m-  };[m
[31m-[m
[31m-  return {[m
[31m-    getInstance: function(element, options) {[m
[31m-      return new Combodate(element, options);[m
[32m+[m[32m    if (affix == 'bottom') {[m
[32m+[m[32m      this.$element.offset({[m
[32m+[m[32m        top: scrollHeight - height - offsetBottom[m
[32m+[m[32m      })[m
     }[m
[31m-  };[m
[31m-}]);[m
[32m+[m[32m  }[m
 [m
[31m-/*[m
[31m-Editable icons:[m
[31m-- default[m
[31m-- font-awesome[m
 [m
[31m-*/[m
[31m-angular.module('xeditable').factory('editableIcons', function() {[m
[32m+[m[32m  // AFFIX PLUGIN DEFINITION[m
[32m+[m[32m  // =======================[m
 [m
[31m-  var icons = {[m
[31m-    //Icon-set to use, defaults to bootstrap icons[m
[31m-    default: {[m
[31m-      'bs2': {[m
[31m-        ok: 'icon-ok icon-white',[m
[31m-        cancel: 'icon-remove'[m
[31m-      },[m
[31m-      'bs3': {[m
[31m-        ok: 'glyphicon glyphicon-ok',[m
[31m-        cancel: 'glyphicon glyphicon-remove'[m
[31m-      }[m
[31m-    },[m
[31m-    external: {[m
[31m-      'font-awesome': {[m
[31m-        ok: 'fa fa-check',[m
[31m-        cancel: 'fa fa-times'[m
[31m-      }[m
[31m-    }[m
[31m-  };[m
[32m+[m[32m  function Plugin(option) {[m
[32m+[m[32m    return this.each(function () {[m
[32m+[m[32m      var $this   = $(this)[m
[32m+[m[32m      var data    = $this.data('bs.affix')[m
[32m+[m[32m      var options = typeof option == 'object' && option[m
 [m
[31m-  return icons;[m
[31m-});[m
[32m+[m[32m      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))[m
[32m+[m[32m      if (typeof option == 'string') data[option]()[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
 [m
[31m-/*[m
[31m-Editable themes:[m
[31m-- default[m
[31m-- bootstrap 2[m
[31m-- bootstrap 3[m
[32m+[m[32m  var old = $.fn.affix[m
 [m
[31m-Note: in postrender() `this` is instance of editableController[m
[31m-*/[m
[31m-angular.module('xeditable').factory('editableThemes', function() {[m
[31m-  var themes = {[m
[31m-    //default[m
[31m-    'default': {[m
[31m-      formTpl:      '<form class="editable-wrap"></form>',[m
[31m-      noformTpl:    '<span class="editable-wrap"></span>',[m
[31m-      controlsTpl:  '<span class="editable-controls"></span>',[m
[31m-      inputTpl:     '',[m
[31m-      errorTpl:     '<div class="editable-error" ng-show="$error" ng-bind="$error"></div>',[m
[31m-      buttonsTpl:   '<span class="editable-buttons"></span>',[m
[31m-      submitTpl:    '<button type="submit">save</button>',[m
[31m-      cancelTpl:    '<button type="button" ng-click="$form.$cancel()">cancel</button>'[m
[31m-    },[m
[32m+[m[32m  $.fn.affix             = Plugin[m
[32m+[m[32m  $.fn.affix.Constructor = Affix[m
 [m
[31m-    //bs2[m
[31m-    'bs2': {[m
[31m-      formTpl:     '<form class="form-inline editable-wrap" role="form"></form>',[m
[31m-      noformTpl:   '<span class="editable-wrap"></span>',[m
[31m-      controlsTpl: '<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',[m
[31m-      inputTpl:    '',[m
[31m-      errorTpl:    '<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',[m
[31m-      buttonsTpl:  '<span class="editable-buttons"></span>',[m
[31m-      submitTpl:   '<button type="submit" class="btn btn-primary"><span></span></button>',[m
[31m-      cancelTpl:   '<button type="button" class="btn" ng-click="$form.$cancel()">'+[m
[31m-                      '<span></span>'+[m
[31m-                   '</button>'[m
 [m
[31m-    },[m
[32m+[m[32m  // AFFIX NO CONFLICT[m
[32m+[m[32m  // =================[m
 [m
[31m-    //bs3[m
[31m-    'bs3': {[m
[31m-      formTpl:     '<form class="form-inline editable-wrap" role="form"></form>',[m
[31m-      noformTpl:   '<span class="editable-wrap"></span>',[m
[31m-      controlsTpl: '<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',[m
[31m-      inputTpl:    '',[m
[31m-      errorTpl:    '<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',[m
[31m-      buttonsTpl:  '<span class="editable-buttons"></span>',[m
[31m-      submitTpl:   '<button type="submit" class="btn btn-primary"><span></span></button>',[m
[31m-      cancelTpl:   '<button type="button" class="btn btn-default" ng-click="$form.$cancel()">'+[m
[31m-                     '<span></span>'+[m
[31m-                   '</button>',[m
[32m+[m[32m  $.fn.affix.noConflict = function () {[m
[32m+[m[32m    $.fn.affix = old[m
[32m+[m[32m    return this[m
[32m+[m[32m  }[m
 [m
[31m-      //bs3 specific prop to change buttons class: btn-sm, btn-lg[m
[31m-      buttonsClass: '',[m
[31m-      //bs3 specific prop to change standard inputs class: input-sm, input-lg[m
[31m-      inputClass: '',[m
[31m-      postrender: function() {[m
[31m-        //apply `form-control` class to std inputs[m
[31m-        switch(this.directiveName) {[m
[31m-          case 'editableText':[m
[31m-          case 'editableSelect':[m
[31m-          case 'editableTextarea':[m
[31m-          case 'editableEmail':[m
[31m-          case 'editableTel':[m
[31m-          case 'editableNumber':[m
[31m-          case 'editableUrl':[m
[31m-          case 'editableSearch':[m
[31m-          case 'editableDate':[m
[31m-          case 'editableDatetime':[m
[31m-          case 'editableBsdate':[m
[31m-          case 'editableTime':[m
[31m-          case 'editableMonth':[m
[31m-          case 'editableWeek':[m
[31m-            this.inputEl.addClass('form-control');[m
[31m-            if(this.theme.inputClass) {[m
[31m-              // don`t apply `input-sm` and `input-lg` to select multiple[m
[31m-              // should be fixed in bs itself![m
[31m-              if(this.inputEl.attr('multiple') &&[m
[31m-                (this.theme.inputClass === 'input-sm' || this.theme.inputClass === 'input-lg')) {[m
[31m-                  break;[m
[31m-              }[m
[31m-              this.inputEl.addClass(this.theme.inputClass);[m
[31m-            }[m
[31m-          break;[m
[31m-          case 'editableCheckbox':[m
[31m-              this.editorEl.addClass('checkbox');[m
[31m-        }[m
 [m
[31m-        //apply buttonsClass (bs3 specific!)[m
[31m-        if(this.buttonsEl && this.theme.buttonsClass) {[m
[31m-          this.buttonsEl.find('button').addClass(this.theme.buttonsClass);[m
[31m-        }[m
[31m-      }[m
[31m-    }[m
[31m-  };[m
[32m+[m[32m  // AFFIX DATA-API[m
[32m+[m[32m  // ==============[m
 [m
[31m-  return themes;[m
[31m-});[m
[32m+[m[32m  $(window).on('load', function () {[m
[32m+[m[32m    $('[data-spy="affix"]').each(function () {[m
[32m+[m[32m      var $spy = $(this)[m
[32m+[m[32m      var data = $spy.data()[m
[32m+[m
[32m+[m[32m      data.offset = data.offset || {}[m
[32m+[m
[32m+[m[32m      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom[m
[32m+[m[32m      if (data.offsetTop    != null) data.offset.top    = data.offsetTop[m
[32m+[m
[32m+[m[32m      Plugin.call($spy, data)[m
[32m+[m[32m    })[m
[32m+[m[32m  })[m
[32m+[m
[32m+[m[32m}(jQuery);[m
[1mdiff --git a/dist/notes.min.css b/dist/notes.min.css[m
[1mindex a0072ea..52afc5b 100644[m
[1m--- a/dist/notes.min.css[m
[1m+++ b/dist/notes.min.css[m
[36m@@ -1,12 +1,35 @@[m
 /*![m
[31m- * Bootstrap v3.3.4 (http://getbootstrap.com)[m
[32m+[m[32mangular-xeditable - 0.1.9[m
[32m+[m[32mEdit-in-place for angular.js[m
[32m+[m[32mBuild date: 2015-03-26[m[41m [m
[32m+[m[32m*/[m
[32m+[m[32m.editable-buttons,.editable-range output{display:inline-block;vertical-align:top}[m
[32m+[m[32m.editable-wrap,.text-nowrap{white-space:nowrap}[m
[32m+[m[32m.btn-group>.btn-group,.btn-toolbar .btn-group,.btn-toolbar .input-group,.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.dropdown-menu{float:left}[m
[32m+[m[32m.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse,.pre-scrollable{max-height:340px}[m
[32m+[m[32m.editable-wrap{display:inline-block;margin:0}[m
[32m+[m[32m.editable-wrap .editable-controls,.editable-wrap .editable-controls>input,.editable-wrap .editable-controls>select,.editable-wrap .editable-controls>textarea,.editable-wrap .editable-error{margin-bottom:0}[m
[32m+[m[32m.editable-wrap .editable-input{display:inline-block}[m
[32m+[m[32m.editable-buttons button{margin-left:5px}[m
[32m+[m[32m.editable-input.editable-has-buttons{width:auto}[m
[32m+[m[32m.editable-bstime .editable-input input[type=text]{width:46px}[m
[32m+[m[32m.editable-bstime .well-small{margin-bottom:0;padding:10px}[m
[32m+[m[32m.editable-range output{min-width:30px;text-align:center}[m
[32m+[m[32m.editable-color input[type=color]{width:50px}[m
[32m+[m[32m.editable-checkbox label span,.editable-checklist label span,.editable-radiolist label span{margin-left:7px;margin-right:10px}[m
[32m+[m[32mbody,figure{margin:0}[m
[32m+[m[32m.editable-hide{display:none!important}[m
[32m+[m[32m.editable-click,a.editable-click{text-decoration:none;color:#428bca;border-bottom:dashed 1px #428bca}[m
[32m+[m[32m.editable-click:hover,a.editable-click:hover{text-decoration:none;color:#2a6496;border-bottom-color:#2a6496}[m
[32m+[m[32mhr,img{border:0}[m
[32m+[m[32m.editable-empty,.editable-empty:focus,.editable-empty:hover,a.editable-empty,a.editable-empty:focus,a.editable-empty:hover{font-style:italic;color:#D14;text-decoration:none}[m
[32m+[m[32m/*![m
[32m+[m[32m * Bootstrap v3.3.2 (http://getbootstrap.com)[m
  * Copyright 2011-2015 Twitter, Inc.[m
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)[m
  */[m
 /*! normalize.css v3.0.2 | MIT License | git.io/normalize */[m
[31m-body,figure{margin:0}[m
[31m-.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse,.pre-scrollable{max-height:340px}[m
[31m-html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-size:10px;-webkit-tap-highlight-color:transparent}[m
[32m+[m[32mhtml{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}[m
 article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}[m
 audio,canvas,progress,video{display:inline-block;vertical-align:baseline}[m
 audio:not([controls]){display:none;height:0}[m
[36m@@ -20,12 +43,13 @@[m [mmark{color:#000;background:#ff0}[m
 sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}[m
 sup{top:-.5em}[m
 sub{bottom:-.25em}[m
[31m-img{border:0;vertical-align:middle}[m
[32m+[m[32mimg{vertical-align:middle}[m
 svg:not(:root){overflow:hidden}[m
 hr{height:0;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}[m
 pre,textarea{overflow:auto}[m
 code,kbd,pre,samp{font-size:1em}[m
 button,input,optgroup,select,textarea{margin:0;font:inherit;color:inherit}[m
[32m+[m[32m.glyphicon,address{font-style:normal}[m
 button{overflow:visible}[m
 button,select{text-transform:none}[m
 button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}[m
[36m@@ -56,11 +80,11 @@[m [mselect{background:#fff!important}[m
 .table td,.table th{background-color:#fff!important}[m
 .table-bordered td,.table-bordered th{border:1px solid #ddd!important}[m
 }[m
[31m-.img-thumbnail,body{background-color:#fff}[m
[32m+[m[32m.dropdown-menu,.modal-content{-webkit-background-clip:padding-box}[m
 .btn,.btn-danger.active,.btn-danger:active,.btn-default.active,.btn-default:active,.btn-info.active,.btn-info:active,.btn-primary.active,.btn-primary:active,.btn-warning.active,.btn-warning:active,.btn.active,.btn:active,.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover,.form-control,.navbar-toggle,.open>.dropdown-toggle.btn-danger,.open>.dropdown-toggle.btn-default,.open>.dropdown-toggle.btn-info,.open>.dropdown-toggle.btn-primary,.open>.dropdown-toggle.btn-warning{background-image:none}[m
[32m+[m[32m.img-thumbnail,body{background-color:#fff}[m
 @font-face{font-family:'Glyphicons Halflings';src:url(../fonts/glyphicons-halflings-regular.eot);src:url(../fonts/glyphicons-halflings-regular.eot?#iefix) format('embedded-opentype'),url(../fonts/glyphicons-halflings-regular.woff2) format('woff2'),url(../fonts/glyphicons-halflings-regular.woff) format('woff'),url(../fonts/glyphicons-halflings-regular.ttf) format('truetype'),url(../fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular) format('svg')}[m
[31m-.glyphicon{position:relative;top:1px;display:inline-block;font-family:'Glyphicons Halflings';font-style:normal;font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[m
[31m-.popover,.tooltip,body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}[m
[32m+[m[32m.glyphicon{position:relative;top:1px;display:inline-block;font-family:'Glyphicons Halflings';font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[m
 .glyphicon-asterisk:before{content:"\2a"}[m
 .glyphicon-plus:before{content:"\2b"}[m
 .glyphicon-eur:before,.glyphicon-euro:before{content:"\20ac"}[m
[36m@@ -285,9 +309,9 @@[m [mselect{background:#fff!important}[m
 .glyphicon-duplicate:before{content:"\e224"}[m
 .glyphicon-piggy-bank:before{content:"\e225"}[m
 .glyphicon-scissors:before{content:"\e226"}[m
[31m-.glyphicon-bitcoin:before,.glyphicon-btc:before,.glyphicon-xbt:before{content:"\e227"}[m
[31m-.glyphicon-jpy:before,.glyphicon-yen:before{content:"\00a5"}[m
[31m-.glyphicon-rub:before,.glyphicon-ruble:before{content:"\20bd"}[m
[32m+[m[32m.glyphicon-bitcoin:before{content:"\e227"}[m
[32m+[m[32m.glyphicon-yen:before{content:"\00a5"}[m
[32m+[m[32m.glyphicon-ruble:before{content:"\20bd"}[m
 .glyphicon-scale:before{content:"\e230"}[m
 .glyphicon-ice-lolly:before{content:"\e231"}[m
 .glyphicon-ice-lolly-tasted:before{content:"\e232"}[m
[36m@@ -320,7 +344,8 @@[m [mselect{background:#fff!important}[m
 .glyphicon-menu-down:before{content:"\e259"}[m
 .glyphicon-menu-up:before{content:"\e260"}[m
 *,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}[m
[31m-body{font-size:14px;line-height:1.42857143;color:#333}[m
[32m+[m[32mhtml{font-size:10px;-webkit-tap-highlight-color:transparent}[m
[32m+[m[32mbody{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857143;color:#333}[m
 button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}[m
 a{color:#337ab7;text-decoration:none}[m
 a:focus,a:hover{color:#23527c;text-decoration:underline}[m
[36m@@ -329,10 +354,9 @@[m [ma:focus{outline:dotted thin;outline:-webkit-focus-ring-color auto 5px;outline-of[m
 .img-rounded{border-radius:6px}[m
 .img-thumbnail{display:inline-block;max-width:100%;height:auto;padding:4px;line-height:1.42857143;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}[m
 .img-circle{border-radius:50%}[m
[31m-hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}[m
[32m+[m[32mhr{margin-top:20px;margin-bottom:20px;border-top:1px solid #eee}[m
 .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}[m
 .sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}[m
[31m-[role=button]{cursor:pointer}[m
 .h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{font-family:inherit;font-weight:500;line-height:1.1;color:inherit}[m
 .h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-weight:400;line-height:1;color:#777}[m
 .h1,.h2,.h3,h1,h2,h3{margin-top:20px;margin-bottom:10px}[m
[36m@@ -347,18 +371,17 @@[m [mhr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}[m
 .h6,h6{font-size:12px}[m
 p{margin:0 0 10px}[m
 .lead{margin-bottom:20px;font-size:16px;font-weight:300;line-height:1.4}[m
[31m-address,blockquote .small,blockquote footer,blockquote small,dd,dt,pre{line-height:1.42857143}[m
 dt,kbd kbd,label{font-weight:700}[m
[32m+[m[32maddress,blockquote .small,blockquote footer,blockquote small,dd,dt,pre{line-height:1.42857143}[m
 @media (min-width:768px){.lead{font-size:21px}[m
 }[m
 .small,small{font-size:85%}[m
 .mark,mark{padding:.2em;background-color:#fcf8e3}[m
[31m-.list-inline,.list-unstyled{list-style:none;padding-left:0}[m
[32m+[m[32m.list-inline,.list-unstyled{padding-left:0;list-style:none}[m
 .text-left{text-align:left}[m
 .text-right{text-align:right}[m
 .text-center{text-align:center}[m
 .text-justify{text-align:justify}[m
[31m-.text-nowrap{white-space:nowrap}[m
 .text-lowercase{text-transform:lowercase}[m
 .text-uppercase{text-transform:uppercase}[m
 .text-capitalize{text-transform:capitalize}[m
[36m@@ -386,45 +409,42 @@[m [ma.bg-danger:hover{background-color:#e4b9b9}[m
 pre code,table{background-color:transparent}[m
 .page-header{padding-bottom:9px;margin:40px 0 20px;border-bottom:1px solid #eee}[m
 dl,ol,ul{margin-top:0}[m
[32m+[m[32mblockquote ol:last-child,blockquote p:last-child,blockquote ul:last-child,ol ol,ol ul,ul ol,ul ul{margin-bottom:0}[m
[32m+[m[32maddress,dl{margin-bottom:20px}[m
 ol,ul{margin-bottom:10px}[m
[31m-ol ol,ol ul,ul ol,ul ul{margin-bottom:0}[m
 .list-inline{margin-left:-5px}[m
 .list-inline>li{display:inline-block;padding-right:5px;padding-left:5px}[m
[31m-dl{margin-bottom:20px}[m
 dd{margin-left:0}[m
 @media (min-width:768px){.dl-horizontal dt{float:left;width:160px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}[m
 .dl-horizontal dd{margin-left:180px}[m
[32m+[m[32m.container{width:750px}[m
 }[m
 abbr[data-original-title],abbr[title]{cursor:help;border-bottom:1px dotted #777}[m
 .initialism{font-size:90%;text-transform:uppercase}[m
 blockquote{padding:10px 20px;margin:0 0 20px;font-size:17.5px;border-left:5px solid #eee}[m
[31m-blockquote ol:last-child,blockquote p:last-child,blockquote ul:last-child{margin-bottom:0}[m
 blockquote .small,blockquote footer,blockquote small{display:block;font-size:80%;color:#777}[m
[32m+[m[32mlegend,pre{display:block;color:#333}[m
 blockquote .small:before,blockquote footer:before,blockquote small:before{content:'\2014 \00A0'}[m
 .blockquote-reverse,blockquote.pull-right{padding-right:15px;padding-left:0;text-align:right;border-right:5px solid #eee;border-left:0}[m
[31m-caption,th{text-align:left}[m
 code,kbd{padding:2px 4px;font-size:90%}[m
[32m+[m[32mcaption,th{text-align:left}[m
 .blockquote-reverse .small:before,.blockquote-reverse footer:before,.blockquote-reverse small:before,blockquote.pull-right .small:before,blockquote.pull-right footer:before,blockquote.pull-right small:before{content:''}[m
 .blockquote-reverse .small:after,.blockquote-reverse footer:after,.blockquote-reverse small:after,blockquote.pull-right .small:after,blockquote.pull-right footer:after,blockquote.pull-right small:after{content:'\00A0 \2014'}[m
[31m-address{margin-bottom:20px;font-style:normal}[m
 code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Courier New",monospace}[m
 code{color:#c7254e;background-color:#f9f2f4;border-radius:4px}[m
 kbd{color:#fff;background-color:#333;border-radius:3px;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,.25);box-shadow:inset 0 -1px 0 rgba(0,0,0,.25)}[m
 kbd kbd{padding:0;font-size:100%;-webkit-box-shadow:none;box-shadow:none}[m
[31m-pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;color:#333;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}[m
[32m+[m[32mpre{padding:9.5px;margin:0 0 10px;font-size:13px;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}[m
 .container,.container-fluid{margin-right:auto;margin-left:auto}[m
 pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;border-radius:0}[m
 .container,.container-fluid{padding-right:15px;padding-left:15px}[m
 .pre-scrollable{overflow-y:scroll}[m
[31m-@media (min-width:768px){.container{width:750px}[m
[31m-}[m
 @media (min-width:992px){.container{width:970px}[m
 }[m
 @media (min-width:1200px){.container{width:1170px}[m
 }[m
 .row{margin-right:-15px;margin-left:-15px}[m
 .col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9{position:relative;min-height:1px;padding-right:15px;padding-left:15px}[m
[31m-.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9{float:left}[m
 .col-xs-12{width:100%}[m
 .col-xs-11{width:91.66666667%}[m
 .col-xs-10{width:83.33333333%}[m
[36m@@ -649,7 +669,6 @@[m [mcaption{padding-top:8px;padding-bottom:8px;color:#777}[m
 .table-hover>tbody>tr:hover,.table>tbody>tr.active>td,.table>tbody>tr.active>th,.table>tbody>tr>td.active,.table>tbody>tr>th.active,.table>tfoot>tr.active>td,.table>tfoot>tr.active>th,.table>tfoot>tr>td.active,.table>tfoot>tr>th.active,.table>thead>tr.active>td,.table>thead>tr.active>th,.table>thead>tr>td.active,.table>thead>tr>th.active{background-color:#f5f5f5}[m
 table col[class*=col-]{position:static;display:table-column;float:none}[m
 table td[class*=col-],table th[class*=col-]{position:static;display:table-cell;float:none}[m
[31m-.btn-group>.btn-group,.btn-toolbar .btn-group,.btn-toolbar .input-group,.dropdown-menu{float:left}[m
 .table-hover>tbody>tr.active:hover>td,.table-hover>tbody>tr.active:hover>th,.table-hover>tbody>tr:hover>.active,.table-hover>tbody>tr>td.active:hover,.table-hover>tbody>tr>th.active:hover{background-color:#e8e8e8}[m
 .table>tbody>tr.success>td,.table>tbody>tr.success>th,.table>tbody>tr>td.success,.table>tbody>tr>th.success,.table>tfoot>tr.success>td,.table>tfoot>tr.success>th,.table>tfoot>tr>td.success,.table>tfoot>tr>th.success,.table>thead>tr.success>td,.table>thead>tr.success>th,.table>thead>tr>td.success,.table>thead>tr>th.success{background-color:#dff0d8}[m
 .table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr.success:hover>th,.table-hover>tbody>tr:hover>.success,.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover{background-color:#d0e9c6}[m
[36m@@ -670,25 +689,24 @@[m [mtable td[class*=col-],table th[class*=col-]{position:static;display:table-cell;f[m
 }[m
 fieldset,legend{padding:0;border:0}[m
 fieldset{min-width:0;margin:0}[m
[31m-legend{display:block;width:100%;margin-bottom:20px;font-size:21px;line-height:inherit;color:#333;border-bottom:1px solid #e5e5e5}[m
[32m+[m[32mlegend{width:100%;margin-bottom:20px;font-size:21px;line-height:inherit;border-bottom:1px solid #e5e5e5}[m
 label{display:inline-block;max-width:100%;margin-bottom:5px}[m
 input[type=search]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none}[m
 input[type=checkbox],input[type=radio]{margin:4px 0 0;margin-top:1px\9;line-height:normal}[m
[31m-.form-control,output{display:block;font-size:14px;line-height:1.42857143;color:#555}[m
[32m+[m[32m.form-control,output{font-size:14px;line-height:1.42857143;color:#555;display:block}[m
 input[type=file]{display:block}[m
 input[type=range]{display:block;width:100%}[m
 select[multiple],select[size]{height:auto}[m
 input[type=file]:focus,input[type=checkbox]:focus,input[type=radio]:focus{outline:dotted thin;outline:-webkit-focus-ring-color auto 5px;outline-offset:-2px}[m
 output{padding-top:7px}[m
 .form-control{width:100%;height:34px;padding:6px 12px;background-color:#fff;border:1px solid #ccc;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;-o-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}[m
[31m-.form-group-sm .form-control,.input-sm{padding:5px 10px;font-size:12px;border-radius:3px}[m
[32m+[m[32m.form-group-sm .form-control,.input-sm{font-size:12px;border-radius:3px;padding:5px 10px}[m
 .form-control:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}[m
 .form-control::-moz-placeholder{color:#999;opacity:1}[m
 .form-control:-ms-input-placeholder{color:#999}[m
 .form-control::-webkit-input-placeholder{color:#999}[m
 .has-success .checkbox,.has-success .checkbox-inline,.has-success .control-label,.has-success .form-control-feedback,.has-success .help-block,.has-success .radio,.has-success .radio-inline,.has-success.checkbox label,.has-success.checkbox-inline label,.has-success.radio label,.has-success.radio-inline label{color:#3c763d}[m
[31m-.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{background-color:#eee;opacity:1}[m
[31m-.form-control[disabled],fieldset[disabled] .form-control{cursor:not-allowed}[m
[32m+[m[32m.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{cursor:not-allowed;background-color:#eee;opacity:1}[m
 textarea.form-control{height:auto}[m
 @media screen and (-webkit-min-device-pixel-ratio:0){input[type=date],input[type=time],input[type=datetime-local],input[type=month]{line-height:34px}[m
 .input-group-sm input[type=date],.input-group-sm input[type=time],.input-group-sm input[type=datetime-local],.input-group-sm input[type=month],input[type=date].input-sm,input[type=time].input-sm,input[type=datetime-local].input-sm,input[type=month].input-sm{line-height:30px}[m
[36m@@ -698,30 +716,31 @@[m [mtextarea.form-control{height:auto}[m
 .checkbox,.radio{position:relative;display:block;margin-top:10px;margin-bottom:10px}[m
 .checkbox label,.radio label{min-height:20px;padding-left:20px;margin-bottom:0;font-weight:400;cursor:pointer}[m
 .checkbox input[type=checkbox],.checkbox-inline input[type=checkbox],.radio input[type=radio],.radio-inline input[type=radio]{position:absolute;margin-top:4px\9;margin-left:-20px}[m
[31m-.collapsing,.dropdown,.dropup,.has-feedback{position:relative}[m
 .checkbox+.checkbox,.radio+.radio{margin-top:-5px}[m
[31m-.checkbox-inline,.radio-inline{position:relative;display:inline-block;padding-left:20px;margin-bottom:0;font-weight:400;vertical-align:middle;cursor:pointer}[m
[32m+[m[32m.checkbox-inline,.radio-inline{display:inline-block;padding-left:20px;margin-bottom:0;font-weight:400;vertical-align:middle;cursor:pointer}[m
 .checkbox-inline+.checkbox-inline,.radio-inline+.radio-inline{margin-top:0;margin-left:10px}[m
 .checkbox-inline.disabled,.checkbox.disabled label,.radio-inline.disabled,.radio.disabled label,fieldset[disabled] .checkbox label,fieldset[disabled] .checkbox-inline,fieldset[disabled] .radio label,fieldset[disabled] .radio-inline,fieldset[disabled] input[type=checkbox],fieldset[disabled] input[type=radio],input[type=checkbox].disabled,input[type=checkbox][disabled],input[type=radio].disabled,input[type=radio][disabled]{cursor:not-allowed}[m
[31m-.form-control-static{min-height:34px;padding-top:7px;padding-bottom:7px;margin-bottom:0}[m
[32m+[m[32m.form-control-static{padding-top:7px;padding-bottom:7px;margin-bottom:0}[m
 .form-control-static.input-lg,.form-control-static.input-sm{padding-right:0;padding-left:0}[m
 .input-sm{height:30px;line-height:1.5}[m
 select.input-sm{height:30px;line-height:30px}[m
 select[multiple].input-sm,textarea.input-sm{height:auto}[m
 .form-group-sm .form-control{height:30px;line-height:1.5}[m
[31m-.form-group-lg .form-control,.input-lg{padding:10px 16px;font-size:18px;border-radius:6px}[m
[32m+[m[32m.form-group-lg .form-control,.input-lg{border-radius:6px;padding:10px 16px;font-size:18px}[m
 select.form-group-sm .form-control{height:30px;line-height:30px}[m
 select[multiple].form-group-sm .form-control,textarea.form-group-sm .form-control{height:auto}[m
[31m-.form-group-sm .form-control-static{height:30px;min-height:32px;padding:5px 10px;font-size:12px;line-height:1.5}[m
[32m+[m[32m.form-group-sm .form-control-static{height:30px;padding:5px 10px;font-size:12px;line-height:1.5}[m
 .input-lg{height:46px;line-height:1.3333333}[m
 select.input-lg{height:46px;line-height:46px}[m
 select[multiple].input-lg,textarea.input-lg{height:auto}[m
 .form-group-lg .form-control{height:46px;line-height:1.3333333}[m
 select.form-group-lg .form-control{height:46px;line-height:46px}[m
 select[multiple].form-group-lg .form-control,textarea.form-group-lg .form-control{height:auto}[m
[31m-.form-group-lg .form-control-static{height:46px;min-height:38px;padding:10px 16px;font-size:18px;line-height:1.3333333}[m
[32m+[m[32m.form-group-lg .form-control-static{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333}[m
[32m+[m[32m.has-feedback{position:relative}[m
 .has-feedback .form-control{padding-right:42.5px}[m
 .form-control-feedback{position:absolute;top:0;right:0;z-index:2;display:block;width:34px;height:34px;line-height:34px;text-align:center;pointer-events:none}[m
[32m+[m[32m.collapsing,.dropdown,.dropup{position:relative}[m
 .input-lg+.form-control-feedback{width:46px;height:46px;line-height:46px}[m
 .input-sm+.form-control-feedback{width:30px;height:30px;line-height:30px}[m
 .has-success .form-control{border-color:#3c763d;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}[m
[36m@@ -748,13 +767,13 @@[m [mselect[multiple].form-group-lg .form-control,textarea.form-group-lg .form-contro[m
 .form-inline .checkbox label,.form-inline .radio label{padding-left:0}[m
 .form-inline .checkbox input[type=checkbox],.form-inline .radio input[type=radio]{position:relative;margin-left:0}[m
 .form-inline .has-feedback .form-control-feedback{top:0}[m
[32m+[m[32m.form-horizontal .control-label{padding-top:7px;margin-bottom:0;text-align:right}[m
 }[m
 .form-horizontal .checkbox,.form-horizontal .checkbox-inline,.form-horizontal .radio,.form-horizontal .radio-inline{padding-top:7px;margin-top:0;margin-bottom:0}[m
 .form-horizontal .checkbox,.form-horizontal .radio{min-height:27px}[m
 .form-horizontal .form-group{margin-right:-15px;margin-left:-15px}[m
 .form-horizontal .has-feedback .form-control-feedback{right:15px}[m
[31m-@media (min-width:768px){.form-horizontal .control-label{padding-top:7px;margin-bottom:0;text-align:right}[m
[31m-.form-horizontal .form-group-lg .control-label{padding-top:14.33px}[m
[32m+[m[32m@media (min-width:768px){.form-horizontal .form-group-lg .control-label{padding-top:14.33px}[m
 .form-horizontal .form-group-sm .control-label{padding-top:6px}[m
 }[m
 .btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;border-radius:4px}[m
[36m@@ -800,19 +819,19 @@[m [mselect[multiple].form-group-lg .form-control,textarea.form-group-lg .form-contro[m
 input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}[m
 .fade{opacity:0;-webkit-transition:opacity .15s linear;-o-transition:opacity .15s linear;transition:opacity .15s linear}[m
 .fade.in{opacity:1}[m
[31m-.collapse{display:none}[m
[31m-.collapse.in{display:block}[m
[32m+[m[32m.collapse{display:none;visibility:hidden}[m
[32m+[m[32m.collapse.in{display:block;visibility:visible}[m
 tr.collapse.in{display:table-row}[m
 tbody.collapse.in{display:table-row-group}[m
 .collapsing{height:0;overflow:hidden;-webkit-transition-timing-function:ease;-o-transition-timing-function:ease;transition-timing-function:ease;-webkit-transition-duration:.35s;-o-transition-duration:.35s;transition-duration:.35s;-webkit-transition-property:height,visibility;-o-transition-property:height,visibility;transition-property:height,visibility}[m
[31m-.caret{display:inline-block;width:0;height:0;margin-left:2px;vertical-align:middle;border-top:4px dashed;border-right:4px solid transparent;border-left:4px solid transparent}[m
[32m+[m[32m.caret{display:inline-block;width:0;height:0;margin-left:2px;vertical-align:middle;border-top:4px solid;border-right:4px solid transparent;border-left:4px solid transparent}[m
 .dropdown-toggle:focus{outline:0}[m
[31m-.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;min-width:160px;padding:5px 0;margin:2px 0 0;font-size:14px;text-align:left;list-style:none;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);border-radius:4px;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px rgba(0,0,0,.175)}[m
[31m-.btn-group-vertical>.btn:not(:first-child):not(:last-child),.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn,.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}[m
[31m-.dropdown-header,.dropdown-menu>li>a{white-space:nowrap;padding:3px 20px;line-height:1.42857143}[m
[32m+[m[32m.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;min-width:160px;padding:5px 0;margin:2px 0 0;font-size:14px;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);border-radius:4px;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px rgba(0,0,0,.175)}[m
 .dropdown-menu-right,.dropdown-menu.pull-right{right:0;left:auto}[m
[32m+[m[32m.dropdown-header,.dropdown-menu>li>a{display:block;padding:3px 20px;line-height:1.42857143;white-space:nowrap}[m
[32m+[m[32m.btn-group-vertical>.btn:not(:first-child):not(:last-child),.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn,.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}[m
 .dropdown-menu .divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}[m
[31m-.dropdown-menu>li>a{display:block;clear:both;font-weight:400;color:#333}[m
[32m+[m[32m.dropdown-menu>li>a{clear:both;font-weight:400;color:#333}[m
 .dropdown-menu>li>a:focus,.dropdown-menu>li>a:hover{color:#262626;text-decoration:none;background-color:#f5f5f5}[m
 .dropdown-menu>.active>a,.dropdown-menu>.active>a:focus,.dropdown-menu>.active>a:hover{color:#fff;text-decoration:none;background-color:#337ab7;outline:0}[m
 .dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{color:#777}[m
[36m@@ -820,10 +839,10 @@[m [mtbody.collapse.in{display:table-row-group}[m
 .open>.dropdown-menu{display:block}[m
 .open>a{outline:0}[m
 .dropdown-menu-left{right:auto;left:0}[m
[31m-.dropdown-header{display:block;font-size:12px;color:#777}[m
[32m+[m[32m.dropdown-header{font-size:12px;color:#777}[m
 .dropdown-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:990}[m
[32m+[m[32m.nav-justified>.dropdown .dropdown-menu,.nav-tabs.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}[m
 .btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover,.input-group-btn>.btn:active,.input-group-btn>.btn:focus,.input-group-btn>.btn:hover{z-index:2}[m
[31m-.nav-justified>.dropdown .dropdown-menu,.nav-tabs.nav-justified>.dropdown .dropdown-menu{left:auto;top:auto}[m
 .pull-right>.dropdown-menu{right:0;left:auto}[m
 .dropup .caret,.navbar-fixed-bottom .dropdown .caret{content:"";border-top:0;border-bottom:4px solid}[m
 .dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:2px}[m
[36m@@ -871,7 +890,7 @@[m [mselect[multiple].input-group-lg>.form-control,select[multiple].input-group-lg>.i[m
 select.input-group-sm>.form-control,select.input-group-sm>.input-group-addon,select.input-group-sm>.input-group-btn>.btn{height:30px;line-height:30px}[m
 select[multiple].input-group-sm>.form-control,select[multiple].input-group-sm>.input-group-addon,select[multiple].input-group-sm>.input-group-btn>.btn,textarea.input-group-sm>.form-control,textarea.input-group-sm>.input-group-addon,textarea.input-group-sm>.input-group-btn>.btn{height:auto}[m
 .input-group .form-control,.input-group-addon,.input-group-btn{display:table-cell}[m
[31m-.nav>li,.nav>li>a{position:relative;display:block}[m
[32m+[m[32m.nav>li,.nav>li>a{display:block;position:relative}[m
 .input-group .form-control:not(:first-child):not(:last-child),.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child){border-radius:0}[m
 .input-group-addon,.input-group-btn{width:1%;white-space:nowrap;vertical-align:middle}[m
 .input-group-addon{padding:6px 12px;font-size:14px;font-weight:400;line-height:1;color:#555;text-align:center;background-color:#eee;border:1px solid #ccc;border-radius:4px}[m
[36m@@ -922,8 +941,8 @@[m [mselect[multiple].input-group-sm>.form-control,select[multiple].input-group-sm>.i[m
 .nav-tabs-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}[m
 .nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover{border-bottom-color:#fff}[m
 }[m
[31m-.tab-content>.tab-pane{display:none}[m
[31m-.tab-content>.active{display:block}[m
[32m+[m[32m.tab-content>.tab-pane{display:none;visibility:hidden}[m
[32m+[m[32m.tab-content>.active{display:block;visibility:visible}[m
 .nav-tabs .dropdown-menu{margin-top:-1px;border-top-left-radius:0;border-top-right-radius:0}[m
 .navbar{position:relative;min-height:50px;margin-bottom:20px;border:1px solid transparent}[m
 .navbar-collapse{padding-right:15px;padding-left:15px;overflow-x:visible;-webkit-overflow-scrolling:touch;border-top:1px solid transparent;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.1);box-shadow:inset 0 1px 0 rgba(255,255,255,.1)}[m
[36m@@ -931,7 +950,7 @@[m [mselect[multiple].input-group-sm>.form-control,select[multiple].input-group-sm>.i[m
 @media (min-width:768px){.navbar{border-radius:4px}[m
 .navbar-header{float:left}[m
 .navbar-collapse{width:auto;border-top:0;-webkit-box-shadow:none;box-shadow:none}[m
[31m-.navbar-collapse.collapse{display:block!important;height:auto!important;padding-bottom:0;overflow:visible!important}[m
[32m+[m[32m.navbar-collapse.collapse{display:block!important;height:auto!important;padding-bottom:0;overflow:visible!important;visibility:visible!important}[m
 .navbar-collapse.in{overflow-y:visible}[m
 .navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse,.navbar-static-top .navbar-collapse{padding-right:0;padding-left:0}[m
 }[m
[36m@@ -961,7 +980,7 @@[m [mselect[multiple].input-group-sm>.form-control,select[multiple].input-group-sm>.i[m
 .navbar-nav .open .dropdown-menu>li>a{line-height:20px}[m
 .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-nav .open .dropdown-menu>li>a:hover{background-image:none}[m
 }[m
[31m-.progress-bar-striped,.progress-striped .progress-bar,.progress-striped .progress-bar-danger,.progress-striped .progress-bar-info,.progress-striped .progress-bar-success,.progress-striped .progress-bar-warning{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}[m
[32m+[m[32m.progress-bar-striped,.progress-striped .progress-bar,.progress-striped .progress-bar-success{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}[m
 @media (min-width:768px){.navbar-toggle{display:none}[m
 .navbar-nav{float:left;margin:0}[m
 .navbar-nav>li{float:left}[m
[36m@@ -978,13 +997,13 @@[m [mselect[multiple].input-group-sm>.form-control,select[multiple].input-group-sm>.i[m
 .navbar-form .checkbox label,.navbar-form .radio label{padding-left:0}[m
 .navbar-form .checkbox input[type=checkbox],.navbar-form .radio input[type=radio]{position:relative;margin-left:0}[m
 .navbar-form .has-feedback .form-control-feedback{top:0}[m
[32m+[m[32m.navbar-form{width:auto;padding-top:0;padding-bottom:0;margin-right:0;margin-left:0;border:0;-webkit-box-shadow:none;box-shadow:none}[m
 }[m
 .breadcrumb>li,.pagination{display:inline-block}[m
[32m+[m[32m.btn .badge,.btn .label{top:-1px;position:relative}[m
 @media (max-width:767px){.navbar-form .form-group{margin-bottom:5px}[m
 .navbar-form .form-group:last-child{margin-bottom:0}[m
 }[m
[31m-@media (min-width:768px){.navbar-form{width:auto;padding-top:0;padding-bottom:0;margin-right:0;margin-left:0;border:0;-webkit-box-shadow:none;box-shadow:none}[m
[31m-}[m
 .navbar-nav>li>.dropdown-menu{margin-top:0;border-top-left-radius:0;border-top-right-radius:0}[m
 .navbar-fixed-bottom .navbar-nav>li>.dropdown-menu{margin-bottom:0;border-radius:4px 4px 0 0}[m
 .navbar-btn{margin-top:8px;margin-bottom:8px}[m
[36m@@ -1048,7 +1067,7 @@[m [mselect[multiple].input-group-sm>.form-control,select[multiple].input-group-sm>.i[m
 .pagination{padding-left:0;margin:20px 0;border-radius:4px}[m
 .pager li,.pagination>li{display:inline}[m
 .pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;margin-left:-1px;line-height:1.42857143;color:#337ab7;text-decoration:none;background-color:#fff;border:1px solid #ddd}[m
[31m-.badge,.label{text-align:center;font-weight:700;line-height:1;white-space:nowrap;vertical-align:baseline}[m
[32m+[m[32m.badge,.label{font-weight:700;line-height:1;white-space:nowrap;vertical-align:baseline;text-align:center}[m
 .pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;border-top-left-radius:4px;border-bottom-left-radius:4px}[m
 .pagination>li:last-child>a,.pagination>li:last-child>span{border-top-right-radius:4px;border-bottom-right-radius:4px}[m
 .pagination>li>a:focus,.pagination>li>a:hover,.pagination>li>span:focus,.pagination>li>span:hover{color:#23527c;background-color:#eee;border-color:#ddd}[m
[36m@@ -1066,10 +1085,9 @@[m [mselect[multiple].input-group-sm>.form-control,select[multiple].input-group-sm>.i[m
 .pager .next>a,.pager .next>span{float:right}[m
 .pager .previous>a,.pager .previous>span{float:left}[m
 .pager .disabled>a,.pager .disabled>a:focus,.pager .disabled>a:hover,.pager .disabled>span{color:#777;cursor:not-allowed;background-color:#fff}[m
[32m+[m[32ma.badge:focus,a.badge:hover,a.label:focus,a.label:hover{color:#fff;cursor:pointer;text-decoration:none}[m
 .label{display:inline;padding:.2em .6em .3em;font-size:75%;color:#fff;border-radius:.25em}[m
[31m-a.label:focus,a.label:hover{color:#fff;text-decoration:none;cursor:pointer}[m
 .label:empty{display:none}[m
[31m-.btn .label{position:relative;top:-1px}[m
 .label-default{background-color:#777}[m
 .label-default[href]:focus,.label-default[href]:hover{background-color:#5e5e5e}[m
 .label-primary{background-color:#337ab7}[m
[36m@@ -1085,9 +1103,7 @@[m [ma.label:focus,a.label:hover{color:#fff;text-decoration:none;cursor:pointer}[m
 .badge{display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;color:#fff;background-color:#777;border-radius:10px}[m
 .badge:empty{display:none}[m
 .media-object,.thumbnail{display:block}[m
[31m-.btn .badge{position:relative;top:-1px}[m
[31m-.btn-group-xs>.btn .badge,.btn-xs .badge{top:0;padding:1px 5px}[m
[31m-a.badge:focus,a.badge:hover{color:#fff;text-decoration:none;cursor:pointer}[m
[32m+[m[32m.btn-xs .badge{top:0;padding:1px 5px}[m
 .list-group-item.active>.badge,.nav-pills>.active>a>.badge{color:#337ab7;background-color:#fff}[m
 .jumbotron,.jumbotron .h1,.jumbotron h1{color:inherit}[m
 .list-group-item>.badge{float:right}[m
[36m@@ -1095,8 +1111,8 @@[m [ma.badge:focus,a.badge:hover{color:#fff;text-decoration:none;cursor:pointer}[m
 .nav-pills>li>a>.badge{margin-left:3px}[m
 .jumbotron{padding:30px 15px;margin-bottom:30px;background-color:#eee}[m
 .jumbotron p{margin-bottom:15px;font-size:21px;font-weight:200}[m
[31m-.alert .alert-link,.close{font-weight:700}[m
 .alert,.thumbnail{margin-bottom:20px}[m
[32m+[m[32m.alert .alert-link,.close{font-weight:700}[m
 .jumbotron>hr{border-top-color:#d5d5d5}[m
 .container .jumbotron,.container-fluid .jumbotron{border-radius:6px}[m
 .jumbotron .container{max-width:100%}[m
[36m@@ -1114,7 +1130,6 @@[m [ma.thumbnail.active,a.thumbnail:focus,a.thumbnail:hover{border-color:#337ab7}[m
 .alert>p+p{margin-top:5px}[m
 .alert-dismissable,.alert-dismissible{padding-right:35px}[m
 .alert-dismissable .close,.alert-dismissible .close{position:relative;top:-2px;right:-21px;color:inherit}[m
[31m-.modal,.modal-backdrop{right:0;bottom:0;left:0}[m
 .alert-success{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}[m
 .alert-success hr{border-top-color:#c9e2b3}[m
 .alert-success .alert-link{color:#2b542c}[m
[36m@@ -1142,12 +1157,13 @@[m [mto{background-position:0 0}[m
 .progress-bar.active,.progress.active .progress-bar{-webkit-animation:progress-bar-stripes 2s linear infinite;-o-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite}[m
 .progress-bar-success{background-color:#5cb85c}[m
 .progress-striped .progress-bar-success{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}[m
[32m+[m[32m.progress-striped .progress-bar-info,.progress-striped .progress-bar-warning{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}[m
 .progress-bar-info{background-color:#5bc0de}[m
 .progress-striped .progress-bar-info{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}[m
 .progress-bar-warning{background-color:#f0ad4e}[m
 .progress-striped .progress-bar-warning{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}[m
 .progress-bar-danger{background-color:#d9534f}[m
[31m-.progress-striped .progress-bar-danger{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}[m
[32m+[m[32m.progress-striped .progress-bar-danger{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}[m
 .media{margin-top:15px}[m
 .media:first-child{margin-top:0}[m
 .media,.media-body{overflow:hidden;zoom:1}[m
[36m@@ -1195,14 +1211,15 @@[m [ma.list-group-item-danger.active,a.list-group-item-danger.active:focus,a.list-gro[m
 .panel-heading>.dropdown .dropdown-toggle,.panel-title,.panel-title>.small,.panel-title>.small>a,.panel-title>a,.panel-title>small,.panel-title>small>a{color:inherit}[m
 .list-group-item-heading{margin-top:0;margin-bottom:5px}[m
 .list-group-item-text{margin-bottom:0;line-height:1.3}[m
[32m+[m[32m.carousel-inner>.item>a>img,.carousel-inner>.item>img,.close{line-height:1}[m
 .panel{margin-bottom:20px;background-color:#fff;border:1px solid transparent;border-radius:4px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.05);box-shadow:0 1px 1px rgba(0,0,0,.05)}[m
 .panel-title,.panel>.list-group,.panel>.panel-collapse>.list-group,.panel>.panel-collapse>.table,.panel>.table,.panel>.table-responsive>.table{margin-bottom:0}[m
 .panel-body{padding:15px}[m
 .panel-heading{padding:10px 15px;border-bottom:1px solid transparent;border-top-left-radius:3px;border-top-right-radius:3px}[m
[31m-.panel-group .panel-heading,.panel>.table-bordered>tbody>tr:first-child>td,.panel>.table-bordered>tbody>tr:first-child>th,.panel>.table-bordered>tbody>tr:last-child>td,.panel>.table-bordered>tbody>tr:last-child>th,.panel>.table-bordered>tfoot>tr:last-child>td,.panel>.table-bordered>tfoot>tr:last-child>th,.panel>.table-bordered>thead>tr:first-child>td,.panel>.table-bordered>thead>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th,.panel>.table-responsive>.table-bordered>thead>tr:first-child>td,.panel>.table-responsive>.table-bordered>thead>tr:first-child>th{border-bottom:0}[m
 .panel-title{margin-top:0;font-size:16px}[m
 .panel-footer{padding:10px 15px;background-color:#f5f5f5;border-top:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}[m
 .panel>.list-group .list-group-item,.panel>.panel-collapse>.list-group .list-group-item{border-width:1px 0;border-radius:0}[m
[32m+[m[32m.panel-group .panel-heading,.panel>.table-bordered>tbody>tr:first-child>td,.panel>.table-bordered>tbody>tr:first-child>th,.panel>.table-bordered>tbody>tr:last-child>td,.panel>.table-bordered>tbody>tr:last-child>th,.panel>.table-bordered>tfoot>tr:last-child>td,.panel>.table-bordered>tfoot>tr:last-child>th,.panel>.table-bordered>thead>tr:first-child>td,.panel>.table-bordered>thead>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th,.panel>.table-responsive>.table-bordered>thead>tr:first-child>td,.panel>.table-responsive>.table-bordered>thead>tr:first-child>th{border-bottom:0}[m
 .panel>.list-group:first-child .list-group-item:first-child,.panel>.panel-collapse>.list-group:first-child .list-group-item:first-child{border-top:0;border-top-left-radius:3px;border-top-right-radius:3px}[m
 .panel>.list-group:last-child .list-group-item:last-child,.panel>.panel-collapse>.list-group:last-child .list-group-item:last-child{border-bottom:0;border-bottom-right-radius:3px;border-bottom-left-radius:3px}[m
 .list-group+.panel-footer,.panel-heading+.list-group .list-group-item:first-child{border-top-width:0}[m
[36m@@ -1257,27 +1274,26 @@[m [ma.list-group-item-danger.active,a.list-group-item-danger.active:focus,a.list-gro[m
 .panel-danger>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ebccd1}[m
 .embed-responsive{position:relative;display:block;height:0;padding:0}[m
 .embed-responsive .embed-responsive-item,.embed-responsive embed,.embed-responsive iframe,.embed-responsive object,.embed-responsive video{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}[m
[31m-.embed-responsive-16by9{padding-bottom:56.25%}[m
[31m-.embed-responsive-4by3{padding-bottom:75%}[m
[32m+[m[32m.embed-responsive.embed-responsive-16by9{padding-bottom:56.25%}[m
[32m+[m[32m.embed-responsive.embed-responsive-4by3{padding-bottom:75%}[m
 .well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.05);box-shadow:inset 0 1px 1px rgba(0,0,0,.05)}[m
 .well blockquote{border-color:#ddd;border-color:rgba(0,0,0,.15)}[m
 .well-lg{padding:24px;border-radius:6px}[m
 .well-sm{padding:9px;border-radius:3px}[m
[31m-.close{float:right;font-size:21px;line-height:1;color:#000;text-shadow:0 1px 0 #fff;filter:alpha(opacity=20);opacity:.2}[m
[32m+[m[32m.close{float:right;font-size:21px;color:#000;text-shadow:0 1px 0 #fff;filter:alpha(opacity=20);opacity:.2}[m
[32m+[m[32m.popover,.tooltip{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400}[m
 .close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer;filter:alpha(opacity=50);opacity:.5}[m
 button.close{-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;border:0}[m
[31m-.modal{position:fixed;top:0;z-index:1050;display:none;-webkit-overflow-scrolling:touch;outline:0}[m
[32m+[m[32m.modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;display:none;-webkit-overflow-scrolling:touch;outline:0}[m
 .modal.fade .modal-dialog{-webkit-transition:-webkit-transform .3s ease-out;-o-transition:-o-transform .3s ease-out;transition:transform .3s ease-out;-webkit-transform:translate(0,-25%);-ms-transform:translate(0,-25%);-o-transform:translate(0,-25%);transform:translate(0,-25%)}[m
 .modal.in .modal-dialog{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);-o-transform:translate(0,0);transform:translate(0,0)}[m
 .modal-open .modal{overflow-x:hidden;overflow-y:auto}[m
 .modal-dialog{position:relative;width:auto;margin:10px}[m
[31m-.modal-content{position:relative;background-clip:padding-box;border:1px solid #999;border:1px solid rgba(0,0,0,.2);border-radius:6px;outline:0;-webkit-box-shadow:0 3px 9px rgba(0,0,0,.5);box-shadow:0 3px 9px rgba(0,0,0,.5)}[m
[31m-.modal-content,.popover{background-color:#fff;-webkit-background-clip:padding-box}[m
[31m-.modal-backdrop{position:fixed;top:0;z-index:1040;background-color:#000}[m
[32m+[m[32m.modal-content{position:relative;background-color:#fff;background-clip:padding-box;border:1px solid #999;border:1px solid rgba(0,0,0,.2);border-radius:6px;outline:0;-webkit-box-shadow:0 3px 9px rgba(0,0,0,.5);box-shadow:0 3px 9px rgba(0,0,0,.5)}[m
[32m+[m[32m.modal-backdrop{position:absolute;top:0;right:0;left:0;background-color:#000}[m
 .modal-backdrop.fade{filter:alpha(opacity=0);opacity:0}[m
 .modal-backdrop.in{filter:alpha(opacity=50);opacity:.5}[m
 .modal-header{min-height:16.43px;padding:15px;border-bottom:1px solid #e5e5e5}[m
[31m-.tooltip.bottom .tooltip-arrow,.tooltip.bottom-left .tooltip-arrow,.tooltip.bottom-right .tooltip-arrow{top:0;border-width:0 5px 5px;border-bottom-color:#000}[m
 .modal-header .close{margin-top:-2px}[m
 .modal-title{margin:0;line-height:1.42857143}[m
 .modal-body{position:relative;padding:15px}[m
[36m@@ -1293,7 +1309,7 @@[m [mbutton.close{-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;bor[m
 .tooltip.top-left .tooltip-arrow,.tooltip.top-right .tooltip-arrow{bottom:0;margin-bottom:-5px;border-width:5px 5px 0;border-top-color:#000}[m
 @media (min-width:992px){.modal-lg{width:900px}[m
 }[m
[31m-.tooltip{position:absolute;z-index:1070;display:block;font-size:12px;font-weight:400;line-height:1.4;filter:alpha(opacity=0);opacity:0}[m
[32m+[m[32m.tooltip{position:absolute;z-index:1070;display:block;font-size:12px;line-height:1.4;visibility:visible;filter:alpha(opacity=0);opacity:0}[m
 .tooltip.in{filter:alpha(opacity=90);opacity:.9}[m
 .tooltip.top{padding:5px 0;margin-top:-3px}[m
 .tooltip.right{padding:0 5px;margin-left:3px}[m
[36m@@ -1306,10 +1322,11 @@[m [mbutton.close{-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;bor[m
 .tooltip.top-right .tooltip-arrow{left:5px}[m
 .tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0;border-right-color:#000}[m
 .tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px;border-left-color:#000}[m
[32m+[m[32m.tooltip.bottom .tooltip-arrow,.tooltip.bottom-left .tooltip-arrow,.tooltip.bottom-right .tooltip-arrow{border-width:0 5px 5px;border-bottom-color:#000;top:0}[m
 .tooltip.bottom .tooltip-arrow{left:50%;margin-left:-5px}[m
 .tooltip.bottom-left .tooltip-arrow{right:5px;margin-top:-5px}[m
 .tooltip.bottom-right .tooltip-arrow{left:5px;margin-top:-5px}[m
[31m-.popover{position:absolute;top:0;left:0;z-index:1060;display:none;max-width:276px;padding:1px;font-size:14px;font-weight:400;line-height:1.42857143;text-align:left;white-space:normal;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,.2);box-shadow:0 5px 10px rgba(0,0,0,.2)}[m
[32m+[m[32m.popover{position:absolute;top:0;left:0;z-index:1060;display:none;max-width:276px;padding:1px;font-size:14px;line-height:1.42857143;text-align:left;white-space:normal;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,.2);box-shadow:0 5px 10px rgba(0,0,0,.2)}[m
 .popover.top{margin-top:-10px}[m
 .popover.right{margin-left:10px}[m
 .popover.bottom{margin-top:10px}[m
[36m@@ -1331,7 +1348,6 @@[m [mbutton.close{-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;bor[m
 .popover.left>.arrow:after{right:1px;border-right-width:0;border-left-color:#fff}[m
 .carousel-inner{width:100%;overflow:hidden}[m
 .carousel-inner>.item{position:relative;display:none;-webkit-transition:.6s ease-in-out left;-o-transition:.6s ease-in-out left;transition:.6s ease-in-out left}[m
[31m-.carousel-inner>.item>a>img,.carousel-inner>.item>img{line-height:1}[m
 @media all and (transform-3d),(-webkit-transform-3d){.carousel-inner>.item{-webkit-transition:-webkit-transform .6s ease-in-out;-o-transition:-o-transform .6s ease-in-out;transition:transform .6s ease-in-out;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000;perspective:1000}[m
 .carousel-inner>.item.active.right,.carousel-inner>.item.next{left:0;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}[m
 .carousel-inner>.item.active.left,.carousel-inner>.item.prev{left:0;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}[m
[36m@@ -1356,7 +1372,7 @@[m [mbutton.close{-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;bor[m
 .carousel-control .icon-prev:before{content:'\2039'}[m
 .carousel-control .icon-next:before{content:'\203a'}[m
 .carousel-indicators{position:absolute;bottom:10px;left:50%;z-index:15;width:60%;padding-left:0;margin-left:-30%;text-align:center;list-style:none}[m
[31m-.carousel-indicators li{display:inline-block;width:10px;height:10px;margin:1px;text-indent:-999px;cursor:pointer;background-color:#000\9;background-color:transparent;border:1px solid #fff;border-radius:10px}[m
[32m+[m[32m.carousel-indicators li{display:inline-block;width:10px;height:10px;margin:1px;text-indent:-999px;cursor:pointer;background-color:#000\9;background-color:rgba(0,0,0,0);border:1px solid #fff;border-radius:10px}[m
 .carousel-indicators .active{width:12px;height:12px;margin:0;background-color:#fff}[m
 .carousel-caption{position:absolute;right:15%;bottom:20px;left:15%;z-index:10;padding-top:20px;padding-bottom:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.6)}[m
 .carousel-caption .btn,.text-hide{text-shadow:none}[m
[36m@@ -1376,6 +1392,7 @@[m [mbutton.close{-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;bor[m
 .hidden,.visible-lg,.visible-lg-block,.visible-lg-inline,.visible-lg-inline-block,.visible-md,.visible-md-block,.visible-md-inline,.visible-md-inline-block,.visible-sm,.visible-sm-block,.visible-sm-inline,.visible-sm-inline-block,.visible-xs,.visible-xs-block,.visible-xs-inline,.visible-xs-inline-block{display:none!important}[m
 .invisible{visibility:hidden}[m
 .text-hide{font:0/0 a;color:transparent;background-color:transparent;border:0}[m
[32m+[m[32m.hidden{visibility:hidden!important}[m
 .affix{position:fixed}[m
 @-ms-viewport{width:device-width}[m
 @media (max-width:767px){.visible-xs{display:block!important}[m
[36m@@ -1409,6 +1426,7 @@[m [mtd.visible-lg,th.visible-lg{display:table-cell!important}[m
 .visible-lg-block{display:block!important}[m
 .visible-lg-inline{display:inline!important}[m
 .visible-lg-inline-block{display:inline-block!important}[m
[32m+[m[32m.hidden-lg{display:none!important}[m
 }[m
 @media (max-width:767px){.hidden-xs{display:none!important}[m
 }[m
[36m@@ -1416,8 +1434,6 @@[m [mtd.visible-lg,th.visible-lg{display:table-cell!important}[m
 }[m
 @media (min-width:992px) and (max-width:1199px){.hidden-md{display:none!important}[m
 }[m
[31m-@media (min-width:1200px){.hidden-lg{display:none!important}[m
[31m-}[m
 .visible-print{display:none!important}[m
 @media print{.visible-print{display:block!important}[m
 table.visible-print{display:table}[m
[36m@@ -1433,24 +1449,4 @@[m [mtd.visible-print,th.visible-print{display:table-cell!important}[m
 .visible-print-inline-block{display:none!important}[m
 @media print{.visible-print-inline-block{display:inline-block!important}[m
 .hidden-print{display:none!important}[m
[31m-}[m
[31m-.editable-buttons,.editable-wrap,.editable-wrap .editable-input{display:inline-block}[m
[31m-/*![m
[31m-angular-xeditable - 0.1.9[m
[31m-Edit-in-place for angular.js[m
[31m-Build date: 2015-03-26 [m
[31m-*/[m
[31m-.editable-wrap{white-space:nowrap;margin:0}[m
[31m-.editable-wrap .editable-controls,.editable-wrap .editable-controls>input,.editable-wrap .editable-controls>select,.editable-wrap .editable-controls>textarea,.editable-wrap .editable-error{margin-bottom:0}[m
[31m-.editable-buttons{vertical-align:top}[m
[31m-.editable-buttons button{margin-left:5px}[m
[31m-.editable-input.editable-has-buttons{width:auto}[m
[31m-.editable-bstime .editable-input input[type=text]{width:46px}[m
[31m-.editable-bstime .well-small{margin-bottom:0;padding:10px}[m
[31m-.editable-range output{display:inline-block;min-width:30px;vertical-align:top;text-align:center}[m
[31m-.editable-color input[type=color]{width:50px}[m
[31m-.editable-checkbox label span,.editable-checklist label span,.editable-radiolist label span{margin-left:7px;margin-right:10px}[m
[31m-.editable-hide{display:none!important}[m
[31m-.editable-click,a.editable-click{text-decoration:none;color:#428bca;border-bottom:dashed 1px #428bca}[m
[31m-.editable-click:hover,a.editable-click:hover{text-decoration:none;color:#2a6496;border-bottom-color:#2a6496}[m
[31m-.editable-empty,.editable-empty:focus,.editable-empty:hover,a.editable-empty,a.editable-empty:focus,a.editable-empty:hover{font-style:italic;color:#D14;text-decoration:none}[m
\ No newline at end of file[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/dist/notes.min.js b/dist/notes.min.js[m
[1mindex 1e29b5e..b6db0cd 100644[m
[1m--- a/dist/notes.min.js[m
[1m+++ b/dist/notes.min.js[m
[36m@@ -1,13 +1,11 @@[m
[31m-if(function(t,e,n){"use strict";function r(t,e){return e=e||Error,function(){var n,r,i=2,o=arguments,a=o[0],s="["+(t?t+":":"")+a+"] ",u=o[1];for(s+=u.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1),n=e+i;return n<o.length?$t(o[n]):t}),s+="\nhttp://errors.angularjs.org/1.4.1/"+(t?t+"/":"")+a,r=i,n="?";r<o.length;r++,n="&")s+=n+"p"+(r-i)+"="+encodeURIComponent($t(o[r]));return new e(s)}}function i(t){if(null==t||k(t))return!1;var e="length"in Object(t)&&t.length;return t.nodeType===Gr&&e?!0:x(t)||Vr(t)||0===e||"number"==typeof e&&e>0&&e-1 in t}function o(t,e,n){var r,a;if(t)if(S(t))for(r in t)"prototype"==r||"length"==r||"name"==r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r,t);else if(Vr(t)||i(t)){var s="object"!=typeof t;for(r=0,a=t.length;a>r;r++)(s||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==o)t.forEach(e,n,t);else if(w(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)xr.call(t,r)&&e.call(n,t[r],r,t);return t}function a(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function s(t){return function(e,n){t(n,e)}}function u(){return++Fr}function l(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function c(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;o>i;++i){var a=e[i];if(b(a)||S(a))for(var s=Object.keys(a),u=0,f=s.length;f>u;u++){var p=s[u],h=a[p];n&&b(h)?(b(t[p])||(t[p]=Vr(h)?[]:{}),c(t[p],[h],!0)):t[p]=h}}return l(t,r),t}function f(t){return c(t,Or.call(arguments,1),!1)}function p(t){return c(t,Or.call(arguments,1),!0)}function h(t){return parseInt(t,10)}function d(t,e){return f(Object.create(t),e)}function m(){}function v(t){return t}function g(t){return function(){return t}}function $(t){return"undefined"==typeof t}function y(t){return"undefined"!=typeof t}function b(t){return null!==t&&"object"==typeof t}function w(t){return null!==t&&"object"==typeof t&&!Ir(t)}function x(t){return"string"==typeof t}function C(t){return"number"==typeof t}function E(t){return"[object Date]"===Mr.call(t)}function S(t){return"function"==typeof t}function T(t){return"[object RegExp]"===Mr.call(t)}function k(t){return t&&t.window===t}function A(t){return t&&t.$evalAsync&&t.$watch}function N(t){return"[object File]"===Mr.call(t)}function O(t){return"[object FormData]"===Mr.call(t)}function D(t){return"[object Blob]"===Mr.call(t)}function j(t){return"boolean"==typeof t}function M(t){return t&&S(t.then)}function I(t){return Lr.test(Mr.call(t))}function P(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function R(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}function F(t){return wr(t.nodeName||t[0]&&t[0].nodeName)}function q(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function V(t,e,n,r){if(k(t)||A(t))throw Pr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(I(e))throw Pr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e){if(t===e)throw Pr("cpi","Can't copy! Source and destination are identical.");n=n||[],r=r||[],b(t)&&(n.push(t),r.push(e));var i;if(Vr(t)){e.length=0;for(var a=0;a<t.length;a++)e.push(V(t[a],null,n,r))}else{var s=e.$$hashKey;if(Vr(e)?e.length=0:o(e,function(t,n){delete e[n]}),w(t))for(i in t)e[i]=V(t[i],null,n,r);else if(t&&"function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&(e[i]=V(t[i],null,n,r));else for(i in t)xr.call(t,i)&&(e[i]=V(t[i],null,n,r));l(e,s)}}else if(e=t,b(t)){var u;if(n&&-1!==(u=n.indexOf(t)))return r[u];if(Vr(t))return V(t,[],n,r);if(I(t))e=new t.constructor(t);else if(E(t))e=new Date(t.getTime());else{if(!T(t)){var c=Object.create(Ir(t));return V(t,c,n,r)}e=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]),e.lastIndex=t.lastIndex}r&&(n.push(t),r.push(e))}return e}function L(t,e){if(Vr(t)){e=e||[];for(var n=0,r=t.length;r>n;n++)e[n]=t[n]}else if(b(t)){e=e||{};for(var i in t)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(e[i]=t[i])}return e||t}function _(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var r,i,o,a=typeof t,s=typeof e;if(a==s&&"object"==a){if(!Vr(t)){if(E(t))return E(e)?_(t.getTime(),e.getTime()):!1;if(T(t))return T(e)?t.toString()==e.toString():!1;if(A(t)||A(e)||k(t)||k(e)||Vr(e)||E(e)||T(e))return!1;o=mt();for(i in t)if("$"!==i.charAt(0)&&!S(t[i])){if(!_(t[i],e[i]))return!1;o[i]=!0}for(i in e)if(!(i in o||"$"===i.charAt(0)||e[i]===n||S(e[i])))return!1;return!0}if(!Vr(e))return!1;if((r=t.length)==e.length){for(i=0;r>i;i++)if(!_(t[i],e[i]))return!1;return!0}}return!1}function H(t,e,n){return t.concat(Or.call(e,n))}function U(t,e){return Or.call(t,e||0)}function B(t,e){var n=arguments.length>2?U(arguments,2):[];return!S(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,H(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function W(t,r){var i=r;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?i=n:k(r)?i="$WINDOW":r&&e===r?i="$DOCUMENT":A(r)&&(i="$SCOPE"),i}function z(t,e){return"undefined"==typeof t?n:(C(e)||(e=e?2:null),JSON.stringify(t,W,e))}function Y(t){return x(t)?JSON.parse(t):t}function G(t,e){var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function X(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Q(t,e,n){n=n?-1:1;var r=G(e,t.getTimezoneOffset());return X(t,n*(r-t.getTimezoneOffset()))}function J(t){t=kr(t).clone();try{t.empty()}catch(e){}var n=kr("<div>").append(t).html();try{return t[0].nodeType===Qr?wr(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+wr(e)})}catch(e){return wr(n)}}function K(t){try{return decodeURIComponent(t)}catch(e){}}function Z(t){var e,n,r={};return o((t||"").split("&"),function(t){if(t&&(e=t.replace(/\+/g,"%20").split("="),n=K(e[0]),y(n))){var i=y(e[1])?K(e[1]):!0;xr.call(r,n)?Vr(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i}}),r}function tt(t){var e=[];return o(t,function(t,n){Vr(t)?o(t,function(t){e.push(nt(n,!0)+(t===!0?"":"="+nt(t,!0)))}):e.push(nt(n,!0)+(t===!0?"":"="+nt(t,!0)))}),e.length?e.join("&"):""}function et(t){return nt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function nt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function rt(t,e){var n,r,i=Wr.length;for(r=0;i>r;++r)if(n=Wr[r]+e,x(n=t.getAttribute(n)))return n;return null}function it(t,e){var n,r,i={};o(Wr,function(e){var i=e+"app";!n&&t.hasAttribute&&t.hasAttribute(i)&&(n=t,r=t.getAttribute(i))}),o(Wr,function(e){var i,o=e+"app";!n&&(i=t.querySelector("["+o.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(o))}),n&&(i.strictDi=null!==rt(n,"strict-di"),e(n,r?[r]:[],i))}function ot(n,r,i){b(i)||(i={});var a={strictDi:!1};i=f(a,i);var s=function(){if(n=kr(n),n.injector()){var t=n[0]===e?"document":J(n);throw Pr("btstrpd","App Already Bootstrapped with this Element '{0}'",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(t){t.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),r.unshift("ng");var o=Jt(r,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),o},u=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return t&&u.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(u,"")),t&&!l.test(t.name)?s():(t.name=t.name.replace(l,""),Rr.resumeBootstrap=function(t){return o(t,function(t){r.push(t)}),s()},void(S(Rr.resumeDeferredBootstrap)&&Rr.resumeDeferredBootstrap()))}function at(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function st(t){var e=Rr.element(t).injector();if(!e)throw Pr("test","no injector found for element argument to getTestability");return e.get("$$testability")}function ut(t,e){return e=e||"_",t.replace(zr,function(t,n){return(n?e:"")+t.toLowerCase()})}function lt(){var e;if(!Yr){var r=Br();Ar=t.jQuery,y(r)&&(Ar=null===r?n:t[r]),Ar&&Ar.fn.on?(kr=Ar,f(Ar.fn,{scope:di.scope,isolateScope:di.isolateScope,controller:di.controller,injector:di.injector,inheritedData:di.inheritedData}),e=Ar.cleanData,Ar.cleanData=function(t){var n;if(qr)qr=!1;else for(var r,i=0;null!=(r=t[i]);i++)n=Ar._data(r,"events"),n&&n.$destroy&&Ar(r).triggerHandler("$destroy");e(t)}):kr=kt,Rr.element=kr,Yr=!0}}function ct(t,e,n){if(!t)throw Pr("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function ft(t,e,n){return n&&Vr(t)&&(t=t[t.length-1]),ct(S(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function pt(t,e){if("hasOwnProperty"===t)throw Pr("badname","hasOwnProperty is not a valid {0} name",e)}function ht(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,a=i.length,s=0;a>s;s++)r=i[s],t&&(t=(o=t)[r]);return!n&&S(t)?B(o,t):t}function dt(t){var e=t[0],n=t[t.length-1],r=[e];do{if(e=e.nextSibling,!e)break;r.push(e)}while(e!==n);return kr(r)}function mt(){return Object.create(null)}function vt(t){function e(t,e,n){return t[e]||(t[e]=n())}var n=r("$injector"),i=r("ng"),o=e(t,"angular",Object);return o.$$minErr=o.$$minErr||r,e(o,"module",function(){var t={};return function(r,o,a){var s=function(t,e){if("hasOwnProperty"===t)throw i("badname","hasOwnProperty is not a valid {0} name",e)};return s(r,"module"),o&&t.hasOwnProperty(r)&&(t[r]=null),e(t,r,function(){function t(t,e,n,r){return r||(r=i),function(){return r[n||"push"]([t,e,arguments]),c}}function e(t,e){return function(n,o){return o&&S(o)&&(o.$$moduleName=r),i.push([t,e,arguments]),c}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var i=[],s=[],u=[],l=t("$injector","invoke","push",s),c={_invokeQueue:i,_configBlocks:s,_runBlocks:u,requires:o,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:e("$provide","decorator"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:l,run:function(t){return u.push(t),this}};return a&&l(a),c})}})}function gt(t){var e=[];return JSON.stringify(t,function(t,n){if(n=W(t,n),b(n)){if(e.indexOf(n)>=0)return"<<already seen>>";e.push(n)}return n})}function $t(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof t?"undefined":"string"!=typeof t?gt(t):t}function yt(e){f(e,{bootstrap:ot,copy:V,extend:f,merge:p,equals:_,element:kr,forEach:o,injector:Jt,noop:m,bind:B,toJson:z,fromJson:Y,identity:v,isUndefined:$,isDefined:y,isString:x,isFunction:S,isObject:b,isNumber:C,isElement:P,isArray:Vr,version:ti,isDate:E,lowercase:wr,uppercase:Cr,callbacks:{counter:0},getTestability:st,$$minErr:r,$$csp:Ur,reloadWithDebugInfo:at}),Nr=vt(t);try{Nr("ngLocale")}catch(n){Nr("ngLocale",[]).provider("$locale",De)}Nr("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:gn}),t.provider("$compile",ue).directive({a:co,input:Ao,textarea:Ao,form:vo,script:ba,select:Ca,style:Sa,option:Ea,ngBind:Do,ngBindHtml:Mo,ngBindTemplate:jo,ngClass:Po,ngClassEven:Fo,ngClassOdd:Ro,ngCloak:qo,ngController:Vo,ngForm:go,ngHide:da,ngIf:Ho,ngInclude:Uo,ngInit:Wo,ngNonBindable:oa,ngPluralize:la,ngRepeat:ca,ngShow:ha,ngStyle:ma,ngSwitch:va,ngSwitchWhen:ga,ngSwitchDefault:$a,ngOptions:ua,ngTransclude:ya,ngModel:na,ngList:zo,ngChange:Io,pattern:ka,ngPattern:ka,required:Ta,ngRequired:Ta,minlength:Na,ngMinlength:Na,maxlength:Aa,ngMaxlength:Aa,ngValue:Oo,ngModelOptions:ia}).directive({ngInclude:Bo}).directive(fo).directive(Lo),t.provider({$anchorScroll:Kt,$animate:Ni,$$animateQueue:Ai,$$AnimateRunner:ki,$browser:oe,$cacheFactory:ae,$controller:he,$document:de,$exceptionHandler:me,$filter:Dn,$interpolate:Ne,$interval:Oe,$http:Se,$httpParamSerializer:ge,$httpParamSerializerJQLike:$e,$httpBackend:ke,$location:We,$log:ze,$parse:fn,$rootScope:vn,$q:pn,$$q:hn,$sce:wn,$sceDelegate:bn,$sniffer:xn,$templateCache:se,$templateRequest:Cn,$$testability:En,$timeout:Sn,$window:An,$$rAF:mn,$$asyncCallback:re,$$jqLite:zt,$$HashMap:$i,$$cookieReader:On})}])}function bt(){return++ni}function wt(t){return t.replace(oi,function(t,e,n,r){return r?n.toUpperCase():n}).replace(ai,"Moz$1")}function xt(t){return!ci.test(t)}function Ct(t){var e=t.nodeType;return e===Gr||!e||e===Kr}function Et(t){for(var e in ei[t.ng339])return!0;return!1}function St(t,e){var n,r,i,a,s=e.createDocumentFragment(),u=[];if(xt(t))u.push(e.createTextNode(t));else{for(n=n||s.appendChild(e.createElement("div")),r=(fi.exec(t)||["",""])[1].toLowerCase(),i=hi[r]||hi._default,n.innerHTML=i[1]+t.replace(pi,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;u=H(u,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",o(u,function(t){s.appendChild(t)}),s}function Tt(t,n){n=n||e;var r;return(r=li.exec(t))?[n.createElement(r[1])]:(r=St(t,n))?r.childNodes:[]}function kt(t){if(t instanceof kt)return t;var e;if(x(t)&&(t=_r(t),e=!0),!(this instanceof kt)){if(e&&"<"!=t.charAt(0))throw ui("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new kt(t)}e?Ft(this,Tt(t)):Ft(this,t)}function At(t){return t.cloneNode(!0)}function Nt(t,e){if(e||Dt(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),r=0,i=n.length;i>r;r++)Dt(n[r])}function Ot(t,e,n,r){if(y(r))throw ui("offargs","jqLite#off() does not support the `selector` argument");var i=jt(t),a=i&&i.events,s=i&&i.handle;if(s)if(e)o(e.split(" "),function(e){if(y(n)){var r=a[e];if(q(r||[],n),r&&r.length>0)return}ii(t,e,s),delete a[e]});else for(e in a)"$destroy"!==e&&ii(t,e,s),delete a[e]}function Dt(t,e){var r=t.ng339,i=r&&ei[r];if(i){if(e)return void delete i.data[e];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),Ot(t)),delete ei[r],t.ng339=n}}function jt(t,e){var r=t.ng339,i=r&&ei[r];return e&&!i&&(t.ng339=r=bt(),i=ei[r]={events:{},data:{},handle:n}),i}function Mt(t,e,n){if(Ct(t)){var r=y(n),i=!r&&e&&!b(e),o=!e,a=jt(t,!i),s=a&&a.data;if(r)s[e]=n;else{if(o)return s;if(i)return s&&s[e];f(s,e)}}}function It(t,e){return t.getAttribute?(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1:!1}function Pt(t,e){e&&t.setAttribute&&o(e.split(" "),function(e){t.setAttribute("class",_r((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+_r(e)+" "," ")))})}function Rt(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(e.split(" "),function(t){t=_r(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",_r(n))}}function Ft(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;n>r;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function qt(t,e){return Vt(t,"$"+(e||"ngController")+"Controller")}function Vt(t,e,r){t.nodeType==Kr&&(t=t.documentElement);for(var i=Vr(e)?e:[e];t;){for(var o=0,a=i.length;a>o;o++)if((r=kr.data(t,i[o]))!==n)return r;t=t.parentNode||t.nodeType===Zr&&t.host}}function Lt(t){for(Nt(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function _t(t,e){e||Nt(t);var n=t.parentNode;n&&n.removeChild(t)}function Ht(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):kr(n).on("load",e)}function Ut(t,e){var n=mi[e.toLowerCase()];return n&&vi[F(t)]&&n}function Bt(t,e){var n=t.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&gi[e]}function Wt(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if($(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},o>1&&(i=L(i));for(var s=0;o>s;s++)n.isImmediatePropagationStopped()||i[s].call(t,n)}};return n.elem=t,n}function zt(){this.$get=function(){return f(kt,{hasClass:function(t,e){return t.attr&&(t=t[0]),It(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Rt(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Pt(t,e)}})}}function Yt(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"==r||"object"==r&&null!==t?t.$$hashKey=r+":"+(e||u)():r+":"+t}function Gt(t,e){if(e){var n=0;this.nextUid=function(){return++n}}o(t,this.put,this)}function Xt(t){var e=t.toString().replace(xi,""),n=e.match(yi);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Qt(t,e,n){var r,i,a,s;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw x(n)&&n||(n=t.name||Xt(t)),Ci("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=t.toString().replace(xi,""),a=i.match(yi),o(a[1].split(bi),function(t){t.replace(wi,function(t,e,n){r.push(n)})})}t.$inject=r}}else Vr(t)?(s=t.length-1,ft(t[s],"fn"),r=t.slice(0,s)):ft(t,"fn",!0);return r}function Jt(t,e){function r(t){return function(e,n){return b(e)?void o(e,s(t)):t(e,n)}}function i(t,e){if(pt(t,"service"),(S(e)||Vr(e))&&(e=E.instantiate(e)),!e.$get)throw Ci("pget","Provider '{0}' must define $get factory method.",t);return C[t+v]=e}function a(t,e){return function(){var n=k.invoke(e,this);if($(n))throw Ci("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function u(t,e,n){return i(t,{$get:n!==!1?a(t,e):e})}function l(t,e){return u(t,["$injector",function(t){return t.instantiate(e)}])}function c(t,e){return u(t,g(e),!1)}function f(t,e){pt(t,"constant"),C[t]=e,T[t]=e}function p(t,e){var n=E.get(t+v),r=n.$get;n.$get=function(){var t=k.invoke(r,n);return k.invoke(e,null,{$delegate:t})}}function h(t){var e,n=[];return o(t,function(t){function r(t){var e,n;for(e=0,n=t.length;n>e;e++){var r=t[e],i=E.get(r[0]);i[r[1]].apply(i,r[2])}}if(!w.get(t)){w.put(t,!0);try{x(t)?(e=Nr(t),n=n.concat(h(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):S(t)?n.push(E.invoke(t)):Vr(t)?n.push(E.invoke(t)):ft(t,"module")}catch(i){throw Vr(t)&&(t=t[t.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Ci("modulerr","Failed to instantiate module {0} due to:\n{1}",t,i.stack||i.message||i)}}}),n}function d(t,n){function r(e,r){if(t.hasOwnProperty(e)){if(t[e]===m)throw Ci("cdep","Circular dependency found: {0}",e+" <- "+y.join(" <- "));return t[e]}try{return y.unshift(e),t[e]=m,t[e]=n(e,r)}catch(i){throw t[e]===m&&delete t[e],i}finally{y.shift()}}function i(t,n,i,o){"string"==typeof i&&(o=i,i=null);var a,s,u,l=[],c=Jt.$$annotate(t,e,o);for(s=0,a=c.length;a>s;s++){if(u=c[s],"string"!=typeof u)throw Ci("itkn","Incorrect injection token! Expected service name as string, got {0}",u);l.push(i&&i.hasOwnProperty(u)?i[u]:r(u,o))}return Vr(t)&&(t=t[a]),t.apply(n,l)}function o(t,e,n){var r=Object.create((Vr(t)?t[t.length-1]:t).prototype||null),o=i(t,r,e,n);return b(o)||S(o)?o:r}return{invoke:i,instantiate:o,get:r,annotate:Jt.$$annotate,has:function(e){return C.hasOwnProperty(e+v)||t.hasOwnProperty(e)}}}e=e===!0;var m={},v="Provider",y=[],w=new Gt([],!0),C={$provide:{provider:r(i),factory:r(u),service:r(l),value:r(c),constant:r(f),decorator:p}},E=C.$injector=d(C,function(t,e){throw Rr.isString(e)&&y.push(e),Ci("unpr","Unknown provider: {0}",y.join(" <- "))}),T={},k=T.$injector=d(T,function(t,e){var r=E.get(t+v,e);return k.invoke(r.$get,r,n,t)});return o(h(t),function(t){t&&k.invoke(t)}),k}function Kt(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,r){function i(t){var e=null;return Array.prototype.some.call(t,function(t){return"a"===F(t)?(e=t,!0):void 0}),e}function o(){var t=s.yOffset;if(S(t))t=t();else if(P(t)){var n=t[0],r=e.getComputedStyle(n);t="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else C(t)||(t=0);return t}function a(t){if(t){t.scrollIntoView();var n=o();if(n){var r=t.getBoundingClientRect().top;e.scrollBy(0,r-n)}}else e.scrollTo(0,0)}function s(t){t=x(t)?t:n.hash();var e;t?(e=u.getElementById(t))?a(e):(e=i(u.getElementsByName(t)))?a(e):"top"===t&&a(null):a(null)}var u=e.document;return t&&r.$watch(function(){return n.hash()},function(t,e){(t!==e||""!==t)&&Ht(function(){r.$evalAsync(s)})}),s}]}function Zt(t,e){return t||e?t?e?(Vr(t)&&(t=t.join(" ")),Vr(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function te(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Si)return n}}function ee(t){x(t)&&(t=t.split(" "));var e=mt();return o(t,function(t){t.length&&(e[t]=!0)}),e}function ne(t){return b(t)?t:{}}function re(){this.$get=["$$rAF","$timeout",function(t,e){return t.supported?function(e){return t(e)}:function(t){return e(t,0,!1)}}]}function ie(t,e,n,r){function i(t){try{t.apply(null,U(arguments,1))}finally{if(y--,0===y)for(;b.length;)try{b.pop()()}catch(e){n.error(e)}}}function a(t){var e=t.indexOf("#");return-1===e?"":t.substr(e+1)}function s(){l(),c()}function u(){try{return h.state}catch(t){}}function l(){w=u(),w=$(w)?null:w,_(w,A)&&(w=A),A=w}function c(){(C!==f.url()||x!==w)&&(C=f.url(),x=w,o(T,function(t){t(f.url(),w)}))}var f=this,p=(e[0],t.location),h=t.history,d=t.setTimeout,v=t.clearTimeout,g={};f.isMock=!1;var y=0,b=[];f.$$completeOutstandingRequest=i,f.$$incOutstandingRequestCount=function(){y++},f.notifyWhenNoOutstandingRequests=function(t){0===y?t():b.push(t)};var w,x,C=p.href,E=e.find("base"),S=null;l(),x=w,f.url=function(e,n,i){if($(i)&&(i=null),p!==t.location&&(p=t.location),h!==t.history&&(h=t.history),e){var o=x===i;if(C===e&&(!r.history||o))return f;var s=C&&Re(C)===Re(e);return C=e,x=i,!r.history||s&&o?((!s||S)&&(S=e),n?p.replace(e):s?p.hash=a(e):p.href=e):(h[n?"replaceState":"pushState"](i,"",e),l(),x=w),f}return S||p.href.replace(/%27/g,"'")},f.state=function(){return w};var T=[],k=!1,A=null;f.onUrlChange=function(e){return k||(r.history&&kr(t).on("popstate",s),kr(t).on("hashchange",s),k=!0),T.push(e),e},f.$$applicationDestroyed=function(){kr(t).off("hashchange popstate",s)},f.$$checkUrlChange=c,f.baseHref=function(){var t=E.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""},f.defer=function(t,e){var n;return y++,n=d(function(){delete g[n],i(t)},e||0),g[n]=!0,n},f.defer.cancel=function(t){return g[t]?(delete g[t],v(t),i(m),!0):!1}}function oe(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new ie(t,r,e,n)}]}function ae(){this.$get=function(){function t(t,n){function i(t){t!=p&&(h?h==t&&(h=t.n):h=t,o(t.n,t.p),o(t,p),p=t,p.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var a=0,s=f({},n,{id:t}),u={},l=n&&n.capacity||Number.MAX_VALUE,c={},p=null,h=null;return e[t]={put:function(t,e){if(!$(e)){if(l<Number.MAX_VALUE){var n=c[t]||(c[t]={key:t});i(n)}return t in u||a++,u[t]=e,a>l&&this.remove(h.key),e}},get:function(t){if(l<Number.MAX_VALUE){var e=c[t];if(!e)return;i(e)}return u[t]},remove:function(t){if(l<Number.MAX_VALUE){var e=c[t];if(!e)return;e==p&&(p=e.p),e==h&&(h=e.n),o(e.n,e.p),delete c[t]}delete u[t],a--},removeAll:function(){u={},a=0,c={},p=h=null},destroy:function(){u=null,s=null,c=null,delete e[t]},info:function(){return f({},s,{size:a})}}}var e={};return t.info=function(){var t={};return o(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function se(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function ue(t,r){function i(t,e,n){var r=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return o(t,function(t,o){var a=t.match(r);if(!a)throw Oi("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o}}),i}function a(t,e){var n={isolateScope:null,bindToController:null};if(b(t.scope)&&(t.bindToController===!0?(n.bindToController=i(t.scope,e,!0),n.isolateScope={}):n.isolateScope=i(t.scope,e,!1)),b(t.bindToController)&&(n.bindToController=i(t.bindToController,e,!0)),b(n.bindToController)){var r=t.controller,o=t.controllerAs;if(!r)throw Oi("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);if(!pe(r,o))throw Oi("noident","Cannot bind to controller without identifier for directive '{0}'.",e)}return n}function u(t){var e=t.charAt(0);if(!e||e!==wr(e))throw Oi("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw Oi("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}var l={},c="Directive",p=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,h=/(([\w\-]+)(?:\:([^;]+))?;?)/,$=R("ngSrc,ngSrcset,src,srcset"),w=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,C=/^(on[a-z]+|formaction)$/;this.directive=function T(e,n){return pt(e,"directive"),x(e)?(u(e),ct(n,"directiveFactory"),l.hasOwnProperty(e)||(l[e]=[],t.factory(e+c,["$injector","$exceptionHandler",function(t,n){var r=[];return o(l[e],function(i,o){try{var s=t.invoke(i);S(s)?s={compile:g(s)}:!s.compile&&s.link&&(s.compile=g(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||e,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA";var u=s.$$bindings=a(s,s.name);b(u.isolateScope)&&(s.$$isolateBindings=u.isolateScope),s.$$moduleName=i.$$moduleName,r.push(s)}catch(l){n(l)}}),r}])),l[e].push(n)):o(e,s(T)),this},this.aHrefSanitizationWhitelist=function(t){return y(t)?(r.aHrefSanitizationWhitelist(t),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return y(t)?(r.imgSrcSanitizationWhitelist(t),this):r.imgSrcSanitizationWhitelist()};var E=!0;this.debugInfoEnabled=function(t){return y(t)?(E=t,this):E},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(t,r,i,a,s,u,g,y,T,k,N){function O(t,e){try{t.addClass(e)}catch(n){}}function D(t,e,n,r,i){t instanceof kr||(t=kr(t)),o(t,function(e,n){e.nodeType==Qr&&e.nodeValue.match(/\S+/)&&(t[n]=kr(e).wrap("<span></span>").parent()[0])});var a=M(t,e,t,n,r,i);D.$$addScopeClass(t);var s=null;return function(e,n,r){ct(e,"scope"),r=r||{};var i=r.parentBoundTranscludeFn,o=r.transcludeControllers,u=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),s||(s=j(u));var l;if(l="html"!==s?kr(K(s,kr("<div>").append(t).html())):n?di.clone.call(t):t,o)for(var c in o)l.data("$"+c+"Controller",o[c].instance);return D.$$addScopeInfo(l,e),n&&n(l,e),a&&a(e,l,l,i),l}}function j(t){var e=t&&t[0];return e&&"foreignobject"!==F(e)&&e.toString().match(/SVG/)?"svg":"html"}function M(t,e,r,i,o,a){function s(t,r,i,o){var a,s,u,l,c,f,p,h,v;if(d){var g=r.length;for(v=new Array(g),c=0;c<m.length;c+=3)p=m[c],v[p]=r[p]}else v=r;for(c=0,f=m.length;f>c;)if(u=v[m[c++]],a=m[c++],s=m[c++],a){if(a.scope){l=t.$new(),D.$$addScopeInfo(kr(u),l);var $=a.$$destroyBindings;$&&(a.$$destroyBindings=null,l.$on("$destroyed",$))}else l=t;h=a.transcludeOnThisElement?I(t,a.transclude,o):!a.templateOnThisElement&&o?o:!o&&e?I(t,e):null,a(s,l,u,i,h,a)}else s&&s(t,u.childNodes,n,o)}for(var u,l,c,f,p,h,d,m=[],v=0;v<t.length;v++)u=new ot,l=P(t[v],[],u,0===v?i:n,o),c=l.length?L(l,t[v],u,e,r,null,[],[],a):null,c&&c.scope&&D.$$addScopeClass(u.$$element),p=c&&c.terminal||!(f=t[v].childNodes)||!f.length?null:M(f,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||p)&&(m.push(v,c,p),h=!0,d=d||c),a=null;return h?s:null}function I(t,e,n){var r=function(r,i,o,a,s){return r||(r=t.$new(!1,s),r.$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})};return r}function P(t,e,n,r,i){var o,a,s=t.nodeType,u=n.$attr;switch(s){case Gr:B(e,le(F(t)),"E",r,i);for(var l,c,f,d,m,v,g=t.attributes,$=0,y=g&&g.length;y>$;$++){var w=!1,C=!1;l=g[$],c=l.name,m=_r(l.value),d=le(c),(v=ft.test(d))&&(c=c.replace(Di,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var E=d.replace(/(Start|End)$/,"");W(E)&&d===E+"Start"&&(w=c,C=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),f=le(c.toLowerCase()),u[f]=c,(v||!n.hasOwnProperty(f))&&(n[f]=m,Ut(t,f)&&(n[f]=!0)),tt(t,e,m,f,v),B(e,f,"A",r,i,w,C)}if(a=t.className,b(a)&&(a=a.animVal),x(a)&&""!==a)for(;o=h.exec(a);)f=le(o[2]),B(e,f,"C",r,i)&&(n[f]=_r(o[3])),a=a.substr(o.index+o[0].length);break;case Qr:if(11===Tr)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===Qr;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);Q(e,t.nodeValue);break;case Jr:try{o=p.exec(t.nodeValue),o&&(f=le(o[1]),B(e,f,"M",r,i)&&(n[f]=_r(o[2])))}catch(S){}}return e.sort(G),e}function R(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw Oi("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType==Gr&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0)}else r.push(t);return kr(r)}function V(t,e,n){return function(r,i,o,a,s){return i=R(i[0],e,n),t(r,i,o,a,s)}}function L(t,r,o,a,s,l,c,f,p){function h(t,e,n,r){t&&(n&&(t=V(t,n,r)),t.require=$.require,t.directiveName=y,(O===$||$.$$isolateScope)&&(t=nt(t,{isolateScope:!0})),c.push(t)),e&&(n&&(e=V(e,n,r)),e.require=$.require,e.directiveName=y,(O===$||$.$$isolateScope)&&(e=nt(e,{isolateScope:!0})),f.push(e))}function d(t,e,n,r){var i;if(x(e)){var o=e.match(w),a=e.substring(o[0].length),s=o[1]||o[3],u="?"===o[2];if("^^"===s?n=n.parent():(i=r&&r[a],i=i&&i.instance),!i){var l="$"+a+"Controller";i=s?n.inheritedData(l):n.data(l)}if(!i&&!u)throw Oi("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(Vr(e)){i=[];for(var c=0,f=e.length;f>c;c++)i[c]=d(t,e[c],n,r)}return i||null}function m(t,e,n,r,i,o){var a=mt();for(var s in r){var l=r[s],c={$scope:l===O||l.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},f=l.controller;"@"==f&&(f=e[l.name]);var p=u(f,c,!0,l.controllerAs);a[l.name]=p,q||t.data("$"+l.name+"Controller",p.instance)}return a}function v(t,e,i,a,s,u){function l(t,e,r){var i;return A(t)||(r=e,e=t,t=n),q&&(i=b),r||(r=q?x.parent():x),s(t,e,i,r,M)}var p,h,v,$,y,b,w,x,C;if(r===i?(C=o,x=o.$$element):(x=kr(i),C=new ot(x,o)),O&&(y=e.$new(!0)),s&&(w=l,w.$$boundTransclude=s),N&&(b=m(x,C,w,N,y,e)),O&&(D.$$addScopeInfo(x,y,!0,!(j&&(j===O||j===O.$$originalDirective))),D.$$addScopeClass(x,!0),y.$$isolateBindings=O.$$isolateBindings,it(e,C,y,y.$$isolateBindings,O,y)),b){var E,S,T=O||g;T&&b[T.name]&&(E=T.$$bindings.bindToController,$=b[T.name],$&&$.identifier&&E&&(S=$,u.$$destroyBindings=it(e,C,$.instance,E,T)));for(p in b){$=b[p];var k=$();k!==$.instance&&($.instance=k,x.data("$"+p+"Controller",k),$===S&&(u.$$destroyBindings(),u.$$destroyBindings=it(e,C,k,E,T)))}}for(p=0,h=c.length;h>p;p++)v=c[p],rt(v,v.isolateScope?y:e,x,C,v.require&&d(v.directiveName,v.require,x,b),w);var M=e;for(O&&(O.template||null===O.templateUrl)&&(M=y),t&&t(M,i.childNodes,n,s),p=f.length-1;p>=0;p--)v=f[p],rt(v,v.isolateScope?y:e,x,C,v.require&&d(v.directiveName,v.require,x,b),w)}p=p||{};for(var g,$,y,C,E,T,k=-Number.MAX_VALUE,N=p.controllerDirectives,O=p.newIsolateScopeDirective,j=p.templateDirective,M=p.nonTlbTranscludeDirective,I=!1,F=!1,q=p.hasElementTranscludeDirective,L=o.$$element=kr(r),_=l,B=a,W=0,G=t.length;G>W;W++){$=t[W];var Q=$.$$start,Z=$.$$end;if(Q&&(L=R(r,Q,Z)),C=n,k>$.priority)break;if((T=$.scope)&&($.templateUrl||(b(T)?(X("new/isolated scope",O||g,$,L),O=$):X("new/isolated scope",O,$,L)),g=g||$),y=$.name,!$.templateUrl&&$.controller&&(T=$.controller,N=N||mt(),X("'"+y+"' controller",N[y],$,L),N[y]=$),(T=$.transclude)&&(I=!0,$.$$tlb||(X("transclusion",M,$,L),[m
[31m-M=$),"element"==T?(q=!0,k=$.priority,C=L,L=o.$$element=kr(e.createComment(" "+y+": "+o[y]+" ")),r=L[0],et(s,U(C),r),B=D(C,a,k,_&&_.name,{nonTlbTranscludeDirective:M})):(C=kr(At(r)).contents(),L.empty(),B=D(C,a))),$.template)if(F=!0,X("template",j,$,L),j=$,T=S($.template)?$.template(L,o):$.template,T=lt(T),$.replace){if(_=$,C=xt(T)?[]:fe(K($.templateNamespace,_r(T))),r=C[0],1!=C.length||r.nodeType!==Gr)throw Oi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",y,"");et(s,L,r);var tt={$attr:{}},at=P(r,[],tt),st=t.splice(W+1,t.length-(W+1));O&&H(at),t=t.concat(at).concat(st),z(o,tt),G=t.length}else L.html(T);if($.templateUrl)F=!0,X("template",j,$,L),j=$,$.replace&&(_=$),v=Y(t.splice(W,t.length-W),L,o,s,I&&B,c,f,{controllerDirectives:N,newIsolateScopeDirective:O,templateDirective:j,nonTlbTranscludeDirective:M}),G=t.length;else if($.compile)try{E=$.compile(L,o,B),S(E)?h(null,E,Q,Z):E&&h(E.pre,E.post,Q,Z)}catch(ut){i(ut,J(L))}$.terminal&&(v.terminal=!0,k=Math.max(k,$.priority))}return v.scope=g&&g.scope===!0,v.transcludeOnThisElement=I,v.templateOnThisElement=F,v.transclude=B,p.hasElementTranscludeDirective=q,v}function H(t){for(var e=0,n=t.length;n>e;e++)t[e]=d(t[e],{$$isolateScope:!0})}function B(e,r,o,a,s,u,f){if(r===s)return null;var p=null;if(l.hasOwnProperty(r))for(var h,m=t.get(r+c),v=0,g=m.length;g>v;v++)try{h=m[v],(a===n||a>h.priority)&&-1!=h.restrict.indexOf(o)&&(u&&(h=d(h,{$$start:u,$$end:f})),e.push(h),p=h)}catch($){i($)}return p}function W(e){if(l.hasOwnProperty(e))for(var n,r=t.get(e+c),i=0,o=r.length;o>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function z(t,e){var n=e.$attr,r=t.$attr,i=t.$$element;o(t,function(r,i){"$"!=i.charAt(0)&&(e[i]&&e[i]!==r&&(r+=("style"===i?";":" ")+e[i]),t.$set(i,r,!0,n[i]))}),o(e,function(e,o){"class"==o?(O(i,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==o?(i.attr("style",i.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==o.charAt(0)||t.hasOwnProperty(o)||(t[o]=e,r[o]=n[o])})}function Y(t,e,n,r,i,s,u,l){var c,f,p=[],h=e[0],m=t.shift(),v=d(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),g=S(m.templateUrl)?m.templateUrl(e,n):m.templateUrl,$=m.templateNamespace;return e.empty(),a(T.getTrustedResourceUrl(g)).then(function(a){var d,y,w,x;if(a=lt(a),m.replace){if(w=xt(a)?[]:fe(K($,_r(a))),d=w[0],1!=w.length||d.nodeType!==Gr)throw Oi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,g);y={$attr:{}},et(r,e,d);var C=P(d,[],y);b(m.scope)&&H(C),t=C.concat(t),z(n,y)}else d=h,e.html(a);for(t.unshift(v),c=L(t,d,n,i,e,m,s,u,l),o(r,function(t,n){t==d&&(r[n]=e[0])}),f=M(e[0].childNodes,i);p.length;){var E=p.shift(),S=p.shift(),T=p.shift(),k=p.shift(),A=e[0];if(!E.$$destroyed){if(S!==h){var N=S.className;l.hasElementTranscludeDirective&&m.replace||(A=At(d)),et(T,kr(S),A),O(kr(A),N)}x=c.transcludeOnThisElement?I(E,c.transclude,k):k,c(f,E,A,r,x,c)}}p=null}),function(t,e,n,r,i){var o=i;e.$$destroyed||(p?p.push(e,n,r,o):(c.transcludeOnThisElement&&(o=I(e,c.transclude,i)),c(f,e,n,r,o,c)))}}function G(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function X(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw Oi("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,J(r))}function Q(t,e){var n=r(e,!0);n&&t.push({priority:0,compile:function(t){var e=t.parent(),r=!!e.length;return r&&D.$$addBindingClass(e),function(t,e){var i=e.parent();r||D.$$addBindingClass(i),D.$$addBindingInfo(i,n.expressions),t.$watch(n,function(t){e[0].nodeValue=t})}}})}function K(t,n){switch(t=wr(t||"html")){case"svg":case"math":var r=e.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function Z(t,e){if("srcdoc"==e)return T.HTML;var n=F(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?T.RESOURCE_URL:void 0}function tt(t,e,n,i,o){var a=Z(t,i);o=$[i]||o;var s=r(n,!0,a,o);if(s){if("multiple"===i&&"select"===F(t))throw Oi("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",J(t));e.push({priority:100,compile:function(){return{pre:function(t,e,u){var l=u.$$observers||(u.$$observers={});if(C.test(i))throw Oi("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=u[i];c!==n&&(s=c&&r(c,!0,a,o),n=c),s&&(u[i]=s(t),(l[i]||(l[i]=[])).$$inter=!0,(u.$$observers&&u.$$observers[i].$$scope||t).$watch(s,function(t,e){"class"===i&&t!=e?u.$updateClass(t,e):u.$set(i,t)}))}}}})}}function et(t,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(t)for(i=0,o=t.length;o>i;i++)if(t[i]==a){t[i++]=r;for(var l=i,c=l+s-1,f=t.length;f>l;l++,c++)f>c?t[l]=t[c]:delete t[l];t.length-=s-1,t.context===a&&(t.context=r);break}u&&u.replaceChild(r,a);var p=e.createDocumentFragment();p.appendChild(a),kr.hasData(a)&&(kr(r).data(kr(a).data()),Ar?(qr=!0,Ar.cleanData([a])):delete kr.cache[a[kr.expando]]);for(var h=1,d=n.length;d>h;h++){var m=n[h];kr(m).remove(),p.appendChild(m),delete n[h]}n[0]=r,n.length=1}function nt(t,e){return f(function(){return t.apply(null,arguments)},t,e)}function rt(t,e,n,r,o,a){try{t(e,n,r,o,a)}catch(s){i(s,J(n))}}function it(t,e,i,a,u,l){var c;o(a,function(o,a){var l,f,p,h,d=o.attrName,v=o.optional,g=o.mode;switch(xr.call(e,d)||(e[d]=n),g){case"@":e[d]||v||(i[a]=n),e.$observe(d,function(t){i[a]=t}),e.$$observers[d].$$scope=t,e[d]&&(i[a]=r(e[d])(t));break;case"=":if(v&&!e[d])return;f=s(e[d]),h=f.literal?_:function(t,e){return t===e||t!==t&&e!==e},p=f.assign||function(){throw l=i[a]=f(t),Oi("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",e[d],u.name)},l=i[a]=f(t);var $=function(e){return h(e,i[a])||(h(e,l)?p(t,e=i[a]):i[a]=e),l=e};$.$stateful=!0;var y;y=o.collection?t.$watchCollection(e[d],$):t.$watch(s(e[d],$),null,f.literal),c=c||[],c.push(y);break;case"&":if(f=s(e[d]),f===m&&v)break;i[a]=function(e){return f(t,e)}}});var f=c?function(){for(var t=0,e=c.length;e>t;++t)c[t]()}:m;return l&&f!==m?(l.$on("$destroy",f),m):f}var ot=function(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;r>n;n++)i=o[n],this[i]=e[i]}else this.$attr={};this.$$element=t};ot.prototype={$normalize:le,$addClass:function(t){t&&t.length>0&&k.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&k.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=ce(t,e);n&&n.length&&k.addClass(this.$$element,n);var r=ce(e,t);r&&r.length&&k.removeClass(this.$$element,r)},$set:function(t,e,r,a){var s,u=this.$$element[0],l=Ut(u,t),c=Bt(u,t),f=t;if(l?(this.$$element.prop(t,e),a=l):c&&(this[c]=e,f=c),this[t]=e,a?this.$attr[t]=a:(a=this.$attr[t],a||(this.$attr[t]=a=ut(t,"-"))),s=F(this.$$element),"a"===s&&"href"===t||"img"===s&&"src"===t)this[t]=e=N(e,"src"===t);else if("img"===s&&"srcset"===t){for(var p="",h=_r(e),d=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,m=/\s/.test(h)?d:/(,)/,v=h.split(m),g=Math.floor(v.length/2),$=0;g>$;$++){var y=2*$;p+=N(_r(v[y]),!0),p+=" "+_r(v[y+1])}var b=_r(v[2*$]).split(/\s/);p+=N(_r(b[0]),!0),2===b.length&&(p+=" "+_r(b[1])),this[t]=e=p}r!==!1&&(null===e||e===n?this.$$element.removeAttr(a):this.$$element.attr(a,e));var w=this.$$observers;w&&o(w[f],function(t){try{t(e)}catch(n){i(n)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=mt()),i=r[t]||(r[t]=[]);return i.push(e),g.$evalAsync(function(){!i.$$inter&&n.hasOwnProperty(t)&&e(n[t])}),function(){q(i,e)}}};var at=r.startSymbol(),st=r.endSymbol(),lt="{{"==at||"}}"==st?v:function(t){return t.replace(/\{\{/g,at).replace(/}}/g,st)},ft=/^ngAttr[A-Z]/;return D.$$addBindingInfo=E?function(t,e){var n=t.data("$binding")||[];Vr(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:m,D.$$addBindingClass=E?function(t){O(t,"ng-binding")}:m,D.$$addScopeInfo=E?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:m,D.$$addScopeClass=E?function(t,e){O(t,e?"ng-isolate-scope":"ng-scope")}:m,D}]}function le(t){return wt(t.replace(Di,""))}function ce(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue t;n+=(n.length>0?" ":"")+a}return n}function fe(t){t=kr(t);var e=t.length;if(1>=e)return t;for(;e--;){var n=t[e];n.nodeType===Jr&&Dr.call(t,e,1)}return t}function pe(t,e){if(e&&x(e))return e;if(x(t)){var n=Mi.exec(t);if(n)return n[3]}}function he(){var t={},e=!1;this.register=function(e,n){pt(e,"controller"),b(e)?f(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(i,o){function a(t,e,n,i){if(!t||!b(t.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e);t.$scope[e]=n}return function(r,s,u,l){var c,p,h,d;if(u=u===!0,l&&x(l)&&(d=l),x(r)){if(p=r.match(Mi),!p)throw ji("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);h=p[1],d=d||p[3],r=t.hasOwnProperty(h)?t[h]:ht(s.$scope,h,!0)||(e?ht(o,h,!0):n),ft(r,h,!0)}if(u){var m=(Vr(r)?r[r.length-1]:r).prototype;c=Object.create(m||null),d&&a(s,d,c,h||r.name);var v;return v=f(function(){var t=i.invoke(r,c,s,h);return t!==c&&(b(t)||S(t))&&(c=t,d&&a(s,d,c,h||r.name)),c},{instance:c,identifier:d})}return c=i.instantiate(r,s,h),d&&a(s,d,c,h||r.name),c}}]}function de(){this.$get=["$window",function(t){return kr(t.document)}]}function me(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function ve(t){return b(t)?E(t)?t.toISOString():z(t):t}function ge(){this.$get=function(){return function(t){if(!t)return"";var e=[];return a(t,function(t,n){null===t||$(t)||(Vr(t)?o(t,function(t,r){e.push(nt(n)+"="+nt(ve(t)))}):e.push(nt(n)+"="+nt(ve(t))))}),e.join("&")}}}function $e(){this.$get=function(){return function(t){function e(t,r,i){null===t||$(t)||(Vr(t)?o(t,function(t){e(t,r+"[]")}):b(t)&&!E(t)?a(t,function(t,n){e(t,r+(i?"":"[")+n+(i?"":"]"))}):n.push(nt(r)+"="+nt(ve(t))))}if(!t)return"";var n=[];return e(t,"",!0),n.join("&")}}}function ye(t,e){if(x(t)){var n=t.replace(qi,"").trim();if(n){var r=e("Content-Type");(r&&0===r.indexOf(Ii)||be(n))&&(t=Y(n))}}return t}function be(t){var e=t.match(Ri);return e&&Fi[e[0]].test(t)}function we(t){function e(t,e){t&&(r[t]=r[t]?r[t]+", "+e:e)}var n,r=mt();return x(t)?o(t.split("\n"),function(t){n=t.indexOf(":"),e(wr(_r(t.substr(0,n))),_r(t.substr(n+1)))}):b(t)&&o(t,function(t,n){e(wr(n),_r(t))}),r}function xe(t){var e;return function(n){if(e||(e=we(t)),n){var r=e[wr(n)];return void 0===r&&(r=null),r}return e}}function Ce(t,e,n,r){return S(r)?r(t,e,n):(o(r,function(r){t=r(t,e,n)}),t)}function Ee(t){return t>=200&&300>t}function Se(){var t=this.defaults={transformResponse:[ye],transformRequest:[function(t){return!b(t)||N(t)||D(t)||O(t)?t:z(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(Pi),put:L(Pi),patch:L(Pi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},e=!1;this.useApplyAsync=function(t){return y(t)?(e=!!t,this):e};var i=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,s,u,l,c,p){function h(e){function i(t){var e=f({},t);return e.data=t.data?Ce(t.data,t.headers,t.status,u.transformResponse):t.data,Ee(t.status)?e:c.reject(e)}function a(t,e){var n,r={};return o(t,function(t,i){S(t)?(n=t(e),null!=n&&(r[i]=n)):r[i]=t}),r}function s(e){var n,r,i,o=t.headers,s=f({},e.headers);o=f({},o.common,o[wr(e.method)]);t:for(n in o){r=wr(n);for(i in s)if(wr(i)===r)continue t;s[n]=o[n]}return a(s,L(e))}if(!Rr.isObject(e))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",e);var u=f({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},e);u.headers=s(e),u.method=Cr(u.method),u.paramSerializer=x(u.paramSerializer)?p.get(u.paramSerializer):u.paramSerializer;var l=function(e){var r=e.headers,a=Ce(e.data,xe(r),n,e.transformRequest);return $(a)&&o(r,function(t,e){"content-type"===wr(e)&&delete r[e]}),$(e.withCredentials)&&!$(t.withCredentials)&&(e.withCredentials=t.withCredentials),v(e,a).then(i,i)},h=[l,n],d=c.when(u);for(o(C,function(t){(t.request||t.requestError)&&h.unshift(t.request,t.requestError),(t.response||t.responseError)&&h.push(t.response,t.responseError)});h.length;){var m=h.shift(),g=h.shift();d=d.then(m,g)}return d.success=function(t){return ft(t,"fn"),d.then(function(e){t(e.data,e.status,e.headers,u)}),d},d.error=function(t){return ft(t,"fn"),d.then(null,function(e){t(e.data,e.status,e.headers,u)}),d},d}function d(t){o(arguments,function(t){h[t]=function(e,n){return h(f({},n||{},{method:t,url:e}))}})}function m(t){o(arguments,function(t){h[t]=function(e,n,r){return h(f({},r||{},{method:t,url:e,data:n}))}})}function v(r,i){function o(t,n,r,i){function o(){u(n,t,r,i)}d&&(Ee(t)?d.put(E,[t,n,we(r),i]):d.remove(E)),e?l.$applyAsync(o):(o(),l.$$phase||l.$apply())}function u(t,e,n,i){e=Math.max(e,0),(Ee(e)?v.resolve:v.reject)({data:t,status:e,headers:xe(n),config:r,statusText:i})}function f(t){u(t.data,t.status,L(t.headers()),t.statusText)}function p(){var t=h.pendingRequests.indexOf(r);-1!==t&&h.pendingRequests.splice(t,1)}var d,m,v=c.defer(),x=v.promise,C=r.headers,E=g(r.url,r.paramSerializer(r.params));if(h.pendingRequests.push(r),x.then(p,p),!r.cache&&!t.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(d=b(r.cache)?r.cache:b(t.cache)?t.cache:w),d&&(m=d.get(E),y(m)?M(m)?m.then(f,f):Vr(m)?u(m[1],m[0],L(m[2]),m[3]):u(m,200,{},"OK"):d.put(E,x)),$(m)){var S=kn(r.url)?s()[r.xsrfCookieName||t.xsrfCookieName]:n;S&&(C[r.xsrfHeaderName||t.xsrfHeaderName]=S),a(r.method,E,i,o,C,r.timeout,r.withCredentials,r.responseType)}return x}function g(t,e){return e.length>0&&(t+=(-1==t.indexOf("?")?"?":"&")+e),t}var w=u("$http");t.paramSerializer=x(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var C=[];return o(i,function(t){C.unshift(x(t)?p.get(t):p.invoke(t))}),h.pendingRequests=[],d("get","delete","head","jsonp"),m("post","put","patch"),h.defaults=t,h}]}function Te(){return new t.XMLHttpRequest}function ke(){this.$get=["$browser","$window","$document",function(t,e,n){return Ae(t,Te,t.defer,e.angular.callbacks,n[0])}]}function Ae(t,e,r,i,a){function s(t,e,n){var r=a.createElement("script"),o=null;return r.type="text/javascript",r.src=t,r.async=!0,o=function(t){ii(r,"load",o),ii(r,"error",o),a.body.removeChild(r),r=null;var s=-1,u="unknown";t&&("load"!==t.type||i[e].called||(t={type:"error"}),u=t.type,s="error"===t.type?404:200),n&&n(s,u)},ri(r,"load",o),ri(r,"error",o),a.body.appendChild(r),o}return function(a,u,l,c,f,p,h,d){function v(){b&&b(),w&&w.abort()}function g(e,i,o,a,s){E!==n&&r.cancel(E),b=w=null,e(i,o,a,s),t.$$completeOutstandingRequest(m)}if(t.$$incOutstandingRequestCount(),u=u||t.url(),"jsonp"==wr(a)){var $="_"+(i.counter++).toString(36);i[$]=function(t){i[$].data=t,i[$].called=!0};var b=s(u.replace("JSON_CALLBACK","angular.callbacks."+$),$,function(t,e){g(c,t,i[$].data,"",e),i[$]=m})}else{var w=e();w.open(a,u,!0),o(f,function(t,e){y(t)&&w.setRequestHeader(e,t)}),w.onload=function(){var t=w.statusText||"",e="response"in w?w.response:w.responseText,n=1223===w.status?204:w.status;0===n&&(n=e?200:"file"==Tn(u).protocol?404:0),g(c,n,e,w.getAllResponseHeaders(),t)};var x=function(){g(c,-1,null,null,"")};if(w.onerror=x,w.onabort=x,h&&(w.withCredentials=!0),d)try{w.responseType=d}catch(C){if("json"!==d)throw C}w.send(l)}if(p>0)var E=r(v,p);else M(p)&&p.then(v)}}function Ne(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(t){return"\\\\\\"+t}function a(n){return n.replace(p,t).replace(h,e)}function s(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=z(t)}return t}function u(o,u,p,h){function d(t){try{return t=A(t),h&&!y(t)?t:s(t)}catch(e){r(Vi.interr(o,e))}}h=!!h;for(var m,v,g,b=0,w=[],x=[],C=o.length,E=[],T=[];C>b;){if(-1==(m=o.indexOf(t,b))||-1==(v=o.indexOf(e,m+l))){b!==C&&E.push(a(o.substring(b)));break}b!==m&&E.push(a(o.substring(b,m))),g=o.substring(m+l,v),w.push(g),x.push(n(g,d)),b=v+c,T.push(E.length),E.push("")}if(p&&E.length>1&&Vi.throwNoconcat(o),!u||w.length){var k=function(t){for(var e=0,n=w.length;n>e;e++){if(h&&$(t[e]))return;E[T[e]]=t[e]}return E.join("")},A=function(t){return p?i.getTrusted(p,t):i.valueOf(t)};return f(function(t){var e=0,n=w.length,i=new Array(n);try{for(;n>e;e++)i[e]=x[e](t);return k(i)}catch(a){r(Vi.interr(o,a))}},{exp:o,expressions:w,$$watchDelegate:function(t,e){var n;return t.$watchGroup(x,function(r,i){var o=k(r);S(e)&&e.call(this,o,r!==i?n:o,t),n=o})}})}}var l=t.length,c=e.length,p=new RegExp(t.replace(/./g,o),"g"),h=new RegExp(e.replace(/./g,o),"g");return u.startSymbol=function(){return t},u.endSymbol=function(){return e},u}]}function Oe(){this.$get=["$rootScope","$window","$q","$$q",function(t,e,n,r){function i(i,a,s,u){var l=arguments.length>4,c=l?U(arguments,4):[],f=e.setInterval,p=e.clearInterval,h=0,d=y(u)&&!u,m=(d?r:n).defer(),v=m.promise;return s=y(s)?s:0,v.then(null,null,l?function(){i.apply(null,c)}:i),v.$$intervalId=f(function(){m.notify(h++),s>0&&h>=s&&(m.resolve(h),p(v.$$intervalId),delete o[v.$$intervalId]),d||t.$apply()},a),o[v.$$intervalId]=m,v}var o={};return i.cancel=function(t){return t&&t.$$intervalId in o?(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0):!1},i}]}function De(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"Â¤",posSuf:"",negPre:"(Â¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(t){return 1===t?"one":"other"}}}}function je(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=et(e[n]);return e.join("/")}function Me(t,e){var n=Tn(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=h(n.port)||_i[n.protocol]||null}function Ie(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var r=Tn(t);e.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),e.$$search=Z(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Pe(t,e){return 0===e.indexOf(t)?e.substr(t.length):void 0}function Re(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function Fe(t){return t.replace(/(#.+)|#$/,"$1")}function qe(t){return t.substr(0,Re(t).lastIndexOf("/")+1)}function Ve(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}function Le(t,e){this.$$html5=!0,e=e||"";var r=qe(t);Me(t,this),this.$$parse=function(t){var e=Pe(r,t);if(!x(e))throw Hi("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,r);Ie(e,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=tt(this.$$search),e=this.$$hash?"#"+et(this.$$hash):"";this.$$url=je(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var a,s,u;return(a=Pe(t,i))!==n?(s=a,u=(a=Pe(e,a))!==n?r+(Pe("/",a)||a):t+s):(a=Pe(r,i))!==n?u=r+a:r==i+"/"&&(u=r),u&&this.$$parse(u),!!u}}function _e(t,e){var n=qe(t);Me(t,this),this.$$parse=function(r){function i(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===e.indexOf(n)&&(e=e.replace(n,"")),i.exec(e)?t:(r=i.exec(t),r?r[1]:t)}var o,a=Pe(t,r)||Pe(n,r);"#"===a.charAt(0)?(o=Pe(e,a),$(o)&&(o=a)):o=this.$$html5?a:"",Ie(o,this),this.$$path=i(this.$$path,o,t),this.$$compose()},this.$$compose=function(){var n=tt(this.$$search),r=this.$$hash?"#"+et(this.$$hash):"";this.$$url=je(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=t+(this.$$url?e+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return Re(t)==Re(e)?(this.$$parse(e),!0):!1}}function He(t,e){this.$$html5=!0,_e.apply(this,arguments);var n=qe(t);this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return t==Re(r)?o=r:(a=Pe(n,r))?o=t+e+a:n===r+"/"&&(o=n),o&&this.$$parse(o),!!o},this.$$compose=function(){var n=tt(this.$$search),r=this.$$hash?"#"+et(this.$$hash):"";this.$$url=je(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=t+e+this.$$url}}function Ue(t){return function(){return this[t]}}function Be(t,e){return function(n){return $(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function We(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return y(e)?(t=e,this):t},this.html5Mode=function(t){return j(t)?(e.enabled=t,this):b(t)?(j(t.enabled)&&(e.enabled=t.enabled),j(t.requireBase)&&(e.requireBase=t.requireBase),j(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(t,e,n){var i=l.url(),o=l.$$state;try{r.url(t,e,n),l.$$state=r.state()}catch(a){throw l.url(i),l.$$state=o,a}}function u(t,e){n.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}var l,c,f,p=r.baseHref(),h=r.url();if(e.enabled){if(!p&&e.requireBase)throw Hi("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=Ve(h)+(p||"/"),c=i.history?Le:He}else f=Re(h),c=_e;l=new c(f,"#"+t),l.$$parseLinkUrl(h,h),l.$$state=r.state();var d=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var i=kr(t.target);"a"!==F(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;var s=i.prop("href"),u=i.attr("href")||i.attr("xlink:href");b(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=Tn(s.animVal).href),d.test(s)||!s||i.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(s,u)&&(t.preventDefault(),l.absUrl()!=r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Fe(l.absUrl())!=Fe(h)&&r.url(l.absUrl(),!0);var m=!0;return r.onUrlChange(function(t,e){n.$evalAsync(function(){var r,i=l.absUrl(),o=l.$$state;l.$$parse(t),l.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,l.absUrl()===t&&(r?(l.$$parse(i),l.$$state=o,s(i,!1,o)):(m=!1,u(i,o)))}),n.$$phase||n.$digest()}),n.$watch(function(){var t=Fe(r.url()),e=Fe(l.absUrl()),o=r.state(),a=l.$$replace,c=t!==e||l.$$html5&&i.history&&o!==l.$$state;(m||c)&&(m=!1,n.$evalAsync(function(){var e=l.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,l.$$state,o).defaultPrevented;l.absUrl()===e&&(r?(l.$$parse(t),l.$$state=o):(c&&s(e,a,o===l.$$state?null:l.$$state),u(t,o)))})),l.$$replace=!1}),l}]}function ze(){var t=!0,e=this;this.debugEnabled=function(e){return y(e)?(t=e,this):t},this.$get=["$window",function(n){function r(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function i(t){var e=n.console||{},i=e[t]||e.log||m,a=!1;try{a=!!i.apply}catch(s){}return a?function(){var t=[];return o(arguments,function(e){t.push(r(e))}),i.apply(e,t)}:function(t,e){i(t,null==e?"":e)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function Ye(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw Bi("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function Ge(t,e){if(t){if(t.constructor===t)throw Bi("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw Bi("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw Bi("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw Bi("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function Xe(t,e){if(t){if(t.constructor===t)throw Bi("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===Wi||t===zi||t===Yi)throw Bi("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function Qe(t,e){return"undefined"!=typeof t?t:e}function Je(t,e){return"undefined"==typeof t?e:"undefined"==typeof e?t:t+e}function Ke(t,e){var n=t(e);return!n.$stateful}function Ze(t,e){var n,r;switch(t.type){case Ji.Program:n=!0,o(t.body,function(t){Ze(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case Ji.Literal:t.constant=!0,t.toWatch=[];break;case Ji.UnaryExpression:Ze(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Ji.BinaryExpression:Ze(t.left,e),Ze(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Ji.LogicalExpression:Ze(t.left,e),Ze(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Ji.ConditionalExpression:Ze(t.test,e),Ze(t.alternate,e),Ze(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Ji.Identifier:t.constant=!1,t.toWatch=[t];break;case Ji.MemberExpression:Ze(t.object,e),t.computed&&Ze(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case Ji.CallExpression:n=t.filter?Ke(e,t.callee.name):!1,r=[],o(t.arguments,function(t){Ze(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=t.filter&&Ke(e,t.callee.name)?r:[t];break;case Ji.AssignmentExpression:Ze(t.left,e),Ze(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Ji.ArrayExpression:n=!0,r=[],o(t.elements,function(t){Ze(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=r;break;case Ji.ObjectExpression:n=!0,r=[],o(t.properties,function(t){Ze(t.value,e),n=n&&t.value.constant,t.value.constant||r.push.apply(r,t.value.toWatch)}),t.constant=n,t.toWatch=r;break;case Ji.ThisExpression:t.constant=!1,t.toWatch=[]}}function tn(t){if(1==t.length){var e=t[0].expression,r=e.toWatch;return 1!==r.length?r:r[0]!==e?r:n}}function en(t){return t.type===Ji.Identifier||t.type===Ji.MemberExpression}function nn(t){return 1===t.body.length&&en(t.body[0].expression)?{type:Ji.AssignmentExpression,left:t.body[0].expression,right:{type:Ji.NGValueParameter},operator:"="}:void 0}function rn(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Ji.Literal||t.body[0].expression.type===Ji.ArrayExpression||t.body[0].expression.type===Ji.ObjectExpression)}function on(t){return t.constant}function an(t,e){this.astBuilder=t,this.$filter=e}function sn(t,e){this.astBuilder=t,this.$filter=e}function un(t,e,n,r){Ge(t,r);for(var i,o=e.split("."),a=0;o.length>1;a++){i=Ye(o.shift(),r);var s=Ge(t[i],r);s||(s={},t[i]=s),t=s}return i=Ye(o.shift(),r),Ge(t[i],r),t[i]=n,n}function ln(t){return"constructor"==t}function cn(t){return S(t.valueOf)?t.valueOf():Zi.call(t)}function fn(){var t=mt(),e=mt();this.$get=["$filter","$sniffer",function(r,i){function a(t,e){return null==t||null==e?t===e:"object"==typeof t&&(t=cn(t),"object"==typeof t)?!1:t===e||t!==t&&e!==e}function s(t,e,r,i,o){var s,u=i.inputs;if(1===u.length){var l=a;return u=u[0],t.$watch(function(t){var e=u(t);return a(e,l)||(s=i(t,n,n,[e]),l=e&&cn(e)),s},e,r,o)}for(var c=[],f=[],p=0,h=u.length;h>p;p++)c[p]=a,f[p]=null;return t.$watch(function(t){for(var e=!1,r=0,o=u.length;o>r;r++){var l=u[r](t);(e||(e=!a(l,c[r])))&&(f[r]=l,c[r]=l&&cn(l))}return e&&(s=i(t,n,n,f)),s},e,r,o)}function u(t,e,n,r){var i,o;return i=t.$watch(function(t){return r(t)},function(t,n,r){o=t,S(e)&&e.apply(this,arguments),y(t)&&r.$$postDigest(function(){y(o)&&i()})},n)}function l(t,e,n,r){function i(t){var e=!0;return o(t,function(t){y(t)||(e=!1)}),e}var a,s;return a=t.$watch(function(t){return r(t)},function(t,n,r){s=t,S(e)&&e.call(this,t,n,r),i(t)&&r.$$postDigest(function(){i(s)&&a()})},n)}function c(t,e,n,r){var i;return i=t.$watch(function(t){return r(t)},function(t,n,r){S(e)&&e.apply(this,arguments),i()},n)}function f(t,e){if(!e)return t;var n=t.$$watchDelegate,r=n!==l&&n!==u,i=r?function(n,r,i,o){var a=t(n,r,i,o);return e(a,n,r)}:function(n,r,i,o){var a=t(n,r,i,o),s=e(a,n,r);return y(a)?s:a};return t.$$watchDelegate&&t.$$watchDelegate!==s?i.$$watchDelegate=t.$$watchDelegate:e.$stateful||(i.$$watchDelegate=s,i.inputs=t.inputs?t.inputs:[t]),i}var p={csp:i.csp,expensiveChecks:!1},h={csp:i.csp,expensiveChecks:!0};return function(n,i,o){var a,d,v;switch(typeof n){case"string":n=n.trim(),v=n;var g=o?e:t;if(a=g[v],!a){":"===n.charAt(0)&&":"===n.charAt(1)&&(d=!0,n=n.substring(2));var $=o?h:p,y=new Qi($),b=new Ki(y,r,$);a=b.parse(n),a.constant?a.$$watchDelegate=c:d?a.$$watchDelegate=a.literal?l:u:a.inputs&&(a.$$watchDelegate=s),g[v]=a}return f(a,i);case"function":return f(n,i);default:return m}}}]}function pn(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return dn(function(e){t.$evalAsync(e)},e)}]}function hn(){this.$get=["$browser","$exceptionHandler",function(t,e){return dn(function(e){t.defer(e)},e)}]}function dn(t,e){function i(t,e,n){function r(e){return function(n){i||(i=!0,e.call(t,n))}}var i=!1;return[r(e),r(n)]}function a(){this.$$state={status:0}}function s(t,e){return function(n){e.call(t,n)}}function u(t){var r,i,o;o=t.pending,t.processScheduled=!1,t.pending=n;for(var a=0,s=o.length;s>a;++a){i=o[a][0],r=o[a][t.status];try{S(r)?i.resolve(r(t.value)):1===t.status?i.resolve(t.value):i.reject(t.value)}catch(u){i.reject(u),e(u)}}}function l(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){u(e)}))}function c(){this.promise=new a,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function f(t){var e=new c,n=0,r=Vr(t)?[]:{};return o(t,function(t,i){n++,g(t).then(function(t){r.hasOwnProperty(i)||(r[i]=t,--n||e.resolve(r))},function(t){r.hasOwnProperty(i)||e.reject(t)})}),0===n&&e.resolve(r),e.promise}var p=r("$q",TypeError),h=function(){return new c};a.prototype={then:function(t,e,n){var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&l(this.$$state),r.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return v(e,!0,t)},function(e){return v(e,!1,t)},e)}},c.prototype={resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(p("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(b(t)||S(t))&&(n=t&&t.then),S(n)?(this.promise.$$state.status=-1,n.call(t,r[0],r[1],this.notify)):(this.promise.$$state.value=t,this.promise.$$state.status=1,l(this.promise.$$state))}catch(o){r[1](o),e(o)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&t(function(){[m
[31m-for(var t,i,o=0,a=r.length;a>o;o++){i=r[o][0],t=r[o][3];try{i.notify(S(t)?t(n):n)}catch(s){e(s)}}})}};var d=function(t){var e=new c;return e.reject(t),e.promise},m=function(t,e){var n=new c;return e?n.resolve(t):n.reject(t),n.promise},v=function(t,e,n){var r=null;try{S(n)&&(r=n())}catch(i){return m(i,!1)}return M(r)?r.then(function(){return m(t,e)},function(t){return m(t,!1)}):m(t,e)},g=function(t,e,n,r){var i=new c;return i.resolve(t),i.promise.then(e,n,r)},$=g,y=function w(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}if(!S(t))throw p("norslvr","Expected resolverFn, got '{0}'",t);if(!(this instanceof w))return new w(t);var r=new c;return t(e,n),r.promise};return y.defer=h,y.reject=d,y.when=g,y.resolve=$,y.all=f,y}function mn(){this.$get=["$window","$timeout",function(t,e){function n(){for(var t=0;t<c.length;t++){var e=c[t];e&&(c[t]=null,e())}l=c.length=0}function r(t){var e=c.length;return l++,c.push(t),0===e&&(u=s(n)),function(){e>=0&&(c[e]=null,e=null,0===--l&&u&&(u(),u=null,c.length=0))}}var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame,o=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,a=!!i,s=a?function(t){var e=i(t);return function(){o(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};r.supported=a;var u,l=0,c=[];return r}]}function vn(){function t(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=u(),this.$$ChildScope=null}return e.prototype=t,e}var e=10,n=r("$rootScope"),a=null,s=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,l,c,f){function p(t){t.currentScope.$$destroyed=!0}function h(){this.$id=u(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function d(t){if(E.$$phase)throw n("inprog","{0} already in progress",E.$$phase);E.$$phase=t}function v(){E.$$phase=null}function g(t,e){do t.$$watchersCount+=e;while(t=t.$parent)}function y(t,e,n){do t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n];while(t=t.$parent)}function w(){}function x(){for(;A.length;)try{A.shift()()}catch(t){l(t)}s=null}function C(){null===s&&(s=f.defer(function(){E.$apply(x)}))}h.prototype={constructor:h,$new:function(e,n){var r;return n=n||this,e?(r=new h,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=t(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(e||n!=this)&&r.$on("$destroy",p),r},$watch:function(t,e,n,r){var i=c(t);if(i.$$watchDelegate)return i.$$watchDelegate(this,e,n,i,t);var o=this,s=o.$$watchers,u={fn:e,last:w,get:i,exp:r||t,eq:!!n};return a=null,S(e)||(u.fn=m),s||(s=o.$$watchers=[]),s.unshift(u),g(this,1),function(){q(s,u)>=0&&g(o,-1),a=null}},$watchGroup:function(t,e){function n(){u=!1,l?(l=!1,e(i,i,s)):e(i,r,s)}var r=new Array(t.length),i=new Array(t.length),a=[],s=this,u=!1,l=!0;if(!t.length){var c=!0;return s.$evalAsync(function(){c&&e(i,i,s)}),function(){c=!1}}return 1===t.length?this.$watch(t[0],function(t,n,o){i[0]=t,r[0]=n,e(i,t===n?i:r,o)}):(o(t,function(t,e){var o=s.$watch(t,function(t,o){i[e]=t,r[e]=o,u||(u=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(t,e){function n(t){o=t;var e,n,r,s,u;if(!$(o)){if(b(o))if(i(o)){a!==h&&(a=h,v=a.length=0,f++),e=o.length,v!==e&&(f++,a.length=v=e);for(var l=0;e>l;l++)u=a[l],s=o[l],r=u!==u&&s!==s,r||u===s||(f++,a[l]=s)}else{a!==d&&(a=d={},v=0,f++),e=0;for(n in o)o.hasOwnProperty(n)&&(e++,s=o[n],u=a[n],n in a?(r=u!==u&&s!==s,r||u===s||(f++,a[n]=s)):(v++,a[n]=s,f++));if(v>e){f++;for(n in a)o.hasOwnProperty(n)||(v--,delete a[n])}}else a!==o&&(a=o,f++);return f}}function r(){if(m?(m=!1,e(o,o,u)):e(o,s,u),l)if(b(o))if(i(o)){s=new Array(o.length);for(var t=0;t<o.length;t++)s[t]=o[t]}else{s={};for(var n in o)xr.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,u=this,l=e.length>1,f=0,p=c(t,n),h=[],d={},m=!0,v=0;return this.$watch(p,r)},$digest:function(){var t,r,i,o,u,c,p,h,m,g,$=e,y=this,b=[];d("$digest"),f.$$checkUrlChange(),this===E&&null!==s&&(f.defer.cancel(s),x()),a=null;do{for(c=!1,h=y;T.length;){try{g=T.shift(),g.scope.$eval(g.expression,g.locals)}catch(C){l(C)}a=null}t:do{if(o=h.$$watchers)for(u=o.length;u--;)try{if(t=o[u])if((r=t.get(h))===(i=t.last)||(t.eq?_(r,i):"number"==typeof r&&"number"==typeof i&&isNaN(r)&&isNaN(i))){if(t===a){c=!1;break t}}else c=!0,a=t,t.last=t.eq?V(r,null):r,t.fn(r,i===w?r:i,h),5>$&&(m=4-$,b[m]||(b[m]=[]),b[m].push({msg:S(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:r,oldVal:i}))}catch(C){l(C)}if(!(p=h.$$watchersCount&&h.$$childHead||h!==y&&h.$$nextSibling))for(;h!==y&&!(p=h.$$nextSibling);)h=h.$parent}while(h=p);if((c||T.length)&&!$--)throw v(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,b)}while(c||T.length);for(v();k.length;)try{k.shift()()}catch(C){l(C)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===E&&f.$$applicationDestroyed(),g(this,-this.$$watchersCount);for(var e in this.$$listenerCount)y(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=m,this.$on=this.$watch=this.$watchGroup=function(){return m},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(t,e){return c(t)(this,e)},$evalAsync:function(t,e){E.$$phase||T.length||f.defer(function(){T.length&&E.$digest()}),T.push({scope:this,expression:t,locals:e})},$$postDigest:function(t){k.push(t)},$apply:function(t){try{return d("$apply"),this.$eval(t)}catch(e){l(e)}finally{v();try{E.$digest()}catch(e){throw l(e),e}}},$applyAsync:function(t){function e(){n.$eval(t)}var n=this;t&&A.push(e),C()},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(n[r]=null,y(i,1,t))}},$emit:function(t,e){var n,r,i,o=[],a=this,s=!1,u={name:t,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=H([u],arguments,1);do{for(n=a.$$listeners[t]||o,u.currentScope=a,r=0,i=n.length;i>r;r++)if(n[r])try{n[r].apply(null,c)}catch(f){l(f)}else n.splice(r,1),r--,i--;if(s)return u.currentScope=null,u;a=a.$parent}while(a);return u.currentScope=null,u},$broadcast:function(t,e){var n=this,r=n,i=n,o={name:t,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return o;for(var a,s,u,c=H([o],arguments,1);r=i;){for(o.currentScope=r,a=r.$$listeners[t]||[],s=0,u=a.length;u>s;s++)if(a[s])try{a[s].apply(null,c)}catch(f){l(f)}else a.splice(s,1),s--,u--;if(!(i=r.$$listenerCount[t]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(i=r.$$nextSibling);)r=r.$parent}return o.currentScope=null,o}};var E=new h,T=E.$$asyncQueue=[],k=E.$$postDigestQueue=[],A=E.$$applyAsyncQueue=[];return E}]}function gn(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i,o=r?e:t;return i=Tn(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function $n(t){if("self"===t)return t;if(x(t)){if(t.indexOf("***")>-1)throw to("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=Hr(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(T(t))return new RegExp("^"+t.source+"$");throw to("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function yn(t){var e=[];return y(t)&&o(t,function(t){e.push($n(t))}),e}function bn(){this.SCE_CONTEXTS=eo;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=yn(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=yn(t)),e},this.$get=["$injector",function(r){function i(t,e){return"self"===t?kn(e):!!t.exec(e.href)}function o(n){var r,o,a=Tn(n.toString()),s=!1;for(r=0,o=t.length;o>r;r++)if(i(t[r],a)){s=!0;break}if(s)for(r=0,o=e.length;o>r;r++)if(i(e[r],a)){s=!1;break}return s}function a(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}function s(t,e){var r=p.hasOwnProperty(t)?p[t]:null;if(!r)throw to("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||e===n||""===e)return e;if("string"!=typeof e)throw to("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new r(e)}function u(t){return t instanceof f?t.$$unwrapTrustedValue():t}function l(t,e){if(null===e||e===n||""===e)return e;var r=p.hasOwnProperty(t)?p[t]:null;if(r&&e instanceof r)return e.$$unwrapTrustedValue();if(t===eo.RESOURCE_URL){if(o(e))return e;throw to("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===eo.HTML)return c(e);throw to("unsafe","Attempting to use an unsafe value in a safe context.")}var c=function(t){throw to("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(c=r.get("$sanitize"));var f=a(),p={};return p[eo.HTML]=a(f),p[eo.CSS]=a(f),p[eo.URL]=a(f),p[eo.JS]=a(f),p[eo.RESOURCE_URL]=a(p[eo.URL]),{trustAs:s,getTrusted:l,valueOf:u}}]}function wn(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&8>Tr)throw to("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=L(eo);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=v),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return o(eo,function(t,e){var n=wr(e);r[wt("parse_as_"+n)]=function(e){return i(t,e)},r[wt("get_trusted_"+n)]=function(e){return a(t,e)},r[wt("trust_as_"+n)]=function(e){return s(t,e)}}),r}]}function xn(){this.$get=["$window","$document",function(t,e){var n,r,i={},o=h((/android (\d+)/.exec(wr((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},u=/^(Moz|webkit|ms)(?=[A-Z])/,l=s.body&&s.body.style,c=!1,f=!1;if(l){for(var p in l)if(r=u.exec(p)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in l&&"webkit"),c=!!("transition"in l||n+"Transition"in l),f=!!("animation"in l||n+"Animation"in l),!o||c&&f||(c=x(l.webkitTransition),f=x(l.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||4>o||a),hasEvent:function(t){if("input"===t&&11>=Tr)return!1;if($(i[t])){var e=s.createElement("div");i[t]="on"+t in e}return i[t]},csp:Ur(),vendorPrefix:n,transitions:c,animations:f,android:o}}]}function Cn(){this.$get=["$templateCache","$http","$q",function(t,e,n){function r(i,o){function a(t){if(!o)throw Oi("tpload","Failed to load template: {0} (HTTP status: {1} {2})",i,t.status,t.statusText);return n.reject(t)}r.totalPendingRequests++;var s=e.defaults&&e.defaults.transformResponse;Vr(s)?s=s.filter(function(t){return t!==ye}):s===ye&&(s=null);var u={cache:t,transformResponse:s};return e.get(i,u)["finally"](function(){r.totalPendingRequests--}).then(function(e){return t.put(i,e.data),e.data},a)}return r.totalPendingRequests=0,r}]}function En(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={};return r.findBindings=function(t,e,n){var r=t.getElementsByClassName("ng-binding"),i=[];return o(r,function(t){var r=Rr.element(t).data("$binding");r&&o(r,function(r){if(n){var o=new RegExp("(^|\\s)"+Hr(e)+"(\\s|\\||$)");o.test(r)&&i.push(t)}else-1!=r.indexOf(e)&&i.push(t)})}),i},r.findModels=function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+e+'"]',s=t.querySelectorAll(a);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(e){e!==n.url()&&(n.url(e),t.$digest())},r.whenStable=function(t){e.notifyWhenNoOutstandingRequests(t)},r}]}function Sn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){function o(o,s,u){S(o)||(u=s,s=o,o=m);var l,c=U(arguments,3),f=y(u)&&!u,p=(f?r:n).defer(),h=p.promise;return l=e.defer(function(){try{p.resolve(o.apply(null,c))}catch(e){p.reject(e),i(e)}finally{delete a[h.$$timeoutId]}f||t.$apply()},s),h.$$timeoutId=l,a[l]=p,h}var a={};return o.cancel=function(t){return t&&t.$$timeoutId in a?(a[t.$$timeoutId].reject("canceled"),delete a[t.$$timeoutId],e.defer.cancel(t.$$timeoutId)):!1},o}]}function Tn(t){var e=t;return Tr&&(no.setAttribute("href",e),e=no.href),no.setAttribute("href",e),{href:no.href,protocol:no.protocol?no.protocol.replace(/:$/,""):"",host:no.host,search:no.search?no.search.replace(/^\?/,""):"",hash:no.hash?no.hash.replace(/^#/,""):"",hostname:no.hostname,port:no.port,pathname:"/"===no.pathname.charAt(0)?no.pathname:"/"+no.pathname}}function kn(t){var e=x(t)?Tn(t):t;return e.protocol===ro.protocol&&e.host===ro.host}function An(){this.$get=g(t)}function Nn(t){function e(t){try{return decodeURIComponent(t)}catch(e){return t}}var r=t[0]||{},i={},o="";return function(){var t,a,s,u,l,c=r.cookie||"";if(c!==o)for(o=c,t=o.split("; "),i={},s=0;s<t.length;s++)a=t[s],u=a.indexOf("="),u>0&&(l=e(a.substring(0,u)),i[l]===n&&(i[l]=e(a.substring(u+1))));return i}}function On(){this.$get=Nn}function Dn(t){function e(r,i){if(b(r)){var a={};return o(r,function(t,n){a[n]=e(n,t)}),a}return t.factory(r+n,i)}var n="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+n)}}],e("currency",Fn),e("date",Qn),e("filter",jn),e("json",Jn),e("limitTo",Kn),e("lowercase",uo),e("number",qn),e("orderBy",Zn),e("uppercase",lo)}function jn(){return function(t,e,n){if(!i(t)){if(null==t)return t;throw r("filter")("notarray","Expected array but received: {0}",t)}var o,a,s=Rn(e);switch(s){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=In(e,n,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function Mn(t){return S(t.toString)&&t.toString!==Object.prototype.toString}function In(t,e,n){var r,i=b(t)&&"$"in t;return e===!0?e=_:S(e)||(e=function(t,e){return $(t)?!1:null===t||null===e?t===e:b(e)||b(t)&&!Mn(t)?!1:(t=wr(""+t),e=wr(""+e),-1!==t.indexOf(e))}),r=function(r){return i&&!b(r)?Pn(r,t.$,e,!1):Pn(r,t,e,n)}}function Pn(t,e,n,r,i){var o=Rn(t),a=Rn(e);if("string"===a&&"!"===e.charAt(0))return!Pn(t,e.substring(1),n,r);if(Vr(t))return t.some(function(t){return Pn(t,e,n,r)});switch(o){case"object":var s;if(r){for(s in t)if("$"!==s.charAt(0)&&Pn(t[s],e,n,!0))return!0;return i?!1:Pn(t,e,n,!1)}if("object"===a){for(s in e){var u=e[s];if(!S(u)&&!$(u)){var l="$"===s,c=l?t:t[s];if(!Pn(c,u,n,l,l))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function Rn(t){return null===t?"null":typeof t}function Fn(t){var e=t.NUMBER_FORMATS;return function(t,n,r){return $(n)&&(n=e.CURRENCY_SYM),$(r)&&(r=e.PATTERNS[1].maxFrac),null==t?t:Vn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function qn(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Vn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Vn(t,e,n,r,i){if(b(t))return"";var o=0>t;t=Math.abs(t);var a=t===1/0;if(!a&&!isFinite(t))return"";var s=t+"",u="",l=!1,c=[];if(a&&(u="âˆž"),!a&&-1!==s.indexOf("e")){var f=s.match(/([\d\.]+)e(-?)(\d+)/);f&&"-"==f[2]&&f[3]>i+1?t=0:(u=s,l=!0)}if(a||l)i>0&&1>t&&(u=t.toFixed(i),t=parseFloat(u));else{var p=(s.split(io)[1]||"").length;$(i)&&(i=Math.min(Math.max(e.minFrac,p),e.maxFrac)),t=+(Math.round(+(t.toString()+"e"+i)).toString()+"e"+-i);var h=(""+t).split(io),d=h[0];h=h[1]||"";var m,v=0,g=e.lgSize,y=e.gSize;if(d.length>=g+y)for(v=d.length-g,m=0;v>m;m++)(v-m)%y===0&&0!==m&&(u+=n),u+=d.charAt(m);for(m=v;m<d.length;m++)(d.length-m)%g===0&&0!==m&&(u+=n),u+=d.charAt(m);for(;h.length<i;)h+="0";i&&"0"!==i&&(u+=r+h.substr(0,i))}return 0===t&&(o=!1),c.push(o?e.negPre:e.posPre,u,o?e.negSuf:e.posSuf),c.join("")}function Ln(t,e,n){var r="";for(0>t&&(r="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function _n(t,e,n,r){return n=n||0,function(i){var o=i["get"+t]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),Ln(o,e,r)}}function Hn(t,e){return function(n,r){var i=n["get"+t](),o=Cr(e?"SHORT"+t:t);return r[o][i]}}function Un(t,e,n){var r=-1*n,i=r>=0?"+":"";return i+=Ln(Math[r>0?"floor":"ceil"](r/60),2)+Ln(Math.abs(r%60),2)}function Bn(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function Wn(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function zn(t){return function(e){var n=Bn(e.getFullYear()),r=Wn(e),i=+r-+n,o=1+Math.round(i/6048e5);return Ln(o,t)}}function Yn(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]}function Gn(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}function Xn(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}function Qn(t){function e(t){var e;if(e=t.match(n)){var r=new Date(0),i=0,o=0,a=e[8]?r.setUTCFullYear:r.setFullYear,s=e[8]?r.setUTCHours:r.setHours;e[9]&&(i=h(e[9]+e[10]),o=h(e[9]+e[11])),a.call(r,h(e[1]),h(e[2])-1,h(e[3]));var u=h(e[4]||0)-i,l=h(e[5]||0)-o,c=h(e[6]||0),f=Math.round(1e3*parseFloat("0."+(e[7]||0)));return s.call(r,u,l,c,f),r}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,s,u="",l=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,x(n)&&(n=so.test(n)?h(n):e(n)),C(n)&&(n=new Date(n)),!E(n)||!isFinite(n.getTime()))return n;for(;r;)s=ao.exec(r),s?(l=H(l,s,1),r=l.pop()):(l.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=G(i,n.getTimezoneOffset()),n=Q(n,i,!0)),o(l,function(e){a=oo[e],u+=a?a(n,t.DATETIME_FORMATS,c):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function Jn(){return function(t,e){return $(e)&&(e=2),z(t,e)}}function Kn(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):h(e),isNaN(e)?t:(C(t)&&(t=t.toString()),Vr(t)||x(t)?(n=!n||isNaN(n)?0:h(n),n=0>n&&n>=-t.length?t.length+n:n,e>=0?t.slice(n,n+e):0===n?t.slice(e,t.length):t.slice(Math.max(0,n+e),n)):t)}}function Zn(t){return function(e,n,r){function o(t,e){for(var r=0;r<n.length;r++){var i=n[r](t,e);if(0!==i)return i}return 0}function a(t,e){return e?function(e,n){return t(n,e)}:t}function s(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function u(t){return null===t?"null":"function"==typeof t.valueOf&&(t=t.valueOf(),s(t))?t:"function"==typeof t.toString&&(t=t.toString(),s(t))?t:""}function l(t,e){var n=typeof t,r=typeof e;return n===r&&"object"===n&&(t=u(t),e=u(e)),n===r?("string"===n&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e?0:e>t?-1:1):r>n?-1:1}return i(e)?(n=Vr(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(e){var n=!1,r=e||v;if(x(e)){if(("+"==e.charAt(0)||"-"==e.charAt(0))&&(n="-"==e.charAt(0),e=e.substring(1)),""===e)return a(l,n);if(r=t(e),r.constant){var i=r();return a(function(t,e){return l(t[i],e[i])},n)}}return a(function(t,e){return l(r(t),r(e))},n)}),Or.call(e).sort(a(o,r))):e}}function tr(t){return S(t)&&(t={link:t}),t.restrict=t.restrict||"AC",g(t)}function er(t,e){t.$name=e}function nr(t,e,r,i,a){var s=this,u=[],l=s.$$parentForm=t.parent().controller("form")||po;s.$error={},s.$$success={},s.$pending=n,s.$name=a(e.name||e.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,l.$addControl(s),s.$rollbackViewValue=function(){o(u,function(t){t.$rollbackViewValue()})},s.$commitViewValue=function(){o(u,function(t){t.$commitViewValue()})},s.$addControl=function(t){pt(t.$name,"input"),u.push(t),t.$name&&(s[t.$name]=t)},s.$$renameControl=function(t,e){var n=t.$name;s[n]===t&&delete s[n],s[e]=t,t.$name=e},s.$removeControl=function(t){t.$name&&s[t.$name]===t&&delete s[t.$name],o(s.$pending,function(e,n){s.$setValidity(n,null,t)}),o(s.$error,function(e,n){s.$setValidity(n,null,t)}),o(s.$$success,function(e,n){s.$setValidity(n,null,t)}),q(u,t)},gr({ctrl:this,$element:t,set:function(t,e,n){var r=t[e];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(q(r,n),0===r.length&&delete t[e])},parentForm:l,$animate:i}),s.$setDirty=function(){i.removeClass(t,Xo),i.addClass(t,Qo),s.$dirty=!0,s.$pristine=!1,l.$setDirty()},s.$setPristine=function(){i.setClass(t,Xo,Qo+" "+ho),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,o(u,function(t){t.$setPristine()})},s.$setUntouched=function(){o(u,function(t){t.$setUntouched()})},s.$setSubmitted=function(){i.addClass(t,ho),s.$submitted=!0,l.$setSubmitted()}}function rr(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function ir(t,e,n,r,i,o){or(t,e,n,r,i,o),rr(r)}function or(t,e,n,r,i,o){var a=wr(e[0].type);if(!i.android){var s=!1;e.on("compositionstart",function(t){s=!0}),e.on("compositionend",function(){s=!1,u()})}var u=function(t){if(l&&(o.defer.cancel(l),l=null),!s){var i=e.val(),u=t&&t.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=_r(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))e.on("input",u);else{var l,c=function(t,e,n){l||(l=o.defer(function(){l=null,e&&e.value===n||u(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||c(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut",c)}e.on("change",u),r.$render=function(){e.val(r.$isEmpty(r.$viewValue)?"":r.$viewValue)}}function ar(t,e){if(E(t))return t;if(x(t)){Eo.lastIndex=0;var n=Eo.exec(t);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,u=0,l=Bn(r),c=7*(i-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),u=e.getMilliseconds()),new Date(r,0,l.getDate()+c,o,a,s,u)}}return 0/0}function sr(t,e){return function(n,r){var i,a;if(E(n))return n;if(x(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),$o.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,function(t,n){n<e.length&&(a[e[n]]=+t)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return 0/0}}function ur(t,e,r,i){return function(o,a,s,u,l,c,f){function p(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function h(t){return y(t)?E(t)?t:r(t):n}lr(o,a,s,u),or(o,a,s,u,l,c);var d,m=u&&u.$options&&u.$options.timezone;if(u.$$parserName=t,u.$parsers.push(function(t){if(u.$isEmpty(t))return null;if(e.test(t)){var i=r(t,d);return m&&(i=Q(i,m)),i}return n}),u.$formatters.push(function(t){if(t&&!E(t))throw ta("datefmt","Expected `{0}` to be a date",t);return p(t)?(d=t,d&&m&&(d=Q(d,m,!0)),f("date")(t,i,m)):(d=null,"")}),y(s.min)||s.ngMin){var v;u.$validators.min=function(t){return!p(t)||$(v)||r(t)>=v},s.$observe("min",function(t){v=h(t),u.$validate()})}if(y(s.max)||s.ngMax){var g;u.$validators.max=function(t){return!p(t)||$(g)||r(t)<=g},s.$observe("max",function(t){g=h(t),u.$validate()})}}}function lr(t,e,r,i){var o=e[0],a=i.$$hasNativeValidators=b(o.validity);a&&i.$parsers.push(function(t){var r=e.prop(br)||{};return r.badInput&&!r.typeMismatch?n:t})}function cr(t,e,r,i,o,a){if(lr(t,e,r,i),or(t,e,r,i,o,a),i.$$parserName="number",i.$parsers.push(function(t){return i.$isEmpty(t)?null:wo.test(t)?parseFloat(t):n}),i.$formatters.push(function(t){if(!i.$isEmpty(t)){if(!C(t))throw ta("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}),y(r.min)||r.ngMin){var s;i.$validators.min=function(t){return i.$isEmpty(t)||$(s)||t>=s},r.$observe("min",function(t){y(t)&&!C(t)&&(t=parseFloat(t,10)),s=C(t)&&!isNaN(t)?t:n,i.$validate()})}if(y(r.max)||r.ngMax){var u;i.$validators.max=function(t){return i.$isEmpty(t)||$(u)||u>=t},r.$observe("max",function(t){y(t)&&!C(t)&&(t=parseFloat(t,10)),u=C(t)&&!isNaN(t)?t:n,i.$validate()})}}function fr(t,e,n,r,i,o){or(t,e,n,r,i,o),rr(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||yo.test(n)}}function pr(t,e,n,r,i,o){or(t,e,n,r,i,o),rr(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||bo.test(n)}}function hr(t,e,n,r){$(n.name)&&e.attr("name",u());var i=function(t){e[0].checked&&r.$setViewValue(n.value,t&&t.type)};e.on("click",i),r.$render=function(){var t=n.value;e[0].checked=t==r.$viewValue},n.$observe("value",r.$render)}function dr(t,e,n,i,o){var a;if(y(i)){if(a=t(i),!a.constant)throw r("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return a(e)}return o}function mr(t,e,n,r,i,o,a,s){var u=dr(s,t,"ngTrueValue",n.ngTrueValue,!0),l=dr(s,t,"ngFalseValue",n.ngFalseValue,!1),c=function(t){r.$setViewValue(e[0].checked,t&&t.type)};e.on("click",c),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return t===!1},r.$formatters.push(function(t){return _(t,u)}),r.$parsers.push(function(t){return t?u:l})}function vr(t,e){return t="ngClass"+t,["$animate",function(n){function r(t,e){var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i==e[o])continue t;n.push(i)}return n}function i(t){var e=[];return Vr(t)?(o(t,function(t){e=e.concat(i(t))}),e):x(t)?t.split(" "):b(t)?(o(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}return{restrict:"AC",link:function(a,s,u){function l(t){var e=f(t,1);u.$addClass(e)}function c(t){var e=f(t,-1);u.$removeClass(e)}function f(t,e){var n=s.data("$classCounts")||mt(),r=[];return o(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&r.push(t))}),s.data("$classCounts",n),r.join(" ")}function p(t,e){var i=r(e,t),o=r(t,e);i=f(i,1),o=f(o,-1),i&&i.length&&n.addClass(s,i),o&&o.length&&n.removeClass(s,o)}function h(t){if(e===!0||a.$index%2===e){var n=i(t||[]);if(d){if(!_(t,d)){var r=i(d);p(r,n)}}else l(n)}d=L(t)}var d;a.$watch(u[t],h,!0),u.$observe("class",function(e){h(a.$eval(u[t]))}),"ngClass"!==t&&a.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var s=i(a.$eval(u[t]));o===e?l(s):c(s)}})}}}]}function gr(t){function e(t,e,u){e===n?r("$pending",t,u):i("$pending",t,u),j(e)?e?(f(s.$error,t,u),c(s.$$success,t,u)):(c(s.$error,t,u),f(s.$$success,t,u)):(f(s.$error,t,u),f(s.$$success,t,u)),s.$pending?(o(Zo,!0),s.$valid=s.$invalid=n,a("",null)):(o(Zo,!1),s.$valid=$r(s.$error),s.$invalid=!s.$valid,a("",s.$valid));var l;l=s.$pending&&s.$pending[t]?n:s.$error[t]?!1:s.$$success[t]?!0:null,a(t,l),p.$setValidity(t,l,s)}function r(t,e,n){s[t]||(s[t]={}),c(s[t],e,n)}function i(t,e,r){s[t]&&f(s[t],e,r),$r(s[t])&&(s[t]=n)}function o(t,e){e&&!l[t]?(h.addClass(u,t),l[t]=!0):!e&&l[t]&&(h.removeClass(u,t),l[t]=!1)}function a(t,e){t=t?"-"+ut(t,"-"):"",o(Yo+t,e===!0),o(Go+t,e===!1)}var s=t.ctrl,u=t.$element,l={},c=t.set,f=t.unset,p=t.parentForm,h=t.$animate;l[Go]=!(l[Yo]=u.hasClass(Yo)),s.$setValidity=e}function $r(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var yr=/^\/(.+)\/([a-z]*)$/,br="validity",wr=function(t){return x(t)?t.toLowerCase():t},xr=Object.prototype.hasOwnProperty,Cr=function(t){return x(t)?t.toUpperCase():t},Er=function(t){return x(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},Sr=function(t){return x(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t};"i"!=="I".toLowerCase()&&(wr=Er,Cr=Sr);var Tr,kr,Ar,Nr,Or=[].slice,Dr=[].splice,jr=[].push,Mr=Object.prototype.toString,Ir=Object.getPrototypeOf,Pr=r("ng"),Rr=t.angular||(t.angular={}),Fr=0;Tr=e.documentMode,m.$inject=[],v.$inject=[];var qr,Vr=Array.isArray,Lr=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,_r=function(t){return x(t)?t.trim():t},Hr=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ur=function(){if(y(Ur.isActive_))return Ur.isActive_;var t=!(!e.querySelector("[ng-csp]")&&!e.querySelector("[data-ng-csp]"));if(!t)try{new Function("")}catch(n){t=!0}return Ur.isActive_=t},Br=function(){if(y(Br.name_))return Br.name_;var t,n,r,i,o=Wr.length;for(n=0;o>n;++n)if(r=Wr[n],t=e.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return Br.name_=i},Wr=["ng-","data-ng-","ng:","x-ng-"],zr=/[A-Z]/g,Yr=!1,Gr=1,Xr=2,Qr=3,Jr=8,Kr=9,Zr=11,ti={full:"1.4.1",major:1,minor:4,dot:1,codeName:"hyperionic-illumination"};kt.expando="ng339";var ei=kt.cache={},ni=1,ri=function(t,e,n){t.addEventListener(e,n,!1)},ii=function(t,e,n){t.removeEventListener(e,n,!1)};kt._data=function(t){return this.cache[t[this.expando]]||{}};var oi=/([\:\-\_]+(.))/g,ai=/^moz([A-Z])/,si={mouseleave:"mouseout",mouseenter:"mouseover"},ui=r("jqLite"),li=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ci=/<|&#?\w+;/,fi=/<([\w:]+)/,pi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,hi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};hi.optgroup=hi.option,hi.tbody=hi.tfoot=hi.colgroup=hi.caption=hi.thead,hi.th=hi.td;var di=kt.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===e.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),kt(t).on("load",r))},toString:function(){var t=[];return o(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return kr(t>=0?this[t]:this[this.length+t])},length:0,push:jr,sort:[].sort,splice:[].splice},mi={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){mi[wr(t)]=t});var vi={};o("input,select,option,textarea,button,form,details".split(","),function(t){vi[t]=!0});var gi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:Mt,removeData:Dt,hasData:Et},function(t,e){kt[e]=t}),o({data:Mt,inheritedData:Vt,scope:function(t){return kr.data(t,"$scope")||Vt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return kr.data(t,"$isolateScope")||kr.data(t,"$isolateScopeNoTemplate")},controller:qt,injector:function(t){return Vt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:It,css:function(t,e,n){return e=wt(e),y(n)?void(t.style[e]=n):t.style[e]},attr:function(t,e,r){var i=t.nodeType;if(i!==Qr&&i!==Xr&&i!==Jr){var o=wr(e);if(mi[o]){if(!y(r))return t[e]||(t.attributes.getNamedItem(e)||m).specified?o:n;r?(t[e]=!0,t.setAttribute(e,o)):(t[e]=!1,t.removeAttribute(o))}else if(y(r))t.setAttribute(e,r);else if(t.getAttribute){var a=t.getAttribute(e,2);return null===a?n:a}}},prop:function(t,e,n){return y(n)?void(t[e]=n):t[e]},text:function(){[m
[31m-function t(t,e){if($(e)){var n=t.nodeType;return n===Gr||n===Qr?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if($(e)){if(t.multiple&&"select"===F(t)){var n=[];return o(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){return $(e)?t.innerHTML:(Nt(t,!0),void(t.innerHTML=e))},empty:Lt},function(t,e){kt.prototype[e]=function(e,r){var i,o,a=this.length;if(t!==Lt&&(2==t.length&&t!==It&&t!==qt?e:r)===n){if(b(e)){for(i=0;a>i;i++)if(t===Mt)t(this[i],e);else for(o in e)t(this[i],o,e[o]);return this}for(var s=t.$dv,u=s===n?Math.min(a,1):a,l=0;u>l;l++){var c=t(this[l],e,r);s=s?s+c:c}return s}for(i=0;a>i;i++)t(this[i],e,r);return this}}),o({removeData:Dt,on:function Oa(t,e,n,r){if(y(r))throw ui("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Ct(t)){var i=jt(t,!0),o=i.events,a=i.handle;a||(a=i.handle=Wt(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],u=s.length;u--;){e=s[u];var l=o[e];l||(o[e]=[],"mouseenter"===e||"mouseleave"===e?Oa(t,si[e],function(t){var n=this,r=t.relatedTarget;(!r||r!==n&&!n.contains(r))&&a(t,e)}):"$destroy"!==e&&ri(t,e,a),l=o[e]),l.push(n)}}},off:Ot,one:function(t,e,n){t=kr(t),t.on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;Nt(t),o(new kt(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return o(t.childNodes,function(t){t.nodeType===Gr&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Gr||n===Zr){e=new kt(e);for(var r=0,i=e.length;i>r;r++){var o=e[r];t.appendChild(o)}}},prepend:function(t,e){if(t.nodeType===Gr){var n=t.firstChild;o(new kt(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){e=kr(e).eq(0).clone()[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:_t,detach:function(t){_t(t,!0)},after:function(t,e){var n=t,r=t.parentNode;e=new kt(e);for(var i=0,o=e.length;o>i;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:Rt,removeClass:Pt,toggleClass:function(t,e,n){e&&o(e.split(" "),function(e){var r=n;$(r)&&(r=!It(t,e)),(r?Rt:Pt)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Zr?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:At,triggerHandler:function(t,e,n){var r,i,a,s=e.type||e,u=jt(t),l=u&&u.events,c=l&&l[s];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:m,type:s,target:t},e.type&&(r=f(r,e)),i=L(c),a=n?[r].concat(n):[r],o(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,a)}))}},function(t,e){kt.prototype[e]=function(e,n,r){for(var i,o=0,a=this.length;a>o;o++)$(i)?(i=t(this[o],e,n,r),y(i)&&(i=kr(i))):Ft(i,t(this[o],e,n,r));return y(i)?i:this},kt.prototype.bind=kt.prototype.on,kt.prototype.unbind=kt.prototype.off}),Gt.prototype={put:function(t,e){this[Yt(t,this.nextUid)]=e},get:function(t){return this[Yt(t,this.nextUid)]},remove:function(t){var e=this[t=Yt(t,this.nextUid)];return delete this[t],e}};var $i=[function(){this.$get=[function(){return Gt}]}],yi=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,bi=/,/,wi=/^\s*(_?)(\S+?)\1\s*$/,xi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ci=r("$injector");Jt.$$annotate=Qt;var Ei=r("$animate"),Si=1,Ti="ng-animate",ki=function(){this.$get=["$q","$$rAF",function(t,e){function n(){}return n.all=m,n.chain=m,n.prototype={end:m,cancel:m,resume:m,pause:m,complete:m,then:function(n,r){return t(function(t){e(function(){t()})}).then(n,r)}},n}]},Ai=function(){var t=new Gt,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(n,i,a){var s=t.get(n);s||(t.put(n,s={}),e.push(n)),i&&o(i.split(" "),function(t){t&&(s[t]=!0)}),a&&o(a.split(" "),function(t){t&&(s[t]=!1)}),e.length>1||r.$$postDigest(function(){o(e,function(e){var n=t.get(e);if(n){var r=ee(e.attr("class")),i="",a="";o(n,function(t,e){var n=!!r[e];t!==n&&(t?i+=(i.length?" ":"")+e:a+=(a.length?" ":"")+e)}),o(e,function(t){i&&Rt(t,i),a&&Pt(t,a)}),t.remove(e)}}),e.length=0})}return{enabled:m,on:m,off:m,pin:m,push:function(t,e,r,o){return o&&o(),r=r||{},r.from&&t.css(r.from),r.to&&t.css(r.to),(r.addClass||r.removeClass)&&i(t,r.addClass,r.removeClass),new n}}}]},Ni=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Ei("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter)){var e=new RegExp("(\\s+|\\/)"+Ti+"(\\s+|\\/)");if(e.test(this.$$classNameFilter.toString()))throw Ei("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Ti)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=te(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,r,i,o){return r=r&&kr(r),i=i&&kr(i),r=r||i.parent(),e(n,r,i),t.push(n,"enter",ne(o))},move:function(n,r,i,o){return r=r&&kr(r),i=i&&kr(i),r=r||i.parent(),e(n,r,i),t.push(n,"move",ne(o))},leave:function(e,n){return t.push(e,"leave",ne(n),function(){e.remove()})},addClass:function(e,n,r){return r=ne(r),r.addClass=Zt(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return r=ne(r),r.removeClass=Zt(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return i=ne(i),i.addClass=Zt(i.addClass,n),i.removeClass=Zt(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return o=ne(o),o.from=o.from?f(o.from,n):n,o.to=o.to?f(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=Zt(o.tempClasses,i),t.push(e,"animate",o)}}}]}],Oi=r("$compile");ue.$inject=["$provide","$$sanitizeUriProvider"];var Di=/^((?:x|data)[\:\-_])/i,ji=r("$controller"),Mi=/^(\S+)(\s+as\s+(\w+))?$/,Ii="application/json",Pi={"Content-Type":Ii+";charset=utf-8"},Ri=/^\[|^\{(?!\{)/,Fi={"[":/]$/,"{":/}$/},qi=/^\)\]\}',?\n/,Vi=Rr.$interpolateMinErr=r("$interpolate");Vi.throwNoconcat=function(t){throw Vi("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Vi.interr=function(t,e){return Vi("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Li=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,_i={http:80,https:443,ftp:21},Hi=r("$location"),Ui={$$html5:!1,$$replace:!1,absUrl:Ue("$$absUrl"),url:function(t){if($(t))return this.$$url;var e=Li.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Ue("$$protocol"),host:Ue("$$host"),port:Ue("$$port"),path:Be("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(x(t)||C(t))t=t.toString(),this.$$search=Z(t);else{if(!b(t))throw Hi("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");t=V(t,{}),o(t,function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:$(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Be("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};o([He,_e,Le],function(t){t.prototype=Object.create(Ui),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Le||!this.$$html5)throw Hi("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=$(e)?null:e,this}});var Bi=r("$parse"),Wi=Function.prototype.call,zi=Function.prototype.apply,Yi=Function.prototype.bind,Gi=mt();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){Gi[t]=!0});var Xi={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Qi=function(t){this.options=t};Qi.prototype={constructor:Qi,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(e))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=Gi[e],o=Gi[n],a=Gi[r];if(i||o||a){var s=a?r:o?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length?this.text.charAt(this.index+e):!1},isNumber:function(t){return t>="0"&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"	"===t||"\n"===t||""===t||"Â "===t},isIdent:function(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=y(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw Bi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=wr(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){for(var t=this.index;this.index<this.text.length;){var e=this.text.charAt(this.index);if(!this.isIdent(e)&&!this.isNumber(e))break;this.index++}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=Xi[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Ji=function(t,e){this.lexer=t,this.options=e};Ji.Program="Program",Ji.ExpressionStatement="ExpressionStatement",Ji.AssignmentExpression="AssignmentExpression",Ji.ConditionalExpression="ConditionalExpression",Ji.LogicalExpression="LogicalExpression",Ji.BinaryExpression="BinaryExpression",Ji.UnaryExpression="UnaryExpression",Ji.CallExpression="CallExpression",Ji.MemberExpression="MemberExpression",Ji.Identifier="Identifier",Ji.Literal="Literal",Ji.ArrayExpression="ArrayExpression",Ji.Property="Property",Ji.ObjectExpression="ObjectExpression",Ji.ThisExpression="ThisExpression",Ji.NGValueParameter="NGValueParameter",Ji.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Ji.Program,body:t}},expressionStatement:function(){return{type:Ji.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t,e=this.expression();t=this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:Ji.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Ji.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Ji.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Ji.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Ji.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Ji.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Ji.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Ji.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Ji.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.constants.hasOwnProperty(this.peek().text)?t=V(this.constants[this.consume().text]):this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)"("===e.text?(t={type:Ji.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Ji.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Ji.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Ji.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do t.push(this.expression());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Ji.Identifier,name:t.text}},constant:function(){return{type:Ji.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ji.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Ji.Property,kind:"init"},this.peek().constant?t.key=this.constant():this.peek().identifier?t.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),t.value=this.expression(),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Ji.ObjectExpression,properties:e}},throwError:function(t,e){throw Bi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw Bi("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw Bi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===r||a===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return i?(this.tokens.shift(),i):!1},constants:{"true":{type:Ji.Literal,value:!0},"false":{type:Ji.Literal,value:!1},"null":{type:Ji.Literal,value:null},undefined:{type:Ji.Literal,value:n},"this":{type:Ji.ThisExpression}}},an.prototype={compile:function(t,e){var r=this,i=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ze(i,r.$filter);var a,s="";if(this.stage="assign",a=nn(i)){this.state.computing="assign";var u=this.nextId();this.recurse(a,u),s="fn.assign="+this.generateFunction("assign","s,v,l")}var l=tn(i.body);r.stage="inputs",o(l,function(t,e){var n="fn"+e;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(t,i),r.return_(i),r.state.inputs.push(n),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(i);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",f=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",c)(this.$filter,Ye,Ge,Xe,Qe,Je,t);return this.state=this.stage=n,f.literal=rn(i),f.constant=on(i),f},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return o(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return o(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,r,i,a,s){var u,l,c,f,p=this;if(i=i||m,!s&&y(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,r,i,a,!0));switch(t.type){case Ji.Program:o(t.body,function(e,r){p.recurse(e.expression,n,n,function(t){l=t}),r!==t.body.length-1?p.current().body.push(l,";"):p.return_(l)});break;case Ji.Literal:f=this.escape(t.value),this.assign(e,f),i(f);break;case Ji.UnaryExpression:this.recurse(t.argument,n,n,function(t){l=t}),f=t.operator+"("+this.ifDefined(l,0)+")",this.assign(e,f),i(f);break;case Ji.BinaryExpression:this.recurse(t.left,n,n,function(t){u=t}),this.recurse(t.right,n,n,function(t){l=t}),f="+"===t.operator?this.plus(u,l):"-"===t.operator?this.ifDefined(u,0)+t.operator+this.ifDefined(l,0):"("+u+")"+t.operator+"("+l+")",this.assign(e,f),i(f);break;case Ji.LogicalExpression:e=e||this.nextId(),p.recurse(t.left,e),p.if_("&&"===t.operator?e:p.not(e),p.lazyRecurse(t.right,e)),i(e);break;case Ji.ConditionalExpression:e=e||this.nextId(),p.recurse(t.test,e),p.if_(e,p.lazyRecurse(t.alternate,e),p.lazyRecurse(t.consequent,e)),i(e);break;case Ji.Identifier:e=e||this.nextId(),r&&(r.context="inputs"===p.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),r.computed=!1,r.name=t.name),Ye(t.name),p.if_("inputs"===p.stage||p.not(p.getHasOwnProperty("l",t.name)),function(){p.if_("inputs"===p.stage||"s",function(){a&&1!==a&&p.if_(p.not(p.nonComputedMember("s",t.name)),p.lazyAssign(p.nonComputedMember("s",t.name),"{}")),p.assign(e,p.nonComputedMember("s",t.name))})},e&&p.lazyAssign(e,p.nonComputedMember("l",t.name))),(p.state.expensiveChecks||ln(t.name))&&p.addEnsureSafeObject(e),i(e);break;case Ji.MemberExpression:u=r&&(r.context=this.nextId())||this.nextId(),e=e||this.nextId(),p.recurse(t.object,u,n,function(){p.if_(p.notNull(u),function(){t.computed?(l=p.nextId(),p.recurse(t.property,l),p.addEnsureSafeMemberName(l),a&&1!==a&&p.if_(p.not(p.computedMember(u,l)),p.lazyAssign(p.computedMember(u,l),"{}")),f=p.ensureSafeObject(p.computedMember(u,l)),p.assign(e,f),r&&(r.computed=!0,r.name=l)):(Ye(t.property.name),a&&1!==a&&p.if_(p.not(p.nonComputedMember(u,t.property.name)),p.lazyAssign(p.nonComputedMember(u,t.property.name),"{}")),f=p.nonComputedMember(u,t.property.name),(p.state.expensiveChecks||ln(t.property.name))&&(f=p.ensureSafeObject(f)),p.assign(e,f),r&&(r.computed=!1,r.name=t.property.name))},function(){p.assign(e,"undefined")}),i(e)},!!a);break;case Ji.CallExpression:e=e||this.nextId(),t.filter?(l=p.filter(t.callee.name),c=[],o(t.arguments,function(t){var e=p.nextId();p.recurse(t,e),c.push(e)}),f=l+"("+c.join(",")+")",p.assign(e,f),i(e)):(l=p.nextId(),u={},c=[],p.recurse(t.callee,l,u,function(){p.if_(p.notNull(l),function(){p.addEnsureSafeFunction(l),o(t.arguments,function(t){p.recurse(t,p.nextId(),n,function(t){c.push(p.ensureSafeObject(t))})}),u.name?(p.state.expensiveChecks||p.addEnsureSafeObject(u.context),f=p.member(u.context,u.name,u.computed)+"("+c.join(",")+")"):f=l+"("+c.join(",")+")",f=p.ensureSafeObject(f),p.assign(e,f)},function(){p.assign(e,"undefined")}),i(e)}));break;case Ji.AssignmentExpression:if(l=this.nextId(),u={},!en(t.left))throw Bi("lval","Trying to assing a value to a non l-value");this.recurse(t.left,n,u,function(){p.if_(p.notNull(u.context),function(){p.recurse(t.right,l),p.addEnsureSafeObject(p.member(u.context,u.name,u.computed)),f=p.member(u.context,u.name,u.computed)+t.operator+l,p.assign(e,f),i(e||f)})},1);break;case Ji.ArrayExpression:c=[],o(t.elements,function(t){p.recurse(t,p.nextId(),n,function(t){c.push(t)})}),f="["+c.join(",")+"]",this.assign(e,f),i(f);break;case Ji.ObjectExpression:c=[],o(t.properties,function(t){p.recurse(t.value,p.nextId(),n,function(e){c.push(p.escape(t.key.type===Ji.Identifier?t.key.name:""+t.key.value)+":"+e)})}),f="{"+c.join(",")+"}",this.assign(e,f),i(f);break;case Ji.ThisExpression:this.assign(e,"s"),i("s");break;case Ji.NGValueParameter:this.assign(e,"v"),i("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){return t?(this.current().body.push(t,"=",e,";"),t):void 0},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(t===!0)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return t+"."+e},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},lazyRecurse:function(t,e,n,r,i,o){var a=this;return function(){a.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(x(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(C(t))return t.toString();if(t===!0)return"true";if(t===!1)return"false";if(null===t)return"null";if("undefined"==typeof t)return"undefined";throw Bi("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},sn.prototype={compile:function(t,e){var n=this,r=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,Ze(r,n.$filter);var i,a;(i=nn(r))&&(a=this.recurse(i));var s,u=tn(r.body);u&&(s=[],o(u,function(t,e){var r=n.recurse(t);t.input=r,s.push(r),t.watchId=e}));var l=[];o(r.body,function(t){l.push(n.recurse(t.expression))});var c=0===r.body.length?function(){}:1===r.body.length?l[0]:function(t,e){var n;return o(l,function(r){n=r(t,e)}),n};return a&&(c.assign=function(t,e,n){return a(t,n,e)}),s&&(c.inputs=s),c.literal=rn(r),c.constant=on(r),c},recurse:function(t,e,r){var i,a,s,u=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Ji.Literal:return this.value(t.value,e);case Ji.UnaryExpression:return a=this.recurse(t.argument),this["unary"+t.operator](a,e);case Ji.BinaryExpression:return i=this.recurse(t.left),a=this.recurse(t.right),this["binary"+t.operator](i,a,e);case Ji.LogicalExpression:return i=this.recurse(t.left),a=this.recurse(t.right),this["binary"+t.operator](i,a,e);case Ji.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Ji.Identifier:return Ye(t.name,u.expression),u.identifier(t.name,u.expensiveChecks||ln(t.name),e,r,u.expression);case Ji.MemberExpression:return i=this.recurse(t.object,!1,!!r),t.computed||(Ye(t.property.name,u.expression),a=t.property.name),t.computed&&(a=this.recurse(t.property)),t.computed?this.computedMember(i,a,e,r,u.expression):this.nonComputedMember(i,a,u.expensiveChecks,e,r,u.expression);case Ji.CallExpression:return s=[],o(t.arguments,function(t){s.push(u.recurse(t))}),t.filter&&(a=this.$filter(t.callee.name)),t.filter||(a=this.recurse(t.callee,!0)),t.filter?function(t,r,i,o){for(var u=[],l=0;l<s.length;++l)u.push(s[l](t,r,i,o));var c=a.apply(n,u,o);return e?{context:n,name:n,value:c}:c}:function(t,n,r,i){var o,l=a(t,n,r,i);if(null!=l.value){Ge(l.context,u.expression),Xe(l.value,u.expression);for(var c=[],f=0;f<s.length;++f)c.push(Ge(s[f](t,n,r,i),u.expression));o=Ge(l.value.apply(l.context,c),u.expression)}return e?{value:o}:o};case Ji.AssignmentExpression:return i=this.recurse(t.left,!0,1),a=this.recurse(t.right),function(t,n,r,o){var s=i(t,n,r,o),l=a(t,n,r,o);return Ge(s.value,u.expression),s.context[s.name]=l,e?{value:l}:l};case Ji.ArrayExpression:return s=[],o(t.elements,function(t){s.push(u.recurse(t))}),function(t,n,r,i){for(var o=[],a=0;a<s.length;++a)o.push(s[a](t,n,r,i));return e?{value:o}:o};case Ji.ObjectExpression:return s=[],o(t.properties,function(t){s.push({key:t.key.type===Ji.Identifier?t.key.name:""+t.key.value,value:u.recurse(t.value)})}),function(t,n,r,i){for(var o={},a=0;a<s.length;++a)o[s[a].key]=s[a].value(t,n,r,i);return e?{value:o}:o};case Ji.ThisExpression:return function(t){return e?{value:t}:t};case Ji.NGValueParameter:return function(t,n,r,i){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=y(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=y(a)?-a:0,e?{value:a}:a}},"unary!":function(t,e){return function(n,r,i,o){var a=!t(n,r,i,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a),u=e(r,i,o,a),l=Je(s,u);return n?{value:l}:l}},"binary-":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a),u=e(r,i,o,a),l=(y(s)?s:0)-(y(u)?u:0);return n?{value:l}:l}},"binary*":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)*e(r,i,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)/e(r,i,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)%e(r,i,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)===e(r,i,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!==e(r,i,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)==e(r,i,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!=e(r,i,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<e(r,i,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>e(r,i,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<=e(r,i,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>=e(r,i,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)&&e(r,i,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)||e(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,r){return function(i,o,a,s){var u=t(i,o,a,s)?e(i,o,a,s):n(i,o,a,s);return r?{value:u}:u}},value:function(t,e){return function(){return e?{context:n,name:n,value:t}:t}},identifier:function(t,e,r,i,o){return function(a,s,u,l){var c=s&&t in s?s:a;i&&1!==i&&c&&!c[t]&&(c[t]={});var f=c?c[t]:n;return e&&Ge(f,o),r?{context:c,name:t,value:f}:f}},computedMember:function(t,e,n,r,i){return function(o,a,s,u){var l,c,f=t(o,a,s,u);return null!=f&&(l=e(o,a,s,u),Ye(l,i),r&&1!==r&&f&&!f[l]&&(f[l]={}),c=f[l],Ge(c,i)),n?{context:f,name:l,value:c}:c}},nonComputedMember:function(t,e,r,i,o,a){return function(s,u,l,c){var f=t(s,u,l,c);o&&1!==o&&f&&!f[e]&&(f[e]={});var p=null!=f?f[e]:n;return(r||ln(e))&&Ge(p,a),i?{context:f,name:e,value:p}:p}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}};var Ki=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new Ji(this.lexer),this.astCompiler=n.csp?new sn(this.ast,e):new an(this.ast,e)};Ki.prototype={constructor:Ki,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var Zi=(mt(),mt(),Object.prototype.valueOf),to=r("$sce"),eo={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Oi=r("$compile"),no=e.createElement("a"),ro=Tn(t.location.href);Nn.$inject=["$document"],Dn.$inject=["$provide"],Fn.$inject=["$locale"],qn.$inject=["$locale"];var io=".",oo={yyyy:_n("FullYear",4),yy:_n("FullYear",2,0,!0),y:_n("FullYear",1),MMMM:Hn("Month"),MMM:Hn("Month",!0),MM:_n("Month",2,1),M:_n("Month",1,1),dd:_n("Date",2),d:_n("Date",1),HH:_n("Hours",2),H:_n("Hours",1),hh:_n("Hours",2,-12),h:_n("Hours",1,-12),mm:_n("Minutes",2),m:_n("Minutes",1),ss:_n("Seconds",2),s:_n("Seconds",1),sss:_n("Milliseconds",3),EEEE:Hn("Day"),EEE:Hn("Day",!0),a:Yn,Z:Un,ww:zn(2),w:zn(1),G:Gn,GG:Gn,GGG:Gn,GGGG:Xn},ao=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,so=/^\-?\d+$/;Qn.$inject=["$locale"];var uo=g(wr),lo=g(Cr);Zn.$inject=["$parse"];var co=g({restrict:"E",compile:function(t,e){return e.href||e.xlinkHref?void 0:function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Mr.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),fo={};o(mi,function(t,e){function n(t,n,i){t.$watch(i[r],function(t){i.$set(e,!!t)})}if("multiple"!=t){var r=le("ng-"+e),i=n;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[r]&&n(t,e,i)}),fo[r]=function(){return{restrict:"A",priority:100,link:i}}}}),o(gi,function(t,e){fo[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"==r.ngPattern.charAt(0)){var i=r.ngPattern.match(yr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]));[m
[31m-[m
[31m-}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),o(["src","srcset","href"],function(t){var e=le("ng-"+t);fo[e]=function(){return{priority:99,link:function(n,r,i){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===Mr.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(e,function(e){return e?(i.$set(a,e),void(Tr&&o&&r.prop(o,i[a]))):void("href"===t&&i.$set(a,null))})}}}});var po={$addControl:m,$$renameControl:er,$removeControl:m,$setValidity:m,$setDirty:m,$setPristine:m,$setSubmitted:m},ho="ng-submitted";nr.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var mo=function(t){return["$timeout",function(e){var r={name:"form",restrict:t?"EAC":"E",controller:nr,compile:function(r,i){r.addClass(Xo).addClass(Yo);var o=i.name?"name":t&&i.ngForm?"ngForm":!1;return{pre:function(t,r,i,a){if(!("action"in i)){var s=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()};ri(r[0],"submit",s),r.on("$destroy",function(){e(function(){ii(r[0],"submit",s)},0,!1)})}var u=a.$$parentForm;o&&(un(t,a.$name,a,a.$name),i.$observe(o,function(e){a.$name!==e&&(un(t,a.$name,n,a.$name),u.$$renameControl(a,e),un(t,a.$name,a,a.$name))})),r.on("$destroy",function(){u.$removeControl(a),o&&un(t,i[o],n,a.$name),f(a,po)})}}}};return r}]},vo=mo(),go=mo(!0),$o=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,yo=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,bo=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,wo=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,xo=/^(\d{4})-(\d{2})-(\d{2})$/,Co=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Eo=/^(\d{4})-W(\d\d)$/,So=/^(\d{4})-(\d\d)$/,To=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ko={text:ir,date:ur("date",xo,sr(xo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ur("datetimelocal",Co,sr(Co,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:ur("time",To,sr(To,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ur("week",Eo,ar,"yyyy-Www"),month:ur("month",So,sr(So,["yyyy","MM"]),"yyyy-MM"),number:cr,url:fr,email:pr,radio:hr,checkbox:mr,hidden:m,button:m,submit:m,reset:m,file:m},Ao=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(ko[wr(a.type)]||ko.text)(i,o,a,s[0],e,t,n,r)}}}}],No=/^(true|false|\d+)$/,Oo=function(){return{restrict:"A",priority:100,compile:function(t,e){return No.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},Do=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,r,i){t.$$addBindingInfo(r,i.ngBind),r=r[0],e.$watch(i.ngBind,function(t){r.textContent=t===n?"":t})}}}}],jo=["$interpolate","$compile",function(t,e){return{compile:function(r){return e.$$addBindingClass(r),function(r,i,o){var a=t(i.attr(o.$attr.ngBindTemplate));e.$$addBindingInfo(i,a.expressions),i=i[0],o.$observe("ngBindTemplate",function(t){i.textContent=t===n?"":t})}}}}],Mo=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,function(){r.html(t.getTrustedHtml(o(e))||"")})}}}}],Io=g({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),Po=vr("",!0),Ro=vr("Odd",0),Fo=vr("Even",1),qo=tr({compile:function(t,e){e.$set("ngCloak",n),t.removeClass("ng-cloak")}}),Vo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Lo={},_o={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=le("ng-"+t);Lo[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var i=function(){a(e,{$event:n})};_o[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var Ho=["$animate",function(t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,l;n.$watch(i.ngIf,function(n){n?u||a(function(n,o){u=o,n[n.length++]=e.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},t.enter(n,r.parent(),r)}):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),s&&(l=dt(s.clone),t.leave(l).then(function(){l=null}),s=null))})}}}],Uo=["$templateRequest","$anchorScroll","$animate","$sce",function(t,e,n,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Rr.noop,compile:function(i,o){var a=o.ngInclude||o.src,s=o.onload||"",u=o.autoscroll;return function(i,o,l,c,f){var p,h,d,m=0,v=function(){h&&(h.remove(),h=null),p&&(p.$destroy(),p=null),d&&(n.leave(d).then(function(){h=null}),h=d,d=null)};i.$watch(r.parseAsResourceUrl(a),function(r){var a=function(){!y(u)||u&&!i.$eval(u)||e()},l=++m;r?(t(r,!0).then(function(t){if(l===m){var e=i.$new();c.template=t;var u=f(e,function(t){v(),n.enter(t,null,o).then(a)});p=e,d=u,p.$emit("$includeContentLoaded",r),i.$eval(s)}},function(){l===m&&(v(),i.$emit("$includeContentError",r))}),i.$emit("$includeContentRequested",r)):(v(),c.template=null)})}}}}],Bo=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){return/SVG/.test(r[0].toString())?(r.empty(),void t(St(o.template,e).childNodes)(n,function(t){r.append(t)},{futureParentElement:r})):(r.html(o.template),void t(r.contents())(n))}}}],Wo=tr({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),zo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,r,i){var a=e.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,u=s?_r(a):a,l=function(t){if(!$(t)){var e=[];return t&&o(t.split(u),function(t){t&&e.push(s?_r(t):t)}),e}};i.$parsers.push(l),i.$formatters.push(function(t){return Vr(t)?t.join(a):n}),i.$isEmpty=function(t){return!t||!t.length}}}},Yo="ng-valid",Go="ng-invalid",Xo="ng-pristine",Qo="ng-dirty",Jo="ng-untouched",Ko="ng-touched",Zo="ng-pending",ta=new r("ngModel"),ea=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,r,i,a,s,u,l,c,f){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=f(r.name||"",!1)(t);var p,h=a(r.ngModel),d=h.assign,v=h,g=d,b=null,w=this;this.$$setOptions=function(t){if(w.$options=t,t&&t.getterSetter){var e=a(r.ngModel+"()"),n=a(r.ngModel+"($$$p)");v=function(t){var n=h(t);return S(n)&&(n=e(t)),n},g=function(t,e){S(h(t))?n(t,{$$$p:w.$modelValue}):d(t,w.$modelValue)}}else if(!h.assign)throw ta("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,J(i))},this.$render=m,this.$isEmpty=function(t){return $(t)||""===t||null===t||t!==t};var x=i.inheritedData("$formController")||po,E=0;gr({ctrl:this,$element:i,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},parentForm:x,$animate:s}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,s.removeClass(i,Qo),s.addClass(i,Xo)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,s.removeClass(i,Xo),s.addClass(i,Qo),x.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,s.setClass(i,Jo,Ko)},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,s.setClass(i,Ko,Jo)},this.$rollbackViewValue=function(){u.cancel(b),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!C(w.$modelValue)||!isNaN(w.$modelValue)){var t=w.$$lastCommittedViewValue,e=w.$$rawModelValue,r=w.$valid,i=w.$modelValue,o=w.$options&&w.$options.allowInvalid;w.$$runValidators(e,t,function(t){o||r===t||(w.$modelValue=t?e:n,w.$modelValue!==i&&w.$$writeModelToScope())})}},this.$$runValidators=function(t,e,r){function i(){var t=w.$$parserName||"parse";return p!==n?(p||(o(w.$validators,function(t,e){u(e,null)}),o(w.$asyncValidators,function(t,e){u(e,null)})),u(t,p),p):(u(t,null),!0)}function a(){var n=!0;return o(w.$validators,function(r,i){var o=r(t,e);n=n&&o,u(i,o)}),n?!0:(o(w.$asyncValidators,function(t,e){u(e,null)}),!1)}function s(){var r=[],i=!0;o(w.$asyncValidators,function(o,a){var s=o(t,e);if(!M(s))throw ta("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);u(a,n),r.push(s.then(function(){u(a,!0)},function(t){i=!1,u(a,!1)}))}),r.length?c.all(r).then(function(){l(i)},m):l(!0)}function u(t,e){f===E&&w.$setValidity(t,e)}function l(t){f===E&&r(t)}E++;var f=E;return i()&&a()?void s():void l(!1)},this.$commitViewValue=function(){var t=w.$viewValue;u.cancel(b),(w.$$lastCommittedViewValue!==t||""===t&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=t,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function e(){w.$modelValue!==a&&w.$$writeModelToScope()}var r=w.$$lastCommittedViewValue,i=r;if(p=$(i)?n:!0)for(var o=0;o<w.$parsers.length;o++)if(i=w.$parsers[o](i),$(i)){p=!1;break}C(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=v(t));var a=w.$modelValue,s=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=i,s&&(w.$modelValue=i,e()),w.$$runValidators(i,w.$$lastCommittedViewValue,function(t){s||(w.$modelValue=t?i:n,e())})},this.$$writeModelToScope=function(){g(t,w.$modelValue),o(w.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){w.$viewValue=t,(!w.$options||w.$options.updateOnDefault)&&w.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,r=0,i=w.$options;i&&y(i.debounce)&&(n=i.debounce,C(n)?r=n:C(n[e])?r=n[e]:C(n["default"])&&(r=n["default"])),u.cancel(b),r?b=u(function(){w.$commitViewValue()},r):l.$$phase?w.$commitViewValue():t.$apply(function(){w.$commitViewValue()})},t.$watch(function(){var e=v(t);if(e!==w.$modelValue&&(w.$modelValue===w.$modelValue||e===e)){w.$modelValue=w.$$rawModelValue=e,p=n;for(var r=w.$formatters,i=r.length,o=e;i--;)o=r[i](o);w.$viewValue!==o&&(w.$viewValue=w.$$lastCommittedViewValue=o,w.$render(),w.$$runValidators(e,o,m))}return e})}],na=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ea,priority:1,compile:function(e){return e.addClass(Xo).addClass(Jo).addClass(Yo),{pre:function(t,e,n,r){var i=r[0],o=r[1]||po;i.$$setOptions(r[2]&&r[2].$options),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&o.$$renameControl(i,t)}),t.$on("$destroy",function(){o.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(n){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],ra=/(\s+|^)default(\s+|$)/,ia=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var r=this;this.$options=V(t.$eval(e.ngModelOptions)),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=_r(this.$options.updateOn.replace(ra,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},oa=tr({terminal:!0,priority:1e3}),aa=r("ngOptions"),sa=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ua=["$compile","$parse",function(t,n){function r(t,e,r){function o(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}var a=t.match(sa);if(!a)throw aa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,J(e));var s=a[5]||a[7],u=a[6],l=/ as /.test(a[0])&&a[1],c=a[9],f=n(a[2]?a[1]:s),p=l&&n(l),h=p||f,d=c&&n(c),m=c?function(t,e){return d(r,e)}:function(t){return Yt(t)},v=function(t,e){return m(t,x(t,e))},g=n(a[2]||a[1]),$=n(a[3]||""),y=n(a[4]||""),b=n(a[8]),w={},x=u?function(t,e){return w[u]=e,w[s]=t,w}:function(t){return w[s]=t,w};return{trackBy:c,getTrackByValue:v,getWatchables:n(b,function(t){var e=[];return t=t||[],Object.keys(t).forEach(function(n){if("$"!==n.charAt(0)){var i=x(t[n],n),o=m(t[n],i);if(e.push(o),a[2]||a[1]){var s=g(r,i);e.push(s)}if(a[4]){var u=y(r,i);e.push(u)}}}),e}),getOptions:function(){var t,e=[],n={},a=b(r)||[];if(!u&&i(a))t=a;else{t=[];for(var s in a)a.hasOwnProperty(s)&&"$"!==s.charAt(0)&&t.push(s)}for(var l=t.length,f=0;l>f;f++){var p=a===t?f:t[f],d=a[p],w=x(d,p),C=h(r,w),E=m(C,w),S=g(r,w),T=$(r,w),k=y(r,w),A=new o(E,C,S,T,k);e.push(A),n[E]=A}return{items:e,selectValueMap:n,getOptionFromViewValue:function(t){return n[v(t)]},getViewValueFromOption:function(t){return c?Rr.copy(t.viewValue):t.viewValue}}}}}var a=e.createElement("option"),s=e.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(e,n,i,u){function l(t,e){t.element=e,e.disabled=t.disabled,t.value!==e.value&&(e.value=t.selectValue),t.label!==e.label&&(e.label=t.label,e.textContent=t.label)}function c(t,e,n,r){var i;return e&&wr(e.nodeName)===n?i=e:(i=r.cloneNode(!1),e?t.insertBefore(i,e):t.appendChild(i)),i}function f(t){for(var e;t;)e=t.nextSibling,_t(t),t=e}function p(t){var e=m&&m[0],n=x&&x[0];if(e||n)for(;t&&(t===e||t===n);)t=t.nextSibling;return t}function h(){var t=C&&v.readValue();C=E.getOptions();var e={},r=n[0].firstChild;if(w&&n.prepend(m),r=p(r),C.items.forEach(function(t){var i,o,u;t.group?(i=e[t.group],i||(o=c(n[0],r,"optgroup",s),r=o.nextSibling,o.label=t.group,i=e[t.group]={groupElement:o,currentOptionElement:o.firstChild}),u=c(i.groupElement,i.currentOptionElement,"option",a),l(t,u),i.currentOptionElement=u.nextSibling):(u=c(n[0],r,"option",a),l(t,u),r=u.nextSibling)}),Object.keys(e).forEach(function(t){f(e[t].currentOptionElement)}),f(r),d.$render(),!d.$isEmpty(t)){var i=v.readValue();(E.trackBy?_(t,i):t===i)||(d.$setViewValue(i),d.$render())}}var d=u[1];if(d){for(var m,v=u[0],g=i.multiple,$=0,y=n.children(),b=y.length;b>$;$++)if(""===y[$].value){m=y.eq($);break}var w=!!m,x=kr(a.cloneNode(!1));x.val("?");var C,E=r(i.ngOptions,n,e),S=function(){w||n.prepend(m),n.val(""),m.prop("selected",!0),m.attr("selected",!0)},T=function(){w||m.remove()},k=function(){n.prepend(x),n.val("?"),x.prop("selected",!0),x.attr("selected",!0)},A=function(){x.remove()};g?(d.$isEmpty=function(t){return!t||0===t.length},v.writeValue=function(t){C.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=C.getOptionFromViewValue(t);e&&!e.disabled&&(e.element.selected=!0)})},v.readValue=function(){var t=n.val()||[],e=[];return o(t,function(t){var n=C.selectValueMap[t];n.disabled||e.push(C.getViewValueFromOption(n))}),e},E.trackBy&&e.$watchCollection(function(){return Vr(d.$viewValue)?d.$viewValue.map(function(t){return E.getTrackByValue(t)}):void 0},function(){d.$render()})):(v.writeValue=function(t){var e=C.getOptionFromViewValue(t);e&&!e.disabled?n[0].value!==e.selectValue&&(A(),T(),n[0].value=e.selectValue,e.element.selected=!0,e.element.setAttribute("selected","selected")):null===t||w?(A(),S()):(T(),k())},v.readValue=function(){var t=C.selectValueMap[n.val()];return t&&!t.disabled?(T(),A(),C.getViewValueFromOption(t)):null},E.trackBy&&e.$watch(function(){return E.getTrackByValue(d.$viewValue)},function(){d.$render()})),w?(m.remove(),t(m)(e),m.removeClass("ng-scope")):m=kr(a.cloneNode(!1)),h(),e.$watchCollection(E.getWatchables,h)}}}}],la=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,s,u){function l(t){s.text(t||"")}var c,f=u.count,p=u.$attr.when&&s.attr(u.$attr.when),h=u.offset||0,d=a.$eval(p)||{},v={},g=e.startSymbol(),y=e.endSymbol(),b=g+f+"-"+h+y,w=Rr.noop;o(u,function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+wr(n[2]);d[r]=s.attr(u.$attr[e])}}),o(d,function(t,n){v[n]=e(t.replace(r,b))}),a.$watch(f,function(e){var r=parseFloat(e),i=isNaN(r);if(i||r in d||(r=t.pluralCat(r-h)),r!==c&&!(i&&C(c)&&isNaN(c))){w();var o=v[r];$(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+p),w=m,l()):w=a.$watch(o,l),c=r}})}}}],ca=["$parse","$animate",function(t,a){var s="$$NG_REMOVED",u=r("ngRepeat"),l=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))},c=function(t){return t.clone[0]},f=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,p){var h=p.ngRepeat,d=e.createComment(" end ngRepeat: "+h+" "),m=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw u("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",h);var v=m[1],g=m[2],$=m[3],y=m[4];if(m=v.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!m)throw u("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v);var b=m[3]||m[1],w=m[2];if($&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test($)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test($)))throw u("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",$);var x,C,E,S,T={$id:Yt};return y?x=t(y):(E=function(t,e){return Yt(e)},S=function(t){return t}),function(t,e,r,p,m){x&&(C=function(e,n,r){return w&&(T[w]=e),T[b]=n,T.$index=r,x(t,T)});var v=mt();t.$watchCollection(g,function(r){var p,g,y,x,T,k,A,N,O,D,j,M,I=e[0],P=mt();if($&&(t[$]=r),i(r))O=r,N=C||E;else{N=C||S,O=[];for(var R in r)r.hasOwnProperty(R)&&"$"!==R.charAt(0)&&O.push(R)}for(x=O.length,j=new Array(x),p=0;x>p;p++)if(T=r===O?p:O[p],k=r[T],A=N(T,k,p),v[A])D=v[A],delete v[A],P[A]=D,j[p]=D;else{if(P[A])throw o(j,function(t){t&&t.scope&&(v[t.id]=t)}),u("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",h,A,k);j[p]={id:A,scope:n,clone:n},P[A]=!0}for(var F in v){if(D=v[F],M=dt(D.clone),a.leave(M),M[0].parentNode)for(p=0,g=M.length;g>p;p++)M[p][s]=!0;D.scope.$destroy()}for(p=0;x>p;p++)if(T=r===O?p:O[p],k=r[T],D=j[p],D.scope){y=I;do y=y.nextSibling;while(y&&y[s]);c(D)!=y&&a.move(dt(D.clone),null,kr(I)),I=f(D),l(D.scope,p,b,k,w,T,x)}else m(function(t,e){D.scope=e;var n=d.cloneNode(!1);t[t.length++]=n,a.enter(t,null,kr(I)),I=n,D.clone=t,P[D.id]=D,l(D.scope,p,b,k,w,T,x)});v=P})}}}}],fa="ng-hide",pa="ng-hide-animate",ha=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,fa,{tempClasses:pa})})}}}],da=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,fa,{tempClasses:pa})})}}}],ma=tr(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&o(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),va=["$animate",function(t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var s=i.ngSwitch||i.on,u=[],l=[],c=[],f=[],p=function(t,e){return function(){t.splice(e,1)}};n.$watch(s,function(n){var r,i;for(r=0,i=c.length;i>r;++r)t.cancel(c[r]);for(c.length=0,r=0,i=f.length;i>r;++r){var s=dt(l[r].clone);f[r].$destroy();var h=c[r]=t.leave(s);h.then(p(c,r))}l.length=0,f.length=0,(u=a.cases["!"+n]||a.cases["?"])&&o(u,function(n){n.transclude(function(r,i){f.push(i);var o=n.element;r[r.length++]=e.createComment(" end ngSwitchWhen: ");var a={clone:r};l.push(a),t.enter(r,o.parent(),o)})})})}}}],ga=tr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:e})}}),$a=tr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),ya=tr({restrict:"EAC",link:function(t,e,n,i,o){if(!o)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",J(e));o(function(t){e.empty(),e.append(t)})}}),ba=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"==n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],wa={$setViewValue:m,$render:m},xa=["$element","$scope","$attrs",function(t,r,i){var o=this,a=new Gt;o.ngModelCtrl=wa,o.unknownOption=kr(e.createElement("option")),o.renderUnknownOption=function(e){var n="? "+Yt(e)+" ?";o.unknownOption.val(n),t.prepend(o.unknownOption),t.val(n)},r.$on("$destroy",function(){o.renderUnknownOption=m}),o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.readValue=function(){return o.removeUnknownOption(),t.val()},o.writeValue=function(e){o.hasOption(e)?(o.removeUnknownOption(),t.val(e),""===e&&o.emptyOption.prop("selected",!0)):null==e&&o.emptyOption?(o.removeUnknownOption(),t.val("")):o.renderUnknownOption(e)},o.addOption=function(t,e){pt(t,'"option value"'),""===t&&(o.emptyOption=e);var n=a.get(t)||0;a.put(t,n+1)},o.removeOption=function(t){var e=a.get(t);e&&(1===e?(a.remove(t),""===t&&(o.emptyOption=n)):a.put(t,e-1))},o.hasOption=function(t){return!!a.get(t)}}],Ca=function(){return{restrict:"E",require:["select","?ngModel"],controller:xa,link:function(t,e,n,r){var i=r[1];if(i){var a=r[0];if(a.ngModelCtrl=i,i.$render=function(){a.writeValue(i.$viewValue)},e.on("change",function(){t.$apply(function(){i.$setViewValue(a.readValue())})}),n.multiple){a.readValue=function(){var t=[];return o(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},a.writeValue=function(t){var n=new Gt(t);o(e.find("option"),function(t){t.selected=y(n.get(t.value))})};var s,u=0/0;t.$watch(function(){u!==i.$viewValue||_(s,i.$viewValue)||(s=L(i.$viewValue),i.$render()),u=i.$viewValue}),i.$isEmpty=function(t){return!t||0===t.length}}}}}},Ea=["$interpolate",function(t){function e(t){t[0].hasAttribute("selected")&&(t[0].selected=!0)}return{restrict:"E",priority:100,compile:function(n,r){if($(r.value)){var i=t(n.text(),!0);i||r.$set("value",n.text())}return function(t,n,r){var o="$selectController",a=n.parent(),s=a.data(o)||a.parent().data(o);s&&s.ngModelCtrl&&(i?t.$watch(i,function(t,i){r.$set("value",t),i!==t&&s.removeOption(i),s.addOption(t,n),s.ngModelCtrl.$render(),e(n)}):(s.addOption(r.value,n),s.ngModelCtrl.$render(),e(n)),n.on("$destroy",function(){s.removeOption(r.value),s.ngModelCtrl.$render()}))}}}}],Sa=g({restrict:"E",terminal:!1}),Ta=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},ka=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,i,o){if(o){var a,s=i.ngPattern||i.pattern;i.$observe("pattern",function(t){if(x(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,J(e));a=t||n,o.$validate()}),o.$validators.pattern=function(t){return o.$isEmpty(t)||$(a)||a.test(t)}}}}},Aa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){var e=h(t);i=isNaN(e)?-1:e,r.$validate()}),r.$validators.maxlength=function(t,e){return 0>i||r.$isEmpty(e)||e.length<=i}}}}},Na=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=h(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};return t.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(lt(),yt(Rr),void kr(e).ready(function(){it(e,ot)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e="length"in t&&t.length,n=Z.type(t);return"function"===n||Z.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function r(t,e,n){if(Z.isFunction(e))return Z.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return Z.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(st.test(e))return Z.filter(e,t,n);e=Z.filter(e,t)}return Z.grep(t,function(t){return z.call(e,t)>=0!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=dt[t]={};return Z.each(t.match(ht)||[],function(t,n){e[n]=!0}),e}function a(){J.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1),Z.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+s.uid++}function u(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(bt,"-$1").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:yt.test(n)?Z.parseJSON(n):n}catch(i){}$t.set(t,e,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function f(){try{return J.activeElement}catch(t){}}function p(t,e){return Z.nodeName(t,"table")&&Z.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function h(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function d(t){var e=Rt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var n=0,r=t.length;r>n;n++)gt.set(t[n],"globalEval",!e||gt.get(e[n],"globalEval"))}function v(t,e){var n,r,i,o,a,s,u,l;if(1===e.nodeType){if(gt.hasData(t)&&(o=gt.access(t),a=gt.set(e,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)Z.event.add(e,i,l[i][n])}$t.hasData(t)&&(s=$t.access(t),u=Z.extend({},s),$t.set(e,u))}}function g(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Z.nodeName(t,e)?Z.merge([t],n):n}function $(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Et.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(e,n){var r,i=Z(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(r=t.getDefaultComputedStyle(i[0]))?r.display:Z.css(i[0],"display");return i.detach(),o}function b(t){var e=J,n=Lt[t];return n||(n=y(t,e),"none"!==n&&n||(Vt=(Vt||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Vt[0].contentDocument,e.write(),e.close(),n=y(t,e),Vt.detach()),Lt[t]=n),n}function w(t,e,n){var r,i,o,a,s=t.style;return n=n||Ut(t),n&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||Z.contains(t.ownerDocument,t)||(a=Z.style(t,e)),Ht.test(a)&&_t.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function x(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function C(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),r=e,i=Xt.length;i--;)if(e=Xt[i]+n,e in t)return e;return r}function E(t,e,n){var r=Wt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function S(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=Z.css(t,n+xt[o],!0,i)),r?("content"===n&&(a-=Z.css(t,"padding"+xt[o],!0,i)),"margin"!==n&&(a-=Z.css(t,"border"+xt[o]+"Width",!0,i))):(a+=Z.css(t,"padding"+xt[o],!0,i),"padding"!==n&&(a+=Z.css(t,"border"+xt[o]+"Width",!0,i)));return a}function T(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Ut(t),a="border-box"===Z.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=w(t,e,o),(0>i||null==i)&&(i=t.style[e]),Ht.test(i))return i;r=a&&(Q.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+S(t,e,n||(a?"border":"content"),r,o)+"px"}function k(t,e){for(var n,r,i,o=[],a=0,s=t.length;s>a;a++)r=t[a],r.style&&(o[a]=gt.get(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Ct(r)&&(o[a]=gt.access(r,"olddisplay",b(r.nodeName)))):(i=Ct(r),"none"===n&&i||gt.set(r,"olddisplay",i?n:Z.css(r,"display"))));for(a=0;s>a;a++)r=t[a],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function A(t,e,n,r,i){return new A.prototype.init(t,e,n,r,i)}function N(){return setTimeout(function(){Qt=void 0}),Qt=Z.now()}function O(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=xt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function D(t,e,n){for(var r,i=(ne[e]||[]).concat(ne["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,e,t))return r}function j(t,e,n){var r,i,o,a,s,u,l,c,f=this,p={},h=t.style,d=t.nodeType&&Ct(t),m=gt.get(t,"fxshow");n.queue||(s=Z._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,Z.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],l=Z.css(t,"display"),c="none"===l?gt.get(t,"olddisplay")||b(t.nodeName):l,"inline"===c&&"none"===Z.css(t,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],Kt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;d=!0}p[r]=m&&m[r]||Z.style(t,r)}else l=void 0;if(Z.isEmptyObject(p))"inline"===("none"===l?b(t.nodeName):l)&&(h.display=l);else{m?"hidden"in m&&(d=m.hidden):m=gt.access(t,"fxshow",{}),o&&(m.hidden=!d),d?Z(t).show():f.done(function(){Z(t).hide()}),f.done(function(){var e;gt.remove(t,"fxshow");for(e in p)Z.style(t,e,p[e])});for(r in p)a=D(d?m[r]:0,r,f),r in m||(m[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function M(t,e){var n,r,i,o,a;for(n in t)if(r=Z.camelCase(n),i=e[r],o=t[n],Z.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),a=Z.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function I(t,e,n){var r,i,o=0,a=ee.length,s=Z.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=Qt||N(),n=Math.max(0,l.startTime+l.duration-e),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(t,[l,o,n]),1>o&&u?n:(s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Qt||N(),duration:n.duration,tweens:[],createTween:function(e,n){var r=Z.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){[m
[31m-var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return e?s.resolveWith(t,[l,e]):s.rejectWith(t,[l,e]),this}}),c=l.props;for(M(c,l.opts.specialEasing);a>o;o++)if(r=ee[o].call(l,t,c,l.opts))return r;return Z.map(c,D,l),Z.isFunction(l.opts.start)&&l.opts.start.call(t,l),Z.fx.timer(Z.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function P(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(ht)||[];if(Z.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function R(t,e,n,r){function i(s){var u;return o[s]=!0,Z.each(t[s]||[],function(t,s){var l=s(e,n,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(e.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=t===ye;return i(e.dataTypes[0])||!o["*"]&&i("*")}function F(t,e){var n,r,i=Z.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&Z.extend(!0,t,r),t}function q(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function V(t,e,n,r){var i,o,a,s,u,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=l[u+" "+o]||l["* "+o],!a)for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[i]:l[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function L(t,e,n,r){var i;if(Z.isArray(e))Z.each(e,function(e,i){n||Ee.test(t)?r(t,i):L(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==Z.type(e))r(t,e);else for(i in e)L(t+"["+i+"]",e[i],n,r)}function _(t){return Z.isWindow(t)?t:9===t.nodeType&&t.defaultView}var H=[],U=H.slice,B=H.concat,W=H.push,z=H.indexOf,Y={},G=Y.toString,X=Y.hasOwnProperty,Q={},J=t.document,K="2.1.4",Z=function(t,e){return new Z.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,nt=/-([\da-z])/gi,rt=function(t,e){return e.toUpperCase()};Z.fn=Z.prototype={jquery:K,constructor:Z,selector:"",length:0,toArray:function(){return U.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:U.call(this)},pushStack:function(t){var e=Z.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Z.each(this,t,e)},map:function(t){return this.pushStack(Z.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(U.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:H.sort,splice:H.splice},Z.extend=Z.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||Z.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],r=t[e],a!==r&&(l&&r&&(Z.isPlainObject(r)||(i=Z.isArray(r)))?(i?(i=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},a[e]=Z.extend(l,o,r)):void 0!==r&&(a[e]=r));return a},Z.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Z.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Z.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==Z.type(t)||t.nodeType||Z.isWindow(t)?!1:t.constructor&&!X.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Y[G.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=Z.trim(t),t&&(1===t.indexOf("use strict")?(e=J.createElement("script"),e.text=t,J.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(et,"ms-").replace(nt,rt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,a=t.length,s=n(t);if(r){if(s)for(;a>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(s)for(;a>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?Z.merge(r,"string"==typeof t?[t]:t):W.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:z.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,a=t.length,s=!n;a>o;o++)r=!e(t[o],o),r!==s&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,a=t.length,s=n(t),u=[];if(s)for(;a>o;o++)i=e(t[o],o,r),null!=i&&u.push(i);else for(o in t)i=e(t[o],o,r),null!=i&&u.push(i);return B.apply([],u)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),Z.isFunction(t)?(r=U.call(arguments,2),i=function(){return t.apply(e||this,r.concat(U.call(arguments)))},i.guid=t.guid=t.guid||Z.guid++,i):void 0},now:Date.now,support:Q}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()});var it=function(t){function e(t,e,n,r){var i,o,a,s,u,l,f,h,d,m;if((e?e.ownerDocument||e:L)!==j&&D(e),e=e||j,n=n||[],s=e.nodeType,"string"!=typeof t||!t||1!==s&&9!==s&&11!==s)return n;if(!r&&I){if(11!==s&&(i=$t.exec(t)))if(a=i[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&q(e,o)&&o.id===a)return n.push(o),n}else{if(i[2])return K.apply(n,e.getElementsByTagName(t)),n;if((a=i[3])&&w.getElementsByClassName)return K.apply(n,e.getElementsByClassName(a)),n}if(w.qsa&&(!P||!P.test(t))){if(h=f=V,d=e,m=1!==s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(l=S(t),(f=e.getAttribute("id"))?h=f.replace(bt,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",u=l.length;u--;)l[u]=h+p(l[u]);d=yt.test(t)&&c(e.parentNode)||e,m=l.join(",")}if(m)try{return K.apply(n,d.querySelectorAll(m)),n}catch(v){}finally{f||e.removeAttribute("id")}}}return k(t.replace(ut,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[V]=!0,t}function i(t){var e=j.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=t.length;r--;)x.attrHandle[n[r]]=e}function a(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function f(){}function p(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function h(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=H++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,u,l=[_,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(u=e[V]||(e[V]={}),(s=u[r])&&s[0]===_&&s[1]===o)return l[2]=s[2];if(u[r]=l,l[2]=t(e,n,a))return!0}}}function d(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function m(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function v(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,l=null!=e;u>s;s++)(o=t[s])&&(!n||n(o,r,i))&&(a.push(o),l&&e.push(s));return a}function g(t,e,n,i,o,a){return i&&!i[V]&&(i=g(i)),o&&!o[V]&&(o=g(o,a)),r(function(r,a,s,u){var l,c,f,p=[],h=[],d=a.length,g=r||m(e||"*",s.nodeType?[s]:s,[]),$=!t||!r&&e?g:v(g,p,t,s,u),y=n?o||(r?t:d||i)?[]:a:$;if(n&&n($,y,s,u),i)for(l=v(y,h),i(l,[],s,u),c=l.length;c--;)(f=l[c])&&(y[h[c]]=!($[h[c]]=f));if(r){if(o||t){if(o){for(l=[],c=y.length;c--;)(f=y[c])&&l.push($[c]=f);o(null,y=[],l,u)}for(c=y.length;c--;)(f=y[c])&&(l=o?tt(r,f):p[c])>-1&&(r[l]=!(a[l]=f))}}else y=v(y===a?y.splice(d,y.length):y),o?o(null,a,y,u):K.apply(a,y)})}function $(t){for(var e,n,r,i=t.length,o=x.relative[t[0].type],a=o||x.relative[" "],s=o?1:0,u=h(function(t){return t===e},a,!0),l=h(function(t){return tt(e,t)>-1},a,!0),c=[function(t,n,r){var i=!o&&(r||n!==A)||((e=n).nodeType?u(t,n,r):l(t,n,r));return e=null,i}];i>s;s++)if(n=x.relative[t[s].type])c=[h(d(c),n)];else{if(n=x.filter[t[s].type].apply(null,t[s].matches),n[V]){for(r=++s;i>r&&!x.relative[t[r].type];r++);return g(s>1&&d(c),s>1&&p(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(ut,"$1"),n,r>s&&$(t.slice(s,r)),i>r&&$(t=t.slice(r)),i>r&&p(t))}c.push(n)}return d(c)}function y(t,n){var i=n.length>0,o=t.length>0,a=function(r,a,s,u,l){var c,f,p,h=0,d="0",m=r&&[],g=[],$=A,y=r||o&&x.find.TAG("*",l),b=_+=null==$?1:Math.random()||.1,w=y.length;for(l&&(A=a!==j&&a);d!==w&&null!=(c=y[d]);d++){if(o&&c){for(f=0;p=t[f++];)if(p(c,a,s)){u.push(c);break}l&&(_=b)}i&&((c=!p&&c)&&h--,r&&m.push(c))}if(h+=d,i&&d!==h){for(f=0;p=n[f++];)p(m,g,a,s);if(r){if(h>0)for(;d--;)m[d]||g[d]||(g[d]=Q.call(u));g=v(g)}K.apply(u,g),l&&!r&&g.length>0&&h+n.length>1&&e.uniqueSort(u)}return l&&(_=b,A=$),m};return i?r(a):a}var b,w,x,C,E,S,T,k,A,N,O,D,j,M,I,P,R,F,q,V="sizzle"+1*new Date,L=t.document,_=0,H=0,U=n(),B=n(),W=n(),z=function(t,e){return t===e&&(O=!0),0},Y=1<<31,G={}.hasOwnProperty,X=[],Q=X.pop,J=X.push,K=X.push,Z=X.slice,tt=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it=rt.replace("w","w#"),ot="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",at=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),ut=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ft=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),pt=new RegExp(at),ht=new RegExp("^"+it+"$"),dt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,$t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),xt=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ct=function(){D()};try{K.apply(X=Z.call(L.childNodes),L.childNodes),X[L.childNodes.length].nodeType}catch(Et){K={apply:X.length?function(t,e){J.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}w=e.support={},E=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:L;return r!==j&&9===r.nodeType&&r.documentElement?(j=r,M=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ct,!1):n.attachEvent&&n.attachEvent("onunload",Ct)),I=!E(r),w.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=i(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(r.getElementsByClassName),w.getById=i(function(t){return M.appendChild(t).id=V,!r.getElementsByName||!r.getElementsByName(V).length}),w.getById?(x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&I){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(t){var e=t.replace(wt,xt);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(wt,xt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},x.find.CLASS=w.getElementsByClassName&&function(t,e){return I?e.getElementsByClassName(t):void 0},R=[],P=[],(w.qsa=gt.test(r.querySelectorAll))&&(i(function(t){M.appendChild(t).innerHTML="<a id='"+V+"'></a><select id='"+V+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||P.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+V+"-]").length||P.push("~="),t.querySelectorAll(":checked").length||P.push(":checked"),t.querySelectorAll("a#"+V+"+*").length||P.push(".#.+[+~]")}),i(function(t){var e=r.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&P.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(w.matchesSelector=gt.test(F=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&i(function(t){w.disconnectedMatch=F.call(t,"div"),F.call(t,"[s!='']:x"),R.push("!=",at)}),P=P.length&&new RegExp(P.join("|")),R=R.length&&new RegExp(R.join("|")),e=gt.test(M.compareDocumentPosition),q=e||gt.test(M.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},z=e?function(t,e){if(t===e)return O=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===r||t.ownerDocument===L&&q(L,t)?-1:e===r||e.ownerDocument===L&&q(L,e)?1:N?tt(N,t)-tt(N,e):0:4&n?-1:1)}:function(t,e){if(t===e)return O=!0,0;var n,i=0,o=t.parentNode,s=e.parentNode,u=[t],l=[e];if(!o||!s)return t===r?-1:e===r?1:o?-1:s?1:N?tt(N,t)-tt(N,e):0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)u.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?a(u[i],l[i]):u[i]===L?-1:l[i]===L?1:0},r):j},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==j&&D(t),n=n.replace(ft,"='$1']"),!(!w.matchesSelector||!I||R&&R.test(n)||P&&P.test(n)))try{var r=F.call(t,n);if(r||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,j,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==j&&D(t),q(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==j&&D(t);var n=x.attrHandle[e.toLowerCase()],r=n&&G.call(x.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==r?r:w.attributes||!I?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(O=!w.detectDuplicates,N=!w.sortStable&&t.slice(0),t.sort(z),O){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return N=null,t},C=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=C(e);return n},x=e.selectors={cacheLength:50,createPseudo:r,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(wt,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(wt,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&pt.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(wt,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(st," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,f,p,h,d,m=o!==a?"nextSibling":"previousSibling",v=e.parentNode,g=s&&e.nodeName.toLowerCase(),$=!u&&!s;if(v){if(o){for(;m;){for(f=e;f=f[m];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;d=m="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?v.firstChild:v.lastChild],a&&$){for(c=v[V]||(v[V]={}),l=c[t]||[],h=l[0]===_&&l[1],p=l[0]===_&&l[2],f=h&&v.childNodes[h];f=++h&&f&&f[m]||(p=h=0)||d.pop();)if(1===f.nodeType&&++p&&f===e){c[t]=[_,h,p];break}}else if($&&(l=(e[V]||(e[V]={}))[t])&&l[0]===_)p=l[1];else for(;(f=++h&&f&&f[m]||(p=h=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++p||($&&((f[V]||(f[V]={}))[t]=[_,p]),f!==e)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(t,n){var i,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[V]?o(n):o.length>1?(i=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),a=i.length;a--;)r=tt(t,i[a]),t[r]=!(e[r]=i[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=T(t.replace(ut,"$1"));return i[V]?r(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(wt,xt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:r(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(wt,xt).toLowerCase(),function(e){var n;do if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===M},focus:function(t){return t===j.activeElement&&(!j.hasFocus||j.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return vt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[0>n?n+e:n]}),even:l(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:l(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=u(b);return f.prototype=x.filters=x.pseudos,x.setFilters=new f,S=e.tokenize=function(t,n){var r,i,o,a,s,u,l,c=B[t+" "];if(c)return n?0:c.slice(0);for(s=t,u=[],l=x.preFilter;s;){(!r||(i=lt.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=ct.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ut," ")}),s=s.slice(r.length));for(a in x.filter)!(i=dt[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):B(t,u).slice(0)},T=e.compile=function(t,e){var n,r=[],i=[],o=W[t+" "];if(!o){for(e||(e=S(t)),n=e.length;n--;)o=$(e[n]),o[V]?r.push(o):i.push(o);o=W(t,y(i,r)),o.selector=t}return o},k=e.select=function(t,e,n,r){var i,o,a,s,u,l="function"==typeof t&&t,f=!r&&S(t=l.selector||t);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===e.nodeType&&I&&x.relative[o[1].type]){if(e=(x.find.ID(a.matches[0].replace(wt,xt),e)||[])[0],!e)return n;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=dt.needsContext.test(t)?0:o.length;i--&&(a=o[i],!x.relative[s=a.type]);)if((u=x.find[s])&&(r=u(a.matches[0].replace(wt,xt),yt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&p(o),!t)return K.apply(n,r),n;break}}return(l||T(t,f))(r,e,!I,n,yt.test(t)&&c(e.parentNode)||e),n},w.sortStable=V.split("").sort(z).join("")===V,w.detectDuplicates=!!O,D(),w.sortDetached=i(function(t){return 1&t.compareDocumentPosition(j.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);Z.find=it,Z.expr=it.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=it.uniqueSort,Z.text=it.getText,Z.isXMLDoc=it.isXML,Z.contains=it.contains;var ot=Z.expr.match.needsContext,at=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^.[^:#\[\.,]*$/;Z.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?Z.find.matchesSelector(r,t)?[r]:[]:Z.find.matches(t,Z.grep(e,function(t){return 1===t.nodeType}))},Z.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(Z(t).filter(function(){for(e=0;n>e;e++)if(Z.contains(i[e],this))return!0}));for(e=0;n>e;e++)Z.find(t,i[e],r);return r=this.pushStack(n>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&ot.test(t)?Z(t):t||[],!1).length}});var ut,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=Z.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:lt.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ut).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof Z?e[0]:e,Z.merge(this,Z.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:J,!0)),at.test(n[1])&&Z.isPlainObject(e))for(n in e)Z.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Z.isFunction(t)?"undefined"!=typeof ut.ready?ut.ready(t):t(Z):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Z.makeArray(t,this))};ct.prototype=Z.fn,ut=Z(J);var ft=/^(?:parents|prev(?:Until|All))/,pt={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&Z(t).is(n))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),Z.fn.extend({has:function(t){var e=Z(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(Z.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=ot.test(t)||"string"!=typeof t?Z(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(t){return t?"string"==typeof t?z.call(Z(t),this[0]):z.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Z.unique(Z.merge(this.get(),Z(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Z.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Z.dir(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return Z.dir(t,"nextSibling")},prevAll:function(t){return Z.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Z.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Z.dir(t,"previousSibling",n)},siblings:function(t){return Z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Z.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Z.merge([],t.childNodes)}},function(t,e){Z.fn[t]=function(n,r){var i=Z.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Z.filter(r,i)),this.length>1&&(pt[t]||Z.unique(i),ft.test(t)&&i.reverse()),this.pushStack(i)}});var ht=/\S+/g,dt={};Z.Callbacks=function(t){t="string"==typeof t?dt[t]||o(t):Z.extend({},t);var e,n,r,i,a,s,u=[],l=!t.once&&[],c=function(o){for(e=t.memory&&o,n=!0,s=i||0,i=0,a=u.length,r=!0;u&&a>s;s++)if(u[s].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):e?u=[]:f.disable())},f={add:function(){if(u){var n=u.length;!function o(e){Z.each(e,function(e,n){var r=Z.type(n);"function"===r?t.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?a=u.length:e&&(i=n,c(e))}return this},remove:function(){return u&&Z.each(arguments,function(t,e){for(var n;(n=Z.inArray(e,u,n))>-1;)u.splice(n,1),r&&(a>=n&&a--,s>=n&&s--)}),this},has:function(t){return t?Z.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],a=0,this},disable:function(){return u=l=e=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,e||f.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!u||n&&!l||(e=e||[],e=[t,e.slice?e.slice():e],r?l.push(e):c(e)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},Z.extend({Deferred:function(t){var e=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Z.Deferred(function(n){Z.each(e,function(e,o){var a=Z.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&Z.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Z.extend(t,r):r}},i={};return r.pipe=r.then,Z.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=U.call(arguments),a=o.length,s=1!==a||t&&Z.isFunction(t.promise)?a:0,u=1===s?t:Z.Deferred(),l=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?U.call(arguments):i,r===e?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&Z.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,e)):--s;return s||u.resolveWith(r,o),u.promise()}});var mt;Z.fn.ready=function(t){return Z.ready.promise().done(t),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Z.readyWait++:Z.ready(!0)},ready:function(t){(t===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,t!==!0&&--Z.readyWait>0||(mt.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(e){return mt||(mt=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1))),mt.promise(e)},Z.ready.promise();var vt=Z.access=function(t,e,n,r,i,o,a){var s=0,u=t.length,l=null==n;if("object"===Z.type(n)){i=!0;for(s in n)Z.access(t,e,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,Z.isFunction(r)||(a=!0),l&&(a?(e.call(t,r),e=null):(l=e,e=function(t,e,n){return l.call(Z(t),n)})),e))for(;u>s;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:l?e.call(t):u?e(t[0],n):o};Z.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},s.uid=1,s.accepts=Z.acceptData,s.prototype={key:function(t){if(!s.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=s.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,Z.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){[m
[31m-var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,Z.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),a=this.cache[o];if(void 0===e)this.cache[o]={};else{Z.isArray(e)?r=e.concat(e.map(Z.camelCase)):(i=Z.camelCase(e),e in a?r=[e,i]:(r=i,r=r in a?[r]:r.match(ht)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(t){return!Z.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var gt=new s,$t=new s,yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bt=/([A-Z])/g;Z.extend({hasData:function(t){return $t.hasData(t)||gt.hasData(t)},data:function(t,e,n){return $t.access(t,e,n)},removeData:function(t,e){$t.remove(t,e)},_data:function(t,e,n){return gt.access(t,e,n)},_removeData:function(t,e){gt.remove(t,e)}}),Z.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=$t.get(o),1===o.nodeType&&!gt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=Z.camelCase(r.slice(5)),u(o,r,i[r])));gt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){$t.set(this,t)}):vt(this,function(e){var n,r=Z.camelCase(t);if(o&&void 0===e){if(n=$t.get(o,t),void 0!==n)return n;if(n=$t.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=$t.get(this,r);$t.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&$t.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){$t.remove(this,t)})}}),Z.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=gt.get(t,e),n&&(!r||Z.isArray(n)?r=gt.access(t,e,Z.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=Z.queue(t,e),r=n.length,i=n.shift(),o=Z._queueHooks(t,e),a=function(){Z.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return gt.get(t,n)||gt.access(t,n,{empty:Z.Callbacks("once memory").add(function(){gt.remove(t,[e+"queue",n])})})}}),Z.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?Z.queue(this[0],t):void 0===e?this:this.each(function(){var n=Z.queue(this,t,e);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&Z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Z.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=Z.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=gt.get(o[a],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xt=["Top","Right","Bottom","Left"],Ct=function(t,e){return t=e||t,"none"===Z.css(t,"display")||!Z.contains(t.ownerDocument,t)},Et=/^(?:checkbox|radio)$/i;!function(){var t=J.createDocumentFragment(),e=t.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),Q.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var St="undefined";Q.focusinBubbles="onfocusin"in t;var Tt=/^key/,kt=/^(?:mouse|pointer|contextmenu)|click/,At=/^(?:focusinfocus|focusoutblur)$/,Nt=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,h,d,m,v=gt.get(t);if(v)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Z.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return typeof Z!==St&&Z.event.triggered!==e.type?Z.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(ht)||[""],l=e.length;l--;)s=Nt.exec(e[l])||[],h=m=s[1],d=(s[2]||"").split(".").sort(),h&&(f=Z.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=Z.event.special[h]||{},c=Z.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:d.join(".")},o),(p=u[h])||(p=u[h]=[],p.delegateCount=0,f.setup&&f.setup.call(t,r,d,a)!==!1||t.addEventListener&&t.addEventListener(h,a,!1)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),Z.event.global[h]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,h,d,m,v=gt.hasData(t)&&gt.get(t);if(v&&(u=v.events)){for(e=(e||"").match(ht)||[""],l=e.length;l--;)if(s=Nt.exec(e[l])||[],h=m=s[1],d=(s[2]||"").split(".").sort(),h){for(f=Z.event.special[h]||{},h=(r?f.delegateType:f.bindType)||h,p=u[h]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(t,c));a&&!p.length&&(f.teardown&&f.teardown.call(t,d,v.handle)!==!1||Z.removeEvent(t,h,v.handle),delete u[h])}else for(h in u)Z.event.remove(t,h+e[l],n,r,!0);Z.isEmptyObject(u)&&(delete v.handle,gt.remove(t,"events"))}},trigger:function(e,n,r,i){var o,a,s,u,l,c,f,p=[r||J],h=X.call(e,"type")?e.type:e,d=X.call(e,"namespace")?e.namespace.split("."):[];if(a=s=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!At.test(h+Z.event.triggered)&&(h.indexOf(".")>=0&&(d=h.split("."),h=d.shift(),d.sort()),l=h.indexOf(":")<0&&"on"+h,e=e[Z.expando]?e:new Z.Event(h,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=d.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:Z.makeArray(n,[e]),f=Z.event.special[h]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!Z.isWindow(r)){for(u=f.delegateType||h,At.test(u+h)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(r.ownerDocument||J)&&p.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=p[o++])&&!e.isPropagationStopped();)e.type=o>1?u:f.bindType||h,c=(gt.get(a,"events")||{})[e.type]&&gt.get(a,"handle"),c&&c.apply(a,n),c=l&&a[l],c&&c.apply&&Z.acceptData(a)&&(e.result=c.apply(a,n),e.result===!1&&e.preventDefault());return e.type=h,i||e.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!Z.acceptData(r)||l&&Z.isFunction(r[h])&&!Z.isWindow(r)&&(s=r[l],s&&(r[l]=null),Z.event.triggered=h,r[h](),Z.event.triggered=void 0,s&&(r[l]=s)),e.result}},dispatch:function(t){t=Z.event.fix(t);var e,n,r,i,o,a=[],s=U.call(arguments),u=(gt.get(this,"events")||{})[t.type]||[],l=Z.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(a=Z.event.handlers.call(this,t,u),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=((Z.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,u=t.target;if(s&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(r=[],n=0;s>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Z(i,this).index(u)>=0:Z.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||J,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[Z.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=kt.test(i)?this.mouseHooks:Tt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new Z.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=J),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Z.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=Z.extend(new Z.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?Z.event.trigger(i,null,e):Z.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},Z.Event=function(t,e){return this instanceof Z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?l:c):this.type=t,e&&Z.extend(this,e),this.timeStamp=t&&t.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(t,e)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=l,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!Z.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),Q.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){Z.event.simulate(e,t.target,Z.event.fix(t),!0)};Z.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=gt.access(r,e);i||r.addEventListener(t,n,!0),gt.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=gt.access(r,e)-1;i?gt.access(r,e,i):(r.removeEventListener(t,n,!0),gt.remove(r,e))}}}),Z.fn.extend({on:function(t,e,n,r,i){var o,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(a in t)this.on(a,e,n,t[a],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(t){return Z().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,Z(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){Z.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?Z.event.trigger(t,e,n,!0):void 0}});var Ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Dt=/<([\w:]+)/,jt=/<|&#?\w+;/,Mt=/<(?:script|style|link)/i,It=/checked\s*(?:[^=]|=\s*.checked.)/i,Pt=/^$|\/(?:java|ecma)script/i,Rt=/^true\/(.*)/,Ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,qt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qt.optgroup=qt.option,qt.tbody=qt.tfoot=qt.colgroup=qt.caption=qt.thead,qt.th=qt.td,Z.extend({clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=Z.contains(t.ownerDocument,t);if(!(Q.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Z.isXMLDoc(t)))for(a=g(s),o=g(t),r=0,i=o.length;i>r;r++)$(o[r],a[r]);if(e)if(n)for(o=o||g(t),a=a||g(s),r=0,i=o.length;i>r;r++)v(o[r],a[r]);else v(t,s);return a=g(s,"script"),a.length>0&&m(a,!u&&g(t,"script")),s},buildFragment:function(t,e,n,r){for(var i,o,a,s,u,l,c=e.createDocumentFragment(),f=[],p=0,h=t.length;h>p;p++)if(i=t[p],i||0===i)if("object"===Z.type(i))Z.merge(f,i.nodeType?[i]:i);else if(jt.test(i)){for(o=o||c.appendChild(e.createElement("div")),a=(Dt.exec(i)||["",""])[1].toLowerCase(),s=qt[a]||qt._default,o.innerHTML=s[1]+i.replace(Ot,"<$1></$2>")+s[2],l=s[0];l--;)o=o.lastChild;Z.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(e.createTextNode(i));for(c.textContent="",p=0;i=f[p++];)if((!r||-1===Z.inArray(i,r))&&(u=Z.contains(i.ownerDocument,i),o=g(c.appendChild(i),"script"),u&&m(o),n))for(l=0;i=o[l++];)Pt.test(i.type||"")&&n.push(i);return c},cleanData:function(t){for(var e,n,r,i,o=Z.event.special,a=0;void 0!==(n=t[a]);a++){if(Z.acceptData(n)&&(i=n[gt.expando],i&&(e=gt.cache[i]))){if(e.events)for(r in e.events)o[r]?Z.event.remove(n,r):Z.removeEvent(n,r,e.handle);gt.cache[i]&&delete gt.cache[i]}delete $t.cache[n[$t.expando]]}}}),Z.fn.extend({text:function(t){return vt(this,function(t){return void 0===t?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?Z.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||Z.cleanData(g(n)),n.parentNode&&(e&&Z.contains(n.ownerDocument,n)&&m(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Z.cleanData(g(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Z.clone(this,t,e)})},html:function(t){return vt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Mt.test(t)&&!qt[(Dt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ot,"<$1></$2>");try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&(Z.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Z.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=B.apply([],t);var n,r,i,o,a,s,u=0,l=this.length,c=this,f=l-1,p=t[0],m=Z.isFunction(p);if(m||l>1&&"string"==typeof p&&!Q.checkClone&&It.test(p))return this.each(function(n){var r=c.eq(n);m&&(t[0]=p.call(this,n,r.html())),r.domManip(t,e)});if(l&&(n=Z.buildFragment(t,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Z.map(g(n,"script"),h),o=i.length;l>u;u++)a=n,u!==f&&(a=Z.clone(a,!0,!0),o&&Z.merge(i,g(a,"script"))),e.call(this[u],a,u);if(o)for(s=i[i.length-1].ownerDocument,Z.map(i,d),u=0;o>u;u++)a=i[u],Pt.test(a.type||"")&&!gt.access(a,"globalEval")&&Z.contains(s,a)&&(a.src?Z._evalUrl&&Z._evalUrl(a.src):Z.globalEval(a.textContent.replace(Ft,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Z.fn[t]=function(t){for(var n,r=[],i=Z(t),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),Z(i[a])[e](n),W.apply(r,n.get());return this.pushStack(r)}});var Vt,Lt={},_t=/^margin/,Ht=new RegExp("^("+wt+")(?!px)[a-z%]+$","i"),Ut=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var e=t.getComputedStyle(a,null);n="1%"!==e.top,r="4px"===e.width,i.removeChild(o)}var n,r,i=J.documentElement,o=J.createElement("div"),a=J.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),t.getComputedStyle&&Z.extend(Q,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==r&&e(),r},reliableMarginRight:function(){var e,n=a.appendChild(J.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",i.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),i.removeChild(o),a.removeChild(n),e}}))}(),Z.swap=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=a[o];return i};var Bt=/^(none|table(?!-c[ea]).+)/,Wt=new RegExp("^("+wt+")(.*)$","i"),zt=new RegExp("^([+-])=("+wt+")","i"),Yt={position:"absolute",visibility:"hidden",display:"block"},Gt={letterSpacing:"0",fontWeight:"400"},Xt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=w(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=Z.camelCase(e),u=t.style;return e=Z.cssProps[s]||(Z.cssProps[s]=C(u,s)),a=Z.cssHooks[e]||Z.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:u[e]:(o=typeof n,"string"===o&&(i=zt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||Z.cssNumber[s]||(n+="px"),Q.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u[e]=n)),void 0)}},css:function(t,e,n,r){var i,o,a,s=Z.camelCase(e);return e=Z.cssProps[s]||(Z.cssProps[s]=C(t.style,s)),a=Z.cssHooks[e]||Z.cssHooks[s],a&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=w(t,e,r)),"normal"===i&&e in Gt&&(i=Gt[e]),""===n||n?(o=parseFloat(i),n===!0||Z.isNumeric(o)?o||0:i):i}}),Z.each(["height","width"],function(t,e){Z.cssHooks[e]={get:function(t,n,r){return n?Bt.test(Z.css(t,"display"))&&0===t.offsetWidth?Z.swap(t,Yt,function(){return T(t,e,r)}):T(t,e,r):void 0},set:function(t,n,r){var i=r&&Ut(t);return E(t,n,r?S(t,e,r,"border-box"===Z.css(t,"boxSizing",!1,i),i):0)}}}),Z.cssHooks.marginRight=x(Q.reliableMarginRight,function(t,e){return e?Z.swap(t,{display:"inline-block"},w,[t,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(t,e){Z.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+xt[r]+e]=o[r]||o[r-2]||o[0];return i}},_t.test(t)||(Z.cssHooks[t+e].set=E)}),Z.fn.extend({css:function(t,e){return vt(this,function(t,e,n){var r,i,o={},a=0;if(Z.isArray(e)){for(r=Ut(t),i=e.length;i>a;a++)o[e[a]]=Z.css(t,e[a],!1,r);return o}return void 0!==n?Z.style(t,e,n):Z.css(t,e)},t,e,arguments.length>1)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ct(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=A,A.prototype={constructor:A,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var t=A.propHooks[this.prop];return t&&t.get?t.get(this):A.propHooks._default.get(this)},run:function(t){var e,n=A.propHooks[this.prop];return this.pos=e=this.options.duration?Z.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Z.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Z.fx.step[t.prop]?Z.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Z.cssProps[t.prop]]||Z.cssHooks[t.prop])?Z.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Z.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Z.fx=A.prototype.init,Z.fx.step={};var Qt,Jt,Kt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+wt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[j],ne={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=Zt.exec(e),o=i&&i[3]||(Z.cssNumber[t]?"":"px"),a=(Z.cssNumber[t]||"px"!==o&&+r)&&Zt.exec(Z.css(n.elem,t)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,Z.style(n.elem,t,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(I,{tweener:function(t,e){Z.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],ne[n]=ne[n]||[],ne[n].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),Z.speed=function(t,e,n){var r=t&&"object"==typeof t?Z.extend({},t):{complete:n||!n&&e||Z.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Z.isFunction(e)&&e};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Ct).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=Z.isEmptyObject(t),o=Z.speed(e,n,r),a=function(){var e=I(this,Z.extend({},t),o);(i||gt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=Z.timers,a=gt.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&te.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&Z.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=gt.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=Z.timers,a=r?r.length:0;for(n.finish=!0,Z.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(t,e){var n=Z.fn[e];Z.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(O(e,!0),t,r,i)}}),Z.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Z.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),Z.timers=[],Z.fx.tick=function(){var t,e=0,n=Z.timers;for(Qt=Z.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||Z.fx.stop(),Qt=void 0},Z.fx.timer=function(t){Z.timers.push(t),t()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Jt||(Jt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Jt),Jt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(t,e){return t=Z.fx?Z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var t=J.createElement("input"),e=J.createElement("select"),n=e.appendChild(J.createElement("option"));t.type="checkbox",Q.checkOn=""!==t.value,Q.optSelected=n.selected,e.disabled=!0,Q.optDisabled=!n.disabled,t=J.createElement("input"),t.value="t",t.type="radio",Q.radioValue="t"===t.value}();var re,ie,oe=Z.expr.attrHandle;Z.fn.extend({attr:function(t,e){return vt(this,Z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Z.removeAttr(this,t)})}}),Z.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===St?Z.prop(t,e,n):(1===o&&Z.isXMLDoc(t)||(e=e.toLowerCase(),r=Z.attrHooks[e]||(Z.expr.match.bool.test(e)?ie:re)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=Z.find.attr(t,e),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void Z.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(ht);if(o&&1===t.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!Q.radioValue&&"radio"===e&&Z.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),ie={set:function(t,e,n){return e===!1?Z.removeAttr(t,n):t.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(t,e){var n=oe[e]||Z.find.attr;oe[e]=function(t,e,r){var i,o;return r||(o=oe[e],oe[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,oe[e]=o),i}});var ae=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(t,e){return vt(this,Z.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Z.propFix[t]||t]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var r,i,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!Z.isXMLDoc(t),o&&(e=Z.propFix[e]||e,i=Z.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ae.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Q.optSelected||(Z.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var se=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(t){var e,n,r,i,o,a,s="string"==typeof t&&t,u=0,l=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(ht)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(se," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=Z.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,r,i,o,a,s=0===arguments.length||"string"==typeof t&&t,u=0,l=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(ht)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(se," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=t?Z.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(Z.isFunction(t)?function(n){Z(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,r=0,i=Z(this),o=t.match(ht)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===St||"boolean"===n)&&(this.className&&gt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":gt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(se," ").indexOf(e)>=0)return!0;return!1}});var ue=/\r/g;Z.fn.extend({val:function(t){var e,n,r,i=this[0];{if(arguments.length)return r=Z.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,Z(this).val()):t,null==i?i="":"number"==typeof i?i+="":Z.isArray(i)&&(i=Z.map(i,function(t){return null==t?"":t+""})),e=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return e=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ue,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(t){var e=Z.find.attr(t,"value");return null!=e?e:Z.trim(Z.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(Q.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(e=Z(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=Z.makeArray(e),a=i.length;a--;)r=i[a],(r.selected=Z.inArray(r.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(t,e){return Z.isArray(e)?t.checked=Z.inArray(Z(t).val(),e)>=0:void 0}},Q.checkOn||(Z.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Z.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),Z.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r);[m
[31m-[m
[31m-},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var le=Z.now(),ce=/\?/;Z.parseJSON=function(t){return JSON.parse(t+"")},Z.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+t),e};var fe=/#.*$/,pe=/([?&])_=[^&]*/,he=/^(.*?):[ \t]*([^\r\n]*)$/gm,de=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,me=/^(?:GET|HEAD)$/,ve=/^\/\//,ge=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,$e={},ye={},be="*/".concat("*"),we=t.location.href,xe=ge.exec(we.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:we,type:"GET",isLocal:de.test(xe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":be,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?F(F(t,Z.ajaxSettings),e):F(Z.ajaxSettings,t)},ajaxPrefilter:P($e),ajaxTransport:P(ye),ajax:function(t,e){function n(t,e,n,a){var u,c,g,$,b,x=e;2!==y&&(y=2,s&&clearTimeout(s),r=void 0,o=a||"",w.readyState=t>0?4:0,u=t>=200&&300>t||304===t,n&&($=q(f,w,n)),$=V(f,$,w,u),u?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[i]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[i]=b)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=$.state,c=$.data,g=$.error,u=!g)):(g=x,(t||!x)&&(x="error",0>t&&(t=0))),w.status=t,w.statusText=(e||x)+"",u?d.resolveWith(p,[c,x,w]):d.rejectWith(p,[w,x,g]),w.statusCode(v),v=void 0,l&&h.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?c:g]),m.fireWith(p,[w,x]),l&&(h.trigger("ajaxComplete",[w,f]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,a,s,u,l,c,f=Z.ajaxSetup({},e),p=f.context||f,h=f.context&&(p.nodeType||p.jquery)?Z(p):Z.event,d=Z.Deferred(),m=Z.Callbacks("once memory"),v=f.statusCode||{},g={},$={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!a)for(a={};e=he.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=$[n]=$[n]||t,g[t]=e),this},overrideMimeType:function(t){return y||(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)v[e]=[v[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return r&&r.abort(e),n(0,e),this}};if(d.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,f.url=((t||f.url||we)+"").replace(fe,"").replace(ve,xe[1]+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=Z.trim(f.dataType||"*").toLowerCase().match(ht)||[""],null==f.crossDomain&&(u=ge.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]===xe[1]&&u[2]===xe[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(xe[3]||("http:"===xe[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=Z.param(f.data,f.traditional)),R($e,f,e,w),2===y)return w;l=Z.event&&f.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!me.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(ce.test(i)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=pe.test(i)?i.replace(pe,"$1_="+le++):i+(ce.test(i)?"&":"?")+"_="+le++)),f.ifModified&&(Z.lastModified[i]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[i]),Z.etag[i]&&w.setRequestHeader("If-None-Match",Z.etag[i])),(f.data&&f.hasContent&&f.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+be+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(p,w,f)===!1||2===y))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=R(ye,f,e,w)){w.readyState=1,l&&h.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},f.timeout));try{y=1,r.send(g,n)}catch(x){if(!(2>y))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return Z.get(t,e,n,"json")},getScript:function(t,e){return Z.get(t,void 0,e,"script")}}),Z.each(["get","post"],function(t,e){Z[e]=function(t,n,r,i){return Z.isFunction(n)&&(i=i||r,r=n,n=void 0),Z.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),Z._evalUrl=function(t){return Z.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(t){var e;return Z.isFunction(t)?this.each(function(e){Z(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Z(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(Z.isFunction(t)?function(e){Z(this).wrapInner(t.call(this,e))}:function(){var e=Z(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Z.isFunction(t);return this.each(function(n){Z(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Z.expr.filters.visible=function(t){return!Z.expr.filters.hidden(t)};var Ce=/%20/g,Ee=/\[\]$/,Se=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,ke=/^(?:input|select|textarea|keygen)/i;Z.param=function(t,e){var n,r=[],i=function(t,e){e=Z.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(t)||t.jquery&&!Z.isPlainObject(t))Z.each(t,function(){i(this.name,this.value)});else for(n in t)L(n,t[n],e,i);return r.join("&").replace(Ce,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Z.prop(this,"elements");return t?Z.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Z(this).is(":disabled")&&ke.test(this.nodeName)&&!Te.test(t)&&(this.checked||!Et.test(t))}).map(function(t,e){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(t){return{name:e.name,value:t.replace(Se,"\r\n")}}):{name:e.name,value:n.replace(Se,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ae=0,Ne={},Oe={0:200,1223:204},De=Z.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Ne)Ne[t]()}),Q.cors=!!De&&"withCredentials"in De,Q.ajax=De=!!De,Z.ajaxTransport(function(t){var e;return Q.cors||De&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),a=++Ae;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete Ne[a],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(Oe[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Ne[a]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(s){if(e)throw s}},abort:function(){e&&e()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Z.globalEval(t),t}}}),Z.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=Z("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),J.head.appendChild(e[0])},abort:function(){n&&n()}}}});var je=[],Me=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=je.pop()||Z.expando+"_"+le++;return this[t]=!0,t}}),Z.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=e.jsonp!==!1&&(Me.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Me.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=Z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Me,"$1"+i):e.jsonp!==!1&&(e.url+=(ce.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||Z.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,je.push(i)),a&&Z.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),Z.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||J;var r=at.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=Z.buildFragment([t],e,i),i&&i.length&&Z(i).remove(),Z.merge([],r.childNodes))};var Ie=Z.fn.load;Z.fn.load=function(t,e,n){if("string"!=typeof t&&Ie)return Ie.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>=0&&(r=Z.trim(t.slice(s)),t=t.slice(0,s)),Z.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&Z.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?Z("<div>").append(Z.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Z.fn[e]=function(t){return this.on(e,t)}}),Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length};var Pe=t.document.documentElement;Z.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,l,c=Z.css(t,"position"),f=Z(t),p={};"static"===c&&(t.style.position="relative"),s=f.offset(),o=Z.css(t,"top"),u=Z.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),Z.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(p.top=e.top-s.top+a),null!=e.left&&(p.left=e.left-s.left+i),"using"in e?e.using.call(t,p):f.css(p)}},Z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return e=o.documentElement,Z.contains(e,r)?(typeof r.getBoundingClientRect!==St&&(i=r.getBoundingClientRect()),n=_(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===Z.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Z.nodeName(t[0],"html")||(r=t.offset()),r.top+=Z.css(t[0],"borderTopWidth",!0),r.left+=Z.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-Z.css(n,"marginTop",!0),left:e.left-r.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Pe;t&&!Z.nodeName(t,"html")&&"static"===Z.css(t,"position");)t=t.offsetParent;return t||Pe})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r="pageYOffset"===n;Z.fn[e]=function(i){return vt(this,function(e,i,o){var a=_(e);return void 0===o?a?a[n]:e[i]:void(a?a.scrollTo(r?t.pageXOffset:o,r?o:t.pageYOffset):e[i]=o)},e,i,arguments.length,null)}}),Z.each(["top","left"],function(t,e){Z.cssHooks[e]=x(Q.pixelPosition,function(t,n){return n?(n=w(t,e),Ht.test(n)?Z(t).position()[e]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(t,e){Z.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){Z.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return vt(this,function(e,n,r){var i;return Z.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?Z.css(e,n,a):Z.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Re=t.jQuery,Fe=t.$;return Z.noConflict=function(e){return t.$===Z&&(t.$=Fe),e&&t.jQuery===Z&&(t.jQuery=Re),Z},typeof e===St&&(t.jQuery=t.$=Z),Z}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,r=this;t(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||t(r).trigger(t.support.transition.end)};return setTimeout(i,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof e&&i[e].call(n)})}var n='[data-dismiss="alert"]',r=function(e){t(e).on("click",n,this.close)};r.VERSION="3.3.4",r.TRANSITION_DURATION=150,r.prototype.close=function(e){function n(){a.detach().trigger("closed.bs.alert").remove()}var i=t(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=t(o);e&&e.preventDefault(),a.length||(a=i.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=r,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.button"),o="object"==typeof e&&e;i||r.data("bs.button",i=new n(this,o)),"toggle"==e?i.toggle():e&&i.setState(e)})}var n=function(e,r){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();e+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(t.proxy(function(){r[i](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var r=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=r,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=t(n.target);r.hasClass("btn")||(r=r.closest(".btn")),e.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.carousel"),o=t.extend({},n.DEFAULTS,r.data(),"object"==typeof e&&e),a="string"==typeof e?e:o.slide;i||r.data("bs.carousel",i=new n(this,o)),"number"==typeof e?i.to(e):a?i[a]():o.interval&&i.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),r="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(r&&!this.options.wrap)return e;var i="prev"==t?-1:1,o=(n+i)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(e,i),a=this.interval,s="next"==e?"left":"right",u=this;if(o.hasClass("active"))return this.sliding=!1;var l=o[0],c=t.Event("slide.bs.carousel",{relatedTarget:l,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var f=t(this.$indicators.children()[this.getItemIndex(o)]);f&&f.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:l,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([e,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(p)),a&&this.cycle(),this}};var r=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=r,this};var i=function(n){var r,i=t(this),o=t(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=t.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(a.interval=!1),e.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,r=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(r)}function n(e){return this.each(function(){var n=t(this),i=n.data("bs.collapse"),o=t.extend({},r.DEFAULTS,n.data(),"object"==typeof e&&e);!i&&o.toggle&&/show|hide/.test(e)&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof e&&i[e]()})}var r=function(e,n){this.$element=t(e),this.options=t.extend({},r.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.4",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(e=i.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),e||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var u=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[a](this.$element[0][u])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,r){var i=t(r);this.addAriaAndCollapsedClass(e(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=r,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=t(this);i.attr("data-target")||r.preventDefault();var o=e(i),a=o.data("bs.collapse"),s=a?"toggle":i.data();n.call(o,s)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(i).remove(),t(o).each(function(){var r=t(this),i=n(r),o={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&t(n);return r&&r.length?r:e.parent()}function r(e){return this.each(function(){var n=t(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new a(this)),"string"==typeof e&&r[e].call(n)})}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.4",a.prototype.toggle=function(r){var i=t(this);if(!i.is(".disabled, :disabled")){var o=n(i),a=o.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(o.trigger(r=t.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var r=t(this);if(e.preventDefault(),e.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),a=i.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&i.find(o).trigger("focus"),r.trigger("click");var s=" li:not(.disabled):visible a",u=i.find('[role="menu"]'+s+', [role="listbox"]'+s);if(u.length){var l=u.index(e.target);38==e.which&&l>0&&l--,40==e.which&&l<u.length-1&&l++,~l||(l=0),u.eq(l).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=r,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,r){return this.each(function(){var i=t(this),o=i.data("bs.modal"),a=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);o||i.data("bs.modal",o=new n(this,a)),"string"==typeof e?o[e](r):a.show&&o.show(r)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var r=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=t.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var r=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=r,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){[m
[31m-var r=t(this),i=r.attr("href"),o=t(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),e.call(o,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.tooltip"),o="object"==typeof e&&e;(i||!/destroy|hide/.test(e))&&(i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,r){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",u="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,r){n[t]!=r&&(e[t]=r)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var r=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,l=u.test(s);l&&(s=s.replace(u,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var c=this.getPosition(),f=o[0].offsetWidth,p=o[0].offsetHeight;if(l){var h=s,d=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(d);s="bottom"==s&&c.bottom+p>m.bottom?"top":"top"==s&&c.top-p<m.top?"bottom":"right"==s&&c.right+f>m.width?"left":"left"==s&&c.left-f<m.left?"right":s,o.removeClass(h).addClass(s)}var v=this.getCalculatedOffset(s,c,f,p);this.applyPlacement(v,s);var g=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(e,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top=e.top+a,e.left=e.left+s,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var u=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=o&&(e.top=e.top+o-l);var c=this.getViewportAdjustedDelta(n,e,u,l);c.left?e.left+=c.left:e.top+=c.top;var f=/top|bottom/.test(n),p=f?2*c.left-i+u:2*c.top-o+l,h=f?"offsetWidth":"offsetHeight";r.offset(e),this.replaceArrow(p,r[0][h],f)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function r(){"in"!=i.hoverState&&o.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),e&&e()}var i=this,o=t(this.$tip),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=t.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=r?{top:0,left:0}:e.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=r?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},i,a,s,o)},n.prototype.getCalculatedOffset=function(t,e,n,r){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-r,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-r/2,left:e.left-n}:{top:e.top+e.height/2-r/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-a.scroll,u=e.top+o-a.scroll+r;s<a.top?i.top=a.top-s:u>a.top+a.height&&(i.top=a.top+a.height-u)}else{var l=e.left-o,c=e.left+o+n;l<a.left?i.left=a.left-l:c>a.width&&(i.left=a.left+a.width-c)}return i},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var r=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=r,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.popover"),o="object"==typeof e&&e;(i||!/destroy|hide/.test(e))&&(i||r.data("bs.popover",i=new n(this,o)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=r,this}}(jQuery),+function(t){"use strict";function e(n,r){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=t(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new e(this,o)),"string"==typeof n&&i[n]()})}e.VERSION="3.3.4",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),i=e.data("target")||e.attr("href"),o=/^#./.test(i)&&t(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=r)return a!=(t=o[o.length-1])&&this.activate(t);if(a&&e<i[0])return this.activeTarget=null,this.clear();for(t=i.length;t--;)a!=o[t]&&e>=i[t]&&(void 0===i[t+1]||e<i[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',r=t(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=r,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof e&&i[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),r=e.data("target");if(r||(r=e.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),e.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=t(r);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(e,r,i){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var a=r.find("> .active"),s=i&&t.support.transition&&(a.length&&a.hasClass("fade")||!!r.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var r=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=r,this};var i=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.affix"),o="object"==typeof e&&e;i||r.data("bs.affix",i=new n(this,o)),"string"==typeof e&&i[e]()})}var n=function(e,r){this.options=t.extend({},n.DEFAULTS,r),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i?"top":!1;if("bottom"==this.affixed)return null!=n?i+this.unpin<=o.top?!1:"bottom":t-r>=i+a?!1:"bottom";var s=null==this.affixed,u=s?i:o.top,l=s?a:e;return null!=n&&n>=i?"top":null!=r&&u+l>=t-r?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=t(document.body).height();"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,e,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var u="affix"+(s?"-"+s:""),l=t.Event(u+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(u).trigger(u.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-e-o})}};var r=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=r,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),e.call(n,r)})})}(jQuery),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(t,e,n){"use strict";function r(t,e){return V(new(V(function(){},{prototype:t})),e)}function i(t){return q(arguments,function(e){e!==t&&q(e,function(e,n){t.hasOwnProperty(n)||(t[n]=e)})}),t}function o(t,e){var n=[];for(var r in t.path){if(t.path[r]!==e.path[r])break;n.push(t.path[r])}return n}function a(t){if(Object.keys)return Object.keys(t);var e=[];return q(t,function(t,n){e.push(n)}),e}function s(t,e){if(Array.prototype.indexOf)return t.indexOf(e,Number(arguments[2])||0);var n=t.length>>>0,r=Number(arguments[2])||0;for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=n);n>r;r++)if(r in t&&t[r]===e)return r;return-1}function u(t,e,n,r){var i,u=o(n,r),l={},c=[];for(var f in u)if(u[f].params&&(i=a(u[f].params),i.length))for(var p in i)s(c,i[p])>=0||(c.push(i[p]),l[i[p]]=t[i[p]]);return V({},l,e)}function l(t,e,n){if(!n){n=[];for(var r in t)n.push(r)}for(var i=0;i<n.length;i++){var o=n[i];if(t[o]!=e[o])return!1}return!0}function c(t,e){var n={};return q(t,function(t){n[t]=e[t]}),n}function f(t){var e={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return q(n,function(n){n in t&&(e[n]=t[n])}),e}function p(t){var e={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in t)-1==s(n,r)&&(e[r]=t[r]);return e}function h(t,e){var n=F(t),r=n?[]:{};return q(t,function(t,i){e(t,i)&&(r[n?r.length:i]=t)}),r}function d(t,e){var n=F(t)?[]:{};return q(t,function(t,r){n[r]=e(t,r)}),n}function m(t,e){var r=1,o=2,u={},l=[],c=u,f=V(t.when(u),{$$promises:u,$$values:u});this.study=function(u){function h(t,n){if($[n]!==o){if(g.push(n),$[n]===r)throw g.splice(0,s(g,n)),new Error("Cyclic dependency: "+g.join(" -> "));if($[n]=r,P(t))v.push(n,[function(){return e.get(t)}],l);else{var i=e.annotate(t);q(i,function(t){t!==n&&u.hasOwnProperty(t)&&h(u[t],t)}),v.push(n,t,i)}g.pop(),$[n]=o}}function d(t){return R(t)&&t.then&&t.$$promises}if(!R(u))throw new Error("'invocables' must be an object");var m=a(u||{}),v=[],g=[],$={};return q(u,h),u=g=$=null,function(r,o,a){function s(){--b||(w||i(y,o.$$values),g.$$values=y,g.$$promises=g.$$promises||!0,delete g.$$inheritedValues,h.resolve(y))}function u(t){g.$$failure=t,h.reject(t)}function l(n,i,o){function l(t){f.reject(t),u(t)}function c(){if(!M(g.$$failure))try{f.resolve(e.invoke(i,a,y)),f.promise.then(function(t){y[n]=t,s()},l)}catch(t){l(t)}}var f=t.defer(),p=0;q(o,function(t){$.hasOwnProperty(t)&&!r.hasOwnProperty(t)&&(p++,$[t].then(function(e){y[t]=e,--p||c()},l))}),p||c(),$[n]=f.promise}if(d(r)&&a===n&&(a=o,o=r,r=null),r){if(!R(r))throw new Error("'locals' must be an object")}else r=c;if(o){if(!d(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=f;var h=t.defer(),g=h.promise,$=g.$$promises={},y=V({},r),b=1+v.length/3,w=!1;if(M(o.$$failure))return u(o.$$failure),g;o.$$inheritedValues&&i(y,p(o.$$inheritedValues,m)),V($,o.$$promises),o.$$values?(w=i(y,p(o.$$values,m)),g.$$inheritedValues=p(o.$$values,m),s()):(o.$$inheritedValues&&(g.$$inheritedValues=p(o.$$inheritedValues,m)),o.then(s,u));for(var x=0,C=v.length;C>x;x+=3)r.hasOwnProperty(v[x])?s():l(v[x],v[x+1],v[x+2]);return g}},this.resolve=function(t,e,n,r){return this.study(t)(e,n,r)}}function v(t,e,n){this.fromConfig=function(t,e,n){return M(t.template)?this.fromString(t.template,e):M(t.templateUrl)?this.fromUrl(t.templateUrl,e):M(t.templateProvider)?this.fromProvider(t.templateProvider,e,n):null},this.fromString=function(t,e){return I(t)?t(e):t},this.fromUrl=function(n,r){return I(n)&&(n=n(r)),null==n?null:t.get(n,{cache:e,headers:{Accept:"text/html"}}).then(function(t){return t.data})},this.fromProvider=function(t,e,r){return n.invoke(t,null,r||{params:e})}}function g(t,e,i){function o(e,n,r,i){if(v.push(e),d[e])return d[e];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+t+"'");if(m[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+t+"'");return m[e]=new _.Param(e,n,r,i),m[e]}function a(t,e,n,r){var i=["",""],o=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return o;switch(n){case!1:i=["(",")"+(r?"?":"")];break;case!0:i=["?(",")?"];break;default:i=["("+n+"|",")?"]}return o+i[0]+e+i[1]}function s(i,o){var a,s,u,l,c;return a=i[2]||i[3],c=e.params[a],u=t.substring(p,i.index),s=o?i[4]:i[4]||("*"==i[1]?".*":null),l=_.type(s||"string")||r(_.type("string"),{pattern:new RegExp(s,e.caseInsensitive?"i":n)}),{id:a,regexp:s,segment:u,type:l,cfg:c}}e=V({params:{}},R(e)?e:{});var u,l=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f="^",p=0,h=this.segments=[],d=i?i.params:{},m=this.params=i?i.params.$$new():new _.ParamSet,v=[];this.source=t;for(var g,$,y;(u=l.exec(t))&&(g=s(u,!1),!(g.segment.indexOf("?")>=0));)$=o(g.id,g.type,g.cfg,"path"),f+=a(g.segment,$.type.pattern.source,$.squash,$.isOptional),h.push(g.segment),p=l.lastIndex;y=t.substring(p);var b=y.indexOf("?");if(b>=0){var w=this.sourceSearch=y.substring(b);if(y=y.substring(0,b),this.sourcePath=t.substring(0,p+b),w.length>0)for(p=0;u=c.exec(w);)g=s(u,!0),$=o(g.id,g.type,g.cfg,"search"),p=l.lastIndex}else this.sourcePath=t,this.sourceSearch="";f+=a(y)+(e.strict===!1?"/?":"")+"$",h.push(y),this.regexp=new RegExp(f,e.caseInsensitive?"i":n),this.prefix=h[0],this.$$paramNames=v}function $(t){V(this,t)}function y(){function t(t){return null!=t?t.toString().replace(/\//g,"%2F"):t}function i(t){return null!=t?t.toString().replace(/%2F/g,"/"):t}function o(){return{strict:m,caseInsensitive:p}}function u(t){return I(t)||F(t)&&I(t[t.length-1])}function l(){for(;x.length;){var t=x.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");e.extend(b[t.name],f.invoke(t.def))}}function c(t){V(this,t||{})}_=this;var f,p=!1,m=!0,v=!1,b={},w=!0,x=[],C={string:{encode:t,decode:i,is:function(t){return null==t||!M(t)||"string"==typeof t},pattern:/[^/]*/},"int":{encode:t,decode:function(t){return parseInt(t,10)},is:function(t){return M(t)&&this.decode(t.toString())===t},pattern:/\d+/},bool:{encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:function(t){return t===!0||t===!1},pattern:/0|1/},date:{encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):n},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):n},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return this.is(t)&&this.is(e)&&t.toISOString()===e.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:e.toJson,decode:e.fromJson,is:e.isObject,equals:e.equals,pattern:/[^/]*/},any:{encode:e.identity,decode:e.identity,equals:e.equals,pattern:/.*/}};y.$$getDefaultValue=function(t){if(!u(t.value))return t.value;if(!f)throw new Error("Injectable functions cannot be called at configuration time");return f.invoke(t.value)},this.caseInsensitive=function(t){return M(t)&&(p=t),p},this.strictMode=function(t){return M(t)&&(m=t),m},this.defaultSquashPolicy=function(t){if(!M(t))return v;if(t!==!0&&t!==!1&&!P(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return v=t,t},this.compile=function(t,e){return new g(t,V(o(),e))},this.isMatcher=function(t){if(!R(t))return!1;var e=!0;return q(g.prototype,function(n,r){I(n)&&(e=e&&M(t[r])&&I(t[r]))}),e},this.type=function(t,e,n){if(!M(e))return b[t];if(b.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return b[t]=new $(V({name:t},e)),n&&(x.push({name:t,def:n}),w||l()),this},q(C,function(t,e){b[e]=new $(V({name:e},t))}),b=r(b,{}),this.$get=["$injector",function(t){return f=t,w=!1,l(),q(C,function(t,e){b[e]||(b[e]=new $(t))}),this}],this.Param=function(t,e,r,i){function o(t){var e=R(t)?a(t):[],n=-1===s(e,"value")&&-1===s(e,"type")&&-1===s(e,"squash")&&-1===s(e,"array");return n&&(t={value:t}),t.$$fn=u(t.value)?t.value:function(){return t.value},t}function l(e,n,r){if(e.type&&n)throw new Error("Param '"+t+"' has two type configurations.");return n?n:e.type?e.type instanceof $?e.type:new $(e.type):"config"===r?b.any:b.string}function c(){var e={array:"search"===i?"auto":!1},n=t.match(/\[\]$/)?{array:!0}:{};return V(e,n,r).array}function p(t,e){var n=t.squash;if(!e||n===!1)return!1;if(!M(n)||null==n)return v;if(n===!0||P(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function m(t,e,r,i){var o,a,u=[{from:"",to:r||e?n:""},{from:null,to:r||e?n:""}];return o=F(t.replace)?t.replace:[],P(i)&&o.push({from:i,to:n}),a=d(o,function(t){return t.from}),h(u,function(t){return-1===s(a,t.from)}).concat(o)}function g(){if(!f)throw new Error("Injectable functions cannot be called at configuration time");var t=f.invoke(r.$$fn);if(null!==t&&t!==n&&!x.type.is(t))throw new Error("Default value ("+t+") for parameter '"+x.id+"' is not an instance of Type ("+x.type.name+")");return t}function y(t){function e(t){return function(e){return e.from===t}}function n(t){var n=d(h(x.replace,e(t)),function(t){return t.to});return n.length?n[0]:t}return t=n(t),M(t)?x.type.$normalize(t):g()}function w(){return"{Param:"+t+" "+e+" squash: '"+S+"' optional: "+E+"}"}var x=this;r=o(r),e=l(r,e,i);var C=c();e=C?e.$asArray(C,"search"===i):e,"string"!==e.name||C||"path"!==i||r.value!==n||(r.value="");var E=r.value!==n,S=p(r,E),T=m(r,C,E,S);V(this,{id:t,type:e,location:i,array:C,squash:S,replace:T,isOptional:E,value:y,dynamic:n,config:r,toString:w})},c.prototype={$$new:function(){return r(this,V(new c,{$$parent:this}))},$$keys:function(){for(var t=[],e=[],n=this,r=a(c.prototype);n;)e.push(n),n=n.$$parent;return e.reverse(),q(e,function(e){q(a(e),function(e){-1===s(t,e)&&-1===s(r,e)&&t.push(e)})}),t},$$values:function(t){var e={},n=this;return q(n.$$keys(),function(r){e[r]=n[r].value(t&&t[r])}),e},$$equals:function(t,e){var n=!0,r=this;return q(r.$$keys(),function(i){var o=t&&t[i],a=e&&e[i];r[i].type.equals(o,a)||(n=!1)}),n},$$validates:function(t){var r,i,o,a,s,u=this.$$keys();for(r=0;r<u.length&&(i=this[u[r]],o=t[u[r]],o!==n&&null!==o||!i.isOptional);r++){if(a=i.type.$normalize(o),!i.type.is(a))return!1;if(s=i.type.encode(a),e.isString(s)&&!i.type.pattern.exec(s))return!1}return!0},$$parent:n},this.ParamSet=c}function b(t,r){function i(t){var e=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(t.source);return null!=e?e[1].replace(/\\(.)/g,"$1"):""}function o(t,e){return t.replace(/\$(\$|\d{1,2})/,function(t,n){return e["$"===n?0:Number(n)]})}function a(t,e,n){if(!n)return!1;var r=t.invoke(e,e,{$match:n});return M(r)?r:!0}function s(r,i,o,a){function s(t,e,n){return"/"===m?t:e?m.slice(0,-1)+t:n?m.slice(1)+t:t}function p(t){function e(t){var e=t(o,r);return e?(P(e)&&r.replace().url(e),!0):!1}if(!t||!t.defaultPrevented){{d&&r.url()===d}d=n;var i,a=l.length;for(i=0;a>i;i++)if(e(l[i]))return;c&&e(c)}}function h(){return u=u||i.$on("$locationChangeSuccess",p)}var d,m=a.baseHref(),v=r.url();return f||h(),{sync:function(){p()},listen:function(){return h()},update:function(t){return t?void(v=r.url()):void(r.url()!==v&&(r.url(v),r.replace()))},push:function(t,e,i){var o=t.format(e||{});null!==o&&e&&e["#"]&&(o+="#"+e["#"]),r.url(o),d=i&&i.$$avoidResync?r.url():n,i&&i.replace&&r.replace()},href:function(n,i,o){if(!n.validates(i))return null;var a=t.html5Mode();e.isObject(a)&&(a=a.enabled);var u=n.format(i);if(o=o||{},a||null===u||(u="#"+t.hashPrefix()+u),null!==u&&i&&i["#"]&&(u+="#"+i["#"]),u=s(u,a,o.absolute),!o.absolute||!u)return u;var l=!a&&u?"/":"",c=r.port();return c=80===c||443===c?"":":"+c,[r.protocol(),"://",r.host(),c,l,u].join("")}}}var u,l=[],c=null,f=!1;this.rule=function(t){if(!I(t))throw new Error("'rule' must be a function");return l.push(t),this},this.otherwise=function(t){if(P(t)){var e=t;t=function(){return e}}else if(!I(t))throw new Error("'rule' must be a function");return c=t,this},this.when=function(t,e){var n,s=P(e);if(P(t)&&(t=r.compile(t)),!s&&!I(e)&&!F(e))throw new Error("invalid 'handler' in when()");var u={matcher:function(t,e){return s&&(n=r.compile(e),e=["$match",function(t){return n.format(t)}]),V(function(n,r){return a(n,e,t.exec(r.path(),r.search()))},{prefix:P(t.prefix)?t.prefix:""})},regex:function(t,e){if(t.global||t.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(n=e,e=["$match",function(t){return o(n,t)}]),V(function(n,r){return a(n,e,t.exec(r.path()))},{prefix:i(t)})}},l={matcher:r.isMatcher(t),regex:t instanceof RegExp};for(var c in l)if(l[c])return this.rule(u[c](t,e));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(t){t===n&&(t=!0),f=t},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser"]}function w(t,i){function o(t){return 0===t.indexOf(".")||0===t.indexOf("^")}function p(t,e){if(!t)return n;var r=P(t),i=r?t:t.name,a=o(i);if(a){if(!e)throw new Error("No reference point given for path '"+i+"'");e=p(e);for(var s=i.split("."),u=0,l=s.length,c=e;l>u;u++)if(""!==s[u]||0!==u){if("^"!==s[u])break;if(!c.parent)throw new Error("Path '"+i+"' not valid for state '"+e.name+"'");c=c.parent}else c=e;s=s.slice(u).join("."),i=c.name+(c.name&&s?".":"")+s}var f=S[i];return!f||!r&&(r||f!==t&&f.self!==t)?n:f}function h(t,e){T[t]||(T[t]=[]),T[t].push(e)}function m(t){for(var e=T[t]||[];e.length;)v(e.shift())}function v(e){e=r(e,{self:e,resolve:e.resolve||{},toString:function(){return this.name}});var n=e.name;if(!P(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(S.hasOwnProperty(n))throw new Error("State '"+n+"'' is already defined");var i=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):P(e.parent)?e.parent:R(e.parent)&&P(e.parent.name)?e.parent.name:"";if(i&&!S[i])return h(i,e.self);for(var o in A)I(A[o])&&(e[o]=A[o](e,A.$delegates[o]));return S[n]=e,!e[k]&&e.url&&t.when(e.url,["$match","$stateParams",function(t,n){E.$current.navigable==e&&l(t,n)||E.transitionTo(e,t,{inherit:!0,location:!1})}]),m(n),e}function g(t){return t.indexOf("*")>-1}function $(t){for(var e=t.split("."),n=E.$current.name.split("."),r=0,i=e.length;i>r;r++)"*"===e[r]&&(n[r]="*");return"**"===e[0]&&(n=n.slice(s(n,e[1])),n.unshift("**")),"**"===e[e.length-1]&&(n.splice(s(n,e[e.length-2])+1,Number.MAX_VALUE),n.push("**")),e.length!=n.length?!1:n.join("")===e.join("")}function y(t,e){return P(t)&&!M(e)?A[t]:I(e)&&P(t)?(A[t]&&!A.$delegates[t]&&(A.$delegates[t]=A[t]),A[t]=e,this):this}function b(t,e){return R(t)?e=t:e.name=t,v(e),this}function w(t,i,o,s,f,h,m,v,y){function b(e,n,r,o){var a=t.$broadcast("$stateNotFound",e,n,r);if(a.defaultPrevented)return m.update(),N;if(!a.retry)return null;if(o.$retry)return m.update(),O;var s=E.transition=i.when(a.retry);return s.then(function(){return s!==E.transition?T:(e.options.$retry=!0,E.transitionTo(e.to,e.toParams,e.options))},function(){return N}),m.update(),s}function w(t,n,r,a,u,l){function p(){[m
[31m-var n=[];return q(t.views,function(r,i){var a=r.resolve&&r.resolve!==t.resolve?r.resolve:{};a.$template=[function(){return o.load(i,{view:r,locals:u.globals,params:h,notify:l.notify})||""}],n.push(f.resolve(a,u.globals,u.resolve,t).then(function(n){if(I(r.controllerProvider)||F(r.controllerProvider)){var o=e.extend({},a,u.globals);n.$$controller=s.invoke(r.controllerProvider,null,o)}else n.$$controller=r.controller;n.$$state=t,n.$$controllerAs=r.controllerAs,u[i]=n}))}),i.all(n).then(function(){return u.globals})}var h=r?n:c(t.params.$$keys(),n),d={$stateParams:h};u.resolve=f.resolve(t.resolve,d,u.resolve,t);var m=[u.resolve.then(function(t){u.globals=t})];return a&&m.push(a),i.all(m).then(p).then(function(t){return u})}var T=i.reject(new Error("transition superseded")),A=i.reject(new Error("transition prevented")),N=i.reject(new Error("transition aborted")),O=i.reject(new Error("transition failed"));return C.locals={resolve:null,globals:{$stateParams:{}}},E={params:{},current:C.self,$current:C,transition:null},E.reload=function(t){return E.transitionTo(E.current,h,{reload:t||!0,inherit:!1,notify:!0})},E.go=function(t,e,n){return E.transitionTo(t,e,V({inherit:!0,relative:E.$current},n))},E.transitionTo=function(e,n,o){n=n||{},o=V({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a,l=E.$current,f=E.params,d=l.path,v=p(e,o.relative),g=n["#"];if(!M(v)){var $={to:e,toParams:n,options:o},y=b($,l.self,f,o);if(y)return y;if(e=$.to,n=$.toParams,o=$.options,v=p(e,o.relative),!M(v)){if(!o.relative)throw new Error("No such state '"+e+"'");throw new Error("Could not resolve '"+e+"' from state '"+o.relative+"'")}}if(v[k])throw new Error("Cannot transition to abstract state '"+e+"'");if(o.inherit&&(n=u(h,n||{},E.$current,v)),!v.params.$$validates(n))return O;n=v.params.$$values(n),e=v;var S=e.path,N=0,D=S[N],j=C.locals,I=[];if(o.reload){if(P(o.reload)||R(o.reload)){if(R(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var F=o.reload===!0?d[0]:p(o.reload);if(o.reload&&!F)throw new Error("No such reload state '"+(P(o.reload)?o.reload:o.reload.name)+"'");for(;D&&D===d[N]&&D!==F;)j=I[N]=D.locals,N++,D=S[N]}}else for(;D&&D===d[N]&&D.ownParams.$$equals(n,f);)j=I[N]=D.locals,N++,D=S[N];if(x(e,n,l,f,j,o))return g&&(n["#"]=g),E.params=n,L(E.params,h),o.location&&e.navigable&&e.navigable.url&&(m.push(e.navigable.url,n,{$$avoidResync:!0,replace:"replace"===o.location}),m.update(!0)),E.transition=null,i.when(E.current);if(n=c(e.params.$$keys(),n||{}),o.notify&&t.$broadcast("$stateChangeStart",e.self,n,l.self,f).defaultPrevented)return t.$broadcast("$stateChangeCancel",e.self,n,l.self,f),m.update(),A;for(var q=i.when(j),_=N;_<S.length;_++,D=S[_])j=I[_]=r(j),q=w(D,n,D===e,q,j,o);var H=E.transition=q.then(function(){var r,i,a;if(E.transition!==H)return T;for(r=d.length-1;r>=N;r--)a=d[r],a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(r=N;r<S.length;r++)i=S[r],i.locals=I[r],i.self.onEnter&&s.invoke(i.self.onEnter,i.self,i.locals.globals);return g&&(n["#"]=g),E.transition!==H?T:(E.$current=e,E.current=e.self,E.params=n,L(E.params,h),E.transition=null,o.location&&e.navigable&&m.push(e.navigable.url,e.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&t.$broadcast("$stateChangeSuccess",e.self,n,l.self,f),m.update(!0),E.current)},function(r){return E.transition!==H?T:(E.transition=null,a=t.$broadcast("$stateChangeError",e.self,n,l.self,f,r),a.defaultPrevented||m.update(),i.reject(r))});return H},E.is=function(t,e,r){r=V({relative:E.$current},r||{});var i=p(t,r.relative);return M(i)?E.$current!==i?!1:e?l(i.params.$$values(e),h):!0:n},E.includes=function(t,e,r){if(r=V({relative:E.$current},r||{}),P(t)&&g(t)){if(!$(t))return!1;t=E.$current.name}var i=p(t,r.relative);return M(i)?M(E.$current.includes[i.name])?e?l(i.params.$$values(e),h,a(e)):!0:!1:n},E.href=function(t,e,r){r=V({lossy:!0,inherit:!0,absolute:!1,relative:E.$current},r||{});var i=p(t,r.relative);if(!M(i))return null;r.inherit&&(e=u(h,e||{},E.$current,i));var o=i&&r.lossy?i.navigable:i;return o&&o.url!==n&&null!==o.url?m.href(o.url,c(i.params.$$keys().concat("#"),e||{}),{absolute:r.absolute}):null},E.get=function(t,e){if(0===arguments.length)return d(a(S),function(t){return S[t].self});var n=p(t,e||E.$current);return n&&n.self?n.self:null},E}function x(t,e,n,r,i,o){function a(t,e,n){function r(e){return"search"!=t.params[e].location}var i=t.params.$$keys().filter(r),o=f.apply({},[t.params].concat(i)),a=new _.ParamSet(o);return a.$$equals(e,n)}return!o.reload&&t===n&&(i===n.locals||t.self.reloadOnSearch===!1&&a(n,r,e))?!0:void 0}var C,E,S={},T={},k="abstract",A={parent:function(t){if(M(t.parent)&&t.parent)return p(t.parent);var e=/^(.+)\.[^.]+$/.exec(t.name);return e?p(e[1]):C},data:function(t){return t.parent&&t.parent.data&&(t.data=t.self.data=V({},t.parent.data,t.data)),t.data},url:function(t){var e=t.url,n={params:t.params||{}};if(P(e))return"^"==e.charAt(0)?i.compile(e.substring(1),n):(t.parent.navigable||C).url.concat(e,n);if(!e||i.isMatcher(e))return e;throw new Error("Invalid url '"+e+"' in state '"+t+"'")},navigable:function(t){return t.url?t:t.parent?t.parent.navigable:null},ownParams:function(t){var e=t.url&&t.url.params||new _.ParamSet;return q(t.params||{},function(t,n){e[n]||(e[n]=new _.Param(n,null,t,"config"))}),e},params:function(t){return t.parent&&t.parent.params?V(t.parent.params.$$new(),t.ownParams):new _.ParamSet},views:function(t){var e={};return q(M(t.views)?t.views:{"":t},function(n,r){r.indexOf("@")<0&&(r+="@"+t.parent.name),e[r]=n}),e},path:function(t){return t.parent?t.parent.path.concat(t):[]},includes:function(t){var e=t.parent?V({},t.parent.includes):{};return e[t.name]=!0,e},$delegates:{}};C=v({name:"",url:"^",views:null,"abstract":!0}),C.navigable=null,this.decorator=y,this.state=b,this.$get=w,w.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function x(){function t(t,e){return{load:function(n,r){var i,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return r=V(o,r),r.view&&(i=e.fromConfig(r.view,r.params,r.locals)),i&&r.notify&&t.$broadcast("$viewContentLoading",r),i}}}this.$get=t,t.$inject=["$rootScope","$templateFactory"]}function C(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){return n(function(){t[0].scrollIntoView()},0,!1)}}]}function E(t,n,r,i){function o(){return n.has?function(t){return n.has(t)?n.get(t):null}:function(t){try{return n.get(t)}catch(e){return null}}}function a(t,e){var n=function(){return{enter:function(t,e,n){e.after(t),n()},leave:function(t,e){t.remove(),e()}}};if(l)return{enter:function(t,e,n){var r=l.enter(t,null,e,n);r&&r.then&&r.then(n)},leave:function(t,e){var n=l.leave(t,e);n&&n.then&&n.then(e)}};if(u){var r=u&&u(e,t);return{enter:function(t,e,n){r.enter(t,null,e),n()},leave:function(t,e){r.leave(t),e()}}}return n()}var s=o(),u=s("$animator"),l=s("$animate"),c={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,o,s){return function(n,o,u){function l(){f&&(f.remove(),f=null),h&&(h.$destroy(),h=null),p&&(g.leave(p,function(){f=null}),f=p,p=null)}function c(a){var c,f=T(n,u,o,i),$=f&&t.$current&&t.$current.locals[f];if(a||$!==d){c=n.$new(),d=t.$current.locals[f];var y=s(c,function(t){g.enter(t,o,function(){h&&h.$emit("$viewContentAnimationEnded"),(e.isDefined(v)&&!v||n.$eval(v))&&r(t)}),l()});p=y,h=c,h.$emit("$viewContentLoaded"),h.$eval(m)}}var f,p,h,d,m=u.onload||"",v=u.autoscroll,g=a(u,n);n.$on("$stateChangeSuccess",function(){c(!1)}),n.$on("$viewContentLoading",function(){c(!1)}),c(!0)}}};return c}function S(t,e,n,r){return{restrict:"ECA",priority:-400,compile:function(i){var o=i.html();return function(i,a,s){var u=n.$current,l=T(i,s,a,r),c=u&&u.locals[l];if(c){a.data("$uiView",{name:l,state:c.$$state}),a.html(c.$template?c.$template:o);var f=t(a.contents());if(c.$$controller){c.$scope=i,c.$element=a;var p=e(c.$$controller,c);c.$$controllerAs&&(i[c.$$controllerAs]=p),a.data("$ngControllerController",p),a.children().data("$ngControllerController",p)}f(i)}}}}}function T(t,e,n,r){var i=r(e.uiView||e.name||"")(t),o=n.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(o?o.state.name:"")}function k(t,e){var n,r=t.match(/^\s*({[^}]*})\s*$/);if(r&&(t=e+"("+r[1]+")"),n=t.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+t+"'");return{state:n[1],paramExpr:n[3]||null}}function A(t){var e=t.parent().inheritedData("$uiView");return e&&e.state&&e.state.name?e.state:void 0}function N(t,n){var r=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,a,s){var u=k(a.uiSref,t.current.name),l=null,c=A(o)||t.$current,f="[object SVGAnimatedString]"===Object.prototype.toString.call(o.prop("href"))?"xlink:href":"href",p=null,h="A"===o.prop("tagName").toUpperCase(),d="FORM"===o[0].nodeName,m=d?"action":f,v=!0,g={relative:c,inherit:!0},$=i.$eval(a.uiSrefOpts)||{};e.forEach(r,function(t){t in $&&(g[t]=$[t])});var y=function(n){if(n&&(l=e.copy(n)),v){p=t.href(u.state,l,g);var r=s[1]||s[0];return r&&r.$$addStateInfo(u.state,l),null===p?(v=!1,!1):void a.$set(m,p)}};u.paramExpr&&(i.$watch(u.paramExpr,function(t,e){t!==l&&y(t)},!0),l=e.copy(i.$eval(u.paramExpr))),y(),d||o.bind("click",function(e){var r=e.which||e.button;if(!(r>1||e.ctrlKey||e.metaKey||e.shiftKey||o.attr("target"))){var i=n(function(){t.go(u.state,l,g)});e.preventDefault();var a=h&&!p?1:0;e.preventDefault=function(){a--<=0&&n.cancel(i)}}})}}}function O(t,e,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,r,i){function o(){a()?r.addClass(u):r.removeClass(u)}function a(){for(var t=0;t<l.length;t++)if(s(l[t].state,l[t].params))return!0;return!1}function s(e,n){return"undefined"!=typeof i.uiSrefActiveEq?t.is(e.name,n):t.includes(e.name,n)}var u,l=[];u=n(i.uiSrefActiveEq||i.uiSrefActive||"",!1)(e),this.$$addStateInfo=function(e,n){var i=t.get(e,A(r));l.push({state:i||{name:e},params:n}),o()},e.$on("$stateChangeSuccess",o)}]}}function D(t){var e=function(e){return t.is(e)};return e.$stateful=!0,e}function j(t){var e=function(e){return t.includes(e)};return e.$stateful=!0,e}var M=e.isDefined,I=e.isFunction,P=e.isString,R=e.isObject,F=e.isArray,q=e.forEach,V=e.extend,L=e.copy;e.module("ui.router.util",["ng"]),e.module("ui.router.router",["ui.router.util"]),e.module("ui.router.state",["ui.router.router","ui.router.util"]),e.module("ui.router",["ui.router.state"]),e.module("ui.router.compat",["ui.router"]),m.$inject=["$q","$injector"],e.module("ui.router.util").service("$resolve",m),v.$inject=["$http","$templateCache","$injector"],e.module("ui.router.util").service("$templateFactory",v);var _;g.prototype.concat=function(t,e){var n={caseInsensitive:_.caseInsensitive(),strict:_.strictMode(),squash:_.defaultSquashPolicy()};return new g(this.sourcePath+t+this.sourceSearch,V(n,e),this)},g.prototype.toString=function(){return this.source},g.prototype.exec=function(t,e){function n(t){function e(t){return t.split("").reverse().join("")}function n(t){return t.replace(/\\-/g,"-")}var r=e(t).split(/-(?!\\)/),i=d(r,e);return d(i,n).reverse()}var r=this.regexp.exec(t);if(!r)return null;e=e||{};var i,o,a,s=this.parameters(),u=s.length,l=this.segments.length-1,c={};if(l!==r.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;l>i;i++){a=s[i];var f=this.params[a],p=r[i+1];for(o=0;o<f.replace;o++)f.replace[o].from===p&&(p=f.replace[o].to);p&&f.array===!0&&(p=n(p)),c[a]=f.value(p)}for(;u>i;i++)a=s[i],c[a]=this.params[a].value(e[a]);return c},g.prototype.parameters=function(t){return M(t)?this.params[t]||null:this.$$paramNames},g.prototype.validates=function(t){return this.params.$$validates(t)},g.prototype.format=function(t){function e(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})}t=t||{};var n=this.segments,r=this.parameters(),i=this.params;if(!this.validates(t))return null;var o,a=!1,s=n.length-1,u=r.length,l=n[0];for(o=0;u>o;o++){var c=s>o,f=r[o],p=i[f],h=p.value(t[f]),m=p.isOptional&&p.type.equals(p.value(),h),v=m?p.squash:!1,g=p.type.encode(h);if(c){var $=n[o+1];if(v===!1)null!=g&&(l+=F(g)?d(g,e).join("-"):encodeURIComponent(g)),l+=$;else if(v===!0){var y=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=$.match(y)[1]}else P(v)&&(l+=v+$)}else{if(null==g||m&&v!==!1)continue;F(g)||(g=[g]),g=d(g,encodeURIComponent).join("&"+f+"="),l+=(a?"&":"?")+(f+"="+g),a=!0}}return l},$.prototype.is=function(t,e){return!0},$.prototype.encode=function(t,e){return t},$.prototype.decode=function(t,e){return t},$.prototype.equals=function(t,e){return t==e},$.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},$.prototype.pattern=/.*/,$.prototype.toString=function(){return"{Type:"+this.name+"}"},$.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},$.prototype.$asArray=function(t,e){function r(t,e){function r(t,e){return function(){return t[e].apply(t,arguments)}}function i(t){return F(t)?t:M(t)?[t]:[]}function o(t){switch(t.length){case 0:return n;case 1:return"auto"===e?t[0]:t;default:return t}}function a(t){return!t}function s(t,e){return function(n){n=i(n);var r=d(n,t);return e===!0?0===h(r,a).length:o(r)}}function u(t){return function(e,n){var r=i(e),o=i(n);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!t(r[a],o[a]))return!1;return!0}}this.encode=s(r(t,"encode")),this.decode=s(r(t,"decode")),this.is=s(r(t,"is"),!0),this.equals=u(r(t,"equals")),this.pattern=t.pattern,this.$normalize=s(r(t,"$normalize")),this.name=t.name,this.$arrayMode=e}if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new r(this,t)},e.module("ui.router.util").provider("$urlMatcherFactory",y),e.module("ui.router.util").run(["$urlMatcherFactory",function(t){}]),b.$inject=["$locationProvider","$urlMatcherFactoryProvider"],e.module("ui.router.router").provider("$urlRouter",b),w.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],e.module("ui.router.state").value("$stateParams",{}).provider("$state",w),x.$inject=[],e.module("ui.router.state").provider("$view",x),e.module("ui.router.state").provider("$uiViewScroll",C),E.$inject=["$state","$injector","$uiViewScroll","$interpolate"],S.$inject=["$compile","$controller","$state","$interpolate"],e.module("ui.router.state").directive("uiView",E),e.module("ui.router.state").directive("uiView",S),N.$inject=["$state","$timeout"],O.$inject=["$state","$stateParams","$interpolate"],e.module("ui.router.state").directive("uiSref",N).directive("uiSrefActive",O).directive("uiSrefActiveEq",O),D.$inject=["$state"],j.$inject=["$state"],e.module("ui.router.state").filter("isState",D).filter("includedByState",j)}(window,window.angular),angular.module("xeditable",[]).value("editableOptions",{theme:"default",icon_set:"default",buttons:"right",blurElem:"cancel",blurForm:"ignore",activate:"focus",isDisabled:!1,activationEvent:"click"}),angular.module("xeditable").directive("editableBsdate",["editableDirectiveFactory",function(t){return t({directiveName:"editableBsdate",inputTpl:"<div></div>",render:function(){this.parent.render.call(this);var t=angular.element('<input type="text" class="form-control" ng-model="$data"/>'),e=angular.element('<button type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>'),n=angular.element('<span class="input-group-btn"></span>');t.attr("datepicker-popup",this.attrs.eDatepickerPopupXEditable||"yyyy/MM/dd"),t.attr("is-open",this.attrs.eIsOpen),t.attr("date-disabled",this.attrs.eDateDisabled),t.attr("datepicker-popup",this.attrs.eDatepickerPopup),t.attr("datepicker-mode",this.attrs.eDatepickerMode||"day"),t.attr("min-date",this.attrs.eMinDate),t.attr("max-date",this.attrs.eMaxDate),t.attr("show-weeks",this.attrs.eShowWeeks||!0),t.attr("starting-day",this.attrs.eStartingDay||0),t.attr("init-date",this.attrs.eInitDate||new Date),t.attr("min-mode",this.attrs.eMinMode||"day"),t.attr("max-mode",this.attrs.eMaxMode||"year"),t.attr("format-day",this.attrs.eFormatDay||"dd"),t.attr("format-month",this.attrs.eFormatMonth||"MMMM"),t.attr("format-year",this.attrs.eFormatYear||"yyyy"),t.attr("format-day-header",this.attrs.eFormatDayHeader||"EEE"),t.attr("format-day-title",this.attrs.eFormatDayTitle||"MMMM yyyy"),t.attr("format-month-title",this.attrs.eFormatMonthTitle||"yyyy"),t.attr("year-range",this.attrs.eYearRange||20),t.attr("show-button-bar",this.attrs.eShowButtonBar||!0),t.attr("current-text",this.attrs.eCurrentText||"Today"),t.attr("clear-text",this.attrs.eClearText||"Clear"),t.attr("close-text",this.attrs.eCloseText||"Done"),t.attr("close-on-date-selection",this.attrs.eCloseOnDateSelection||!0),t.attr("date-picker-append-to-body",this.attrs.eDatePickerAppendToBody||!1),t.attr("date-disabled",this.attrs.eDateDisabled),e.attr("ng-click",this.attrs.eNgClick),n.append(e),this.inputEl.prepend(t),this.inputEl.append(n),this.inputEl.removeAttr("class"),this.inputEl.attr("class","input-group")}})}]),angular.module("xeditable").directive("editableBstime",["editableDirectiveFactory",function(t){return t({directiveName:"editableBstime",inputTpl:"<timepicker></timepicker>",render:function(){this.parent.render.call(this);var t=angular.element('<div class="well well-small" style="display:inline-block;"></div>');t.attr("ng-model",this.inputEl.attr("ng-model")),this.inputEl.removeAttr("ng-model"),this.attrs.eNgChange&&(t.attr("ng-change",this.inputEl.attr("ng-change")),this.inputEl.removeAttr("ng-change")),this.inputEl.wrap(t)}})}]),angular.module("xeditable").directive("editableCheckbox",["editableDirectiveFactory",function(t){return t({directiveName:"editableCheckbox",inputTpl:'<input type="checkbox">',render:function(){this.parent.render.call(this),this.attrs.eTitle&&(this.inputEl.wrap("<label></label>"),this.inputEl.parent().append(this.attrs.eTitle))},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){setTimeout(function(){t.scope.$apply(function(){t.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableChecklist",["editableDirectiveFactory","editableNgOptionsParser",function(t,e){return t({directiveName:"editableChecklist",inputTpl:"<span></span>",useCopy:!0,render:function(){this.parent.render.call(this);var t=e(this.attrs.eNgOptions),n='<label ng-repeat="'+t.ngRepeat+'"><input type="checkbox" checklist-model="$parent.$data" checklist-value="'+t.locals.valueFn+'"><span ng-bind="'+t.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.html(n)}})}]),angular.module("xeditable").directive("editableCombodate",["editableDirectiveFactory","editableCombodate",function(t,e){return t({directiveName:"editableCombodate",inputTpl:'<input type="text">',render:function(){this.parent.render.call(this);var t=e.getInstance(this.inputEl,{value:new Date(this.scope.$data)}),n=this;t.$widget.find("select").bind("change",function(e){n.scope.$data=new Date(t.getValue()).toISOString()})}})}]),function(){var t="text|password|email|tel|number|url|search|color|date|datetime|time|month|week|file".split("|");angular.forEach(t,function(t){var e="editable"+t.charAt(0).toUpperCase()+t.slice(1);angular.module("xeditable").directive(e,["editableDirectiveFactory",function(n){return n({directiveName:e,inputTpl:'<input type="'+t+'">'})}])}),angular.module("xeditable").directive("editableRange",["editableDirectiveFactory",function(t){return t({directiveName:"editableRange",inputTpl:'<input type="range" id="range" name="range">',render:function(){this.parent.render.call(this),this.inputEl.after("<output>{{$data}}</output>")}})}])}(),angular.module("xeditable").directive("editableRadiolist",["editableDirectiveFactory","editableNgOptionsParser",function(t,e){return t({directiveName:"editableRadiolist",inputTpl:"<span></span>",render:function(){this.parent.render.call(this);var t=e(this.attrs.eNgOptions),n='<label ng-repeat="'+t.ngRepeat+'"><input type="radio" ng-disabled="'+this.attrs.eNgDisabled+'" ng-model="$parent.$data" value="{{'+t.locals.valueFn+'}}"><span ng-bind="'+t.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.html(n)},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){setTimeout(function(){t.scope.$apply(function(){t.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableSelect",["editableDirectiveFactory",function(t){return t({directiveName:"editableSelect",inputTpl:"<select></select>",autosubmit:function(){var t=this;t.inputEl.bind("change",function(){t.scope.$apply(function(){t.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableTextarea",["editableDirectiveFactory",function(t){return t({directiveName:"editableTextarea",inputTpl:"<textarea></textarea>",addListeners:function(){var t=this;t.parent.addListeners.call(t),t.single&&"no"!==t.buttons&&t.autosubmit()},autosubmit:function(){var t=this;t.inputEl.bind("keydown",function(e){(e.ctrlKey||e.metaKey)&&13===e.keyCode&&t.scope.$apply(function(){t.scope.$form.$submit()})})}})}]),angular.module("xeditable").factory("editableController",["$q","editableUtils",function(t,e){function n(t,n,r,i,o,a,s,u,l,c){var f,p,h=this;h.scope=t,h.elem=r,h.attrs=n,h.inputEl=null,h.editorEl=null,h.single=!0,h.error="",h.theme=o[s.theme]||o["default"],h.parent={},h.icon_set="default"===s.icon_set?a["default"][s.theme]:a.external[s.icon_set],h.inputTpl="",h.directiveName="",h.useCopy=!1,h.single=null,h.buttons="right",h.init=function(e){if(h.single=e,h.name=n.eName||n[h.directiveName],!n[h.directiveName])throw"You should provide value for `"+h.directiveName+"` in editable element!";f=i(n[h.directiveName]),h.buttons=h.single?h.attrs.buttons||s.buttons:"no",n.eName&&h.scope.$watch("$data",function(t){h.scope.$form.$data[n.eName]=t}),n.onshow&&(h.onshow=function(){return h.catchError(i(n.onshow)(t))}),n.onhide&&(h.onhide=function(){return i(n.onhide)(t)}),n.oncancel&&(h.oncancel=function(){return i(n.oncancel)(t)}),n.onbeforesave&&(h.onbeforesave=function(){return h.catchError(i(n.onbeforesave)(t))}),n.onaftersave&&(h.onaftersave=function(){return h.catchError(i(n.onaftersave)(t))}),t.$parent.$watch(n[h.directiveName],function(t,e){h.setLocalValue(),h.handleEmpty()})},h.render=function(){var t=h.theme;h.inputEl=angular.element(h.inputTpl),h.controlsEl=angular.element(t.controlsTpl),h.controlsEl.append(h.inputEl),"no"!==h.buttons&&(h.buttonsEl=angular.element(t.buttonsTpl),h.submitEl=angular.element(t.submitTpl),h.cancelEl=angular.element(t.cancelTpl),h.icon_set&&(h.submitEl.find("span").addClass(h.icon_set.ok),h.cancelEl.find("span").addClass(h.icon_set.cancel)),h.buttonsEl.append(h.submitEl).append(h.cancelEl),h.controlsEl.append(h.buttonsEl),h.inputEl.addClass("editable-has-buttons")),h.errorEl=angular.element(t.errorTpl),h.controlsEl.append(h.errorEl),h.editorEl=angular.element(h.single?t.formTpl:t.noformTpl),h.editorEl.append(h.controlsEl);for(var r in n.$attr)if(!(r.length<=1)){var i=!1,o=r.substring(1,2);if("e"===r.substring(0,1)&&o===o.toUpperCase()&&(i=r.substring(1),"Form"!==i&&"NgSubmit"!==i)){i=i.substring(0,1).toLowerCase()+e.camelToDash(i.substring(1));var a="value"!==i&&""===n[r]?i:n[r];h.inputEl.attr(i,a)}}h.inputEl.addClass("editable-input"),h.inputEl.attr("ng-model","$data"),h.editorEl.addClass(e.camelToDash(h.directiveName)),h.single&&(h.editorEl.attr("editable-form","$form"),h.editorEl.attr("blur",h.attrs.blur||("no"===h.buttons?"cancel":s.blurElem))),angular.isFunction(t.postrender)&&t.postrender.call(h)},h.setLocalValue=function(){h.scope.$data=h.useCopy?angular.copy(f(t.$parent)):f(t.$parent)},h.show=function(){return h.setLocalValue(),h.render(),r.after(h.editorEl),l(h.editorEl)(t),h.addListeners(),r.addClass("editable-hide"),h.onshow()},h.hide=function(){return h.editorEl.remove(),r.removeClass("editable-hide"),h.onhide()},h.cancel=function(){h.oncancel()},h.addListeners=function(){h.inputEl.bind("keyup",function(t){if(h.single)switch(t.keyCode){case 27:h.scope.$apply(function(){h.scope.$form.$cancel()})}}),h.single&&"no"===h.buttons&&h.autosubmit(),h.editorEl.bind("click",function(t){t.which&&1!==t.which||h.scope.$form.$visible&&(h.scope.$form._clicked=!0)})},h.setWaiting=function(t){t?(p=!h.inputEl.attr("disabled")&&!h.inputEl.attr("ng-disabled")&&!h.inputEl.attr("ng-enabled"),p&&(h.inputEl.attr("disabled","disabled"),h.buttonsEl&&h.buttonsEl.find("button").attr("disabled","disabled"))):p&&(h.inputEl.removeAttr("disabled"),h.buttonsEl&&h.buttonsEl.find("button").removeAttr("disabled"))},h.activate=function(t,e){setTimeout(function(){var n=h.inputEl[0];"focus"===s.activate&&n.focus&&(t&&(e=e||t,n.onfocus=function(){var n=this;setTimeout(function(){n.setSelectionRange(t,e)})}),n.focus()),"select"===s.activate&&n.select&&n.select()},0)},h.setError=function(e){angular.isObject(e)||(t.$error=e,h.error=e)},h.catchError=function(t,e){return angular.isObject(t)&&e!==!0?c.when(t).then(angular.bind(this,function(t){this.catchError(t,!0)}),angular.bind(this,function(t){this.catchError(t,!0)})):e&&angular.isObject(t)&&t.status&&200!==t.status&&t.data&&angular.isString(t.data)?(this.setError(t.data),t=t.data):angular.isString(t)&&this.setError(t),t},h.save=function(){f.assign(t.$parent,h.useCopy?angular.copy(h.scope.$data):h.scope.$data)},h.handleEmpty=function(){var e=f(t.$parent),n=null===e||void 0===e||""===e||angular.isArray(e)&&0===e.length;r.toggleClass("editable-empty",n)},h.autosubmit=angular.noop,h.onshow=angular.noop,h.onhide=angular.noop,h.oncancel=angular.noop,h.onbeforesave=angular.noop,h.onaftersave=angular.noop}return n.$inject=["$scope","$attrs","$element","$parse","editableThemes","editableIcons","editableOptions","$rootScope","$compile","$q"],n}]),angular.module("xeditable").factory("editableDirectiveFactory",["$parse","$compile","editableThemes","$rootScope","$document","editableController","editableFormController","editableOptions",function(t,e,n,r,i,o,a,s){return function(e){return{restrict:"A",scope:!0,require:[e.directiveName,"?^form"],controller:o,link:function(n,o,u,l){var c,f=l[0],p=!1;if(l[1])c=l[1],p=!0;else if(u.eForm){var h=t(u.eForm)(n);if(h)c=h,p=!0;else for(var d=0;d<i[0].forms.length;d++)if(i[0].forms[d].name===u.eForm){c=null,p=!0;break}}angular.forEach(e,function(t,e){void 0!==f[e]&&(f.parent[e]=f[e])}),angular.extend(f,e);var m=angular.isDefined(u.editDisabled)?n.$eval(u.editDisabled):s.isDisabled;if(!m)if(f.init(!p),n.$editable=f,o.addClass("editable"),p)if(c){if(n.$form=c,!n.$form.$addEditable)throw"Form with editable elements should have `editable-form` attribute.";n.$form.$addEditable(f)}else r.$$editableBuffer=r.$$editableBuffer||{},r.$$editableBuffer[u.eForm]=r.$$editableBuffer[u.eForm]||[],r.$$editableBuffer[u.eForm].push(f),n.$form=null;else n.$form=a(),n.$form.$addEditable(f),u.eForm&&(n.$parent[u.eForm]=n.$form),(!u.eForm||u.eClickable)&&(o.addClass("editable-click"),o.bind(s.activationEvent,function(t){t.preventDefault(),t.editable=f,n.$apply(function(){n.$form.$show()})}))}}}}]),angular.module("xeditable").factory("editableFormController",["$parse","$document","$rootScope","editablePromiseCollection","editableUtils",function(t,e,n,r,i){var o=[],a=function(t,e){if(e==t)return!0;for(var n=e.parentNode;null!==n;){if(n==t)return!0;n=n.parentNode}return!1},s=function(t,e){var n=!0,r=t.$editables;return angular.forEach(r,function(t){var r=t.editorEl[0];a(r,e.target)&&(n=!1)}),n};e.bind("click",function(t){if(!(t.which&&1!==t.which||t.isDefaultPrevented())){for(var e=[],r=[],i=0;i<o.length;i++)o[i]._clicked?o[i]._clicked=!1:o[i].$waiting||("cancel"===o[i]._blur&&s(o[i],t)&&e.push(o[i]),"submit"===o[i]._blur&&s(o[i],t)&&r.push(o[i]));(e.length||r.length)&&n.$apply(function(){angular.forEach(e,function(t){t.$cancel()}),angular.forEach(r,function(t){t.$submit()})})}});var u={$addEditable:function(t){this.$editables.push(t),t.elem.bind("$destroy",angular.bind(this,this.$removeEditable,t)),t.scope.$form||(t.scope.$form=this),this.$visible&&t.catchError(t.show())},$removeEditable:function(t){for(var e=0;e<this.$editables.length;e++)if(this.$editables[e]===t)return void this.$editables.splice(e,1)},$show:function(){if(!this.$visible){this.$visible=!0;var t=r();t.when(this.$onshow()),this.$setError(null,""),angular.forEach(this.$editables,function(e){t.when(e.show())}),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$activate),onFalse:angular.bind(this,this.$activate),onString:angular.bind(this,this.$activate)}),setTimeout(angular.bind(this,function(){this._clicked=!1,-1===i.indexOf(o,this)&&o.push(this)}),0)}},$activate:function(t){var e;if(this.$editables.length){if(angular.isString(t))for(e=0;e<this.$editables.length;e++)if(this.$editables[e].name===t)return void this.$editables[e].activate();for(e=0;e<this.$editables.length;e++)if(this.$editables[e].error)return void this.$editables[e].activate();this.$editables[0].activate(this.$editables[0].elem[0].selectionStart,this.$editables[0].elem[0].selectionEnd)}},$hide:function(){this.$visible&&(this.$visible=!1,this.$onhide(),angular.forEach(this.$editables,function(t){t.hide()}),i.arrayRemove(o,this))},$cancel:function(){this.$visible&&(this.$oncancel(),angular.forEach(this.$editables,function(t){t.cancel()}),this.$hide())},$setWaiting:function(t){this.$waiting=!!t,angular.forEach(this.$editables,function(e){e.setWaiting(!!t)})},$setError:function(t,e){angular.forEach(this.$editables,function(n){t&&n.name!==t||n.setError(e)})},$submit:function(){function t(t){var e=r();e.when(this.$onbeforesave()),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:t?angular.bind(this,this.$save):angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})}if(!this.$waiting){this.$setError(null,"");var e=r();angular.forEach(this.$editables,function(t){e.when(t.onbeforesave())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,t,!0),onFalse:angular.bind(this,t,!1),onString:angular.bind(this,this.$activate)})}},$save:function(){angular.forEach(this.$editables,function(t){t.save()});var t=r();t.when(this.$onaftersave()),angular.forEach(this.$editables,function(e){t.when(e.onaftersave())}),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})},$onshow:angular.noop,$oncancel:angular.noop,$onhide:angular.noop,$onbeforesave:angular.noop,$onaftersave:angular.noop};return function(){return angular.extend({$editables:[],$visible:!1,$waiting:!1,$data:{},_clicked:!1,_blur:null},u)}}]),angular.module("xeditable").directive("editableForm",["$rootScope","$parse","editableFormController","editableOptions",function(t,e,n,r){return{restrict:"A",require:["form"],compile:function(){return{pre:function(e,r,i,o){var a,s=o[0];i.editableForm?e[i.editableForm]&&e[i.editableForm].$show?(a=e[i.editableForm],angular.extend(s,a)):(a=n(),e[i.editableForm]=a,angular.extend(a,s)):(a=n(),angular.extend(s,a));var u=t.$$editableBuffer,l=s.$name;l&&u&&u[l]&&(angular.forEach(u[l],function(t){a.$addEditable(t)}),delete u[l])},post:function(t,n,i,o){var a;a=i.editableForm&&t[i.editableForm]&&t[i.editableForm].$show?t[i.editableForm]:o[0],i.onshow&&(a.$onshow=angular.bind(a,e(i.onshow),t)),i.onhide&&(a.$onhide=angular.bind(a,e(i.onhide),t)),i.oncancel&&(a.$oncancel=angular.bind(a,e(i.oncancel),t)),i.shown&&e(i.shown)(t)&&a.$show(),a._blur=i.blur||r.blurForm,i.ngSubmit||i.submit||(i.onbeforesave&&(a.$onbeforesave=function(){return e(i.onbeforesave)(t,{$data:a.$data})}),i.onaftersave&&(a.$onaftersave=function(){[m
[31m-return e(i.onaftersave)(t,{$data:a.$data})}),n.bind("submit",function(e){e.preventDefault(),t.$apply(function(){a.$submit()})})),n.bind("click",function(t){t.which&&1!==t.which||a.$visible&&(a._clicked=!0)})}}}}}]),angular.module("xeditable").factory("editablePromiseCollection",["$q",function(t){function e(){return{promises:[],hasFalse:!1,hasString:!1,when:function(e,n){if(e===!1)this.hasFalse=!0;else if(!n&&angular.isObject(e))this.promises.push(t.when(e));else{if(!angular.isString(e))return;this.hasString=!0}},then:function(e){function n(){s.hasString||s.hasFalse?!s.hasString&&s.hasFalse?i():o():r()}e=e||{};var r=e.onTrue||angular.noop,i=e.onFalse||angular.noop,o=e.onString||angular.noop,a=e.onWait||angular.noop,s=this;this.promises.length?(a(!0),t.all(this.promises).then(function(t){a(!1),angular.forEach(t,function(t){s.when(t,!0)}),n()},function(t){a(!1),o()})):n()}}}return e}]),angular.module("xeditable").factory("editableUtils",[function(){return{indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1},arrayRemove:function(t,e){var n=this.indexOf(t,e);return n>=0&&t.splice(n,1),e},camelToDash:function(t){var e=/[A-Z]/g;return t.replace(e,function(t,e){return(e?"-":"")+t.toLowerCase()})},dashToCamel:function(t){var e=/([\:\-\_]+(.))/g,n=/^moz([A-Z])/;return t.replace(e,function(t,e,n,r){return r?n.toUpperCase():n}).replace(n,"Moz$1")}}}]),angular.module("xeditable").factory("editableNgOptionsParser",[function(){function t(t){var n;if(!(n=t.match(e)))throw"ng-options parse error";var r,i=n[2]||n[1],o=n[4]||n[6],a=n[5],s=(n[3]||"",n[2]?n[1]:o),u=n[7],l=n[8],c=l?n[8]:null;return void 0===a?(r=o+" in "+u,void 0!==l&&(r+=" track by "+c)):r="("+a+", "+o+") in "+u,{ngRepeat:r,locals:{valueName:o,keyName:a,valueFn:s,displayFn:i}}}var e=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;return t}]),angular.module("xeditable").factory("editableCombodate",[function(){function t(t,e){if(this.$element=angular.element(t),"INPUT"!=this.$element[0].nodeName)throw"Combodate should be applied to INPUT element";this.defaults={format:"YYYY-MM-DD HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,customClass:"",roundTime:!0,smartDays:!0},this.options=angular.extend({},this.defaults,e),this.init()}return t.prototype={constructor:t,init:function(){if(this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=angular.element('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.options.smartDays){var t=this;this.$widget.find("select").bind("change",function(e){(angular.element(e.target).hasClass("month")||angular.element(e.target).hasClass("year"))&&t.fillCombo("day")})}this.$widget.find("select").css("width","auto"),this.$element.css("display","none").after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template,e=this.options.customClass;return angular.forEach(this.map,function(e,n){e=e[0];var r=new RegExp(e+"+"),i=e.length>1?e.substring(1,2):e;t=t.replace(r,"{"+i+"}")}),t=t.replace(/ /g,"&nbsp;"),angular.forEach(this.map,function(n,r){n=n[0];var i=n.length>1?n.substring(1,2):n;t=t.replace("{"+i+"}",'<select class="'+r+" "+e+'"></select>')}),t},initCombos:function(){for(var t in this.map){var e=this.$widget[0].querySelectorAll("."+t);this["$"+t]=e.length?angular.element(e):null,this.fillCombo(t)}},fillCombo:function(t){var e=this["$"+t];if(e){var n="fill"+t.charAt(0).toUpperCase()+t.slice(1),r=this[n](),i=e.val();e.html("");for(var o=0;o<r.length;o++)e.append('<option value="'+r[o][0]+'">'+r[o][1]+"</option>");e.val(i)}},fillCommon:function(t){var e,n=[];if("name"===this.options.firstItem){e=moment.relativeTime||moment.langData()._relativeTime;var r="function"==typeof e[t]?e[t](1,!0,t,!1):e[t];r=r.split(" ").reverse()[0],n.push(["",r])}else"empty"===this.options.firstItem&&n.push(["",""]);return n},fillDay:function(){var t,e,n=this.fillCommon("d"),r=-1!==this.options.template.indexOf("DD"),i=31;if(this.options.smartDays&&this.$month&&this.$year){var o=parseInt(this.$month.val(),10),a=parseInt(this.$year.val(),10);isNaN(o)||isNaN(a)||(i=moment([a,o]).daysInMonth())}for(e=1;i>=e;e++)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillMonth:function(){var t,e,n=this.fillCommon("M"),r=-1!==this.options.template.indexOf("MMMM"),i=-1!==this.options.template.indexOf("MMM"),o=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=r?moment().date(1).month(e).format("MMMM"):i?moment().date(1).month(e).format("MMM"):o?this.leadZero(e+1):e+1,n.push([e,t]);return n},fillYear:function(){var t,e,n=[],r=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=r?e:(e+"").substring(2),n[this.options.yearDescending?"push":"unshift"]([e,t]);return n=this.fillCommon("y").concat(n)},fillHour:function(){var t,e,n=this.fillCommon("h"),r=-1!==this.options.template.indexOf("h"),i=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),o=r?1:0,a=r?12:23;for(e=o;a>=e;e++)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillMinute:function(){var t,e,n=this.fillCommon("m"),r=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillSecond:function(){var t,e,n=this.fillCommon("s"),r=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(t){var e,n={},r=this,i=!1;return angular.forEach(this.map,function(t,e){if("ampm"!==e){var o="day"===e?1:0;return n[e]=r["$"+e]?parseInt(r["$"+e].val(),10):o,isNaN(n[e])?(i=!0,!1):void 0}}),i?"":(this.$ampm&&(n.hour=12===n.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?n.hour:n.hour+12),e=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(e),t=void 0===t?this.options.format:t,null===t?e.isValid()?e:null:e.isValid()?e.format(t):"")},setValue:function(t){function e(t,e){var n={};return angular.forEach(t.children("option"),function(t,r){var i=angular.element(t).attr("value");if(""!==i){var o=Math.abs(i-e);("undefined"==typeof n.distance||o<n.distance)&&(n={value:i,distance:o})}}),n.value}if(t){var n="string"==typeof t?moment(t,this.options.format,!0):moment(t),r=this,i={};n.isValid()&&(angular.forEach(this.map,function(t,e){"ampm"!==e&&(i[e]=n[t[1]]())}),this.$ampm&&(i.hour>=12?(i.ampm="pm",i.hour>12&&(i.hour-=12)):(i.ampm="am",0===i.hour&&(i.hour=12))),angular.forEach(i,function(t,n){r["$"+n]&&("minute"===n&&r.options.minuteStep>1&&r.options.roundTime&&(t=e(r["$"+n],t)),"second"===n&&r.options.secondStep>1&&r.options.roundTime&&(t=e(r["$"+n],t)),r["$"+n].val(t))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(n.format(this.options.format)).triggerHandler("change"))}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},{getInstance:function(e,n){return new t(e,n)}}}]),angular.module("xeditable").factory("editableIcons",function(){var t={"default":{bs2:{ok:"icon-ok icon-white",cancel:"icon-remove"},bs3:{ok:"glyphicon glyphicon-ok",cancel:"glyphicon glyphicon-remove"}},external:{"font-awesome":{ok:"fa fa-check",cancel:"fa fa-times"}}};return t}),angular.module("xeditable").factory("editableThemes",function(){var t={"default":{formTpl:'<form class="editable-wrap"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<span class="editable-controls"></span>',inputTpl:"",errorTpl:'<div class="editable-error" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit">save</button>',cancelTpl:'<button type="button" ng-click="$form.$cancel()">cancel</button>'},bs2:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn" ng-click="$form.$cancel()"><span></span></button>'},bs3:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn btn-default" ng-click="$form.$cancel()"><span></span></button>',buttonsClass:"",inputClass:"",postrender:function(){switch(this.directiveName){case"editableText":case"editableSelect":case"editableTextarea":case"editableEmail":case"editableTel":case"editableNumber":case"editableUrl":case"editableSearch":case"editableDate":case"editableDatetime":case"editableBsdate":case"editableTime":case"editableMonth":case"editableWeek":if(this.inputEl.addClass("form-control"),this.theme.inputClass){if(this.inputEl.attr("multiple")&&("input-sm"===this.theme.inputClass||"input-lg"===this.theme.inputClass))break;this.inputEl.addClass(this.theme.inputClass)}break;case"editableCheckbox":this.editorEl.addClass("checkbox")}this.buttonsEl&&this.theme.buttonsClass&&this.buttonsEl.find("button").addClass(this.theme.buttonsClass)}}};return t});[m
\ No newline at end of file[m
[32m+[m[32mif(function(t,e,n){"use strict";function r(t,e){return e=e||Error,function(){var n,r,i=2,o=arguments,a=o[0],s="["+(t?t+":":"")+a+"] ",u=o[1];for(s+=u.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1),n=e+i;return n<o.length?$t(o[n]):t}),s+="\nhttp://errors.angularjs.org/1.4.0/"+(t?t+"/":"")+a,r=i,n="?";r<o.length;r++,n="&")s+=n+"p"+(r-i)+"="+encodeURIComponent($t(o[r]));return new e(s)}}function i(t){if(null==t||k(t))return!1;var e="length"in Object(t)&&t.length;return t.nodeType===Yr&&e?!0:x(t)||qr(t)||0===e||"number"==typeof e&&e>0&&e-1 in t}function o(t,e,n){var r,a;if(t)if(S(t))for(r in t)"prototype"==r||"length"==r||"name"==r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r,t);else if(qr(t)||i(t)){var s="object"!=typeof t;for(r=0,a=t.length;a>r;r++)(s||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==o)t.forEach(e,n,t);else if(w(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)wr.call(t,r)&&e.call(n,t[r],r,t);return t}function a(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function s(t){return function(e,n){t(n,e)}}function u(){return++Rr}function l(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function c(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;o>i;++i){var a=e[i];if(b(a)||S(a))for(var s=Object.keys(a),u=0,f=s.length;f>u;u++){var p=s[u],h=a[p];n&&b(h)?(b(t[p])||(t[p]=qr(h)?[]:{}),c(t[p],[h],!0)):t[p]=h}}return l(t,r),t}function f(t){return c(t,Nr.call(arguments,1),!1)}function p(t){return c(t,Nr.call(arguments,1),!0)}function h(t){return parseInt(t,10)}function d(t,e){return f(Object.create(t),e)}function m(){}function v(t){return t}function g(t){return function(){return t}}function $(t){return"undefined"==typeof t}function y(t){return"undefined"!=typeof t}function b(t){return null!==t&&"object"==typeof t}function w(t){return null!==t&&"object"==typeof t&&!Mr(t)}function x(t){return"string"==typeof t}function C(t){return"number"==typeof t}function E(t){return"[object Date]"===jr.call(t)}function S(t){return"function"==typeof t}function T(t){return"[object RegExp]"===jr.call(t)}function k(t){return t&&t.window===t}function A(t){return t&&t.$evalAsync&&t.$watch}function N(t){return"[object File]"===jr.call(t)}function O(t){return"[object FormData]"===jr.call(t)}function D(t){return"[object Blob]"===jr.call(t)}function j(t){return"boolean"==typeof t}function M(t){return t&&S(t.then)}function I(t){return Vr.test(jr.call(t))}function P(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function R(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}function F(t){return br(t.nodeName||t[0]&&t[0].nodeName)}function q(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function V(t,e,n,r){function i(t,e,n,r,i){var o=V(e,null,r,i);b(e)&&(r.push(e),i.push(o)),n[t]=o}if(k(t)||A(t))throw Ir("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(I(e))throw Ir("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e){if(t===e)throw Ir("cpi","Can't copy! Source and destination are identical.");if(n=n||[],r=r||[],b(t)){var a=n.indexOf(t);if(-1!==a)return r[a];n.push(t),r.push(e)}var s,u;if(qr(t)){e.length=0;for(var c=0;c<t.length;c++)s=V(t[c],null,n,r),b(t[c])&&(n.push(t[c]),r.push(s)),e.push(s)}else{var f=e.$$hashKey;if(qr(e)?e.length=0:o(e,function(t,n){delete e[n]}),w(t))for(u in t)i(u,t[u],e,n,r);else if(t&&"function"==typeof t.hasOwnProperty)for(u in t)t.hasOwnProperty(u)&&i(u,t[u],e,n,r);else for(u in t)wr.call(t,u)&&i(u,t[u],e,n,r);l(e,f)}}else if(e=t,t)if(qr(t))e=V(t,[],n,r);else if(I(t))e=new t.constructor(t);else if(E(t))e=new Date(t.getTime());else if(T(t))e=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]),e.lastIndex=t.lastIndex;else if(b(t)){var p=Object.create(Mr(t));e=V(t,p,n,r)}return e}function L(t,e){if(qr(t)){e=e||[];for(var n=0,r=t.length;r>n;n++)e[n]=t[n]}else if(b(t)){e=e||{};for(var i in t)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(e[i]=t[i])}return e||t}function H(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var r,i,o,a=typeof t,s=typeof e;if(a==s&&"object"==a){if(!qr(t)){if(E(t))return E(e)?H(t.getTime(),e.getTime()):!1;if(T(t))return T(e)?t.toString()==e.toString():!1;if(A(t)||A(e)||k(t)||k(e)||qr(e)||E(e)||T(e))return!1;o=mt();for(i in t)if("$"!==i.charAt(0)&&!S(t[i])){if(!H(t[i],e[i]))return!1;o[i]=!0}for(i in e)if(!(i in o||"$"===i.charAt(0)||e[i]===n||S(e[i])))return!1;return!0}if(!qr(e))return!1;if((r=t.length)==e.length){for(i=0;r>i;i++)if(!H(t[i],e[i]))return!1;return!0}}return!1}function _(t,e,n){return t.concat(Nr.call(e,n))}function U(t,e){return Nr.call(t,e||0)}function B(t,e){var n=arguments.length>2?U(arguments,2):[];return!S(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,_(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function W(t,r){var i=r;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?i=n:k(r)?i="$WINDOW":r&&e===r?i="$DOCUMENT":A(r)&&(i="$SCOPE"),i}function z(t,e){return"undefined"==typeof t?n:(C(e)||(e=e?2:null),JSON.stringify(t,W,e))}function Y(t){return x(t)?JSON.parse(t):t}function G(t,e){var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function X(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Q(t,e,n){n=n?-1:1;var r=G(e,t.getTimezoneOffset());return X(t,n*(r-t.getTimezoneOffset()))}function J(t){t=Tr(t).clone();try{t.empty()}catch(e){}var n=Tr("<div>").append(t).html();try{return t[0].nodeType===Xr?br(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+br(e)})}catch(e){return br(n)}}function K(t){try{return decodeURIComponent(t)}catch(e){}}function Z(t){var e,n,r={};return o((t||"").split("&"),function(t){if(t&&(e=t.replace(/\+/g,"%20").split("="),n=K(e[0]),y(n))){var i=y(e[1])?K(e[1]):!0;wr.call(r,n)?qr(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i}}),r}function tt(t){var e=[];return o(t,function(t,n){qr(t)?o(t,function(t){e.push(nt(n,!0)+(t===!0?"":"="+nt(t,!0)))}):e.push(nt(n,!0)+(t===!0?"":"="+nt(t,!0)))}),e.length?e.join("&"):""}function et(t){return nt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function nt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function rt(t,e){var n,r,i=Br.length;for(r=0;i>r;++r)if(n=Br[r]+e,x(n=t.getAttribute(n)))return n;return null}function it(t,e){var n,r,i={};o(Br,function(e){var i=e+"app";!n&&t.hasAttribute&&t.hasAttribute(i)&&(n=t,r=t.getAttribute(i))}),o(Br,function(e){var i,o=e+"app";!n&&(i=t.querySelector("["+o.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(o))}),n&&(i.strictDi=null!==rt(n,"strict-di"),e(n,r?[r]:[],i))}function ot(n,r,i){b(i)||(i={});var a={strictDi:!1};i=f(a,i);var s=function(){if(n=Tr(n),n.injector()){var t=n[0]===e?"document":J(n);throw Ir("btstrpd","App Already Bootstrapped with this Element '{0}'",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(t){t.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),r.unshift("ng");var o=Qt(r,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),o},u=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return t&&u.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(u,"")),t&&!l.test(t.name)?s():(t.name=t.name.replace(l,""),Pr.resumeBootstrap=function(t){return o(t,function(t){r.push(t)}),s()},void(S(Pr.resumeDeferredBootstrap)&&Pr.resumeDeferredBootstrap()))}function at(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function st(t){var e=Pr.element(t).injector();if(!e)throw Ir("test","no injector found for element argument to getTestability");return e.get("$$testability")}function ut(t,e){return e=e||"_",t.replace(Wr,function(t,n){return(n?e:"")+t.toLowerCase()})}function lt(){var e;if(!zr){var r=Ur();kr=t.jQuery,y(r)&&(kr=null===r?n:t[r]),kr&&kr.fn.on?(Tr=kr,f(kr.fn,{scope:hi.scope,isolateScope:hi.isolateScope,controller:hi.controller,injector:hi.injector,inheritedData:hi.inheritedData}),e=kr.cleanData,kr.cleanData=function(t){var n;if(Fr)Fr=!1;else for(var r,i=0;null!=(r=t[i]);i++)n=kr._data(r,"events"),n&&n.$destroy&&kr(r).triggerHandler("$destroy");e(t)}):Tr=Tt,Pr.element=Tr,zr=!0}}function ct(t,e,n){if(!t)throw Ir("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function ft(t,e,n){return n&&qr(t)&&(t=t[t.length-1]),ct(S(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function pt(t,e){if("hasOwnProperty"===t)throw Ir("badname","hasOwnProperty is not a valid {0} name",e)}function ht(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,a=i.length,s=0;a>s;s++)r=i[s],t&&(t=(o=t)[r]);return!n&&S(t)?B(o,t):t}function dt(t){var e=t[0],n=t[t.length-1],r=[e];do{if(e=e.nextSibling,!e)break;r.push(e)}while(e!==n);return Tr(r)}function mt(){return Object.create(null)}function vt(t){function e(t,e,n){return t[e]||(t[e]=n())}var n=r("$injector"),i=r("ng"),o=e(t,"angular",Object);return o.$$minErr=o.$$minErr||r,e(o,"module",function(){var t={};return function(r,o,a){var s=function(t,e){if("hasOwnProperty"===t)throw i("badname","hasOwnProperty is not a valid {0} name",e)};return s(r,"module"),o&&t.hasOwnProperty(r)&&(t[r]=null),e(t,r,function(){function t(t,n,r,i){return i||(i=e),function(){return i[r||"push"]([t,n,arguments]),l}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var e=[],i=[],s=[],u=t("$injector","invoke","push",i),l={_invokeQueue:e,_configBlocks:i,_runBlocks:s,requires:o,name:r,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:t("$provide","decorator"),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:u,run:function(t){return s.push(t),this}};return a&&u(a),l})}})}function gt(t){var e=[];return JSON.stringify(t,function(t,n){if(n=W(t,n),b(n)){if(e.indexOf(n)>=0)return"<<already seen>>";e.push(n)}return n})}function $t(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof t?"undefined":"string"!=typeof t?gt(t):t}function yt(e){f(e,{bootstrap:ot,copy:V,extend:f,merge:p,equals:H,element:Tr,forEach:o,injector:Qt,noop:m,bind:B,toJson:z,fromJson:Y,identity:v,isUndefined:$,isDefined:y,isString:x,isFunction:S,isObject:b,isNumber:C,isElement:P,isArray:qr,version:Zr,isDate:E,lowercase:br,uppercase:xr,callbacks:{counter:0},getTestability:st,$$minErr:r,$$csp:_r,reloadWithDebugInfo:at}),Ar=vt(t);try{Ar("ngLocale")}catch(n){Ar("ngLocale",[]).provider("$locale",Oe)}Ar("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:vn}),t.provider("$compile",se).directive({a:lo,input:ko,textarea:ko,form:mo,script:ya,select:xa,style:Ea,option:Ca,ngBind:Oo,ngBindHtml:jo,ngBindTemplate:Do,ngClass:Io,ngClassEven:Ro,ngClassOdd:Po,ngCloak:Fo,ngController:qo,ngForm:vo,ngHide:ha,ngIf:Ho,ngInclude:_o,ngInit:Bo,ngNonBindable:ia,ngPluralize:ua,ngRepeat:la,ngShow:pa,ngStyle:da,ngSwitch:ma,ngSwitchWhen:va,ngSwitchDefault:ga,ngOptions:sa,ngTransclude:$a,ngModel:ea,ngList:Wo,ngChange:Mo,pattern:Ta,ngPattern:Ta,required:Sa,ngRequired:Sa,minlength:Aa,ngMinlength:Aa,maxlength:ka,ngMaxlength:ka,ngValue:No,ngModelOptions:ra}).directive({ngInclude:Uo}).directive(co).directive(Vo),t.provider({$anchorScroll:Jt,$animate:Ai,$$animateQueue:ki,$$AnimateRunner:Ti,$browser:ie,$cacheFactory:oe,$controller:pe,$document:he,$exceptionHandler:de,$filter:On,$interpolate:Ae,$interval:Ne,$http:Ee,$httpParamSerializer:ve,$httpParamSerializerJQLike:ge,$httpBackend:Te,$location:Be,$log:We,$parse:cn,$rootScope:mn,$q:fn,$$q:pn,$sce:bn,$sceDelegate:yn,$sniffer:wn,$templateCache:ae,$templateRequest:xn,$$testability:Cn,$timeout:En,$window:kn,$$rAF:dn,$$asyncCallback:ne,$$jqLite:Wt,$$HashMap:gi,$$cookieReader:Nn})}])}function bt(){return++ei}function wt(t){return t.replace(ii,function(t,e,n,r){return r?n.toUpperCase():n}).replace(oi,"Moz$1")}function xt(t){return!li.test(t)}function Ct(t){var e=t.nodeType;return e===Yr||!e||e===Jr}function Et(t,e){var n,r,i,a,s=e.createDocumentFragment(),u=[];if(xt(t))u.push(e.createTextNode(t));else{for(n=n||s.appendChild(e.createElement("div")),r=(ci.exec(t)||["",""])[1].toLowerCase(),i=pi[r]||pi._default,n.innerHTML=i[1]+t.replace(fi,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;u=_(u,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",o(u,function(t){s.appendChild(t)}),s}function St(t,n){n=n||e;var r;return(r=ui.exec(t))?[n.createElement(r[1])]:(r=Et(t,n))?r.childNodes:[]}function Tt(t){if(t instanceof Tt)return t;var e;if(x(t)&&(t=Lr(t),e=!0),!(this instanceof Tt)){if(e&&"<"!=t.charAt(0))throw si("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Tt(t)}e?Rt(this,St(t)):Rt(this,t)}function kt(t){return t.cloneNode(!0)}function At(t,e){if(e||Ot(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),r=0,i=n.length;i>r;r++)Ot(n[r])}function Nt(t,e,n,r){if(y(r))throw si("offargs","jqLite#off() does not support the `selector` argument");var i=Dt(t),a=i&&i.events,s=i&&i.handle;if(s)if(e)o(e.split(" "),function(e){if(y(n)){var r=a[e];if(q(r||[],n),r&&r.length>0)return}ri(t,e,s),delete a[e]});else for(e in a)"$destroy"!==e&&ri(t,e,s),delete a[e]}function Ot(t,e){var r=t.ng339,i=r&&ti[r];if(i){if(e)return void delete i.data[e];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),Nt(t)),delete ti[r],t.ng339=n}}function Dt(t,e){var r=t.ng339,i=r&&ti[r];return e&&!i&&(t.ng339=r=bt(),i=ti[r]={events:{},data:{},handle:n}),i}function jt(t,e,n){if(Ct(t)){var r=y(n),i=!r&&e&&!b(e),o=!e,a=Dt(t,!i),s=a&&a.data;if(r)s[e]=n;else{if(o)return s;if(i)return s&&s[e];f(s,e)}}}function Mt(t,e){return t.getAttribute?(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1:!1}function It(t,e){e&&t.setAttribute&&o(e.split(" "),function(e){t.setAttribute("class",Lr((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Lr(e)+" "," ")))})}function Pt(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(e.split(" "),function(t){t=Lr(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",Lr(n))}}function Rt(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;n>r;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Ft(t,e){return qt(t,"$"+(e||"ngController")+"Controller")}function qt(t,e,r){t.nodeType==Jr&&(t=t.documentElement);for(var i=qr(e)?e:[e];t;){for(var o=0,a=i.length;a>o;o++)if((r=Tr.data(t,i[o]))!==n)return r;t=t.parentNode||t.nodeType===Kr&&t.host}}function Vt(t){for(At(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Lt(t,e){e||At(t);var n=t.parentNode;n&&n.removeChild(t)}function Ht(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):Tr(n).on("load",e)}function _t(t,e){var n=di[e.toLowerCase()];return n&&mi[F(t)]&&n}function Ut(t,e){var n=t.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&vi[e]}function Bt(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if($(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},o>1&&(i=L(i));for(var s=0;o>s;s++)n.isImmediatePropagationStopped()||i[s].call(t,n)}};return n.elem=t,n}function Wt(){this.$get=function(){return f(Tt,{hasClass:function(t,e){return t.attr&&(t=t[0]),Mt(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Pt(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),It(t,e)}})}}function zt(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"==r||"object"==r&&null!==t?t.$$hashKey=r+":"+(e||u)():r+":"+t}function Yt(t,e){if(e){var n=0;this.nextUid=function(){return++n}}o(t,this.put,this)}function Gt(t){var e=t.toString().replace(wi,""),n=e.match($i);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Xt(t,e,n){var r,i,a,s;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw x(n)&&n||(n=t.name||Gt(t)),xi("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=t.toString().replace(wi,""),a=i.match($i),o(a[1].split(yi),function(t){t.replace(bi,function(t,e,n){r.push(n)})})}t.$inject=r}}else qr(t)?(s=t.length-1,ft(t[s],"fn"),r=t.slice(0,s)):ft(t,"fn",!0);return r}function Qt(t,e){function r(t){return function(e,n){return b(e)?void o(e,s(t)):t(e,n)}}function i(t,e){if(pt(t,"service"),(S(e)||qr(e))&&(e=T.instantiate(e)),!e.$get)throw xi("pget","Provider '{0}' must define $get factory method.",t);return E[t+y]=e}function a(t,e){return function(){var n=A.invoke(e,this);if($(n))throw xi("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function u(t,e,n){return i(t,{$get:n!==!1?a(t,e):e})}function l(t,e){return u(t,["$injector",function(t){return t.instantiate(e)}])}function c(t,e){return u(t,g(e),!1)}function f(t,e){pt(t,"constant"),E[t]=e,k[t]=e}function p(t,e){var n=T.get(t+y),r=n.$get;n.$get=function(){var t=A.invoke(r,n);return A.invoke(e,null,{$delegate:t})}}function h(t){var e,n=[];return o(t,function(t){function r(t){var e,n;for(e=0,n=t.length;n>e;e++){var r=t[e],i=T.get(r[0]);i[r[1]].apply(i,r[2])}}if(!C.get(t)){C.put(t,!0);try{x(t)?(e=Ar(t),n=n.concat(h(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):S(t)?n.push(T.invoke(t)):qr(t)?n.push(T.invoke(t)):ft(t,"module")}catch(i){throw qr(t)&&(t=t[t.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),xi("modulerr","Failed to instantiate module {0} due to:\n{1}",t,i.stack||i.message||i)}}}),n}function d(t,n){function r(e,r){if(t.hasOwnProperty(e)){if(t[e]===v)throw xi("cdep","Circular dependency found: {0}",e+" <- "+w.join(" <- "));return t[e]}try{return w.unshift(e),t[e]=v,t[e]=n(e,r)}catch(i){throw t[e]===v&&delete t[e],i}finally{w.shift()}}function i(t,n,i,o){"string"==typeof i&&(o=i,i=null);var a,s,u,l=[],c=Qt.$$annotate(t,e,o);for(s=0,a=c.length;a>s;s++){if(u=c[s],"string"!=typeof u)throw xi("itkn","Incorrect injection token! Expected service name as string, got {0}",u);l.push(i&&i.hasOwnProperty(u)?i[u]:r(u,o))}return qr(t)&&(t=t[a]),t.apply(n,l)}function o(t,e,n){var r=Object.create((qr(t)?t[t.length-1]:t).prototype||null),o=i(t,r,e,n);return b(o)||S(o)?o:r}return{invoke:i,instantiate:o,get:r,annotate:Qt.$$annotate,has:function(e){return E.hasOwnProperty(e+y)||t.hasOwnProperty(e)}}}e=e===!0;var v={},y="Provider",w=[],C=new Yt([],!0),E={$provide:{provider:r(i),factory:r(u),service:r(l),value:r(c),constant:r(f),decorator:p}},T=E.$injector=d(E,function(t,e){throw Pr.isString(e)&&w.push(e),xi("unpr","Unknown provider: {0}",w.join(" <- "))}),k={},A=k.$injector=d(k,function(t,e){var r=T.get(t+y,e);return A.invoke(r.$get,r,n,t)});return o(h(t),function(t){A.invoke(t||m)}),A}function Jt(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,r){function i(t){var e=null;return Array.prototype.some.call(t,function(t){return"a"===F(t)?(e=t,!0):void 0}),e}function o(){var t=s.yOffset;if(S(t))t=t();else if(P(t)){var n=t[0],r=e.getComputedStyle(n);t="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else C(t)||(t=0);return t}function a(t){if(t){t.scrollIntoView();var n=o();if(n){var r=t.getBoundingClientRect().top;e.scrollBy(0,r-n)}}else e.scrollTo(0,0)}function s(t){t=x(t)?t:n.hash();var e;t?(e=u.getElementById(t))?a(e):(e=i(u.getElementsByName(t)))?a(e):"top"===t&&a(null):a(null)}var u=e.document;return t&&r.$watch(function(){return n.hash()},function(t,e){(t!==e||""!==t)&&Ht(function(){r.$evalAsync(s)})}),s}]}function Kt(t,e){return t||e?t?e?(qr(t)&&(t=t.join(" ")),qr(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function Zt(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Ei)return n}}function te(t){x(t)&&(t=t.split(" "));var e=mt();return o(t,function(t){t.length&&(e[t]=!0)}),e}function ee(t){return b(t)?t:{}}function ne(){this.$get=["$$rAF","$timeout",function(t,e){return t.supported?function(e){return t(e)}:function(t){return e(t,0,!1)}}]}function re(t,e,n,r){function i(t){try{t.apply(null,U(arguments,1))}finally{if(y--,0===y)for(;b.length;)try{b.pop()()}catch(e){n.error(e)}}}function a(t){var e=t.indexOf("#");return-1===e?"":t.substr(e+1)}function s(){l(),c()}function u(){try{return h.state}catch(t){}}function l(){w=u(),w=$(w)?null:w,H(w,A)&&(w=A),A=w}function c(){(C!==f.url()||x!==w)&&(C=f.url(),x=w,o(T,function(t){t(f.url(),w)}))}var f=this,p=(e[0],t.location),h=t.history,d=t.setTimeout,v=t.clearTimeout,g={};f.isMock=!1;var y=0,b=[];f.$$completeOutstandingRequest=i,f.$$incOutstandingRequestCount=function(){y++},f.notifyWhenNoOutstandingRequests=function(t){0===y?t():b.push(t)};var w,x,C=p.href,E=e.find("base"),S=null;l(),x=w,f.url=function(e,n,i){if($(i)&&(i=null),p!==t.location&&(p=t.location),h!==t.history&&(h=t.history),e){var o=x===i;if(C===e&&(!r.history||o))return f;var s=C&&Pe(C)===Pe(e);return C=e,x=i,!r.history||s&&o?(s||(S=e),n?p.replace(e):s?p.hash=a(e):p.href=e):(h[n?"replaceState":"pushState"](i,"",e),l(),x=w),f}return S||p.href.replace(/%27/g,"'")},f.state=function(){return w};var T=[],k=!1,A=null;f.onUrlChange=function(e){return k||(r.history&&Tr(t).on("popstate",s),Tr(t).on("hashchange",s),k=!0),T.push(e),e},f.$$applicationDestroyed=function(){Tr(t).off("hashchange popstate",s)},f.$$checkUrlChange=c,f.baseHref=function(){var t=E.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""},f.defer=function(t,e){var n;return y++,n=d(function(){delete g[n],i(t)},e||0),g[n]=!0,n},f.defer.cancel=function(t){return g[t]?(delete g[t],v(t),i(m),!0):!1}}function ie(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new re(t,r,e,n)}]}function oe(){this.$get=function(){function t(t,n){function i(t){t!=p&&(h?h==t&&(h=t.n):h=t,o(t.n,t.p),o(t,p),p=t,p.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var a=0,s=f({},n,{id:t}),u={},l=n&&n.capacity||Number.MAX_VALUE,c={},p=null,h=null;return e[t]={put:function(t,e){if(!$(e)){if(l<Number.MAX_VALUE){var n=c[t]||(c[t]={key:t});i(n)}return t in u||a++,u[t]=e,a>l&&this.remove(h.key),e}},get:function(t){if(l<Number.MAX_VALUE){var e=c[t];if(!e)return;i(e)}return u[t]},remove:function(t){if(l<Number.MAX_VALUE){var e=c[t];if(!e)return;e==p&&(p=e.p),e==h&&(h=e.n),o(e.n,e.p),delete c[t]}delete u[t],a--},removeAll:function(){u={},a=0,c={},p=h=null},destroy:function(){u=null,s=null,c=null,delete e[t]},info:function(){return f({},s,{size:a})}}}var e={};return t.info=function(){var t={};return o(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function ae(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function se(t,r){function i(t,e,n){var r=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return o(t,function(t,o){var a=t.match(r);if(!a)throw Ni("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o}}),i}function a(t,e){var n={isolateScope:null,bindToController:null};if(b(t.scope)&&(t.bindToController===!0?(n.bindToController=i(t.scope,e,!0),n.isolateScope={}):n.isolateScope=i(t.scope,e,!1)),b(t.bindToController)&&(n.bindToController=i(t.bindToController,e,!0)),b(n.bindToController)){var r=t.controller,o=t.controllerAs;if(!r)throw Ni("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);if(!fe(r,o))throw Ni("noident","Cannot bind to controller without identifier for directive '{0}'.",e)}return n}function u(t){var e=t.charAt(0);if(!e||e!==br(e))throw Ni("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw Ni("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}var l={},c="Directive",p=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,h=/(([\w\-]+)(?:\:([^;]+))?;?)/,$=R("ngSrc,ngSrcset,src,srcset"),w=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,C=/^(on[a-z]+|formaction)$/;this.directive=function T(e,n){return pt(e,"directive"),x(e)?(u(e),ct(n,"directiveFactory"),l.hasOwnProperty(e)||(l[e]=[],t.factory(e+c,["$injector","$exceptionHandler",function(t,n){var r=[];return o(l[e],function(i,o){try{var s=t.invoke(i);S(s)?s={compile:g(s)}:!s.compile&&s.link&&(s.compile=g(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||e,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA";var u=s.$$bindings=a(s,s.name);b(u.isolateScope)&&(s.$$isolateBindings=u.isolateScope),r.push(s)}catch(l){n(l)}}),r}])),l[e].push(n)):o(e,s(T)),this},this.aHrefSanitizationWhitelist=function(t){return y(t)?(r.aHrefSanitizationWhitelist(t),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return y(t)?(r.imgSrcSanitizationWhitelist(t),this):r.imgSrcSanitizationWhitelist()};var E=!0;this.debugInfoEnabled=function(t){return y(t)?(E=t,this):E},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(t,r,i,a,s,u,g,y,T,k,N){function O(t,e){try{t.addClass(e)}catch(n){}}function D(t,e,n,r,i){t instanceof Tr||(t=Tr(t)),o(t,function(e,n){e.nodeType==Xr&&e.nodeValue.match(/\S+/)&&(t[n]=Tr(e).wrap("<span></span>").parent()[0])});var a=M(t,e,t,n,r,i);D.$$addScopeClass(t);var s=null;return function(e,n,r){ct(e,"scope"),r=r||{};var i=r.parentBoundTranscludeFn,o=r.transcludeControllers,u=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),s||(s=j(u));var l;if(l="html"!==s?Tr(K(s,Tr("<div>").append(t).html())):n?hi.clone.call(t):t,o)for(var c in o)l.data("$"+c+"Controller",o[c].instance);return D.$$addScopeInfo(l,e),n&&n(l,e),a&&a(e,l,l,i),l}}function j(t){var e=t&&t[0];return e&&"foreignobject"!==F(e)&&e.toString().match(/SVG/)?"svg":"html"}function M(t,e,r,i,o,a){function s(t,r,i,o){var a,s,u,l,c,f,p,h,v;if(d){var g=r.length;for(v=new Array(g),c=0;c<m.length;c+=3)p=m[c],v[p]=r[p]}else v=r;for(c=0,f=m.length;f>c;)if(u=v[m[c++]],a=m[c++],s=m[c++],a){if(a.scope){l=t.$new(),D.$$addScopeInfo(Tr(u),l);var $=a.$$destroyBindings;$&&(a.$$destroyBindings=null,l.$on("$destroyed",$))}else l=t;h=a.transcludeOnThisElement?I(t,a.transclude,o,a.elementTranscludeOnThisElement):!a.templateOnThisElement&&o?o:!o&&e?I(t,e):null,a(s,l,u,i,h,a)}else s&&s(t,u.childNodes,n,o)}for(var u,l,c,f,p,h,d,m=[],v=0;v<t.length;v++)u=new ot,l=P(t[v],[],u,0===v?i:n,o),c=l.length?L(l,t[v],u,e,r,null,[],[],a):null,c&&c.scope&&D.$$addScopeClass(u.$$element),p=c&&c.terminal||!(f=t[v].childNodes)||!f.length?null:M(f,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||p)&&(m.push(v,c,p),h=!0,d=d||c),a=null;return h?s:null}function I(t,e,n,r){var i=function(r,i,o,a,s){return r||(r=t.$new(!1,s),r.$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})};return i}function P(t,e,n,r,i){var o,a,s=t.nodeType,u=n.$attr;switch(s){case Yr:B(e,ue(F(t)),"E",r,i);for(var l,c,f,d,m,v,g=t.attributes,$=0,y=g&&g.length;y>$;$++){var w=!1,C=!1;l=g[$],c=l.name,m=Lr(l.value),d=ue(c),(v=ft.test(d))&&(c=c.replace(Oi,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var E=d.replace(/(Start|End)$/,"");W(E)&&d===E+"Start"&&(w=c,C=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),f=ue(c.toLowerCase()),u[f]=c,(v||!n.hasOwnProperty(f))&&(n[f]=m,_t(t,f)&&(n[f]=!0)),tt(t,e,m,f,v),B(e,f,"A",r,i,w,C)}if(a=t.className,b(a)&&(a=a.animVal),x(a)&&""!==a)for(;o=h.exec(a);)f=ue(o[2]),B(e,f,"C",r,i)&&(n[f]=Lr(o[3])),a=a.substr(o.index+o[0].length);break;case Xr:Q(e,t.nodeValue);break;case Qr:try{o=p.exec(t.nodeValue),o&&(f=ue(o[1]),B(e,f,"M",r,i)&&(n[f]=Lr(o[2])))}catch(S){}}return e.sort(G),e}function R(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw Ni("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType==Yr&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0)}else r.push(t);return Tr(r)}function V(t,e,n){return function(r,i,o,a,s){return i=R(i[0],e,n),t(r,i,o,a,s)}}function L(t,r,o,a,s,l,c,f,p){function h(t,e,n,r){t&&(n&&(t=V(t,n,r)),t.require=$.require,t.directiveName=y,(O===$||$.$$isolateScope)&&(t=nt(t,{isolateScope:!0})),c.push(t)),e&&(n&&(e=V(e,n,r)),e.require=$.require,e.directiveName=y,(O===$||$.$$isolateScope)&&(e=nt(e,{isolateScope:!0})),f.push(e))}function d(t,e,n,r){var i;if(x(e)){var o=e.match(w),a=e.substring(o[0].length),s=o[1]||o[3],u="?"===o[2];if("^^"===s?n=n.parent():(i=r&&r[a],i=i&&i.instance),!i){var l="$"+a+"Controller";i=s?n.inheritedData(l):n.data(l)}if(!i&&!u)throw Ni("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(qr(e)){i=[];for(var c=0,f=e.length;f>c;c++)i[c]=d(t,e[c],n,r)}return i||null}function m(t,e,n,r,i,o){var a=mt();for(var s in r){var l=r[s],c={$scope:l===O||l.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},f=l.controller;"@"==f&&(f=e[l.name]);var p=u(f,c,!0,l.controllerAs);a[l.name]=p,q||t.data("$"+l.name+"Controller",p.instance)}return a}function v(t,e,i,a,s,u){function l(t,e,r){var i;return A(t)||(r=e,e=t,t=n),q&&(i=w),r||(r=q?C.parent():C),s(t,e,i,r,I)}var p,h,v,y,b,w,x,C,E;if(r===i?(E=o,C=o.$$element):(C=Tr(i),E=new ot(C,o)),O&&(b=e.$new(!0)),s&&(x=l,x.$$boundTransclude=s),N&&(w=m(C,E,x,N,b,e)),O&&(D.$$addScopeInfo(C,b,!0,!(j&&(j===O||j===O.$$originalDirective))),D.$$addScopeClass(C,!0),b.$$isolateBindings=O.$$isolateBindings,it(e,E,b,b.$$isolateBindings,O,b)),w){var S,T,k=O||g;k&&w[k.name]&&(S=k.$$bindings.bindToController,y=w[k.name],y&&y.identifier&&S&&(T=y,u.$$destroyBindings=it(e,E,y.instance,S,k)));for(p in w){y=w[p];var M=y();M!==y.instance&&(y.instance=M,C.data("$"+$.name+"Controller",M),y===T&&(u.$$destroyBindings(),u.$$destroyBindings=it(e,E,M,S,k)))}}for(p=0,h=c.length;h>p;p++)v=c[p],rt(v,v.isolateScope?b:e,C,E,v.require&&d(v.directiveName,v.require,C,w),x);var I=e;for(O&&(O.template||null===O.templateUrl)&&(I=b),t&&t(I,i.childNodes,n,s),p=f.length-1;p>=0;p--)v=f[p],rt(v,v.isolateScope?b:e,C,E,v.require&&d(v.directiveName,v.require,C,w),x)}p=p||{};for(var g,$,y,C,E,T,k=-Number.MAX_VALUE,N=p.controllerDirectives,O=p.newIsolateScopeDirective,j=p.templateDirective,M=p.nonTlbTranscludeDirective,I=!1,F=!1,q=p.hasElementTranscludeDirective,L=o.$$element=Tr(r),H=l,B=a,W=0,G=t.length;G>W;W++){$=t[W];var Q=$.$$start,Z=$.$$end;if(Q&&(L=R(r,Q,Z)),C=n,k>$.priority)break;if((T=$.scope)&&($.templateUrl||(b(T)?(X("new/isolated scope",O||g,$,L),O=$):X("new/isolated scope",O,$,L)),g=g||$),y=$.name,!$.templateUrl&&$.controller&&(T=$.controller,N=N||mt(),X("'"+y+"' controller",N[y],$,L),N[y]=$),(T=$.transclude)&&(I=!0,$.$$tlb||(X("transclusion",M,$,L),M=$),"element"==T?(q=!0,k=$.priority,C=L,L=o.$$element=Tr(e.createComment(" "+y+": "+o[y]+" ")),r=L[0],et(s,U(C),r),B=D(C,a,k,H&&H.name,{nonTlbTranscludeDirective:M})):(C=Tr(kt(r)).contents(),L.empty(),B=D(C,a))),$.template)if(F=!0,[m
[32m+[m[32mX("template",j,$,L),j=$,T=S($.template)?$.template(L,o):$.template,T=lt(T),$.replace){if(H=$,C=xt(T)?[]:ce(K($.templateNamespace,Lr(T))),r=C[0],1!=C.length||r.nodeType!==Yr)throw Ni("tplrt","Template for directive '{0}' must have exactly one root element. {1}",y,"");et(s,L,r);var tt={$attr:{}},at=P(r,[],tt),st=t.splice(W+1,t.length-(W+1));O&&_(at),t=t.concat(at).concat(st),z(o,tt),G=t.length}else L.html(T);if($.templateUrl)F=!0,X("template",j,$,L),j=$,$.replace&&(H=$),v=Y(t.splice(W,t.length-W),L,o,s,I&&B,c,f,{controllerDirectives:N,newIsolateScopeDirective:O,templateDirective:j,nonTlbTranscludeDirective:M}),G=t.length;else if($.compile)try{E=$.compile(L,o,B),S(E)?h(null,E,Q,Z):E&&h(E.pre,E.post,Q,Z)}catch(ut){i(ut,J(L))}$.terminal&&(v.terminal=!0,k=Math.max(k,$.priority))}return v.scope=g&&g.scope===!0,v.transcludeOnThisElement=I,v.elementTranscludeOnThisElement=q,v.templateOnThisElement=F,v.transclude=B,p.hasElementTranscludeDirective=q,v}function _(t){for(var e=0,n=t.length;n>e;e++)t[e]=d(t[e],{$$isolateScope:!0})}function B(e,r,o,a,s,u,f){if(r===s)return null;var p=null;if(l.hasOwnProperty(r))for(var h,m=t.get(r+c),v=0,g=m.length;g>v;v++)try{h=m[v],(a===n||a>h.priority)&&-1!=h.restrict.indexOf(o)&&(u&&(h=d(h,{$$start:u,$$end:f})),e.push(h),p=h)}catch($){i($)}return p}function W(e){if(l.hasOwnProperty(e))for(var n,r=t.get(e+c),i=0,o=r.length;o>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function z(t,e){var n=e.$attr,r=t.$attr,i=t.$$element;o(t,function(r,i){"$"!=i.charAt(0)&&(e[i]&&e[i]!==r&&(r+=("style"===i?";":" ")+e[i]),t.$set(i,r,!0,n[i]))}),o(e,function(e,o){"class"==o?(O(i,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==o?(i.attr("style",i.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==o.charAt(0)||t.hasOwnProperty(o)||(t[o]=e,r[o]=n[o])})}function Y(t,e,n,r,i,s,u,l){var c,f,p=[],h=e[0],m=t.shift(),v=d(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),g=S(m.templateUrl)?m.templateUrl(e,n):m.templateUrl,$=m.templateNamespace;return e.empty(),a(T.getTrustedResourceUrl(g)).then(function(a){var d,y,w,x;if(a=lt(a),m.replace){if(w=xt(a)?[]:ce(K($,Lr(a))),d=w[0],1!=w.length||d.nodeType!==Yr)throw Ni("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,g);y={$attr:{}},et(r,e,d);var C=P(d,[],y);b(m.scope)&&_(C),t=C.concat(t),z(n,y)}else d=h,e.html(a);for(t.unshift(v),c=L(t,d,n,i,e,m,s,u,l),o(r,function(t,n){t==d&&(r[n]=e[0])}),f=M(e[0].childNodes,i);p.length;){var E=p.shift(),S=p.shift(),T=p.shift(),k=p.shift(),A=e[0];if(!E.$$destroyed){if(S!==h){var N=S.className;l.hasElementTranscludeDirective&&m.replace||(A=kt(d)),et(T,Tr(S),A),O(Tr(A),N)}x=c.transcludeOnThisElement?I(E,c.transclude,k):k,c(f,E,A,r,x,c)}}p=null}),function(t,e,n,r,i){var o=i;e.$$destroyed||(p?p.push(e,n,r,o):(c.transcludeOnThisElement&&(o=I(e,c.transclude,i)),c(f,e,n,r,o,c)))}}function G(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function X(t,e,n,r){if(e)throw Ni("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",e.name,n.name,t,J(r))}function Q(t,e){var n=r(e,!0);n&&t.push({priority:0,compile:function(t){var e=t.parent(),r=!!e.length;return r&&D.$$addBindingClass(e),function(t,e){var i=e.parent();r||D.$$addBindingClass(i),D.$$addBindingInfo(i,n.expressions),t.$watch(n,function(t){e[0].nodeValue=t})}}})}function K(t,n){switch(t=br(t||"html")){case"svg":case"math":var r=e.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function Z(t,e){if("srcdoc"==e)return T.HTML;var n=F(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?T.RESOURCE_URL:void 0}function tt(t,e,n,i,o){var a=Z(t,i);o=$[i]||o;var s=r(n,!0,a,o);if(s){if("multiple"===i&&"select"===F(t))throw Ni("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",J(t));e.push({priority:100,compile:function(){return{pre:function(t,e,u){var l=u.$$observers||(u.$$observers={});if(C.test(i))throw Ni("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=u[i];c!==n&&(s=c&&r(c,!0,a,o),n=c),s&&(u[i]=s(t),(l[i]||(l[i]=[])).$$inter=!0,(u.$$observers&&u.$$observers[i].$$scope||t).$watch(s,function(t,e){"class"===i&&t!=e?u.$updateClass(t,e):u.$set(i,t)}))}}}})}}function et(t,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(t)for(i=0,o=t.length;o>i;i++)if(t[i]==a){t[i++]=r;for(var l=i,c=l+s-1,f=t.length;f>l;l++,c++)f>c?t[l]=t[c]:delete t[l];t.length-=s-1,t.context===a&&(t.context=r);break}u&&u.replaceChild(r,a);var p=e.createDocumentFragment();p.appendChild(a),Tr(r).data(Tr(a).data()),kr?(Fr=!0,kr.cleanData([a])):delete Tr.cache[a[Tr.expando]];for(var h=1,d=n.length;d>h;h++){var m=n[h];Tr(m).remove(),p.appendChild(m),delete n[h]}n[0]=r,n.length=1}function nt(t,e){return f(function(){return t.apply(null,arguments)},t,e)}function rt(t,e,n,r,o,a){try{t(e,n,r,o,a)}catch(s){i(s,J(n))}}function it(t,e,n,i,a,u){var l;o(i,function(i,o){var u,c,f,p,h=i.attrName,d=i.optional,v=i.mode;switch(v){case"@":e.$observe(h,function(t){n[o]=t}),e.$$observers[h].$$scope=t,e[h]&&(n[o]=r(e[h])(t));break;case"=":if(d&&!e[h])return;c=s(e[h]),p=c.literal?H:function(t,e){return t===e||t!==t&&e!==e},f=c.assign||function(){throw u=n[o]=c(t),Ni("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",e[h],a.name)},u=n[o]=c(t);var g=function(e){return p(e,n[o])||(p(e,u)?f(t,e=n[o]):n[o]=e),u=e};g.$stateful=!0;var $;$=i.collection?t.$watchCollection(e[h],g):t.$watch(s(e[h],g),null,c.literal),l=l||[],l.push($);break;case"&":if(!e.hasOwnProperty(h)&&d)break;if(c=s(e[h]),c===m&&d)break;n[o]=function(e){return c(t,e)}}});var c=l?function(){for(var t=0,e=l.length;e>t;++t)l[t]()}:m;return u&&c!==m?(u.$on("$destroy",c),m):c}var ot=function(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;r>n;n++)i=o[n],this[i]=e[i]}else this.$attr={};this.$$element=t};ot.prototype={$normalize:ue,$addClass:function(t){t&&t.length>0&&k.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&k.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=le(t,e);n&&n.length&&k.addClass(this.$$element,n);var r=le(e,t);r&&r.length&&k.removeClass(this.$$element,r)},$set:function(t,e,r,a){var s,u=this.$$element[0],l=_t(u,t),c=Ut(u,t),f=t;if(l?(this.$$element.prop(t,e),a=l):c&&(this[c]=e,f=c),this[t]=e,a?this.$attr[t]=a:(a=this.$attr[t],a||(this.$attr[t]=a=ut(t,"-"))),s=F(this.$$element),"a"===s&&"href"===t||"img"===s&&"src"===t)this[t]=e=N(e,"src"===t);else if("img"===s&&"srcset"===t){for(var p="",h=Lr(e),d=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,m=/\s/.test(h)?d:/(,)/,v=h.split(m),g=Math.floor(v.length/2),$=0;g>$;$++){var y=2*$;p+=N(Lr(v[y]),!0),p+=" "+Lr(v[y+1])}var b=Lr(v[2*$]).split(/\s/);p+=N(Lr(b[0]),!0),2===b.length&&(p+=" "+Lr(b[1])),this[t]=e=p}r!==!1&&(null===e||e===n?this.$$element.removeAttr(a):this.$$element.attr(a,e));var w=this.$$observers;w&&o(w[f],function(t){try{t(e)}catch(n){i(n)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=mt()),i=r[t]||(r[t]=[]);return i.push(e),g.$evalAsync(function(){!i.$$inter&&n.hasOwnProperty(t)&&e(n[t])}),function(){q(i,e)}}};var at=r.startSymbol(),st=r.endSymbol(),lt="{{"==at||"}}"==st?v:function(t){return t.replace(/\{\{/g,at).replace(/}}/g,st)},ft=/^ngAttr[A-Z]/;return D.$$addBindingInfo=E?function(t,e){var n=t.data("$binding")||[];qr(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:m,D.$$addBindingClass=E?function(t){O(t,"ng-binding")}:m,D.$$addScopeInfo=E?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:m,D.$$addScopeClass=E?function(t,e){O(t,e?"ng-isolate-scope":"ng-scope")}:m,D}]}function ue(t){return wt(t.replace(Oi,""))}function le(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue t;n+=(n.length>0?" ":"")+a}return n}function ce(t){t=Tr(t);var e=t.length;if(1>=e)return t;for(;e--;){var n=t[e];n.nodeType===Qr&&Or.call(t,e,1)}return t}function fe(t,e){if(e&&x(e))return e;if(x(t)){var n=ji.exec(t);if(n)return n[3]}}function pe(){var t={},e=!1;this.register=function(e,n){pt(e,"controller"),b(e)?f(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(i,o){function a(t,e,n,i){if(!t||!b(t.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e);t.$scope[e]=n}return function(r,s,u,l){var c,p,h,d;if(u=u===!0,l&&x(l)&&(d=l),x(r)){if(p=r.match(ji),!p)throw Di("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);h=p[1],d=d||p[3],r=t.hasOwnProperty(h)?t[h]:ht(s.$scope,h,!0)||(e?ht(o,h,!0):n),ft(r,h,!0)}if(u){var m=(qr(r)?r[r.length-1]:r).prototype;c=Object.create(m||null),d&&a(s,d,c,h||r.name);var v;return v=f(function(){var t=i.invoke(r,c,s,h);return t!==c&&(b(t)||S(t))&&(c=t,d&&a(s,d,c,h||r.name)),c},{instance:c,identifier:d})}return c=i.instantiate(r,s,h),d&&a(s,d,c,h||r.name),c}}]}function he(){this.$get=["$window",function(t){return Tr(t.document)}]}function de(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function me(t){return b(t)?E(t)?t.toISOString():z(t):t}function ve(){this.$get=function(){return function(t){if(!t)return"";var e=[];return a(t,function(t,n){null===t||$(t)||(qr(t)?o(t,function(t,r){e.push(nt(n)+"="+nt(me(t)))}):e.push(nt(n)+"="+nt(me(t))))}),e.join("&")}}}function ge(){this.$get=function(){return function(t){function e(t,r,i){null===t||$(t)||(qr(t)?o(t,function(t){e(t,r+"[]")}):b(t)&&!E(t)?a(t,function(t,n){e(t,r+(i?"":"[")+n+(i?"":"]"))}):n.push(nt(r)+"="+nt(me(t))))}if(!t)return"";var n=[];return e(t,"",!0),n.join("&")}}}function $e(t,e){if(x(t)){var n=t.replace(Fi,"").trim();if(n){var r=e("Content-Type");(r&&0===r.indexOf(Mi)||ye(n))&&(t=Y(n))}}return t}function ye(t){var e=t.match(Pi);return e&&Ri[e[0]].test(t)}function be(t){function e(t,e){t&&(r[t]=r[t]?r[t]+", "+e:e)}var n,r=mt();return x(t)?o(t.split("\n"),function(t){n=t.indexOf(":"),e(br(Lr(t.substr(0,n))),Lr(t.substr(n+1)))}):b(t)&&o(t,function(t,n){e(br(n),Lr(t))}),r}function we(t){var e;return function(n){if(e||(e=be(t)),n){var r=e[br(n)];return void 0===r&&(r=null),r}return e}}function xe(t,e,n,r){return S(r)?r(t,e,n):(o(r,function(r){t=r(t,e,n)}),t)}function Ce(t){return t>=200&&300>t}function Ee(){var t=this.defaults={transformResponse:[$e],transformRequest:[function(t){return!b(t)||N(t)||D(t)||O(t)?t:z(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(Ii),put:L(Ii),patch:L(Ii)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},e=!1;this.useApplyAsync=function(t){return y(t)?(e=!!t,this):e};var i=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,s,u,l,c,p){function h(e){function i(t){var e=f({},t);return t.data?e.data=xe(t.data,t.headers,t.status,u.transformResponse):e.data=t.data,Ce(t.status)?e:c.reject(e)}function a(t,e){var n,r={};return o(t,function(t,i){S(t)?(n=t(e),null!=n&&(r[i]=n)):r[i]=t}),r}function s(e){var n,r,i,o=t.headers,s=f({},e.headers);o=f({},o.common,o[br(e.method)]);t:for(n in o){r=br(n);for(i in s)if(br(i)===r)continue t;s[n]=o[n]}return a(s,L(e))}if(!Pr.isObject(e))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",e);var u=f({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},e);u.headers=s(e),u.method=xr(u.method),u.paramSerializer=x(u.paramSerializer)?p.get(u.paramSerializer):u.paramSerializer;var l=function(e){var r=e.headers,a=xe(e.data,we(r),n,e.transformRequest);return $(a)&&o(r,function(t,e){"content-type"===br(e)&&delete r[e]}),$(e.withCredentials)&&!$(t.withCredentials)&&(e.withCredentials=t.withCredentials),v(e,a).then(i,i)},h=[l,n],d=c.when(u);for(o(C,function(t){(t.request||t.requestError)&&h.unshift(t.request,t.requestError),(t.response||t.responseError)&&h.push(t.response,t.responseError)});h.length;){var m=h.shift(),g=h.shift();d=d.then(m,g)}return d.success=function(t){return ft(t,"fn"),d.then(function(e){t(e.data,e.status,e.headers,u)}),d},d.error=function(t){return ft(t,"fn"),d.then(null,function(e){t(e.data,e.status,e.headers,u)}),d},d}function d(t){o(arguments,function(t){h[t]=function(e,n){return h(f({},n||{},{method:t,url:e}))}})}function m(t){o(arguments,function(t){h[t]=function(e,n,r){return h(f({},r||{},{method:t,url:e,data:n}))}})}function v(r,i){function o(t,n,r,i){function o(){u(n,t,r,i)}d&&(Ce(t)?d.put(E,[t,n,be(r),i]):d.remove(E)),e?l.$applyAsync(o):(o(),l.$$phase||l.$apply())}function u(t,e,n,i){e=Math.max(e,0),(Ce(e)?v.resolve:v.reject)({data:t,status:e,headers:we(n),config:r,statusText:i})}function f(t){u(t.data,t.status,L(t.headers()),t.statusText)}function p(){var t=h.pendingRequests.indexOf(r);-1!==t&&h.pendingRequests.splice(t,1)}var d,m,v=c.defer(),x=v.promise,C=r.headers,E=g(r.url,r.paramSerializer(r.params));if(h.pendingRequests.push(r),x.then(p,p),!r.cache&&!t.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(d=b(r.cache)?r.cache:b(t.cache)?t.cache:w),d&&(m=d.get(E),y(m)?M(m)?m.then(f,f):qr(m)?u(m[1],m[0],L(m[2]),m[3]):u(m,200,{},"OK"):d.put(E,x)),$(m)){var S=Tn(r.url)?s()[r.xsrfCookieName||t.xsrfCookieName]:n;S&&(C[r.xsrfHeaderName||t.xsrfHeaderName]=S),a(r.method,E,i,o,C,r.timeout,r.withCredentials,r.responseType)}return x}function g(t,e){return e.length>0&&(t+=(-1==t.indexOf("?")?"?":"&")+e),t}var w=u("$http");t.paramSerializer=x(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var C=[];return o(i,function(t){C.unshift(x(t)?p.get(t):p.invoke(t))}),h.pendingRequests=[],d("get","delete","head","jsonp"),m("post","put","patch"),h.defaults=t,h}]}function Se(){return new t.XMLHttpRequest}function Te(){this.$get=["$browser","$window","$document",function(t,e,n){return ke(t,Se,t.defer,e.angular.callbacks,n[0])}]}function ke(t,e,r,i,a){function s(t,e,n){var r=a.createElement("script"),o=null;return r.type="text/javascript",r.src=t,r.async=!0,o=function(t){ri(r,"load",o),ri(r,"error",o),a.body.removeChild(r),r=null;var s=-1,u="unknown";t&&("load"!==t.type||i[e].called||(t={type:"error"}),u=t.type,s="error"===t.type?404:200),n&&n(s,u)},ni(r,"load",o),ni(r,"error",o),a.body.appendChild(r),o}return function(a,u,l,c,f,p,h,d){function v(){b&&b(),w&&w.abort()}function g(e,i,o,a,s){E!==n&&r.cancel(E),b=w=null,e(i,o,a,s),t.$$completeOutstandingRequest(m)}if(t.$$incOutstandingRequestCount(),u=u||t.url(),"jsonp"==br(a)){var $="_"+(i.counter++).toString(36);i[$]=function(t){i[$].data=t,i[$].called=!0};var b=s(u.replace("JSON_CALLBACK","angular.callbacks."+$),$,function(t,e){g(c,t,i[$].data,"",e),i[$]=m})}else{var w=e();w.open(a,u,!0),o(f,function(t,e){y(t)&&w.setRequestHeader(e,t)}),w.onload=function(){var t=w.statusText||"",e="response"in w?w.response:w.responseText,n=1223===w.status?204:w.status;0===n&&(n=e?200:"file"==Sn(u).protocol?404:0),g(c,n,e,w.getAllResponseHeaders(),t)};var x=function(){g(c,-1,null,null,"")};if(w.onerror=x,w.onabort=x,h&&(w.withCredentials=!0),d)try{w.responseType=d}catch(C){if("json"!==d)throw C}w.send(l)}if(p>0)var E=r(v,p);else M(p)&&p.then(v)}}function Ae(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(t){return"\\\\\\"+t}function a(n){return n.replace(p,t).replace(h,e)}function s(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=z(t)}return t}function u(o,u,p,h){function d(t){try{return t=A(t),h&&!y(t)?t:s(t)}catch(e){r(qi.interr(o,e))}}h=!!h;for(var m,v,g,b=0,w=[],x=[],C=o.length,E=[],T=[];C>b;){if(-1==(m=o.indexOf(t,b))||-1==(v=o.indexOf(e,m+l))){b!==C&&E.push(a(o.substring(b)));break}b!==m&&E.push(a(o.substring(b,m))),g=o.substring(m+l,v),w.push(g),x.push(n(g,d)),b=v+c,T.push(E.length),E.push("")}if(p&&E.length>1&&qi.throwNoconcat(o),!u||w.length){var k=function(t){for(var e=0,n=w.length;n>e;e++){if(h&&$(t[e]))return;E[T[e]]=t[e]}return E.join("")},A=function(t){return p?i.getTrusted(p,t):i.valueOf(t)};return f(function(t){var e=0,n=w.length,i=new Array(n);try{for(;n>e;e++)i[e]=x[e](t);return k(i)}catch(a){r(qi.interr(o,a))}},{exp:o,expressions:w,$$watchDelegate:function(t,e){var n;return t.$watchGroup(x,function(r,i){var o=k(r);S(e)&&e.call(this,o,r!==i?n:o,t),n=o})}})}}var l=t.length,c=e.length,p=new RegExp(t.replace(/./g,o),"g"),h=new RegExp(e.replace(/./g,o),"g");return u.startSymbol=function(){return t},u.endSymbol=function(){return e},u}]}function Ne(){this.$get=["$rootScope","$window","$q","$$q",function(t,e,n,r){function i(i,a,s,u){var l=arguments.length>4,c=l?U(arguments,4):[],f=e.setInterval,p=e.clearInterval,h=0,d=y(u)&&!u,m=(d?r:n).defer(),v=m.promise;return s=y(s)?s:0,v.then(null,null,l?function(){i.apply(null,c)}:i),v.$$intervalId=f(function(){m.notify(h++),s>0&&h>=s&&(m.resolve(h),p(v.$$intervalId),delete o[v.$$intervalId]),d||t.$apply()},a),o[v.$$intervalId]=m,v}var o={};return i.cancel=function(t){return t&&t.$$intervalId in o?(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0):!1},i}]}function Oe(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"Â¤",posSuf:"",negPre:"(Â¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(t){return 1===t?"one":"other"}}}}function De(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=et(e[n]);return e.join("/")}function je(t,e){var n=Sn(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=h(n.port)||Li[n.protocol]||null}function Me(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var r=Sn(t);e.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),e.$$search=Z(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Ie(t,e){return 0===e.indexOf(t)?e.substr(t.length):void 0}function Pe(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function Re(t){return t.replace(/(#.+)|#$/,"$1")}function Fe(t){return t.substr(0,Pe(t).lastIndexOf("/")+1)}function qe(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}function Ve(t,e){this.$$html5=!0,e=e||"";var r=Fe(t);je(t,this),this.$$parse=function(t){var e=Ie(r,t);if(!x(e))throw Hi("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,r);Me(e,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=tt(this.$$search),e=this.$$hash?"#"+et(this.$$hash):"";this.$$url=De(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var a,s,u;return(a=Ie(t,i))!==n?(s=a,u=(a=Ie(e,a))!==n?r+(Ie("/",a)||a):t+s):(a=Ie(r,i))!==n?u=r+a:r==i+"/"&&(u=r),u&&this.$$parse(u),!!u}}function Le(t,e){var n=Fe(t);je(t,this),this.$$parse=function(r){function i(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===e.indexOf(n)&&(e=e.replace(n,"")),i.exec(e)?t:(r=i.exec(t),r?r[1]:t)}var o,a=Ie(t,r)||Ie(n,r);"#"===a.charAt(0)?(o=Ie(e,a),$(o)&&(o=a)):o=this.$$html5?a:"",Me(o,this),this.$$path=i(this.$$path,o,t),this.$$compose()},this.$$compose=function(){var n=tt(this.$$search),r=this.$$hash?"#"+et(this.$$hash):"";this.$$url=De(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=t+(this.$$url?e+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return Pe(t)==Pe(e)?(this.$$parse(e),!0):!1}}function He(t,e){this.$$html5=!0,Le.apply(this,arguments);var n=Fe(t);this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return t==Pe(r)?o=r:(a=Ie(n,r))?o=t+e+a:n===r+"/"&&(o=n),o&&this.$$parse(o),!!o},this.$$compose=function(){var n=tt(this.$$search),r=this.$$hash?"#"+et(this.$$hash):"";this.$$url=De(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=t+e+this.$$url}}function _e(t){return function(){return this[t]}}function Ue(t,e){return function(n){return $(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function Be(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return y(e)?(t=e,this):t},this.html5Mode=function(t){return j(t)?(e.enabled=t,this):b(t)?(j(t.enabled)&&(e.enabled=t.enabled),j(t.requireBase)&&(e.requireBase=t.requireBase),j(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(t,e,n){var i=l.url(),o=l.$$state;try{r.url(t,e,n),l.$$state=r.state()}catch(a){throw l.url(i),l.$$state=o,a}}function u(t,e){n.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}var l,c,f,p=r.baseHref(),h=r.url();if(e.enabled){if(!p&&e.requireBase)throw Hi("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=qe(h)+(p||"/"),c=i.history?Ve:He}else f=Pe(h),c=Le;l=new c(f,"#"+t),l.$$parseLinkUrl(h,h),l.$$state=r.state();var d=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var i=Tr(t.target);"a"!==F(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;var s=i.prop("href"),u=i.attr("href")||i.attr("xlink:href");b(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=Sn(s.animVal).href),d.test(s)||!s||i.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(s,u)&&(t.preventDefault(),l.absUrl()!=r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Re(l.absUrl())!=Re(h)&&r.url(l.absUrl(),!0);var m=!0;return r.onUrlChange(function(t,e){n.$evalAsync(function(){var r,i=l.absUrl(),o=l.$$state;l.$$parse(t),l.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,l.absUrl()===t&&(r?(l.$$parse(i),l.$$state=o,s(i,!1,o)):(m=!1,u(i,o)))}),n.$$phase||n.$digest()}),n.$watch(function(){var t=Re(r.url()),e=Re(l.absUrl()),o=r.state(),a=l.$$replace,c=t!==e||l.$$html5&&i.history&&o!==l.$$state;(m||c)&&(m=!1,n.$evalAsync(function(){var e=l.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,l.$$state,o).defaultPrevented;l.absUrl()===e&&(r?(l.$$parse(t),l.$$state=o):(c&&s(e,a,o===l.$$state?null:l.$$state),u(t,o)))})),l.$$replace=!1}),l}]}function We(){var t=!0,e=this;this.debugEnabled=function(e){return y(e)?(t=e,this):t},this.$get=["$window",function(n){function r(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function i(t){var e=n.console||{},i=e[t]||e.log||m,a=!1;try{a=!!i.apply}catch(s){}return a?function(){var t=[];return o(arguments,function(e){t.push(r(e))}),i.apply(e,t)}:function(t,e){i(t,null==e?"":e)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function ze(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw Ui("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function Ye(t,e){if(t){if(t.constructor===t)throw Ui("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw Ui("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw Ui("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw Ui("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function Ge(t,e){if(t){if(t.constructor===t)throw Ui("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===Bi||t===Wi||t===zi)throw Ui("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function Xe(t,e){return"undefined"!=typeof t?t:e}function Qe(t,e){return"undefined"==typeof t?e:"undefined"==typeof e?t:t+e}function Je(t,e){var n=t(e);return!n.$stateful}function Ke(t,e){var n,r;switch(t.type){case Qi.Program:n=!0,o(t.body,function(t){Ke(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case Qi.Literal:t.constant=!0,t.toWatch=[];break;case Qi.UnaryExpression:Ke(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Qi.BinaryExpression:Ke(t.left,e),Ke(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Qi.LogicalExpression:Ke(t.left,e),Ke(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Qi.ConditionalExpression:Ke(t.test,e),Ke(t.alternate,e),Ke(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Qi.Identifier:t.constant=!1,t.toWatch=[t];break;case Qi.MemberExpression:Ke(t.object,e),t.computed&&Ke(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case Qi.CallExpression:n=t.filter?Je(e,t.callee.name):!1,r=[],o(t.arguments,function(t){Ke(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=t.filter&&Je(e,t.callee.name)?r:[t];break;case Qi.AssignmentExpression:Ke(t.left,e),Ke(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Qi.ArrayExpression:n=!0,r=[],o(t.elements,function(t){Ke(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=r;break;case Qi.ObjectExpression:n=!0,r=[],o(t.properties,function(t){Ke(t.value,e),n=n&&t.value.constant,t.value.constant||r.push.apply(r,t.value.toWatch)}),t.constant=n,t.toWatch=r;break;case Qi.ThisExpression:t.constant=!1,t.toWatch=[]}}function Ze(t){if(1==t.length){var e=t[0].expression,r=e.toWatch;return 1!==r.length?r:r[0]!==e?r:n}}function tn(t){return t.type===Qi.Identifier||t.type===Qi.MemberExpression}function en(t){return 1===t.body.length&&tn(t.body[0].expression)?{type:Qi.AssignmentExpression,left:t.body[0].expression,right:{type:Qi.NGValueParameter},operator:"="}:void 0}function nn(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Qi.Literal||t.body[0].expression.type===Qi.ArrayExpression||t.body[0].expression.type===Qi.ObjectExpression)}function rn(t){return t.constant}function on(t,e){this.astBuilder=t,this.$filter=e}function an(t,e){this.astBuilder=t,this.$filter=e}function sn(t,e,n,r){Ye(t,r);for(var i,o=e.split("."),a=0;o.length>1;a++){i=ze(o.shift(),r);var s=Ye(t[i],r);s||(s={},t[i]=s),t=s}return i=ze(o.shift(),r),Ye(t[i],r),t[i]=n,n}function un(t){return"constructor"==t}function ln(t){return S(t.valueOf)?t.valueOf():Ki.call(t)}function cn(){var t=mt(),e=mt();this.$get=["$filter","$sniffer",function(r,i){function a(t,e){return null==t||null==e?t===e:"object"==typeof t&&(t=ln(t),"object"==typeof t)?!1:t===e||t!==t&&e!==e}function s(t,e,r,i,o){var s,u=i.inputs;if(1===u.length){var l=a;return u=u[0],t.$watch(function(t){var e=u(t);return a(e,l)||(s=i(t,n,n,[e]),l=e&&ln(e)),s},e,r,o)}for(var c=[],f=[],p=0,h=u.length;h>p;p++)c[p]=a,f[p]=null;return t.$watch(function(t){for(var e=!1,r=0,o=u.length;o>r;r++){var l=u[r](t);(e||(e=!a(l,c[r])))&&(f[r]=l,c[r]=l&&ln(l))}return e&&(s=i(t,n,n,f)),s},e,r,o)}function u(t,e,n,r){var i,o;return i=t.$watch(function(t){return r(t)},function(t,n,r){o=t,S(e)&&e.apply(this,arguments),y(t)&&r.$$postDigest(function(){y(o)&&i()})},n)}function l(t,e,n,r){function i(t){var e=!0;return o(t,function(t){y(t)||(e=!1)}),e}var a,s;return a=t.$watch(function(t){return r(t)},function(t,n,r){s=t,S(e)&&e.call(this,t,n,r),i(t)&&r.$$postDigest(function(){i(s)&&a()})},n)}function c(t,e,n,r){var i;return i=t.$watch(function(t){return r(t)},function(t,n,r){S(e)&&e.apply(this,arguments),i()},n)}function f(t,e){if(!e)return t;var n=t.$$watchDelegate,r=n!==l&&n!==u,i=r?function(n,r,i,o){var a=t(n,r,i,o);return e(a,n,r)}:function(n,r,i,o){var a=t(n,r,i,o),s=e(a,n,r);return y(a)?s:a};return t.$$watchDelegate&&t.$$watchDelegate!==s?i.$$watchDelegate=t.$$watchDelegate:e.$stateful||(i.$$watchDelegate=s,i.inputs=t.inputs?t.inputs:[t]),i}var p={csp:i.csp,expensiveChecks:!1},h={csp:i.csp,expensiveChecks:!0};return function(n,i,o){var a,d,v;switch(typeof n){case"string":n=n.trim(),v=n;var g=o?e:t;if(a=g[v],!a){":"===n.charAt(0)&&":"===n.charAt(1)&&(d=!0,n=n.substring(2));var $=o?h:p,y=new Xi($),b=new Ji(y,r,$);a=b.parse(n),a.constant?a.$$watchDelegate=c:d?a.$$watchDelegate=a.literal?l:u:a.inputs&&(a.$$watchDelegate=s),g[v]=a}return f(a,i);case"function":return f(n,i);default:return m}}}]}function fn(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return hn(function(e){t.$evalAsync(e)},e)}]}function pn(){this.$get=["$browser","$exceptionHandler",function(t,e){return hn(function(e){t.defer(e)},e)}]}function hn(t,e){function i(t,e,n){function r(e){return function(n){i||(i=!0,e.call(t,n))}}var i=!1;return[r(e),r(n)]}function a(){this.$$state={status:0}}function s(t,e){return function(n){e.call(t,n)}}function u(t){var r,i,o;o=t.pending,t.processScheduled=!1,t.pending=n;for(var a=0,s=o.length;s>a;++a){i=o[a][0],r=o[a][t.status];try{S(r)?i.resolve(r(t.value)):1===t.status?i.resolve(t.value):i.reject(t.value)}catch(u){i.reject(u),e(u)}}}function l(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){u(e)}))}function c(){this.promise=new a,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function f(t){var e=new c,n=0,r=qr(t)?[]:{};return o(t,function(t,i){n++,g(t).then(function(t){r.hasOwnProperty(i)||(r[i]=t,--n||e.resolve(r))},function(t){r.hasOwnProperty(i)||e.reject(t)})}),0===n&&e.resolve(r),e.promise}var p=r("$q",TypeError),h=function(){return new c};a.prototype={then:function(t,e,n){var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&l(this.$$state),r.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return v(e,!0,t)},function(e){return v(e,!1,t)},e)}},c.prototype={resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(p("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(b(t)||S(t))&&(n=t&&t.then),S(n)?(this.promise.$$state.status=-1,n.call(t,r[0],r[1],this.notify)):(this.promise.$$state.value=t,this.promise.$$state.status=1,l(this.promise.$$state))}catch(o){r[1](o),e(o)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&t(function(){for(var t,i,o=0,a=r.length;a>o;o++){i=r[o][0],t=r[o][3];try{i.notify(S(t)?t(n):n)}catch(s){e(s)}}})}};var d=function(t){var e=new c;return e.reject(t),e.promise},m=function(t,e){var n=new c;return e?n.resolve(t):n.reject(t),n.promise},v=function(t,e,n){[m
[32m+[m[32mvar r=null;try{S(n)&&(r=n())}catch(i){return m(i,!1)}return M(r)?r.then(function(){return m(t,e)},function(t){return m(t,!1)}):m(t,e)},g=function(t,e,n,r){var i=new c;return i.resolve(t),i.promise.then(e,n,r)},$=function y(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}if(!S(t))throw p("norslvr","Expected resolverFn, got '{0}'",t);if(!(this instanceof y))return new y(t);var r=new c;return t(e,n),r.promise};return $.defer=h,$.reject=d,$.when=g,$.all=f,$}function dn(){this.$get=["$window","$timeout",function(t,e){function n(){for(var t=0;t<c.length;t++){var e=c[t];e&&(c[t]=null,e())}l=c.length=0}function r(t){var e=c.length;return l++,c.push(t),0===e&&(u=s(n)),function(){e>=0&&(c[e]=null,e=null,0===--l&&u&&(u(),u=null,c.length=0))}}var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame,o=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,a=!!i,s=a?function(t){var e=i(t);return function(){o(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};r.supported=a;var u,l=0,c=[];return r}]}function mn(){function t(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=u(),this.$$ChildScope=null}return e.prototype=t,e}var e=10,n=r("$rootScope"),a=null,s=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,l,c,f){function p(t){t.currentScope.$$destroyed=!0}function h(){this.$id=u(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function d(t){if(E.$$phase)throw n("inprog","{0} already in progress",E.$$phase);E.$$phase=t}function v(){E.$$phase=null}function g(t,e){do t.$$watchersCount+=e;while(t=t.$parent)}function y(t,e,n){do t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n];while(t=t.$parent)}function w(){}function x(){for(;A.length;)try{A.shift()()}catch(t){l(t)}s=null}function C(){null===s&&(s=f.defer(function(){E.$apply(x)}))}h.prototype={constructor:h,$new:function(e,n){var r;return n=n||this,e?(r=new h,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=t(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(e||n!=this)&&r.$on("$destroy",p),r},$watch:function(t,e,n,r){var i=c(t);if(i.$$watchDelegate)return i.$$watchDelegate(this,e,n,i,t);var o=this,s=o.$$watchers,u={fn:e,last:w,get:i,exp:r||t,eq:!!n};return a=null,S(e)||(u.fn=m),s||(s=o.$$watchers=[]),s.unshift(u),g(this,1),function(){q(s,u)>=0&&g(o,-1),a=null}},$watchGroup:function(t,e){function n(){u=!1,l?(l=!1,e(i,i,s)):e(i,r,s)}var r=new Array(t.length),i=new Array(t.length),a=[],s=this,u=!1,l=!0;if(!t.length){var c=!0;return s.$evalAsync(function(){c&&e(i,i,s)}),function(){c=!1}}return 1===t.length?this.$watch(t[0],function(t,n,o){i[0]=t,r[0]=n,e(i,t===n?i:r,o)}):(o(t,function(t,e){var o=s.$watch(t,function(t,o){i[e]=t,r[e]=o,u||(u=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(t,e){function n(t){o=t;var e,n,r,s,u;if(!$(o)){if(b(o))if(i(o)){a!==h&&(a=h,v=a.length=0,f++),e=o.length,v!==e&&(f++,a.length=v=e);for(var l=0;e>l;l++)u=a[l],s=o[l],r=u!==u&&s!==s,r||u===s||(f++,a[l]=s)}else{a!==d&&(a=d={},v=0,f++),e=0;for(n in o)o.hasOwnProperty(n)&&(e++,s=o[n],u=a[n],n in a?(r=u!==u&&s!==s,r||u===s||(f++,a[n]=s)):(v++,a[n]=s,f++));if(v>e){f++;for(n in a)o.hasOwnProperty(n)||(v--,delete a[n])}}else a!==o&&(a=o,f++);return f}}function r(){if(m?(m=!1,e(o,o,u)):e(o,s,u),l)if(b(o))if(i(o)){s=new Array(o.length);for(var t=0;t<o.length;t++)s[t]=o[t]}else{s={};for(var n in o)wr.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,u=this,l=e.length>1,f=0,p=c(t,n),h=[],d={},m=!0,v=0;return this.$watch(p,r)},$digest:function(){var t,r,i,o,u,c,p,h,m,g,$=e,y=this,b=[];d("$digest"),f.$$checkUrlChange(),this===E&&null!==s&&(f.defer.cancel(s),x()),a=null;do{for(c=!1,h=y;T.length;){try{g=T.shift(),g.scope.$eval(g.expression,g.locals)}catch(C){l(C)}a=null}t:do{if(o=h.$$watchers)for(u=o.length;u--;)try{if(t=o[u])if((r=t.get(h))===(i=t.last)||(t.eq?H(r,i):"number"==typeof r&&"number"==typeof i&&isNaN(r)&&isNaN(i))){if(t===a){c=!1;break t}}else c=!0,a=t,t.last=t.eq?V(r,null):r,t.fn(r,i===w?r:i,h),5>$&&(m=4-$,b[m]||(b[m]=[]),b[m].push({msg:S(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:r,oldVal:i}))}catch(C){l(C)}if(!(p=h.$$watchersCount&&h.$$childHead||h!==y&&h.$$nextSibling))for(;h!==y&&!(p=h.$$nextSibling);)h=h.$parent}while(h=p);if((c||T.length)&&!$--)throw v(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,b)}while(c||T.length);for(v();k.length;)try{k.shift()()}catch(C){l(C)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===E&&f.$$applicationDestroyed(),g(this,-this.$$watchersCount);for(var e in this.$$listenerCount)y(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=m,this.$on=this.$watch=this.$watchGroup=function(){return m},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(t,e){return c(t)(this,e)},$evalAsync:function(t,e){E.$$phase||T.length||f.defer(function(){T.length&&E.$digest()}),T.push({scope:this,expression:t,locals:e})},$$postDigest:function(t){k.push(t)},$apply:function(t){try{return d("$apply"),this.$eval(t)}catch(e){l(e)}finally{v();try{E.$digest()}catch(e){throw l(e),e}}},$applyAsync:function(t){function e(){n.$eval(t)}var n=this;t&&A.push(e),C()},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(n[r]=null,y(i,1,t))}},$emit:function(t,e){var n,r,i,o=[],a=this,s=!1,u={name:t,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=_([u],arguments,1);do{for(n=a.$$listeners[t]||o,u.currentScope=a,r=0,i=n.length;i>r;r++)if(n[r])try{n[r].apply(null,c)}catch(f){l(f)}else n.splice(r,1),r--,i--;if(s)return u.currentScope=null,u;a=a.$parent}while(a);return u.currentScope=null,u},$broadcast:function(t,e){var n=this,r=n,i=n,o={name:t,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return o;for(var a,s,u,c=_([o],arguments,1);r=i;){for(o.currentScope=r,a=r.$$listeners[t]||[],s=0,u=a.length;u>s;s++)if(a[s])try{a[s].apply(null,c)}catch(f){l(f)}else a.splice(s,1),s--,u--;if(!(i=r.$$listenerCount[t]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(i=r.$$nextSibling);)r=r.$parent}return o.currentScope=null,o}};var E=new h,T=E.$$asyncQueue=[],k=E.$$postDigestQueue=[],A=E.$$applyAsyncQueue=[];return E}]}function vn(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i,o=r?e:t;return i=Sn(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function gn(t){if("self"===t)return t;if(x(t)){if(t.indexOf("***")>-1)throw Zi("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=Hr(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(T(t))return new RegExp("^"+t.source+"$");throw Zi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function $n(t){var e=[];return y(t)&&o(t,function(t){e.push(gn(t))}),e}function yn(){this.SCE_CONTEXTS=to;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=$n(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=$n(t)),e},this.$get=["$injector",function(r){function i(t,e){return"self"===t?Tn(e):!!t.exec(e.href)}function o(n){var r,o,a=Sn(n.toString()),s=!1;for(r=0,o=t.length;o>r;r++)if(i(t[r],a)){s=!0;break}if(s)for(r=0,o=e.length;o>r;r++)if(i(e[r],a)){s=!1;break}return s}function a(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}function s(t,e){var r=p.hasOwnProperty(t)?p[t]:null;if(!r)throw Zi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||e===n||""===e)return e;if("string"!=typeof e)throw Zi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new r(e)}function u(t){return t instanceof f?t.$$unwrapTrustedValue():t}function l(t,e){if(null===e||e===n||""===e)return e;var r=p.hasOwnProperty(t)?p[t]:null;if(r&&e instanceof r)return e.$$unwrapTrustedValue();if(t===to.RESOURCE_URL){if(o(e))return e;throw Zi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===to.HTML)return c(e);throw Zi("unsafe","Attempting to use an unsafe value in a safe context.")}var c=function(t){throw Zi("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(c=r.get("$sanitize"));var f=a(),p={};return p[to.HTML]=a(f),p[to.CSS]=a(f),p[to.URL]=a(f),p[to.JS]=a(f),p[to.RESOURCE_URL]=a(p[to.URL]),{trustAs:s,getTrusted:l,valueOf:u}}]}function bn(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&8>Sr)throw Zi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=L(to);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=v),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return o(to,function(t,e){var n=br(e);r[wt("parse_as_"+n)]=function(e){return i(t,e)},r[wt("get_trusted_"+n)]=function(e){return a(t,e)},r[wt("trust_as_"+n)]=function(e){return s(t,e)}}),r}]}function wn(){this.$get=["$window","$document",function(t,e){var n,r,i={},o=h((/android (\d+)/.exec(br((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},u=/^(Moz|webkit|ms)(?=[A-Z])/,l=s.body&&s.body.style,c=!1,f=!1;if(l){for(var p in l)if(r=u.exec(p)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in l&&"webkit"),c=!!("transition"in l||n+"Transition"in l),f=!!("animation"in l||n+"Animation"in l),!o||c&&f||(c=x(l.webkitTransition),f=x(l.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||4>o||a),hasEvent:function(t){if("input"===t&&11>=Sr)return!1;if($(i[t])){var e=s.createElement("div");i[t]="on"+t in e}return i[t]},csp:_r(),vendorPrefix:n,transitions:c,animations:f,android:o}}]}function xn(){this.$get=["$templateCache","$http","$q",function(t,e,n){function r(i,o){function a(t){if(!o)throw Ni("tpload","Failed to load template: {0} (HTTP status: {1} {2})",i,t.status,t.statusText);return n.reject(t)}r.totalPendingRequests++;var s=e.defaults&&e.defaults.transformResponse;qr(s)?s=s.filter(function(t){return t!==$e}):s===$e&&(s=null);var u={cache:t,transformResponse:s};return e.get(i,u)["finally"](function(){r.totalPendingRequests--}).then(function(e){return t.put(i,e.data),e.data},a)}return r.totalPendingRequests=0,r}]}function Cn(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={};return r.findBindings=function(t,e,n){var r=t.getElementsByClassName("ng-binding"),i=[];return o(r,function(t){var r=Pr.element(t).data("$binding");r&&o(r,function(r){if(n){var o=new RegExp("(^|\\s)"+Hr(e)+"(\\s|\\||$)");o.test(r)&&i.push(t)}else-1!=r.indexOf(e)&&i.push(t)})}),i},r.findModels=function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+e+'"]',s=t.querySelectorAll(a);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(e){e!==n.url()&&(n.url(e),t.$digest())},r.whenStable=function(t){e.notifyWhenNoOutstandingRequests(t)},r}]}function En(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){function o(o,s,u){S(o)||(u=s,s=o,o=m);var l,c=U(arguments,3),f=y(u)&&!u,p=(f?r:n).defer(),h=p.promise;return l=e.defer(function(){try{p.resolve(o.apply(null,c))}catch(e){p.reject(e),i(e)}finally{delete a[h.$$timeoutId]}f||t.$apply()},s),h.$$timeoutId=l,a[l]=p,h}var a={};return o.cancel=function(t){return t&&t.$$timeoutId in a?(a[t.$$timeoutId].reject("canceled"),delete a[t.$$timeoutId],e.defer.cancel(t.$$timeoutId)):!1},o}]}function Sn(t){var e=t;return Sr&&(eo.setAttribute("href",e),e=eo.href),eo.setAttribute("href",e),{href:eo.href,protocol:eo.protocol?eo.protocol.replace(/:$/,""):"",host:eo.host,search:eo.search?eo.search.replace(/^\?/,""):"",hash:eo.hash?eo.hash.replace(/^#/,""):"",hostname:eo.hostname,port:eo.port,pathname:"/"===eo.pathname.charAt(0)?eo.pathname:"/"+eo.pathname}}function Tn(t){var e=x(t)?Sn(t):t;return e.protocol===no.protocol&&e.host===no.host}function kn(){this.$get=g(t)}function An(t){function e(t){try{return decodeURIComponent(t)}catch(e){return t}}var r=t[0]||{},i={},o="";return function(){var t,a,s,u,l,c=r.cookie||"";if(c!==o)for(o=c,t=o.split("; "),i={},s=0;s<t.length;s++)a=t[s],u=a.indexOf("="),u>0&&(l=e(a.substring(0,u)),i[l]===n&&(i[l]=e(a.substring(u+1))));return i}}function Nn(){this.$get=An}function On(t){function e(r,i){if(b(r)){var a={};return o(r,function(t,n){a[n]=e(n,t)}),a}return t.factory(r+n,i)}var n="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+n)}}],e("currency",Rn),e("date",Xn),e("filter",Dn),e("json",Qn),e("limitTo",Jn),e("lowercase",so),e("number",Fn),e("orderBy",Kn),e("uppercase",uo)}function Dn(){return function(t,e,n){if(!i(t)){if(null==t)return t;throw r("filter")("notarray","Expected array but received: {0}",t)}var o,a,s=Pn(e);switch(s){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=Mn(e,n,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function jn(t){return S(t.toString)&&t.toString!==Object.prototype.toString}function Mn(t,e,n){var r,i=b(t)&&"$"in t;return e===!0?e=H:S(e)||(e=function(t,e){return $(t)?!1:null===t||null===e?t===e:b(e)||b(t)&&!jn(t)?!1:(t=br(""+t),e=br(""+e),-1!==t.indexOf(e))}),r=function(r){return i&&!b(r)?In(r,t.$,e,!1):In(r,t,e,n)}}function In(t,e,n,r,i){var o=Pn(t),a=Pn(e);if("string"===a&&"!"===e.charAt(0))return!In(t,e.substring(1),n,r);if(qr(t))return t.some(function(t){return In(t,e,n,r)});switch(o){case"object":var s;if(r){for(s in t)if("$"!==s.charAt(0)&&In(t[s],e,n,!0))return!0;return i?!1:In(t,e,n,!1)}if("object"===a){for(s in e){var u=e[s];if(!S(u)&&!$(u)){var l="$"===s,c=l?t:t[s];if(!In(c,u,n,l,l))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function Pn(t){return null===t?"null":typeof t}function Rn(t){var e=t.NUMBER_FORMATS;return function(t,n,r){return $(n)&&(n=e.CURRENCY_SYM),$(r)&&(r=e.PATTERNS[1].maxFrac),null==t?t:qn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function Fn(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:qn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function qn(t,e,n,r,i){if(b(t))return"";var o=0>t;t=Math.abs(t);var a=t===1/0;if(!a&&!isFinite(t))return"";var s=t+"",u="",l=!1,c=[];if(a&&(u="âˆž"),!a&&-1!==s.indexOf("e")){var f=s.match(/([\d\.]+)e(-?)(\d+)/);f&&"-"==f[2]&&f[3]>i+1?t=0:(u=s,l=!0)}if(a||l)i>0&&1>t&&(u=t.toFixed(i),t=parseFloat(u));else{var p=(s.split(ro)[1]||"").length;$(i)&&(i=Math.min(Math.max(e.minFrac,p),e.maxFrac)),t=+(Math.round(+(t.toString()+"e"+i)).toString()+"e"+-i);var h=(""+t).split(ro),d=h[0];h=h[1]||"";var m,v=0,g=e.lgSize,y=e.gSize;if(d.length>=g+y)for(v=d.length-g,m=0;v>m;m++)(v-m)%y===0&&0!==m&&(u+=n),u+=d.charAt(m);for(m=v;m<d.length;m++)(d.length-m)%g===0&&0!==m&&(u+=n),u+=d.charAt(m);for(;h.length<i;)h+="0";i&&"0"!==i&&(u+=r+h.substr(0,i))}return 0===t&&(o=!1),c.push(o?e.negPre:e.posPre,u,o?e.negSuf:e.posSuf),c.join("")}function Vn(t,e,n){var r="";for(0>t&&(r="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function Ln(t,e,n,r){return n=n||0,function(i){var o=i["get"+t]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),Vn(o,e,r)}}function Hn(t,e){return function(n,r){var i=n["get"+t](),o=xr(e?"SHORT"+t:t);return r[o][i]}}function _n(t,e,n){var r=-1*n,i=r>=0?"+":"";return i+=Vn(Math[r>0?"floor":"ceil"](r/60),2)+Vn(Math.abs(r%60),2)}function Un(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function Bn(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Wn(t){return function(e){var n=Un(e.getFullYear()),r=Bn(e),i=+r-+n,o=1+Math.round(i/6048e5);return Vn(o,t)}}function zn(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]}function Yn(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}function Gn(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}function Xn(t){function e(t){var e;if(e=t.match(n)){var r=new Date(0),i=0,o=0,a=e[8]?r.setUTCFullYear:r.setFullYear,s=e[8]?r.setUTCHours:r.setHours;e[9]&&(i=h(e[9]+e[10]),o=h(e[9]+e[11])),a.call(r,h(e[1]),h(e[2])-1,h(e[3]));var u=h(e[4]||0)-i,l=h(e[5]||0)-o,c=h(e[6]||0),f=Math.round(1e3*parseFloat("0."+(e[7]||0)));return s.call(r,u,l,c,f),r}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,s,u="",l=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,x(n)&&(n=ao.test(n)?h(n):e(n)),C(n)&&(n=new Date(n)),!E(n)||!isFinite(n.getTime()))return n;for(;r;)s=oo.exec(r),s?(l=_(l,s,1),r=l.pop()):(l.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=G(i,n.getTimezoneOffset()),n=Q(n,i,!0)),o(l,function(e){a=io[e],u+=a?a(n,t.DATETIME_FORMATS,c):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function Qn(){return function(t,e){return $(e)&&(e=2),z(t,e)}}function Jn(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):h(e),isNaN(e)?t:(C(t)&&(t=t.toString()),qr(t)||x(t)?(n=!n||isNaN(n)?0:h(n),n=0>n&&n>=-t.length?t.length+n:n,e>=0?t.slice(n,n+e):0===n?t.slice(e,t.length):t.slice(Math.max(0,n+e),n)):t)}}function Kn(t){return function(e,n,r){function o(t,e){for(var r=0;r<n.length;r++){var i=n[r](t,e);if(0!==i)return i}return 0}function a(t,e){return e?function(e,n){return t(n,e)}:t}function s(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function u(t){return null===t?"null":"function"==typeof t.valueOf&&(t=t.valueOf(),s(t))?t:"function"==typeof t.toString&&(t=t.toString(),s(t))?t:""}function l(t,e){var n=typeof t,r=typeof e;return n===r&&"object"===n&&(t=u(t),e=u(e)),n===r?("string"===n&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e?0:e>t?-1:1):r>n?-1:1}return i(e)?(n=qr(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(e){var n=!1,r=e||v;if(x(e)){if(("+"==e.charAt(0)||"-"==e.charAt(0))&&(n="-"==e.charAt(0),e=e.substring(1)),""===e)return a(l,n);if(r=t(e),r.constant){var i=r();return a(function(t,e){return l(t[i],e[i])},n)}}return a(function(t,e){return l(r(t),r(e))},n)}),Nr.call(e).sort(a(o,r))):e}}function Zn(t){return S(t)&&(t={link:t}),t.restrict=t.restrict||"AC",g(t)}function tr(t,e){t.$name=e}function er(t,e,r,i,a){var s=this,u=[],l=s.$$parentForm=t.parent().controller("form")||fo;s.$error={},s.$$success={},s.$pending=n,s.$name=a(e.name||e.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,l.$addControl(s),s.$rollbackViewValue=function(){o(u,function(t){t.$rollbackViewValue()})},s.$commitViewValue=function(){o(u,function(t){t.$commitViewValue()})},s.$addControl=function(t){pt(t.$name,"input"),u.push(t),t.$name&&(s[t.$name]=t)},s.$$renameControl=function(t,e){var n=t.$name;s[n]===t&&delete s[n],s[e]=t,t.$name=e},s.$removeControl=function(t){t.$name&&s[t.$name]===t&&delete s[t.$name],o(s.$pending,function(e,n){s.$setValidity(n,null,t)}),o(s.$error,function(e,n){s.$setValidity(n,null,t)}),o(s.$$success,function(e,n){s.$setValidity(n,null,t)}),q(u,t)},vr({ctrl:this,$element:t,set:function(t,e,n){var r=t[e];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(q(r,n),0===r.length&&delete t[e])},parentForm:l,$animate:i}),s.$setDirty=function(){i.removeClass(t,Go),i.addClass(t,Xo),s.$dirty=!0,s.$pristine=!1,l.$setDirty()},s.$setPristine=function(){i.setClass(t,Go,Xo+" "+po),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,o(u,function(t){t.$setPristine()})},s.$setUntouched=function(){o(u,function(t){t.$setUntouched()})},s.$setSubmitted=function(){i.addClass(t,po),s.$submitted=!0,l.$setSubmitted()}}function nr(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function rr(t,e,n,r,i,o){ir(t,e,n,r,i,o),nr(r)}function ir(t,e,n,r,i,o){var a=br(e[0].type);if(!i.android){var s=!1;e.on("compositionstart",function(t){s=!0}),e.on("compositionend",function(){s=!1,u()})}var u=function(t){if(l&&(o.defer.cancel(l),l=null),!s){var i=e.val(),u=t&&t.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=Lr(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))e.on("input",u);else{var l,c=function(t,e,n){l||(l=o.defer(function(){l=null,e&&e.value===n||u(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||c(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut",c)}e.on("change",u),r.$render=function(){e.val(r.$isEmpty(r.$viewValue)?"":r.$viewValue)}}function or(t,e){if(E(t))return t;if(x(t)){Co.lastIndex=0;var n=Co.exec(t);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,u=0,l=Un(r),c=7*(i-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),u=e.getMilliseconds()),new Date(r,0,l.getDate()+c,o,a,s,u)}}return NaN}function ar(t,e){return function(n,r){var i,a;if(E(n))return n;if(x(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),go.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,function(t,n){n<e.length&&(a[e[n]]=+t)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function sr(t,e,r,i){return function(o,a,s,u,l,c,f){function p(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function h(t){return y(t)?E(t)?t:r(t):n}ur(o,a,s,u),ir(o,a,s,u,l,c);var d,m=u&&u.$options&&u.$options.timezone;if(u.$$parserName=t,u.$parsers.push(function(t){if(u.$isEmpty(t))return null;if(e.test(t)){var i=r(t,d);return m&&(i=Q(i,m)),i}return n}),u.$formatters.push(function(t){if(t&&!E(t))throw Zo("datefmt","Expected `{0}` to be a date",t);return p(t)?(d=t,d&&m&&(d=Q(d,m,!0)),f("date")(t,i,m)):(d=null,"")}),y(s.min)||s.ngMin){var v;u.$validators.min=function(t){return!p(t)||$(v)||r(t)>=v},s.$observe("min",function(t){v=h(t),u.$validate()})}if(y(s.max)||s.ngMax){var g;u.$validators.max=function(t){return!p(t)||$(g)||r(t)<=g},s.$observe("max",function(t){g=h(t),u.$validate()})}}}function ur(t,e,r,i){var o=e[0],a=i.$$hasNativeValidators=b(o.validity);a&&i.$parsers.push(function(t){var r=e.prop(yr)||{};return r.badInput&&!r.typeMismatch?n:t})}function lr(t,e,r,i,o,a){if(ur(t,e,r,i),ir(t,e,r,i,o,a),i.$$parserName="number",i.$parsers.push(function(t){return i.$isEmpty(t)?null:bo.test(t)?parseFloat(t):n}),i.$formatters.push(function(t){if(!i.$isEmpty(t)){if(!C(t))throw Zo("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}),y(r.min)||r.ngMin){var s;i.$validators.min=function(t){return i.$isEmpty(t)||$(s)||t>=s},r.$observe("min",function(t){y(t)&&!C(t)&&(t=parseFloat(t,10)),s=C(t)&&!isNaN(t)?t:n,i.$validate()})}if(y(r.max)||r.ngMax){var u;i.$validators.max=function(t){return i.$isEmpty(t)||$(u)||u>=t},r.$observe("max",function(t){y(t)&&!C(t)&&(t=parseFloat(t,10)),u=C(t)&&!isNaN(t)?t:n,i.$validate()})}}function cr(t,e,n,r,i,o){ir(t,e,n,r,i,o),nr(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||$o.test(n)}}function fr(t,e,n,r,i,o){ir(t,e,n,r,i,o),nr(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||yo.test(n)}}function pr(t,e,n,r){$(n.name)&&e.attr("name",u());var i=function(t){e[0].checked&&r.$setViewValue(n.value,t&&t.type)};e.on("click",i),r.$render=function(){var t=n.value;e[0].checked=t==r.$viewValue},n.$observe("value",r.$render)}function hr(t,e,n,i,o){var a;if(y(i)){if(a=t(i),!a.constant)throw r("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return a(e)}return o}function dr(t,e,n,r,i,o,a,s){var u=hr(s,t,"ngTrueValue",n.ngTrueValue,!0),l=hr(s,t,"ngFalseValue",n.ngFalseValue,!1),c=function(t){r.$setViewValue(e[0].checked,t&&t.type)};e.on("click",c),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return t===!1},r.$formatters.push(function(t){return H(t,u)}),r.$parsers.push(function(t){return t?u:l})}function mr(t,e){return t="ngClass"+t,["$animate",function(n){function r(t,e){var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i==e[o])continue t;n.push(i)}return n}function i(t){var e=[];return qr(t)?(o(t,function(t){e=e.concat(i(t))}),e):x(t)?t.split(" "):b(t)?(o(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}return{restrict:"AC",link:function(a,s,u){function l(t){var e=f(t,1);u.$addClass(e)}function c(t){var e=f(t,-1);u.$removeClass(e)}function f(t,e){var n=s.data("$classCounts")||mt(),r=[];return o(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&r.push(t))}),s.data("$classCounts",n),r.join(" ")}function p(t,e){var i=r(e,t),o=r(t,e);i=f(i,1),o=f(o,-1),i&&i.length&&n.addClass(s,i),o&&o.length&&n.removeClass(s,o)}function h(t){if(e===!0||a.$index%2===e){var n=i(t||[]);if(d){if(!H(t,d)){var r=i(d);p(r,n)}}else l(n)}d=L(t)}var d;a.$watch(u[t],h,!0),u.$observe("class",function(e){h(a.$eval(u[t]))}),"ngClass"!==t&&a.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var s=i(a.$eval(u[t]));o===e?l(s):c(s)}})}}}]}function vr(t){function e(t,e,u){e===n?r("$pending",t,u):i("$pending",t,u),j(e)?e?(f(s.$error,t,u),c(s.$$success,t,u)):(c(s.$error,t,u),f(s.$$success,t,u)):(f(s.$error,t,u),f(s.$$success,t,u)),s.$pending?(o(Ko,!0),s.$valid=s.$invalid=n,a("",null)):(o(Ko,!1),s.$valid=gr(s.$error),s.$invalid=!s.$valid,a("",s.$valid));var l;l=s.$pending&&s.$pending[t]?n:s.$error[t]?!1:s.$$success[t]?!0:null,a(t,l),p.$setValidity(t,l,s)}function r(t,e,n){s[t]||(s[t]={}),c(s[t],e,n)}function i(t,e,r){s[t]&&f(s[t],e,r),gr(s[t])&&(s[t]=n)}function o(t,e){e&&!l[t]?(h.addClass(u,t),l[t]=!0):!e&&l[t]&&(h.removeClass(u,t),l[t]=!1)}function a(t,e){t=t?"-"+ut(t,"-"):"",o(zo+t,e===!0),o(Yo+t,e===!1)}var s=t.ctrl,u=t.$element,l={},c=t.set,f=t.unset,p=t.parentForm,h=t.$animate;l[Yo]=!(l[zo]=u.hasClass(zo)),s.$setValidity=e}function gr(t){if(t)for(var e in t)return!1;return!0}var $r=/^\/(.+)\/([a-z]*)$/,yr="validity",br=function(t){return x(t)?t.toLowerCase():t},wr=Object.prototype.hasOwnProperty,xr=function(t){return x(t)?t.toUpperCase():t},Cr=function(t){return x(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},Er=function(t){return x(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t};"i"!=="I".toLowerCase()&&(br=Cr,xr=Er);var Sr,Tr,kr,Ar,Nr=[].slice,Or=[].splice,Dr=[].push,jr=Object.prototype.toString,Mr=Object.getPrototypeOf,Ir=r("ng"),Pr=t.angular||(t.angular={}),Rr=0;Sr=e.documentMode,m.$inject=[],v.$inject=[];var Fr,qr=Array.isArray,Vr=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,Lr=function(t){return x(t)?t.trim():t},Hr=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},_r=function(){if(y(_r.isActive_))return _r.isActive_;var t=!(!e.querySelector("[ng-csp]")&&!e.querySelector("[data-ng-csp]"));if(!t)try{new Function("")}catch(n){t=!0}return _r.isActive_=t},Ur=function(){if(y(Ur.name_))return Ur.name_;var t,n,r,i,o=Br.length;for(n=0;o>n;++n)if(r=Br[n],t=e.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return Ur.name_=i},Br=["ng-","data-ng-","ng:","x-ng-"],Wr=/[A-Z]/g,zr=!1,Yr=1,Gr=2,Xr=3,Qr=8,Jr=9,Kr=11,Zr={full:"1.4.0",major:1,minor:4,dot:0,codeName:"jaracimrman-existence"};Tt.expando="ng339";var ti=Tt.cache={},ei=1,ni=function(t,e,n){t.addEventListener(e,n,!1)},ri=function(t,e,n){t.removeEventListener(e,n,!1)};Tt._data=function(t){return this.cache[t[this.expando]]||{}};var ii=/([\:\-\_]+(.))/g,oi=/^moz([A-Z])/,ai={mouseleave:"mouseout",mouseenter:"mouseover"},si=r("jqLite"),ui=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,li=/<|&#?\w+;/,ci=/<([\w:]+)/,fi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,pi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};pi.optgroup=pi.option,pi.tbody=pi.tfoot=pi.colgroup=pi.caption=pi.thead,pi.th=pi.td;var hi=Tt.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===e.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),Tt(t).on("load",r))},toString:function(){var t=[];return o(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return Tr(t>=0?this[t]:this[this.length+t])},length:0,push:Dr,sort:[].sort,splice:[].splice},di={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){di[br(t)]=t});var mi={};o("input,select,option,textarea,button,form,details".split(","),function(t){mi[t]=!0});var vi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:jt,removeData:Ot},function(t,e){Tt[e]=t}),o({data:jt,inheritedData:qt,scope:function(t){return Tr.data(t,"$scope")||qt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return Tr.data(t,"$isolateScope")||Tr.data(t,"$isolateScopeNoTemplate")},controller:Ft,injector:function(t){return qt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Mt,css:function(t,e,n){return e=wt(e),y(n)?void(t.style[e]=n):t.style[e]},attr:function(t,e,r){var i=t.nodeType;if(i!==Xr&&i!==Gr&&i!==Qr){var o=br(e);if(di[o]){if(!y(r))return t[e]||(t.attributes.getNamedItem(e)||m).specified?o:n;r?(t[e]=!0,t.setAttribute(e,o)):(t[e]=!1,t.removeAttribute(o))}else if(y(r))t.setAttribute(e,r);else if(t.getAttribute){var a=t.getAttribute(e,2);return null===a?n:a}}},prop:function(t,e,n){return y(n)?void(t[e]=n):t[e]},text:function(){function t(t,e){if($(e)){var n=t.nodeType;return n===Yr||n===Xr?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if($(e)){if(t.multiple&&"select"===F(t)){var n=[];return o(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e;[m
[32m+[m[32m},html:function(t,e){return $(e)?t.innerHTML:(At(t,!0),void(t.innerHTML=e))},empty:Vt},function(t,e){Tt.prototype[e]=function(e,r){var i,o,a=this.length;if(t!==Vt&&(2==t.length&&t!==Mt&&t!==Ft?e:r)===n){if(b(e)){for(i=0;a>i;i++)if(t===jt)t(this[i],e);else for(o in e)t(this[i],o,e[o]);return this}for(var s=t.$dv,u=s===n?Math.min(a,1):a,l=0;u>l;l++){var c=t(this[l],e,r);s=s?s+c:c}return s}for(i=0;a>i;i++)t(this[i],e,r);return this}}),o({removeData:Ot,on:function Na(t,e,n,r){if(y(r))throw si("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Ct(t)){var i=Dt(t,!0),o=i.events,a=i.handle;a||(a=i.handle=Bt(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],u=s.length;u--;){e=s[u];var l=o[e];l||(o[e]=[],"mouseenter"===e||"mouseleave"===e?Na(t,ai[e],function(t){var n=this,r=t.relatedTarget;(!r||r!==n&&!n.contains(r))&&a(t,e)}):"$destroy"!==e&&ni(t,e,a),l=o[e]),l.push(n)}}},off:Nt,one:function(t,e,n){t=Tr(t),t.on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;At(t),o(new Tt(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return o(t.childNodes,function(t){t.nodeType===Yr&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Yr||n===Kr){e=new Tt(e);for(var r=0,i=e.length;i>r;r++){var o=e[r];t.appendChild(o)}}},prepend:function(t,e){if(t.nodeType===Yr){var n=t.firstChild;o(new Tt(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){e=Tr(e).eq(0).clone()[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:Lt,detach:function(t){Lt(t,!0)},after:function(t,e){var n=t,r=t.parentNode;e=new Tt(e);for(var i=0,o=e.length;o>i;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:Pt,removeClass:It,toggleClass:function(t,e,n){e&&o(e.split(" "),function(e){var r=n;$(r)&&(r=!Mt(t,e)),(r?Pt:It)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Kr?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:kt,triggerHandler:function(t,e,n){var r,i,a,s=e.type||e,u=Dt(t),l=u&&u.events,c=l&&l[s];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:m,type:s,target:t},e.type&&(r=f(r,e)),i=L(c),a=n?[r].concat(n):[r],o(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,a)}))}},function(t,e){Tt.prototype[e]=function(e,n,r){for(var i,o=0,a=this.length;a>o;o++)$(i)?(i=t(this[o],e,n,r),y(i)&&(i=Tr(i))):Rt(i,t(this[o],e,n,r));return y(i)?i:this},Tt.prototype.bind=Tt.prototype.on,Tt.prototype.unbind=Tt.prototype.off}),Yt.prototype={put:function(t,e){this[zt(t,this.nextUid)]=e},get:function(t){return this[zt(t,this.nextUid)]},remove:function(t){var e=this[t=zt(t,this.nextUid)];return delete this[t],e}};var gi=[function(){this.$get=[function(){return Yt}]}],$i=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,yi=/,/,bi=/^\s*(_?)(\S+?)\1\s*$/,wi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,xi=r("$injector");Qt.$$annotate=Xt;var Ci=r("$animate"),Ei=1,Si="ng-animate",Ti=function(){this.$get=["$q","$$rAF",function(t,e){function n(){}return n.all=m,n.chain=m,n.prototype={end:m,cancel:m,resume:m,pause:m,complete:m,then:function(n,r){return t(function(t){e(function(){t()})}).then(n,r)}},n}]},ki=function(){var t=new Yt,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(n,i,a){var s=t.get(n);s||(t.put(n,s={}),e.push(n)),i&&o(i.split(" "),function(t){t&&(s[t]=!0)}),a&&o(a.split(" "),function(t){t&&(s[t]=!1)}),e.length>1||r.$$postDigest(function(){o(e,function(e){var n=t.get(e);if(n){var r=te(e.attr("class")),i="",a="";o(n,function(t,e){var n=!!r[e];t!==n&&(t?i+=(i.length?" ":"")+e:a+=(a.length?" ":"")+e)}),o(e,function(t){i&&Pt(t,i),a&&It(t,a)}),t.remove(e)}}),e.length=0})}return{enabled:m,on:m,off:m,pin:m,push:function(t,e,r,o){return o&&o(),r=r||{},r.from&&t.css(r.from),r.to&&t.css(r.to),(r.addClass||r.removeClass)&&i(t,r.addClass,r.removeClass),new n}}}]},Ai=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Ci("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter)){var e=new RegExp("(\\s+|\\/)"+Si+"(\\s+|\\/)");if(e.test(this.$$classNameFilter.toString()))throw Ci("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Si)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=Zt(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,r,i,o){return r=r&&Tr(r),i=i&&Tr(i),r=r||i.parent(),e(n,r,i),t.push(n,"enter",ee(o))},move:function(n,r,i,o){return r=r&&Tr(r),i=i&&Tr(i),r=r||i.parent(),e(n,r,i),t.push(n,"move",ee(o))},leave:function(e,n){return t.push(e,"leave",ee(n),function(){e.remove()})},addClass:function(e,n,r){return r=ee(r),r.addClass=Kt(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return r=ee(r),r.removeClass=Kt(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return i=ee(i),i.addClass=Kt(i.addClass,n),i.removeClass=Kt(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return o=ee(o),o.from=o.from?f(o.from,n):n,o.to=o.to?f(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=Kt(o.tempClasses,i),t.push(e,"animate",o)}}}]}],Ni=r("$compile");se.$inject=["$provide","$$sanitizeUriProvider"];var Oi=/^((?:x|data)[\:\-_])/i,Di=r("$controller"),ji=/^(\S+)(\s+as\s+(\w+))?$/,Mi="application/json",Ii={"Content-Type":Mi+";charset=utf-8"},Pi=/^\[|^\{(?!\{)/,Ri={"[":/]$/,"{":/}$/},Fi=/^\)\]\}',?\n/,qi=Pr.$interpolateMinErr=r("$interpolate");qi.throwNoconcat=function(t){throw qi("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},qi.interr=function(t,e){return qi("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Vi=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Li={http:80,https:443,ftp:21},Hi=r("$location"),_i={$$html5:!1,$$replace:!1,absUrl:_e("$$absUrl"),url:function(t){if($(t))return this.$$url;var e=Vi.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:_e("$$protocol"),host:_e("$$host"),port:_e("$$port"),path:Ue("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(x(t)||C(t))t=t.toString(),this.$$search=Z(t);else{if(!b(t))throw Hi("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");t=V(t,{}),o(t,function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:$(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Ue("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};o([He,Le,Ve],function(t){t.prototype=Object.create(_i),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Ve||!this.$$html5)throw Hi("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=$(e)?null:e,this}});var Ui=r("$parse"),Bi=Function.prototype.call,Wi=Function.prototype.apply,zi=Function.prototype.bind,Yi=mt();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){Yi[t]=!0});var Gi={n:"\n",f:"\f",r:"\r",t:"	",v:"\x0B","'":"'",'"':'"'},Xi=function(t){this.options=t};Xi.prototype={constructor:Xi,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(e))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=Yi[e],o=Yi[n],a=Yi[r];if(i||o||a){var s=a?r:o?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length?this.text.charAt(this.index+e):!1},isNumber:function(t){return t>="0"&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"	"===t||"\n"===t||"\x0B"===t||"Â "===t},isIdent:function(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=y(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw Ui("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=br(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){for(var t=this.index;this.index<this.text.length;){var e=this.text.charAt(this.index);if(!this.isIdent(e)&&!this.isNumber(e))break;this.index++}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=Gi[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Qi=function(t,e){this.lexer=t,this.options=e};Qi.Program="Program",Qi.ExpressionStatement="ExpressionStatement",Qi.AssignmentExpression="AssignmentExpression",Qi.ConditionalExpression="ConditionalExpression",Qi.LogicalExpression="LogicalExpression",Qi.BinaryExpression="BinaryExpression",Qi.UnaryExpression="UnaryExpression",Qi.CallExpression="CallExpression",Qi.MemberExpression="MemberExpression",Qi.Identifier="Identifier",Qi.Literal="Literal",Qi.ArrayExpression="ArrayExpression",Qi.Property="Property",Qi.ObjectExpression="ObjectExpression",Qi.ThisExpression="ThisExpression",Qi.NGValueParameter="NGValueParameter",Qi.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Qi.Program,body:t}},expressionStatement:function(){return{type:Qi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t,e=this.expression();t=this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:Qi.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Qi.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Qi.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Qi.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Qi.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Qi.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Qi.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Qi.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Qi.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.constants.hasOwnProperty(this.peek().text)?t=V(this.constants[this.consume().text]):this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)"("===e.text?(t={type:Qi.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Qi.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Qi.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Qi.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do t.push(this.expression());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Qi.Identifier,name:t.text}},constant:function(){return{type:Qi.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Qi.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Qi.Property,kind:"init"},this.peek().constant?t.key=this.constant():this.peek().identifier?t.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),t.value=this.expression(),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Qi.ObjectExpression,properties:e}},throwError:function(t,e){throw Ui("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw Ui("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw Ui("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===r||a===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return i?(this.tokens.shift(),i):!1},constants:{"true":{type:Qi.Literal,value:!0},"false":{type:Qi.Literal,value:!1},"null":{type:Qi.Literal,value:null},undefined:{type:Qi.Literal,value:n},"this":{type:Qi.ThisExpression}}},on.prototype={compile:function(t,e){var r=this,i=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ke(i,r.$filter);var a,s="";if(this.stage="assign",a=en(i)){this.state.computing="assign";var u=this.nextId();this.recurse(a,u),s="fn.assign="+this.generateFunction("assign","s,v,l")}var l=Ze(i.body);r.stage="inputs",o(l,function(t,e){var n="fn"+e;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(t,i),r.return_(i),r.state.inputs.push(n),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(i);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",f=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",c)(this.$filter,ze,Ye,Ge,Xe,Qe,t);return this.state=this.stage=n,f.literal=nn(i),f.constant=rn(i),f},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return o(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return o(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,r,i,a,s){var u,l,c,f,p=this;if(i=i||m,!s&&y(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,r,i,a,!0));switch(t.type){case Qi.Program:o(t.body,function(e,r){p.recurse(e.expression,n,n,function(t){l=t}),r!==t.body.length-1?p.current().body.push(l,";"):p.return_(l)});break;case Qi.Literal:f=this.escape(t.value),this.assign(e,f),i(f);break;case Qi.UnaryExpression:this.recurse(t.argument,n,n,function(t){l=t}),f=t.operator+"("+this.ifDefined(l,0)+")",this.assign(e,f),i(f);break;case Qi.BinaryExpression:this.recurse(t.left,n,n,function(t){u=t}),this.recurse(t.right,n,n,function(t){l=t}),f="+"===t.operator?this.plus(u,l):"-"===t.operator?this.ifDefined(u,0)+t.operator+this.ifDefined(l,0):"("+u+")"+t.operator+"("+l+")",this.assign(e,f),i(f);break;case Qi.LogicalExpression:e=e||this.nextId(),p.recurse(t.left,e),p.if_("&&"===t.operator?e:p.not(e),p.lazyRecurse(t.right,e)),i(e);break;case Qi.ConditionalExpression:e=e||this.nextId(),p.recurse(t.test,e),p.if_(e,p.lazyRecurse(t.alternate,e),p.lazyRecurse(t.consequent,e)),i(e);break;case Qi.Identifier:e=e||this.nextId(),r&&(r.context="inputs"===p.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),r.computed=!1,r.name=t.name),ze(t.name),p.if_("inputs"===p.stage||p.not(p.getHasOwnProperty("l",t.name)),function(){p.if_("inputs"===p.stage||"s",function(){a&&1!==a&&p.if_(p.not(p.nonComputedMember("s",t.name)),p.lazyAssign(p.nonComputedMember("s",t.name),"{}")),p.assign(e,p.nonComputedMember("s",t.name))})},e&&p.lazyAssign(e,p.nonComputedMember("l",t.name))),(p.state.expensiveChecks||un(t.name))&&p.addEnsureSafeObject(e),i(e);break;case Qi.MemberExpression:u=r&&(r.context=this.nextId())||this.nextId(),e=e||this.nextId(),p.recurse(t.object,u,n,function(){p.if_(p.notNull(u),function(){t.computed?(l=p.nextId(),p.recurse(t.property,l),p.addEnsureSafeMemberName(l),a&&1!==a&&p.if_(p.not(p.computedMember(u,l)),p.lazyAssign(p.computedMember(u,l),"{}")),f=p.ensureSafeObject(p.computedMember(u,l)),p.assign(e,f),r&&(r.computed=!0,r.name=l)):(ze(t.property.name),a&&1!==a&&p.if_(p.not(p.nonComputedMember(u,t.property.name)),p.lazyAssign(p.nonComputedMember(u,t.property.name),"{}")),f=p.nonComputedMember(u,t.property.name),(p.state.expensiveChecks||un(t.property.name))&&(f=p.ensureSafeObject(f)),p.assign(e,f),r&&(r.computed=!1,r.name=t.property.name)),i(e)})},!!a);break;case Qi.CallExpression:e=e||this.nextId(),t.filter?(l=p.filter(t.callee.name),c=[],o(t.arguments,function(t){var e=p.nextId();p.recurse(t,e),c.push(e)}),f=l+"("+c.join(",")+")",p.assign(e,f),i(e)):(l=p.nextId(),u={},c=[],p.recurse(t.callee,l,u,function(){p.if_(p.notNull(l),function(){p.addEnsureSafeFunction(l),o(t.arguments,function(t){p.recurse(t,p.nextId(),n,function(t){c.push(p.ensureSafeObject(t))})}),u.name?(p.state.expensiveChecks||p.addEnsureSafeObject(u.context),f=p.member(u.context,u.name,u.computed)+"("+c.join(",")+")"):f=l+"("+c.join(",")+")",f=p.ensureSafeObject(f),p.assign(e,f),i(e)})}));break;case Qi.AssignmentExpression:if(l=this.nextId(),u={},!tn(t.left))throw Ui("lval","Trying to assing a value to a non l-value");this.recurse(t.left,n,u,function(){p.if_(p.notNull(u.context),function(){p.recurse(t.right,l),p.addEnsureSafeObject(p.member(u.context,u.name,u.computed)),f=p.member(u.context,u.name,u.computed)+t.operator+l,p.assign(e,f),i(e||f)})},1);break;case Qi.ArrayExpression:c=[],o(t.elements,function(t){p.recurse(t,p.nextId(),n,function(t){c.push(t)})}),f="["+c.join(",")+"]",this.assign(e,f),i(f);break;case Qi.ObjectExpression:c=[],o(t.properties,function(t){p.recurse(t.value,p.nextId(),n,function(e){c.push(p.escape(t.key.type===Qi.Identifier?t.key.name:""+t.key.value)+":"+e)})}),f="{"+c.join(",")+"}",this.assign(e,f),i(f);break;case Qi.ThisExpression:this.assign(e,"s"),i("s");break;case Qi.NGValueParameter:this.assign(e,"v"),i("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){return t?(this.current().body.push(t,"=",e,";"),t):void 0},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(t===!0)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return t+"."+e},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},lazyRecurse:function(t,e,n,r,i,o){var a=this;return function(){a.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(x(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(C(t))return t.toString();if(t===!0)return"true";if(t===!1)return"false";if(null===t)return"null";if("undefined"==typeof t)return"undefined";throw Ui("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},an.prototype={compile:function(t,e){var n=this,r=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,Ke(r,n.$filter);var i,a;(i=en(r))&&(a=this.recurse(i));var s,u=Ze(r.body);u&&(s=[],o(u,function(t,e){var r=n.recurse(t);t.input=r,s.push(r),t.watchId=e}));var l=[];o(r.body,function(t){l.push(n.recurse(t.expression))});var c=0===r.body.length?function(){}:1===r.body.length?l[0]:function(t,e){var n;return o(l,function(r){n=r(t,e)}),n};return a&&(c.assign=function(t,e,n){return a(t,n,e)}),s&&(c.inputs=s),c.literal=nn(r),c.constant=rn(r),c},recurse:function(t,e,r){var i,a,s,u=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Qi.Literal:return this.value(t.value,e);case Qi.UnaryExpression:return a=this.recurse(t.argument),this["unary"+t.operator](a,e);case Qi.BinaryExpression:return i=this.recurse(t.left),a=this.recurse(t.right),this["binary"+t.operator](i,a,e);case Qi.LogicalExpression:return i=this.recurse(t.left),a=this.recurse(t.right),this["binary"+t.operator](i,a,e);case Qi.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Qi.Identifier:return ze(t.name,u.expression),u.identifier(t.name,u.expensiveChecks||un(t.name),e,r,u.expression);case Qi.MemberExpression:return i=this.recurse(t.object,!1,!!r),t.computed||(ze(t.property.name,u.expression),a=t.property.name),t.computed&&(a=this.recurse(t.property)),t.computed?this.computedMember(i,a,e,r,u.expression):this.nonComputedMember(i,a,u.expensiveChecks,e,r,u.expression);case Qi.CallExpression:return s=[],o(t.arguments,function(t){s.push(u.recurse(t))}),t.filter&&(a=this.$filter(t.callee.name)),t.filter||(a=this.recurse(t.callee,!0)),t.filter?function(t,r,i,o){for(var u=[],l=0;l<s.length;++l)u.push(s[l](t,r,i,o));var c=a.apply(n,u,o);return e?{context:n,name:n,value:c}:c}:function(t,n,r,i){var o,l=a(t,n,r,i);if(null!=l.value){Ye(l.context,u.expression),Ge(l.value,u.expression);for(var c=[],f=0;f<s.length;++f)c.push(Ye(s[f](t,n,r,i),u.expression));o=Ye(l.value.apply(l.context,c),u.expression)}return e?{value:o}:o};case Qi.AssignmentExpression:return i=this.recurse(t.left,!0,1),a=this.recurse(t.right),function(t,n,r,o){var s=i(t,n,r,o),l=a(t,n,r,o);return Ye(s.value,u.expression),s.context[s.name]=l,e?{value:l}:l};case Qi.ArrayExpression:return s=[],o(t.elements,function(t){s.push(u.recurse(t))}),function(t,n,r,i){for(var o=[],a=0;a<s.length;++a)o.push(s[a](t,n,r,i));return e?{value:o}:o};case Qi.ObjectExpression:return s=[],o(t.properties,function(t){s.push({key:t.key.type===Qi.Identifier?t.key.name:""+t.key.value,value:u.recurse(t.value)})}),function(t,n,r,i){for(var o={},a=0;a<s.length;++a)o[s[a].key]=s[a].value(t,n,r,i);return e?{value:o}:o};case Qi.ThisExpression:return function(t){return e?{value:t}:t};case Qi.NGValueParameter:return function(t,n,r,i){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=y(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=y(a)?-a:0,e?{value:a}:a}},"unary!":function(t,e){return function(n,r,i,o){var a=!t(n,r,i,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a),u=e(r,i,o,a),l=Qe(s,u);return n?{value:l}:l}},"binary-":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a),u=e(r,i,o,a),l=(y(s)?s:0)-(y(u)?u:0);return n?{value:l}:l}},"binary*":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)*e(r,i,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)/e(r,i,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)%e(r,i,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)===e(r,i,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!==e(r,i,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)==e(r,i,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!=e(r,i,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<e(r,i,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>e(r,i,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<=e(r,i,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>=e(r,i,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)&&e(r,i,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)||e(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,r){return function(i,o,a,s){var u=t(i,o,a,s)?e(i,o,a,s):n(i,o,a,s);return r?{value:u}:u}},value:function(t,e){return function(){return e?{context:n,name:n,value:t}:t}},identifier:function(t,e,r,i,o){return function(a,s,u,l){var c=s&&t in s?s:a;i&&1!==i&&c&&!c[t]&&(c[t]={});var f=c?c[t]:n;return e&&Ye(f,o),r?{context:c,name:t,value:f}:f}},computedMember:function(t,e,n,r,i){return function(o,a,s,u){var l,c,f=t(o,a,s,u);return null!=f&&(l=e(o,a,s,u),ze(l,i),r&&1!==r&&f&&!f[l]&&(f[l]={}),c=f[l],Ye(c,i)),n?{context:f,name:l,value:c}:c}},nonComputedMember:function(t,e,r,i,o,a){return function(s,u,l,c){var f=t(s,u,l,c);o&&1!==o&&f&&!f[e]&&(f[e]={});var p=null!=f?f[e]:n;return(r||un(e))&&Ye(p,a),i?{context:f,name:e,value:p}:p}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}};var Ji=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new Qi(this.lexer),this.astCompiler=n.csp?new an(this.ast,e):new on(this.ast,e)};Ji.prototype={constructor:Ji,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var Ki=(mt(),mt(),Object.prototype.valueOf),Zi=r("$sce"),to={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Ni=r("$compile"),eo=e.createElement("a"),no=Sn(t.location.href);An.$inject=["$document"],On.$inject=["$provide"],Rn.$inject=["$locale"],Fn.$inject=["$locale"];var ro=".",io={yyyy:Ln("FullYear",4),yy:Ln("FullYear",2,0,!0),y:Ln("FullYear",1),MMMM:Hn("Month"),MMM:Hn("Month",!0),MM:Ln("Month",2,1),M:Ln("Month",1,1),dd:Ln("Date",2),d:Ln("Date",1),HH:Ln("Hours",2),H:Ln("Hours",1),hh:Ln("Hours",2,-12),h:Ln("Hours",1,-12),mm:Ln("Minutes",2),m:Ln("Minutes",1),ss:Ln("Seconds",2),s:Ln("Seconds",1),sss:Ln("Milliseconds",3),EEEE:Hn("Day"),EEE:Hn("Day",!0),a:zn,Z:_n,ww:Wn(2),w:Wn(1),G:Yn,GG:Yn,GGG:Yn,GGGG:Gn},oo=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,ao=/^\-?\d+$/;Xn.$inject=["$locale"];var so=g(br),uo=g(xr);Kn.$inject=["$parse"];var lo=g({restrict:"E",compile:function(t,e){return e.href||e.xlinkHref?void 0:function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===jr.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),co={};o(di,function(t,e){function n(t,n,i){t.$watch(i[r],function(t){i.$set(e,!!t)})}if("multiple"!=t){var r=ue("ng-"+e),i=n;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[r]&&n(t,e,i)}),co[r]=function(){return{restrict:"A",priority:100,link:i}}}}),o(vi,function(t,e){co[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"==r.ngPattern.charAt(0)){var i=r.ngPattern.match($r);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),o(["src","srcset","href"],function(t){var e=ue("ng-"+t);co[e]=function(){return{priority:99,link:function(n,r,i){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===jr.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(e,function(e){return e?(i.$set(a,e),[m
[32m+[m[32mvoid(Sr&&o&&r.prop(o,i[a]))):void("href"===t&&i.$set(a,null))})}}}});var fo={$addControl:m,$$renameControl:tr,$removeControl:m,$setValidity:m,$setDirty:m,$setPristine:m,$setSubmitted:m},po="ng-submitted";er.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var ho=function(t){return["$timeout",function(e){var r={name:"form",restrict:t?"EAC":"E",controller:er,compile:function(r,i){r.addClass(Go).addClass(zo);var o=i.name?"name":t&&i.ngForm?"ngForm":!1;return{pre:function(t,r,i,a){if(!("action"in i)){var s=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()};ni(r[0],"submit",s),r.on("$destroy",function(){e(function(){ri(r[0],"submit",s)},0,!1)})}var u=a.$$parentForm;o&&(sn(t,a.$name,a,a.$name),i.$observe(o,function(e){a.$name!==e&&(sn(t,a.$name,n,a.$name),u.$$renameControl(a,e),sn(t,a.$name,a,a.$name))})),r.on("$destroy",function(){u.$removeControl(a),o&&sn(t,i[o],n,a.$name),f(a,fo)})}}}};return r}]},mo=ho(),vo=ho(!0),go=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,$o=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,yo=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,bo=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,wo=/^(\d{4})-(\d{2})-(\d{2})$/,xo=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Co=/^(\d{4})-W(\d\d)$/,Eo=/^(\d{4})-(\d\d)$/,So=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,To={text:rr,date:sr("date",wo,ar(wo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":sr("datetimelocal",xo,ar(xo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:sr("time",So,ar(So,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:sr("week",Co,or,"yyyy-Www"),month:sr("month",Eo,ar(Eo,["yyyy","MM"]),"yyyy-MM"),number:lr,url:cr,email:fr,radio:pr,checkbox:dr,hidden:m,button:m,submit:m,reset:m,file:m},ko=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(To[br(a.type)]||To.text)(i,o,a,s[0],e,t,n,r)}}}}],Ao=/^(true|false|\d+)$/,No=function(){return{restrict:"A",priority:100,compile:function(t,e){return Ao.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},Oo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,r,i){t.$$addBindingInfo(r,i.ngBind),r=r[0],e.$watch(i.ngBind,function(t){r.textContent=t===n?"":t})}}}}],Do=["$interpolate","$compile",function(t,e){return{compile:function(r){return e.$$addBindingClass(r),function(r,i,o){var a=t(i.attr(o.$attr.ngBindTemplate));e.$$addBindingInfo(i,a.expressions),i=i[0],o.$observe("ngBindTemplate",function(t){i.textContent=t===n?"":t})}}}}],jo=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,function(){r.html(t.getTrustedHtml(o(e))||"")})}}}}],Mo=g({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),Io=mr("",!0),Po=mr("Odd",0),Ro=mr("Even",1),Fo=Zn({compile:function(t,e){e.$set("ngCloak",n),t.removeClass("ng-cloak")}}),qo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Vo={},Lo={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=ue("ng-"+t);Vo[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var i=function(){a(e,{$event:n})};Lo[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var Ho=["$animate",function(t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,l;n.$watch(i.ngIf,function(n){n?u||a(function(n,o){u=o,n[n.length++]=e.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},t.enter(n,r.parent(),r)}):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),s&&(l=dt(s.clone),t.leave(l).then(function(){l=null}),s=null))})}}}],_o=["$templateRequest","$anchorScroll","$animate","$sce",function(t,e,n,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Pr.noop,compile:function(i,o){var a=o.ngInclude||o.src,s=o.onload||"",u=o.autoscroll;return function(i,o,l,c,f){var p,h,d,m=0,v=function(){h&&(h.remove(),h=null),p&&(p.$destroy(),p=null),d&&(n.leave(d).then(function(){h=null}),h=d,d=null)};i.$watch(r.parseAsResourceUrl(a),function(r){var a=function(){!y(u)||u&&!i.$eval(u)||e()},l=++m;r?(t(r,!0).then(function(t){if(l===m){var e=i.$new();c.template=t;var u=f(e,function(t){v(),n.enter(t,null,o).then(a)});p=e,d=u,p.$emit("$includeContentLoaded",r),i.$eval(s)}},function(){l===m&&(v(),i.$emit("$includeContentError",r))}),i.$emit("$includeContentRequested",r)):(v(),c.template=null)})}}}}],Uo=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){return/SVG/.test(r[0].toString())?(r.empty(),void t(Et(o.template,e).childNodes)(n,function(t){r.append(t)},{futureParentElement:r})):(r.html(o.template),void t(r.contents())(n))}}}],Bo=Zn({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Wo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,r,i){var a=e.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,u=s?Lr(a):a,l=function(t){if(!$(t)){var e=[];return t&&o(t.split(u),function(t){t&&e.push(s?Lr(t):t)}),e}};i.$parsers.push(l),i.$formatters.push(function(t){return qr(t)?t.join(a):n}),i.$isEmpty=function(t){return!t||!t.length}}}},zo="ng-valid",Yo="ng-invalid",Go="ng-pristine",Xo="ng-dirty",Qo="ng-untouched",Jo="ng-touched",Ko="ng-pending",Zo=new r("ngModel"),ta=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,r,i,a,s,u,l,c,f){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=f(r.name||"",!1)(t);var p,h=a(r.ngModel),d=h.assign,v=h,g=d,b=null,w=this;this.$$setOptions=function(t){if(w.$options=t,t&&t.getterSetter){var e=a(r.ngModel+"()"),n=a(r.ngModel+"($$$p)");v=function(t){var n=h(t);return S(n)&&(n=e(t)),n},g=function(t,e){S(h(t))?n(t,{$$$p:w.$modelValue}):d(t,w.$modelValue)}}else if(!h.assign)throw Zo("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,J(i))},this.$render=m,this.$isEmpty=function(t){return $(t)||""===t||null===t||t!==t};var x=i.inheritedData("$formController")||fo,E=0;vr({ctrl:this,$element:i,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},parentForm:x,$animate:s}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,s.removeClass(i,Xo),s.addClass(i,Go)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,s.removeClass(i,Go),s.addClass(i,Xo),x.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,s.setClass(i,Qo,Jo)},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,s.setClass(i,Jo,Qo)},this.$rollbackViewValue=function(){u.cancel(b),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!C(w.$modelValue)||!isNaN(w.$modelValue)){var t=w.$$lastCommittedViewValue,e=w.$$rawModelValue,r=w.$valid,i=w.$modelValue,o=w.$options&&w.$options.allowInvalid;w.$$runValidators(e,t,function(t){o||r===t||(w.$modelValue=t?e:n,w.$modelValue!==i&&w.$$writeModelToScope())})}},this.$$runValidators=function(t,e,r){function i(){var t=w.$$parserName||"parse";return p!==n?(p||(o(w.$validators,function(t,e){u(e,null)}),o(w.$asyncValidators,function(t,e){u(e,null)})),u(t,p),p):(u(t,null),!0)}function a(){var n=!0;return o(w.$validators,function(r,i){var o=r(t,e);n=n&&o,u(i,o)}),n?!0:(o(w.$asyncValidators,function(t,e){u(e,null)}),!1)}function s(){var r=[],i=!0;o(w.$asyncValidators,function(o,a){var s=o(t,e);if(!M(s))throw Zo("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);u(a,n),r.push(s.then(function(){u(a,!0)},function(t){i=!1,u(a,!1)}))}),r.length?c.all(r).then(function(){l(i)},m):l(!0)}function u(t,e){f===E&&w.$setValidity(t,e)}function l(t){f===E&&r(t)}E++;var f=E;return i()&&a()?void s():void l(!1)},this.$commitViewValue=function(){var t=w.$viewValue;u.cancel(b),(w.$$lastCommittedViewValue!==t||""===t&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=t,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function e(){w.$modelValue!==a&&w.$$writeModelToScope()}var r=w.$$lastCommittedViewValue,i=r;if(p=$(i)?n:!0)for(var o=0;o<w.$parsers.length;o++)if(i=w.$parsers[o](i),$(i)){p=!1;break}C(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=v(t));var a=w.$modelValue,s=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=i,s&&(w.$modelValue=i,e()),w.$$runValidators(i,w.$$lastCommittedViewValue,function(t){s||(w.$modelValue=t?i:n,e())})},this.$$writeModelToScope=function(){g(t,w.$modelValue),o(w.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){w.$viewValue=t,(!w.$options||w.$options.updateOnDefault)&&w.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,r=0,i=w.$options;i&&y(i.debounce)&&(n=i.debounce,C(n)?r=n:C(n[e])?r=n[e]:C(n["default"])&&(r=n["default"])),u.cancel(b),r?b=u(function(){w.$commitViewValue()},r):l.$$phase?w.$commitViewValue():t.$apply(function(){w.$commitViewValue()})},t.$watch(function(){var e=v(t);if(e!==w.$modelValue&&(w.$modelValue===w.$modelValue||e===e)){w.$modelValue=w.$$rawModelValue=e,p=n;for(var r=w.$formatters,i=r.length,o=e;i--;)o=r[i](o);w.$viewValue!==o&&(w.$viewValue=w.$$lastCommittedViewValue=o,w.$render(),w.$$runValidators(e,o,m))}return e})}],ea=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ta,priority:1,compile:function(e){return e.addClass(Go).addClass(Qo).addClass(zo),{pre:function(t,e,n,r){var i=r[0],o=r[1]||fo;i.$$setOptions(r[2]&&r[2].$options),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&o.$$renameControl(i,t)}),t.$on("$destroy",function(){o.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(n){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],na=/(\s+|^)default(\s+|$)/,ra=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var r=this;this.$options=V(t.$eval(e.ngModelOptions)),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=Lr(this.$options.updateOn.replace(na,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ia=Zn({terminal:!0,priority:1e3}),oa=r("ngOptions"),aa=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,sa=["$compile","$parse",function(t,n){function r(t,e,r){function o(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}var a=t.match(aa);if(!a)throw oa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,J(e));var s=a[5]||a[7],u=a[6],l=/ as /.test(a[0])&&a[1],c=a[9],f=n(a[2]?a[1]:s),p=l&&n(l),h=p||f,d=c&&n(c),m=c?function(t,e){return d(r,e)}:function(t){return zt(t)},v=function(t,e){return m(t,x(t,e))},g=n(a[2]||a[1]),$=n(a[3]||""),y=n(a[4]||""),b=n(a[8]),w={},x=u?function(t,e){return w[u]=e,w[s]=t,w}:function(t){return w[s]=t,w};return{trackBy:c,getTrackByValue:v,getWatchables:n(b,function(t){var e=[];return t=t||[],Object.keys(t).forEach(function(n){var i=x(t[n],n),o=m(t[n],i);if(e.push(o),a[2]||a[1]){var s=g(r,i);e.push(s)}if(a[4]){var u=y(r,i);e.push(u)}}),e}),getOptions:function(){var t,e=[],n={},a=b(r)||[];if(!u&&i(a))t=a;else{t=[];for(var s in a)a.hasOwnProperty(s)&&"$"!==s.charAt(0)&&t.push(s)}for(var l=t.length,f=0;l>f;f++){var p=a===t?f:t[f],d=a[p],w=x(d,p),C=h(r,w),E=m(C,w),S=g(r,w),T=$(r,w),k=y(r,w),A=new o(E,C,S,T,k);e.push(A),n[E]=A}return{items:e,selectValueMap:n,getOptionFromViewValue:function(t){return n[v(t)]},getViewValueFromOption:function(t){return c?Pr.copy(t.viewValue):t.viewValue}}}}}var a=e.createElement("option"),s=e.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(e,n,i,u){function l(t,e){t.element=e,e.disabled=t.disabled,t.value!==e.value&&(e.value=t.selectValue),t.label!==e.label&&(e.label=t.label,e.textContent=t.label)}function c(t,e,n,r){var i;return e&&br(e.nodeName)===n?i=e:(i=r.cloneNode(!1),e?t.insertBefore(i,e):t.appendChild(i)),i}function f(t){for(var e;t;)e=t.nextSibling,Lt(t),t=e}function p(t){var e=m&&m[0],n=x&&x[0];if(e||n)for(;t&&(t===e||t===n);)t=t.nextSibling;return t}function h(){var t=C&&v.readValue();C=E.getOptions();var e={},r=n[0].firstChild;if(w&&n.prepend(m),r=p(r),C.items.forEach(function(t){var i,o,u;t.group?(i=e[t.group],i||(o=c(n[0],r,"optgroup",s),r=o.nextSibling,o.label=t.group,i=e[t.group]={groupElement:o,currentOptionElement:o.firstChild}),u=c(i.groupElement,i.currentOptionElement,"option",a),l(t,u),i.currentOptionElement=u.nextSibling):(u=c(n[0],r,"option",a),l(t,u),r=u.nextSibling)}),Object.keys(e).forEach(function(t){f(e[t].currentOptionElement)}),f(r),d.$render(),!d.$isEmpty(t)){var i=v.readValue();(E.trackBy&&!H(t,i)||t!==i)&&(d.$setViewValue(i),d.$render())}}var d=u[1];if(d){for(var m,v=u[0],g=i.multiple,$=0,y=n.children(),b=y.length;b>$;$++)if(""===y[$].value){m=y.eq($);break}var w=!!m,x=Tr(a.cloneNode(!1));x.val("?");var C,E=r(i.ngOptions,n,e),S=function(){w||n.prepend(m),n.val(""),m.prop("selected",!0),m.attr("selected",!0)},T=function(){w||m.remove()},k=function(){n.prepend(x),n.val("?"),x.prop("selected",!0),x.attr("selected",!0)},A=function(){x.remove()};g?(d.$isEmpty=function(t){return!t||0===t.length},v.writeValue=function(t){C.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=C.getOptionFromViewValue(t);e&&!e.disabled&&(e.element.selected=!0)})},v.readValue=function(){var t=n.val()||[],e=[];return o(t,function(t){var n=C.selectValueMap[t];n.disabled||e.push(C.getViewValueFromOption(n))}),e},E.trackBy&&e.$watchCollection(function(){return qr(d.$viewValue)?d.$viewValue.map(function(t){return E.getTrackByValue(t)}):void 0},function(){d.$render()})):(v.writeValue=function(t){var e=C.getOptionFromViewValue(t);e&&!e.disabled?n[0].value!==e.selectValue&&(A(),T(),n[0].value=e.selectValue,e.element.selected=!0,e.element.setAttribute("selected","selected")):null===t||w?(A(),S()):(T(),k())},v.readValue=function(){var t=C.selectValueMap[n.val()];return t&&!t.disabled?(T(),A(),C.getViewValueFromOption(t)):null},E.trackBy&&e.$watch(function(){return E.getTrackByValue(d.$viewValue)},function(){d.$render()})),w?(m.remove(),t(m)(e),m.removeClass("ng-scope")):m=Tr(a.cloneNode(!1)),h(),e.$watchCollection(E.getWatchables,h)}}}}],ua=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,s,u){function l(t){s.text(t||"")}var c,f=u.count,p=u.$attr.when&&s.attr(u.$attr.when),h=u.offset||0,d=a.$eval(p)||{},v={},g=e.startSymbol(),y=e.endSymbol(),b=g+f+"-"+h+y,w=Pr.noop;o(u,function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+br(n[2]);d[r]=s.attr(u.$attr[e])}}),o(d,function(t,n){v[n]=e(t.replace(r,b))}),a.$watch(f,function(e){var r=parseFloat(e),i=isNaN(r);if(i||r in d||(r=t.pluralCat(r-h)),r!==c&&!(i&&C(c)&&isNaN(c))){w();var o=v[r];$(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+p),w=m,l()):w=a.$watch(o,l),c=r}})}}}],la=["$parse","$animate",function(t,a){var s="$$NG_REMOVED",u=r("ngRepeat"),l=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))},c=function(t){return t.clone[0]},f=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,p){var h=p.ngRepeat,d=e.createComment(" end ngRepeat: "+h+" "),m=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw u("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",h);var v=m[1],g=m[2],$=m[3],y=m[4];if(m=v.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!m)throw u("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v);var b=m[3]||m[1],w=m[2];if($&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test($)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test($)))throw u("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",$);var x,C,E,S,T={$id:zt};return y?x=t(y):(E=function(t,e){return zt(e)},S=function(t){return t}),function(t,e,r,p,m){x&&(C=function(e,n,r){return w&&(T[w]=e),T[b]=n,T.$index=r,x(t,T)});var v=mt();t.$watchCollection(g,function(r){var p,g,y,x,T,k,A,N,O,D,j,M,I=e[0],P=mt();if($&&(t[$]=r),i(r))O=r,N=C||E;else{N=C||S,O=[];for(var R in r)r.hasOwnProperty(R)&&"$"!==R.charAt(0)&&O.push(R)}for(x=O.length,j=new Array(x),p=0;x>p;p++)if(T=r===O?p:O[p],k=r[T],A=N(T,k,p),v[A])D=v[A],delete v[A],P[A]=D,j[p]=D;else{if(P[A])throw o(j,function(t){t&&t.scope&&(v[t.id]=t)}),u("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",h,A,k);j[p]={id:A,scope:n,clone:n},P[A]=!0}for(var F in v){if(D=v[F],M=dt(D.clone),a.leave(M),M[0].parentNode)for(p=0,g=M.length;g>p;p++)M[p][s]=!0;D.scope.$destroy()}for(p=0;x>p;p++)if(T=r===O?p:O[p],k=r[T],D=j[p],D.scope){y=I;do y=y.nextSibling;while(y&&y[s]);c(D)!=y&&a.move(dt(D.clone),null,Tr(I)),I=f(D),l(D.scope,p,b,k,w,T,x)}else m(function(t,e){D.scope=e;var n=d.cloneNode(!1);t[t.length++]=n,a.enter(t,null,Tr(I)),I=n,D.clone=t,P[D.id]=D,l(D.scope,p,b,k,w,T,x)});v=P})}}}}],ca="ng-hide",fa="ng-hide-animate",pa=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,ca,{tempClasses:fa})})}}}],ha=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,ca,{tempClasses:fa})})}}}],da=Zn(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&o(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),ma=["$animate",function(t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var s=i.ngSwitch||i.on,u=[],l=[],c=[],f=[],p=function(t,e){return function(){t.splice(e,1)}};n.$watch(s,function(n){var r,i;for(r=0,i=c.length;i>r;++r)t.cancel(c[r]);for(c.length=0,r=0,i=f.length;i>r;++r){var s=dt(l[r].clone);f[r].$destroy();var h=c[r]=t.leave(s);h.then(p(c,r))}l.length=0,f.length=0,(u=a.cases["!"+n]||a.cases["?"])&&o(u,function(n){n.transclude(function(r,i){f.push(i);var o=n.element;r[r.length++]=e.createComment(" end ngSwitchWhen: ");var a={clone:r};l.push(a),t.enter(r,o.parent(),o)})})})}}}],va=Zn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:e})}}),ga=Zn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),$a=Zn({restrict:"EAC",link:function(t,e,n,i,o){if(!o)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",J(e));o(function(t){e.empty(),e.append(t)})}}),ya=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"==n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],ba={$setViewValue:m,$render:m},wa=["$element","$scope","$attrs",function(t,r,i){var o=this,a=new Yt;o.ngModelCtrl=ba,o.unknownOption=Tr(e.createElement("option")),o.renderUnknownOption=function(e){var n="? "+zt(e)+" ?";o.unknownOption.val(n),t.prepend(o.unknownOption),t.val(n)},r.$on("$destroy",function(){o.renderUnknownOption=m}),o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.readValue=function(){return o.removeUnknownOption(),t.val()},o.writeValue=function(e){o.hasOption(e)?(o.removeUnknownOption(),t.val(e),""===e&&o.emptyOption.prop("selected",!0)):null==e&&o.emptyOption?(o.removeUnknownOption(),t.val("")):o.renderUnknownOption(e)},o.addOption=function(t,e){pt(t,'"option value"'),""===t&&(o.emptyOption=e);var n=a.get(t)||0;a.put(t,n+1)},o.removeOption=function(t){var e=a.get(t);e&&(1===e?(a.remove(t),""===t&&(o.emptyOption=n)):a.put(t,e-1))},o.hasOption=function(t){return!!a.get(t)}}],xa=function(){return{restrict:"E",require:["select","?ngModel"],controller:wa,link:function(t,e,n,r){var i=r[1];if(i){var a=r[0];if(a.ngModelCtrl=i,i.$render=function(){a.writeValue(i.$viewValue)},e.on("change",function(){t.$apply(function(){i.$setViewValue(a.readValue())})}),n.multiple){a.readValue=function(){var t=[];return o(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},a.writeValue=function(t){var n=new Yt(t);o(e.find("option"),function(t){t.selected=y(n.get(t.value))})};var s,u=NaN;t.$watch(function(){u!==i.$viewValue||H(s,i.$viewValue)||(s=L(i.$viewValue),i.$render()),u=i.$viewValue}),i.$isEmpty=function(t){return!t||0===t.length}}}}}},Ca=["$interpolate",function(t){function e(t){t[0].hasAttribute("selected")&&(t[0].selected=!0)}return{restrict:"E",priority:100,compile:function(n,r){if($(r.value)){var i=t(n.text(),!0);i||r.$set("value",n.text())}return function(t,n,r){var o="$selectController",a=n.parent(),s=a.data(o)||a.parent().data(o);s&&s.ngModelCtrl&&(i?t.$watch(i,function(t,i){r.$set("value",t),i!==t&&s.removeOption(i),s.addOption(t,n),s.ngModelCtrl.$render(),e(n)}):(s.addOption(r.value,n),s.ngModelCtrl.$render(),e(n)),n.on("$destroy",function(){s.removeOption(r.value),s.ngModelCtrl.$render()}))}}}}],Ea=g({restrict:"E",terminal:!1}),Sa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},Ta=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,i,o){if(o){var a,s=i.ngPattern||i.pattern;i.$observe("pattern",function(t){if(x(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,J(e));a=t||n,o.$validate()}),o.$validators.pattern=function(t){return o.$isEmpty(t)||$(a)||a.test(t)}}}}},ka=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){var e=h(t);i=isNaN(e)?-1:e,r.$validate()}),r.$validators.maxlength=function(t,e){return 0>i||r.$isEmpty(e)||e.length<=i}}}}},Aa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=h(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};return t.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(lt(),yt(Pr),void Tr(e).ready(function(){it(e,ot)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e="length"in t&&t.length,n=Z.type(t);return"function"===n||Z.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function r(t,e,n){if(Z.isFunction(e))return Z.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return Z.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(st.test(e))return Z.filter(e,t,n);e=Z.filter(e,t)}return Z.grep(t,function(t){return z.call(e,t)>=0!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=dt[t]={};return Z.each(t.match(ht)||[],function(t,n){e[n]=!0}),e}function a(){J.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1),Z.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+s.uid++}function u(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(bt,"-$1").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:yt.test(n)?Z.parseJSON(n):n}catch(i){}$t.set(t,e,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function f(){try{return J.activeElement}catch(t){}}function p(t,e){return Z.nodeName(t,"table")&&Z.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function h(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function d(t){var e=Rt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var n=0,r=t.length;r>n;n++)gt.set(t[n],"globalEval",!e||gt.get(e[n],"globalEval"))}function v(t,e){var n,r,i,o,a,s,u,l;if(1===e.nodeType){if(gt.hasData(t)&&(o=gt.access(t),a=gt.set(e,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)Z.event.add(e,i,l[i][n])}$t.hasData(t)&&(s=$t.access(t),u=Z.extend({},s),$t.set(e,u))}}function g(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Z.nodeName(t,e)?Z.merge([t],n):n}function $(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Et.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(e,n){var r,i=Z(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(r=t.getDefaultComputedStyle(i[0]))?r.display:Z.css(i[0],"display");return i.detach(),o}function b(t){var e=J,n=Lt[t];return n||(n=y(t,e),"none"!==n&&n||(Vt=(Vt||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Vt[0].contentDocument,e.write(),e.close(),n=y(t,e),Vt.detach()),Lt[t]=n),n}function w(t,e,n){var r,i,o,a,s=t.style;return n=n||Ut(t),n&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||Z.contains(t.ownerDocument,t)||(a=Z.style(t,e)),_t.test(a)&&Ht.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function x(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function C(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),r=e,i=Xt.length;i--;)if(e=Xt[i]+n,e in t)return e;return r}function E(t,e,n){var r=Wt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function S(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=Z.css(t,n+xt[o],!0,i)),r?("content"===n&&(a-=Z.css(t,"padding"+xt[o],!0,i)),"margin"!==n&&(a-=Z.css(t,"border"+xt[o]+"Width",!0,i))):(a+=Z.css(t,"padding"+xt[o],!0,i),"padding"!==n&&(a+=Z.css(t,"border"+xt[o]+"Width",!0,i)));return a}function T(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Ut(t),a="border-box"===Z.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=w(t,e,o),(0>i||null==i)&&(i=t.style[e]),_t.test(i))return i;r=a&&(Q.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+S(t,e,n||(a?"border":"content"),r,o)+"px"}function k(t,e){for(var n,r,i,o=[],a=0,s=t.length;s>a;a++)r=t[a],r.style&&(o[a]=gt.get(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Ct(r)&&(o[a]=gt.access(r,"olddisplay",b(r.nodeName)))):(i=Ct(r),"none"===n&&i||gt.set(r,"olddisplay",i?n:Z.css(r,"display"))));for(a=0;s>a;a++)r=t[a],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function A(t,e,n,r,i){return new A.prototype.init(t,e,n,r,i)}function N(){return setTimeout(function(){Qt=void 0}),Qt=Z.now()}function O(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=xt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function D(t,e,n){for(var r,i=(ne[e]||[]).concat(ne["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,e,t))return r}function j(t,e,n){var r,i,o,a,s,u,l,c,f=this,p={},h=t.style,d=t.nodeType&&Ct(t),m=gt.get(t,"fxshow");n.queue||(s=Z._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,Z.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],l=Z.css(t,"display"),c="none"===l?gt.get(t,"olddisplay")||b(t.nodeName):l,"inline"===c&&"none"===Z.css(t,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],Kt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;d=!0}p[r]=m&&m[r]||Z.style(t,r)}else l=void 0;if(Z.isEmptyObject(p))"inline"===("none"===l?b(t.nodeName):l)&&(h.display=l);else{m?"hidden"in m&&(d=m.hidden):m=gt.access(t,"fxshow",{}),o&&(m.hidden=!d),d?Z(t).show():f.done(function(){Z(t).hide()}),f.done(function(){var e;gt.remove(t,"fxshow");for(e in p)Z.style(t,e,p[e])});for(r in p)a=D(d?m[r]:0,r,f),r in m||(m[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function M(t,e){var n,r,i,o,a;for(n in t)if(r=Z.camelCase(n),i=e[r],o=t[n],Z.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),a=Z.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function I(t,e,n){var r,i,o=0,a=ee.length,s=Z.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=Qt||N(),n=Math.max(0,l.startTime+l.duration-e),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(t,[l,o,n]),1>o&&u?n:(s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Qt||N(),duration:n.duration,tweens:[],createTween:function(e,n){var r=Z.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return e?s.resolveWith(t,[l,e]):s.rejectWith(t,[l,e]),this}}),c=l.props;for(M(c,l.opts.specialEasing);a>o;o++)if(r=ee[o].call(l,t,c,l.opts))return r;return Z.map(c,D,l),Z.isFunction(l.opts.start)&&l.opts.start.call(t,l),Z.fx.timer(Z.extend(u,{elem:t,anim:l,queue:l.opts.queue[m
[32m+[m[32m})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function P(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(ht)||[];if(Z.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function R(t,e,n,r){function i(s){var u;return o[s]=!0,Z.each(t[s]||[],function(t,s){var l=s(e,n,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(e.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=t===ye;return i(e.dataTypes[0])||!o["*"]&&i("*")}function F(t,e){var n,r,i=Z.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&Z.extend(!0,t,r),t}function q(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function V(t,e,n,r){var i,o,a,s,u,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=l[u+" "+o]||l["* "+o],!a)for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[i]:l[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function L(t,e,n,r){var i;if(Z.isArray(e))Z.each(e,function(e,i){n||Ee.test(t)?r(t,i):L(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==Z.type(e))r(t,e);else for(i in e)L(t+"["+i+"]",e[i],n,r)}function H(t){return Z.isWindow(t)?t:9===t.nodeType&&t.defaultView}var _=[],U=_.slice,B=_.concat,W=_.push,z=_.indexOf,Y={},G=Y.toString,X=Y.hasOwnProperty,Q={},J=t.document,K="2.1.4",Z=function(t,e){return new Z.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,nt=/-([\da-z])/gi,rt=function(t,e){return e.toUpperCase()};Z.fn=Z.prototype={jquery:K,constructor:Z,selector:"",length:0,toArray:function(){return U.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:U.call(this)},pushStack:function(t){var e=Z.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Z.each(this,t,e)},map:function(t){return this.pushStack(Z.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(U.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:_.sort,splice:_.splice},Z.extend=Z.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||Z.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],r=t[e],a!==r&&(l&&r&&(Z.isPlainObject(r)||(i=Z.isArray(r)))?(i?(i=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},a[e]=Z.extend(l,o,r)):void 0!==r&&(a[e]=r));return a},Z.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Z.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Z.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==Z.type(t)||t.nodeType||Z.isWindow(t)?!1:t.constructor&&!X.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Y[G.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=Z.trim(t),t&&(1===t.indexOf("use strict")?(e=J.createElement("script"),e.text=t,J.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(et,"ms-").replace(nt,rt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,a=t.length,s=n(t);if(r){if(s)for(;a>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(s)for(;a>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?Z.merge(r,"string"==typeof t?[t]:t):W.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:z.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,a=t.length,s=!n;a>o;o++)r=!e(t[o],o),r!==s&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,a=t.length,s=n(t),u=[];if(s)for(;a>o;o++)i=e(t[o],o,r),null!=i&&u.push(i);else for(o in t)i=e(t[o],o,r),null!=i&&u.push(i);return B.apply([],u)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),Z.isFunction(t)?(r=U.call(arguments,2),i=function(){return t.apply(e||this,r.concat(U.call(arguments)))},i.guid=t.guid=t.guid||Z.guid++,i):void 0},now:Date.now,support:Q}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()});var it=function(t){function e(t,e,n,r){var i,o,a,s,u,l,f,h,d,m;if((e?e.ownerDocument||e:L)!==j&&D(e),e=e||j,n=n||[],s=e.nodeType,"string"!=typeof t||!t||1!==s&&9!==s&&11!==s)return n;if(!r&&I){if(11!==s&&(i=$t.exec(t)))if(a=i[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&q(e,o)&&o.id===a)return n.push(o),n}else{if(i[2])return K.apply(n,e.getElementsByTagName(t)),n;if((a=i[3])&&w.getElementsByClassName)return K.apply(n,e.getElementsByClassName(a)),n}if(w.qsa&&(!P||!P.test(t))){if(h=f=V,d=e,m=1!==s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(l=S(t),(f=e.getAttribute("id"))?h=f.replace(bt,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",u=l.length;u--;)l[u]=h+p(l[u]);d=yt.test(t)&&c(e.parentNode)||e,m=l.join(",")}if(m)try{return K.apply(n,d.querySelectorAll(m)),n}catch(v){}finally{f||e.removeAttribute("id")}}}return k(t.replace(ut,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[V]=!0,t}function i(t){var e=j.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=t.length;r--;)x.attrHandle[n[r]]=e}function a(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function f(){}function p(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function h(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=_++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,u,l=[H,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(u=e[V]||(e[V]={}),(s=u[r])&&s[0]===H&&s[1]===o)return l[2]=s[2];if(u[r]=l,l[2]=t(e,n,a))return!0}}}function d(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function m(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function v(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,l=null!=e;u>s;s++)(o=t[s])&&(!n||n(o,r,i))&&(a.push(o),l&&e.push(s));return a}function g(t,e,n,i,o,a){return i&&!i[V]&&(i=g(i)),o&&!o[V]&&(o=g(o,a)),r(function(r,a,s,u){var l,c,f,p=[],h=[],d=a.length,g=r||m(e||"*",s.nodeType?[s]:s,[]),$=!t||!r&&e?g:v(g,p,t,s,u),y=n?o||(r?t:d||i)?[]:a:$;if(n&&n($,y,s,u),i)for(l=v(y,h),i(l,[],s,u),c=l.length;c--;)(f=l[c])&&(y[h[c]]=!($[h[c]]=f));if(r){if(o||t){if(o){for(l=[],c=y.length;c--;)(f=y[c])&&l.push($[c]=f);o(null,y=[],l,u)}for(c=y.length;c--;)(f=y[c])&&(l=o?tt(r,f):p[c])>-1&&(r[l]=!(a[l]=f))}}else y=v(y===a?y.splice(d,y.length):y),o?o(null,a,y,u):K.apply(a,y)})}function $(t){for(var e,n,r,i=t.length,o=x.relative[t[0].type],a=o||x.relative[" "],s=o?1:0,u=h(function(t){return t===e},a,!0),l=h(function(t){return tt(e,t)>-1},a,!0),c=[function(t,n,r){var i=!o&&(r||n!==A)||((e=n).nodeType?u(t,n,r):l(t,n,r));return e=null,i}];i>s;s++)if(n=x.relative[t[s].type])c=[h(d(c),n)];else{if(n=x.filter[t[s].type].apply(null,t[s].matches),n[V]){for(r=++s;i>r&&!x.relative[t[r].type];r++);return g(s>1&&d(c),s>1&&p(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(ut,"$1"),n,r>s&&$(t.slice(s,r)),i>r&&$(t=t.slice(r)),i>r&&p(t))}c.push(n)}return d(c)}function y(t,n){var i=n.length>0,o=t.length>0,a=function(r,a,s,u,l){var c,f,p,h=0,d="0",m=r&&[],g=[],$=A,y=r||o&&x.find.TAG("*",l),b=H+=null==$?1:Math.random()||.1,w=y.length;for(l&&(A=a!==j&&a);d!==w&&null!=(c=y[d]);d++){if(o&&c){for(f=0;p=t[f++];)if(p(c,a,s)){u.push(c);break}l&&(H=b)}i&&((c=!p&&c)&&h--,r&&m.push(c))}if(h+=d,i&&d!==h){for(f=0;p=n[f++];)p(m,g,a,s);if(r){if(h>0)for(;d--;)m[d]||g[d]||(g[d]=Q.call(u));g=v(g)}K.apply(u,g),l&&!r&&g.length>0&&h+n.length>1&&e.uniqueSort(u)}return l&&(H=b,A=$),m};return i?r(a):a}var b,w,x,C,E,S,T,k,A,N,O,D,j,M,I,P,R,F,q,V="sizzle"+1*new Date,L=t.document,H=0,_=0,U=n(),B=n(),W=n(),z=function(t,e){return t===e&&(O=!0),0},Y=1<<31,G={}.hasOwnProperty,X=[],Q=X.pop,J=X.push,K=X.push,Z=X.slice,tt=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it=rt.replace("w","w#"),ot="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",at=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),ut=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ft=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),pt=new RegExp(at),ht=new RegExp("^"+it+"$"),dt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,$t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),xt=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ct=function(){D()};try{K.apply(X=Z.call(L.childNodes),L.childNodes),X[L.childNodes.length].nodeType}catch(Et){K={apply:X.length?function(t,e){J.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}w=e.support={},E=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:L;return r!==j&&9===r.nodeType&&r.documentElement?(j=r,M=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ct,!1):n.attachEvent&&n.attachEvent("onunload",Ct)),I=!E(r),w.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=i(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(r.getElementsByClassName),w.getById=i(function(t){return M.appendChild(t).id=V,!r.getElementsByName||!r.getElementsByName(V).length}),w.getById?(x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&I){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(t){var e=t.replace(wt,xt);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(wt,xt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},x.find.CLASS=w.getElementsByClassName&&function(t,e){return I?e.getElementsByClassName(t):void 0},R=[],P=[],(w.qsa=gt.test(r.querySelectorAll))&&(i(function(t){M.appendChild(t).innerHTML="<a id='"+V+"'></a><select id='"+V+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||P.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+V+"-]").length||P.push("~="),t.querySelectorAll(":checked").length||P.push(":checked"),t.querySelectorAll("a#"+V+"+*").length||P.push(".#.+[+~]")}),i(function(t){var e=r.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&P.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(w.matchesSelector=gt.test(F=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&i(function(t){w.disconnectedMatch=F.call(t,"div"),F.call(t,"[s!='']:x"),R.push("!=",at)}),P=P.length&&new RegExp(P.join("|")),R=R.length&&new RegExp(R.join("|")),e=gt.test(M.compareDocumentPosition),q=e||gt.test(M.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},z=e?function(t,e){if(t===e)return O=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===r||t.ownerDocument===L&&q(L,t)?-1:e===r||e.ownerDocument===L&&q(L,e)?1:N?tt(N,t)-tt(N,e):0:4&n?-1:1)}:function(t,e){if(t===e)return O=!0,0;var n,i=0,o=t.parentNode,s=e.parentNode,u=[t],l=[e];if(!o||!s)return t===r?-1:e===r?1:o?-1:s?1:N?tt(N,t)-tt(N,e):0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)u.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?a(u[i],l[i]):u[i]===L?-1:l[i]===L?1:0},r):j},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==j&&D(t),n=n.replace(ft,"='$1']"),w.matchesSelector&&I&&(!R||!R.test(n))&&(!P||!P.test(n)))try{var r=F.call(t,n);if(r||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,j,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==j&&D(t),q(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==j&&D(t);var n=x.attrHandle[e.toLowerCase()],r=n&&G.call(x.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==r?r:w.attributes||!I?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(O=!w.detectDuplicates,N=!w.sortStable&&t.slice(0),t.sort(z),O){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return N=null,t},C=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=C(e);return n},x=e.selectors={cacheLength:50,createPseudo:r,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(wt,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(wt,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&pt.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(wt,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(st," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,f,p,h,d,m=o!==a?"nextSibling":"previousSibling",v=e.parentNode,g=s&&e.nodeName.toLowerCase(),$=!u&&!s;if(v){if(o){for(;m;){for(f=e;f=f[m];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;d=m="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?v.firstChild:v.lastChild],a&&$){for(c=v[V]||(v[V]={}),l=c[t]||[],h=l[0]===H&&l[1],p=l[0]===H&&l[2],f=h&&v.childNodes[h];f=++h&&f&&f[m]||(p=h=0)||d.pop();)if(1===f.nodeType&&++p&&f===e){c[t]=[H,h,p];break}}else if($&&(l=(e[V]||(e[V]={}))[t])&&l[0]===H)p=l[1];else for(;(f=++h&&f&&f[m]||(p=h=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++p||($&&((f[V]||(f[V]={}))[t]=[H,p]),f!==e)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(t,n){var i,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[V]?o(n):o.length>1?(i=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),a=i.length;a--;)r=tt(t,i[a]),t[r]=!(e[r]=i[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=T(t.replace(ut,"$1"));return i[V]?r(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(wt,xt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:r(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(wt,xt).toLowerCase(),function(e){var n;do if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===M},focus:function(t){return t===j.activeElement&&(!j.hasFocus||j.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return vt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[0>n?n+e:n]}),even:l(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:l(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=u(b);return f.prototype=x.filters=x.pseudos,x.setFilters=new f,S=e.tokenize=function(t,n){var r,i,o,a,s,u,l,c=B[t+" "];if(c)return n?0:c.slice(0);for(s=t,u=[],l=x.preFilter;s;){(!r||(i=lt.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=ct.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ut," ")}),s=s.slice(r.length));for(a in x.filter)!(i=dt[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):B(t,u).slice(0)},T=e.compile=function(t,e){var n,r=[],i=[],o=W[t+" "];if(!o){for(e||(e=S(t)),n=e.length;n--;)o=$(e[n]),o[V]?r.push(o):i.push(o);o=W(t,y(i,r)),o.selector=t}return o},k=e.select=function(t,e,n,r){var i,o,a,s,u,l="function"==typeof t&&t,f=!r&&S(t=l.selector||t);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===e.nodeType&&I&&x.relative[o[1].type]){if(e=(x.find.ID(a.matches[0].replace(wt,xt),e)||[])[0],!e)return n;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=dt.needsContext.test(t)?0:o.length;i--&&(a=o[i],!x.relative[s=a.type]);)if((u=x.find[s])&&(r=u(a.matches[0].replace(wt,xt),yt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&p(o),!t)return K.apply(n,r),n;break}}return(l||T(t,f))(r,e,!I,n,yt.test(t)&&c(e.parentNode)||e),n},w.sortStable=V.split("").sort(z).join("")===V,w.detectDuplicates=!!O,D(),w.sortDetached=i(function(t){return 1&t.compareDocumentPosition(j.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);Z.find=it,Z.expr=it.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=it.uniqueSort,Z.text=it.getText,Z.isXMLDoc=it.isXML,Z.contains=it.contains;var ot=Z.expr.match.needsContext,at=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^.[^:#\[\.,]*$/;Z.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?Z.find.matchesSelector(r,t)?[r]:[]:Z.find.matches(t,Z.grep(e,function(t){return 1===t.nodeType}))},Z.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(Z(t).filter(function(){for(e=0;n>e;e++)if(Z.contains(i[e],this))return!0}));for(e=0;n>e;e++)Z.find(t,i[e],r);return r=this.pushStack(n>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&ot.test(t)?Z(t):t||[],!1).length}});var ut,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=Z.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:lt.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ut).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof Z?e[0]:e,Z.merge(this,Z.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:J,!0)),at.test(n[1])&&Z.isPlainObject(e))for(n in e)Z.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Z.isFunction(t)?"undefined"!=typeof ut.ready?ut.ready(t):t(Z):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Z.makeArray(t,this))};ct.prototype=Z.fn,ut=Z(J);var ft=/^(?:parents|prev(?:Until|All))/,pt={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&Z(t).is(n))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),Z.fn.extend({has:function(t){var e=Z(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(Z.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=ot.test(t)||"string"!=typeof t?Z(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(t){return t?"string"==typeof t?z.call(Z(t),this[0]):z.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Z.unique(Z.merge(this.get(),Z(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Z.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Z.dir(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return Z.dir(t,"nextSibling")},prevAll:function(t){return Z.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Z.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Z.dir(t,"previousSibling",n)},siblings:function(t){return Z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Z.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Z.merge([],t.childNodes)}},function(t,e){Z.fn[t]=function(n,r){var i=Z.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Z.filter(r,i)),this.length>1&&(pt[t]||Z.unique(i),ft.test(t)&&i.reverse()),this.pushStack(i)}});var ht=/\S+/g,dt={};Z.Callbacks=function(t){t="string"==typeof t?dt[t]||o(t):Z.extend({},t);var e,n,r,i,a,s,u=[],l=!t.once&&[],c=function(o){for(e=t.memory&&o,n=!0,s=i||0,i=0,a=u.length,r=!0;u&&a>s;s++)if(u[s].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):e?u=[]:f.disable())},f={add:function(){if(u){var n=u.length;!function o(e){Z.each(e,function(e,n){var r=Z.type(n);"function"===r?t.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?a=u.length:e&&(i=n,c(e))}return this},remove:function(){return u&&Z.each(arguments,function(t,e){for(var n;(n=Z.inArray(e,u,n))>-1;)u.splice(n,1),r&&(a>=n&&a--,s>=n&&s--)}),this},has:function(t){return t?Z.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],a=0,this},disable:function(){return u=l=e=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,e||f.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!u||n&&!l||(e=e||[],e=[t,e.slice?e.slice():e],r?l.push(e):c(e)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},Z.extend({Deferred:function(t){var e=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Z.Deferred(function(n){Z.each(e,function(e,o){var a=Z.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&Z.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Z.extend(t,r):r}},i={};return r.pipe=r.then,Z.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=U.call(arguments),a=o.length,s=1!==a||t&&Z.isFunction(t.promise)?a:0,u=1===s?t:Z.Deferred(),l=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?U.call(arguments):i,r===e?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&Z.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,e)):--s;return s||u.resolveWith(r,o),u.promise()}});var mt;Z.fn.ready=function(t){return Z.ready.promise().done(t),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Z.readyWait++:Z.ready(!0)},ready:function(t){(t===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,t!==!0&&--Z.readyWait>0||(mt.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(e){return mt||(mt=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1))),mt.promise(e)},Z.ready.promise();var vt=Z.access=function(t,e,n,r,i,o,a){var s=0,u=t.length,l=null==n;if("object"===Z.type(n)){i=!0;for(s in n)Z.access(t,e,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,Z.isFunction(r)||(a=!0),l&&(a?(e.call(t,r),e=null):(l=e,e=function(t,e,n){return l.call(Z(t),n)})),e))for(;u>s;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:l?e.call(t):u?e(t[0],n):o};Z.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},s.uid=1,s.accepts=Z.acceptData,s.prototype={key:function(t){if(!s.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=s.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,Z.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,Z.camelCase(e))):(this.set(t,e,n),[m
[32m+[m[32mvoid 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),a=this.cache[o];if(void 0===e)this.cache[o]={};else{Z.isArray(e)?r=e.concat(e.map(Z.camelCase)):(i=Z.camelCase(e),e in a?r=[e,i]:(r=i,r=r in a?[r]:r.match(ht)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(t){return!Z.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var gt=new s,$t=new s,yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bt=/([A-Z])/g;Z.extend({hasData:function(t){return $t.hasData(t)||gt.hasData(t)},data:function(t,e,n){return $t.access(t,e,n)},removeData:function(t,e){$t.remove(t,e)},_data:function(t,e,n){return gt.access(t,e,n)},_removeData:function(t,e){gt.remove(t,e)}}),Z.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=$t.get(o),1===o.nodeType&&!gt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=Z.camelCase(r.slice(5)),u(o,r,i[r])));gt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){$t.set(this,t)}):vt(this,function(e){var n,r=Z.camelCase(t);if(o&&void 0===e){if(n=$t.get(o,t),void 0!==n)return n;if(n=$t.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=$t.get(this,r);$t.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&$t.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){$t.remove(this,t)})}}),Z.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=gt.get(t,e),n&&(!r||Z.isArray(n)?r=gt.access(t,e,Z.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=Z.queue(t,e),r=n.length,i=n.shift(),o=Z._queueHooks(t,e),a=function(){Z.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return gt.get(t,n)||gt.access(t,n,{empty:Z.Callbacks("once memory").add(function(){gt.remove(t,[e+"queue",n])})})}}),Z.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?Z.queue(this[0],t):void 0===e?this:this.each(function(){var n=Z.queue(this,t,e);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&Z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Z.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=Z.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=gt.get(o[a],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xt=["Top","Right","Bottom","Left"],Ct=function(t,e){return t=e||t,"none"===Z.css(t,"display")||!Z.contains(t.ownerDocument,t)},Et=/^(?:checkbox|radio)$/i;!function(){var t=J.createDocumentFragment(),e=t.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),Q.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var St="undefined";Q.focusinBubbles="onfocusin"in t;var Tt=/^key/,kt=/^(?:mouse|pointer|contextmenu)|click/,At=/^(?:focusinfocus|focusoutblur)$/,Nt=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,h,d,m,v=gt.get(t);if(v)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Z.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return typeof Z!==St&&Z.event.triggered!==e.type?Z.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(ht)||[""],l=e.length;l--;)s=Nt.exec(e[l])||[],h=m=s[1],d=(s[2]||"").split(".").sort(),h&&(f=Z.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=Z.event.special[h]||{},c=Z.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:d.join(".")},o),(p=u[h])||(p=u[h]=[],p.delegateCount=0,f.setup&&f.setup.call(t,r,d,a)!==!1||t.addEventListener&&t.addEventListener(h,a,!1)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),Z.event.global[h]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,h,d,m,v=gt.hasData(t)&&gt.get(t);if(v&&(u=v.events)){for(e=(e||"").match(ht)||[""],l=e.length;l--;)if(s=Nt.exec(e[l])||[],h=m=s[1],d=(s[2]||"").split(".").sort(),h){for(f=Z.event.special[h]||{},h=(r?f.delegateType:f.bindType)||h,p=u[h]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(t,c));a&&!p.length&&(f.teardown&&f.teardown.call(t,d,v.handle)!==!1||Z.removeEvent(t,h,v.handle),delete u[h])}else for(h in u)Z.event.remove(t,h+e[l],n,r,!0);Z.isEmptyObject(u)&&(delete v.handle,gt.remove(t,"events"))}},trigger:function(e,n,r,i){var o,a,s,u,l,c,f,p=[r||J],h=X.call(e,"type")?e.type:e,d=X.call(e,"namespace")?e.namespace.split("."):[];if(a=s=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!At.test(h+Z.event.triggered)&&(h.indexOf(".")>=0&&(d=h.split("."),h=d.shift(),d.sort()),l=h.indexOf(":")<0&&"on"+h,e=e[Z.expando]?e:new Z.Event(h,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=d.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:Z.makeArray(n,[e]),f=Z.event.special[h]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!Z.isWindow(r)){for(u=f.delegateType||h,At.test(u+h)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(r.ownerDocument||J)&&p.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=p[o++])&&!e.isPropagationStopped();)e.type=o>1?u:f.bindType||h,c=(gt.get(a,"events")||{})[e.type]&&gt.get(a,"handle"),c&&c.apply(a,n),c=l&&a[l],c&&c.apply&&Z.acceptData(a)&&(e.result=c.apply(a,n),e.result===!1&&e.preventDefault());return e.type=h,i||e.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!Z.acceptData(r)||l&&Z.isFunction(r[h])&&!Z.isWindow(r)&&(s=r[l],s&&(r[l]=null),Z.event.triggered=h,r[h](),Z.event.triggered=void 0,s&&(r[l]=s)),e.result}},dispatch:function(t){t=Z.event.fix(t);var e,n,r,i,o,a=[],s=U.call(arguments),u=(gt.get(this,"events")||{})[t.type]||[],l=Z.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(a=Z.event.handlers.call(this,t,u),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=((Z.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,u=t.target;if(s&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(r=[],n=0;s>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Z(i,this).index(u)>=0:Z.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||J,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[Z.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=kt.test(i)?this.mouseHooks:Tt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new Z.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=J),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Z.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=Z.extend(new Z.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?Z.event.trigger(i,null,e):Z.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},Z.Event=function(t,e){return this instanceof Z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?l:c):this.type=t,e&&Z.extend(this,e),this.timeStamp=t&&t.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(t,e)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=l,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!Z.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),Q.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){Z.event.simulate(e,t.target,Z.event.fix(t),!0)};Z.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=gt.access(r,e);i||r.addEventListener(t,n,!0),gt.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=gt.access(r,e)-1;i?gt.access(r,e,i):(r.removeEventListener(t,n,!0),gt.remove(r,e))}}}),Z.fn.extend({on:function(t,e,n,r,i){var o,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(a in t)this.on(a,e,n,t[a],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(t){return Z().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,Z(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){Z.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?Z.event.trigger(t,e,n,!0):void 0}});var Ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Dt=/<([\w:]+)/,jt=/<|&#?\w+;/,Mt=/<(?:script|style|link)/i,It=/checked\s*(?:[^=]|=\s*.checked.)/i,Pt=/^$|\/(?:java|ecma)script/i,Rt=/^true\/(.*)/,Ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,qt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qt.optgroup=qt.option,qt.tbody=qt.tfoot=qt.colgroup=qt.caption=qt.thead,qt.th=qt.td,Z.extend({clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=Z.contains(t.ownerDocument,t);if(!(Q.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Z.isXMLDoc(t)))for(a=g(s),o=g(t),r=0,i=o.length;i>r;r++)$(o[r],a[r]);if(e)if(n)for(o=o||g(t),a=a||g(s),r=0,i=o.length;i>r;r++)v(o[r],a[r]);else v(t,s);return a=g(s,"script"),a.length>0&&m(a,!u&&g(t,"script")),s},buildFragment:function(t,e,n,r){for(var i,o,a,s,u,l,c=e.createDocumentFragment(),f=[],p=0,h=t.length;h>p;p++)if(i=t[p],i||0===i)if("object"===Z.type(i))Z.merge(f,i.nodeType?[i]:i);else if(jt.test(i)){for(o=o||c.appendChild(e.createElement("div")),a=(Dt.exec(i)||["",""])[1].toLowerCase(),s=qt[a]||qt._default,o.innerHTML=s[1]+i.replace(Ot,"<$1></$2>")+s[2],l=s[0];l--;)o=o.lastChild;Z.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(e.createTextNode(i));for(c.textContent="",p=0;i=f[p++];)if((!r||-1===Z.inArray(i,r))&&(u=Z.contains(i.ownerDocument,i),o=g(c.appendChild(i),"script"),u&&m(o),n))for(l=0;i=o[l++];)Pt.test(i.type||"")&&n.push(i);return c},cleanData:function(t){for(var e,n,r,i,o=Z.event.special,a=0;void 0!==(n=t[a]);a++){if(Z.acceptData(n)&&(i=n[gt.expando],i&&(e=gt.cache[i]))){if(e.events)for(r in e.events)o[r]?Z.event.remove(n,r):Z.removeEvent(n,r,e.handle);gt.cache[i]&&delete gt.cache[i]}delete $t.cache[n[$t.expando]]}}}),Z.fn.extend({text:function(t){return vt(this,function(t){return void 0===t?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?Z.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||Z.cleanData(g(n)),n.parentNode&&(e&&Z.contains(n.ownerDocument,n)&&m(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Z.cleanData(g(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Z.clone(this,t,e)})},html:function(t){return vt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Mt.test(t)&&!qt[(Dt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ot,"<$1></$2>");try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&(Z.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Z.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=B.apply([],t);var n,r,i,o,a,s,u=0,l=this.length,c=this,f=l-1,p=t[0],m=Z.isFunction(p);if(m||l>1&&"string"==typeof p&&!Q.checkClone&&It.test(p))return this.each(function(n){var r=c.eq(n);m&&(t[0]=p.call(this,n,r.html())),r.domManip(t,e)});if(l&&(n=Z.buildFragment(t,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Z.map(g(n,"script"),h),o=i.length;l>u;u++)a=n,u!==f&&(a=Z.clone(a,!0,!0),o&&Z.merge(i,g(a,"script"))),e.call(this[u],a,u);if(o)for(s=i[i.length-1].ownerDocument,Z.map(i,d),u=0;o>u;u++)a=i[u],Pt.test(a.type||"")&&!gt.access(a,"globalEval")&&Z.contains(s,a)&&(a.src?Z._evalUrl&&Z._evalUrl(a.src):Z.globalEval(a.textContent.replace(Ft,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Z.fn[t]=function(t){for(var n,r=[],i=Z(t),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),Z(i[a])[e](n),W.apply(r,n.get());return this.pushStack(r)}});var Vt,Lt={},Ht=/^margin/,_t=new RegExp("^("+wt+")(?!px)[a-z%]+$","i"),Ut=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var e=t.getComputedStyle(a,null);n="1%"!==e.top,r="4px"===e.width,i.removeChild(o)}var n,r,i=J.documentElement,o=J.createElement("div"),a=J.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),t.getComputedStyle&&Z.extend(Q,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==r&&e(),r},reliableMarginRight:function(){var e,n=a.appendChild(J.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",i.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),i.removeChild(o),a.removeChild(n),e}}))}(),Z.swap=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=a[o];return i};var Bt=/^(none|table(?!-c[ea]).+)/,Wt=new RegExp("^("+wt+")(.*)$","i"),zt=new RegExp("^([+-])=("+wt+")","i"),Yt={position:"absolute",visibility:"hidden",display:"block"},Gt={letterSpacing:"0",fontWeight:"400"},Xt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=w(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=Z.camelCase(e),u=t.style;return e=Z.cssProps[s]||(Z.cssProps[s]=C(u,s)),a=Z.cssHooks[e]||Z.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:u[e]:(o=typeof n,"string"===o&&(i=zt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||Z.cssNumber[s]||(n+="px"),Q.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u[e]=n)),void 0)}},css:function(t,e,n,r){var i,o,a,s=Z.camelCase(e);return e=Z.cssProps[s]||(Z.cssProps[s]=C(t.style,s)),a=Z.cssHooks[e]||Z.cssHooks[s],a&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=w(t,e,r)),"normal"===i&&e in Gt&&(i=Gt[e]),""===n||n?(o=parseFloat(i),n===!0||Z.isNumeric(o)?o||0:i):i}}),Z.each(["height","width"],function(t,e){Z.cssHooks[e]={get:function(t,n,r){return n?Bt.test(Z.css(t,"display"))&&0===t.offsetWidth?Z.swap(t,Yt,function(){return T(t,e,r)}):T(t,e,r):void 0},set:function(t,n,r){var i=r&&Ut(t);return E(t,n,r?S(t,e,r,"border-box"===Z.css(t,"boxSizing",!1,i),i):0)}}}),Z.cssHooks.marginRight=x(Q.reliableMarginRight,function(t,e){return e?Z.swap(t,{display:"inline-block"},w,[t,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(t,e){Z.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+xt[r]+e]=o[r]||o[r-2]||o[0];return i}},Ht.test(t)||(Z.cssHooks[t+e].set=E)}),Z.fn.extend({css:function(t,e){return vt(this,function(t,e,n){var r,i,o={},a=0;if(Z.isArray(e)){for(r=Ut(t),i=e.length;i>a;a++)o[e[a]]=Z.css(t,e[a],!1,r);return o}return void 0!==n?Z.style(t,e,n):Z.css(t,e)},t,e,arguments.length>1)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ct(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=A,A.prototype={constructor:A,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var t=A.propHooks[this.prop];return t&&t.get?t.get(this):A.propHooks._default.get(this)},run:function(t){var e,n=A.propHooks[this.prop];return this.options.duration?this.pos=e=Z.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Z.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Z.fx.step[t.prop]?Z.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Z.cssProps[t.prop]]||Z.cssHooks[t.prop])?Z.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Z.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Z.fx=A.prototype.init,Z.fx.step={};var Qt,Jt,Kt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+wt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[j],ne={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=Zt.exec(e),o=i&&i[3]||(Z.cssNumber[t]?"":"px"),a=(Z.cssNumber[t]||"px"!==o&&+r)&&Zt.exec(Z.css(n.elem,t)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,Z.style(n.elem,t,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(I,{tweener:function(t,e){Z.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],ne[n]=ne[n]||[],ne[n].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),Z.speed=function(t,e,n){var r=t&&"object"==typeof t?Z.extend({},t):{complete:n||!n&&e||Z.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Z.isFunction(e)&&e};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Ct).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=Z.isEmptyObject(t),o=Z.speed(e,n,r),a=function(){var e=I(this,Z.extend({},t),o);(i||gt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=Z.timers,a=gt.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&te.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&Z.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=gt.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=Z.timers,a=r?r.length:0;for(n.finish=!0,Z.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(t,e){var n=Z.fn[e];Z.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(O(e,!0),t,r,i)}}),Z.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Z.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),Z.timers=[],Z.fx.tick=function(){var t,e=0,n=Z.timers;for(Qt=Z.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||Z.fx.stop(),Qt=void 0},Z.fx.timer=function(t){Z.timers.push(t),t()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Jt||(Jt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Jt),Jt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(t,e){return t=Z.fx?Z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var t=J.createElement("input"),e=J.createElement("select"),n=e.appendChild(J.createElement("option"));t.type="checkbox",Q.checkOn=""!==t.value,Q.optSelected=n.selected,e.disabled=!0,Q.optDisabled=!n.disabled,t=J.createElement("input"),t.value="t",t.type="radio",Q.radioValue="t"===t.value}();var re,ie,oe=Z.expr.attrHandle;Z.fn.extend({attr:function(t,e){return vt(this,Z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Z.removeAttr(this,t)})}}),Z.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===St?Z.prop(t,e,n):(1===o&&Z.isXMLDoc(t)||(e=e.toLowerCase(),r=Z.attrHooks[e]||(Z.expr.match.bool.test(e)?ie:re)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=Z.find.attr(t,e),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void Z.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(ht);if(o&&1===t.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!Q.radioValue&&"radio"===e&&Z.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),ie={set:function(t,e,n){return e===!1?Z.removeAttr(t,n):t.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(t,e){var n=oe[e]||Z.find.attr;oe[e]=function(t,e,r){var i,o;return r||(o=oe[e],oe[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,oe[e]=o),i}});var ae=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(t,e){return vt(this,Z.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Z.propFix[t]||t]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var r,i,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!Z.isXMLDoc(t),o&&(e=Z.propFix[e]||e,i=Z.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ae.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Q.optSelected||(Z.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var se=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(t){var e,n,r,i,o,a,s="string"==typeof t&&t,u=0,l=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(ht)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(se," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=Z.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,r,i,o,a,s=0===arguments.length||"string"==typeof t&&t,u=0,l=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(ht)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(se," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=t?Z.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):Z.isFunction(t)?this.each(function(n){Z(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,r=0,i=Z(this),o=t.match(ht)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===St||"boolean"===n)&&(this.className&&gt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":gt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(se," ").indexOf(e)>=0)return!0;return!1}});var ue=/\r/g;Z.fn.extend({val:function(t){var e,n,r,i=this[0];{if(arguments.length)return r=Z.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,Z(this).val()):t,null==i?i="":"number"==typeof i?i+="":Z.isArray(i)&&(i=Z.map(i,function(t){return null==t?"":t+""})),e=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return e=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ue,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(t){var e=Z.find.attr(t,"value");return null!=e?e:Z.trim(Z.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],(n.selected||u===i)&&(Q.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!Z.nodeName(n.parentNode,"optgroup"))){if(e=Z(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=Z.makeArray(e),a=i.length;a--;)r=i[a],(r.selected=Z.inArray(r.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(t,e){return Z.isArray(e)?t.checked=Z.inArray(Z(t).val(),e)>=0:void 0}},Q.checkOn||(Z.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Z.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),Z.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var le=Z.now(),ce=/\?/;Z.parseJSON=function(t){return JSON.parse(t+"")},Z.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+t),[m
[32m+[m[32me};var fe=/#.*$/,pe=/([?&])_=[^&]*/,he=/^(.*?):[ \t]*([^\r\n]*)$/gm,de=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,me=/^(?:GET|HEAD)$/,ve=/^\/\//,ge=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,$e={},ye={},be="*/".concat("*"),we=t.location.href,xe=ge.exec(we.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:we,type:"GET",isLocal:de.test(xe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":be,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?F(F(t,Z.ajaxSettings),e):F(Z.ajaxSettings,t)},ajaxPrefilter:P($e),ajaxTransport:P(ye),ajax:function(t,e){function n(t,e,n,a){var u,c,g,$,b,x=e;2!==y&&(y=2,s&&clearTimeout(s),r=void 0,o=a||"",w.readyState=t>0?4:0,u=t>=200&&300>t||304===t,n&&($=q(f,w,n)),$=V(f,$,w,u),u?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[i]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[i]=b)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=$.state,c=$.data,g=$.error,u=!g)):(g=x,(t||!x)&&(x="error",0>t&&(t=0))),w.status=t,w.statusText=(e||x)+"",u?d.resolveWith(p,[c,x,w]):d.rejectWith(p,[w,x,g]),w.statusCode(v),v=void 0,l&&h.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?c:g]),m.fireWith(p,[w,x]),l&&(h.trigger("ajaxComplete",[w,f]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,a,s,u,l,c,f=Z.ajaxSetup({},e),p=f.context||f,h=f.context&&(p.nodeType||p.jquery)?Z(p):Z.event,d=Z.Deferred(),m=Z.Callbacks("once memory"),v=f.statusCode||{},g={},$={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!a)for(a={};e=he.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=$[n]=$[n]||t,g[t]=e),this},overrideMimeType:function(t){return y||(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)v[e]=[v[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return r&&r.abort(e),n(0,e),this}};if(d.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,f.url=((t||f.url||we)+"").replace(fe,"").replace(ve,xe[1]+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=Z.trim(f.dataType||"*").toLowerCase().match(ht)||[""],null==f.crossDomain&&(u=ge.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]===xe[1]&&u[2]===xe[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(xe[3]||("http:"===xe[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=Z.param(f.data,f.traditional)),R($e,f,e,w),2===y)return w;l=Z.event&&f.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!me.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(ce.test(i)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=pe.test(i)?i.replace(pe,"$1_="+le++):i+(ce.test(i)?"&":"?")+"_="+le++)),f.ifModified&&(Z.lastModified[i]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[i]),Z.etag[i]&&w.setRequestHeader("If-None-Match",Z.etag[i])),(f.data&&f.hasContent&&f.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+be+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(p,w,f)===!1||2===y))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=R(ye,f,e,w)){w.readyState=1,l&&h.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},f.timeout));try{y=1,r.send(g,n)}catch(x){if(!(2>y))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return Z.get(t,e,n,"json")},getScript:function(t,e){return Z.get(t,void 0,e,"script")}}),Z.each(["get","post"],function(t,e){Z[e]=function(t,n,r,i){return Z.isFunction(n)&&(i=i||r,r=n,n=void 0),Z.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),Z._evalUrl=function(t){return Z.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(t){var e;return Z.isFunction(t)?this.each(function(e){Z(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Z(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return Z.isFunction(t)?this.each(function(e){Z(this).wrapInner(t.call(this,e))}):this.each(function(){var e=Z(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Z.isFunction(t);return this.each(function(n){Z(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Z.expr.filters.visible=function(t){return!Z.expr.filters.hidden(t)};var Ce=/%20/g,Ee=/\[\]$/,Se=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,ke=/^(?:input|select|textarea|keygen)/i;Z.param=function(t,e){var n,r=[],i=function(t,e){e=Z.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(t)||t.jquery&&!Z.isPlainObject(t))Z.each(t,function(){i(this.name,this.value)});else for(n in t)L(n,t[n],e,i);return r.join("&").replace(Ce,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Z.prop(this,"elements");return t?Z.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Z(this).is(":disabled")&&ke.test(this.nodeName)&&!Te.test(t)&&(this.checked||!Et.test(t))}).map(function(t,e){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(t){return{name:e.name,value:t.replace(Se,"\r\n")}}):{name:e.name,value:n.replace(Se,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ae=0,Ne={},Oe={0:200,1223:204},De=Z.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Ne)Ne[t]()}),Q.cors=!!De&&"withCredentials"in De,Q.ajax=De=!!De,Z.ajaxTransport(function(t){var e;return Q.cors||De&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),a=++Ae;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete Ne[a],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(Oe[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Ne[a]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(s){if(e)throw s}},abort:function(){e&&e()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Z.globalEval(t),t}}}),Z.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=Z("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),J.head.appendChild(e[0])},abort:function(){n&&n()}}}});var je=[],Me=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=je.pop()||Z.expando+"_"+le++;return this[t]=!0,t}}),Z.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=e.jsonp!==!1&&(Me.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Me.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=Z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Me,"$1"+i):e.jsonp!==!1&&(e.url+=(ce.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||Z.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,je.push(i)),a&&Z.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),Z.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||J;var r=at.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=Z.buildFragment([t],e,i),i&&i.length&&Z(i).remove(),Z.merge([],r.childNodes))};var Ie=Z.fn.load;Z.fn.load=function(t,e,n){if("string"!=typeof t&&Ie)return Ie.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>=0&&(r=Z.trim(t.slice(s)),t=t.slice(0,s)),Z.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&Z.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?Z("<div>").append(Z.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Z.fn[e]=function(t){return this.on(e,t)}}),Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length};var Pe=t.document.documentElement;Z.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,l,c=Z.css(t,"position"),f=Z(t),p={};"static"===c&&(t.style.position="relative"),s=f.offset(),o=Z.css(t,"top"),u=Z.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),Z.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(p.top=e.top-s.top+a),null!=e.left&&(p.left=e.left-s.left+i),"using"in e?e.using.call(t,p):f.css(p)}},Z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return e=o.documentElement,Z.contains(e,r)?(typeof r.getBoundingClientRect!==St&&(i=r.getBoundingClientRect()),n=H(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===Z.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Z.nodeName(t[0],"html")||(r=t.offset()),r.top+=Z.css(t[0],"borderTopWidth",!0),r.left+=Z.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-Z.css(n,"marginTop",!0),left:e.left-r.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Pe;t&&!Z.nodeName(t,"html")&&"static"===Z.css(t,"position");)t=t.offsetParent;return t||Pe})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r="pageYOffset"===n;Z.fn[e]=function(i){return vt(this,function(e,i,o){var a=H(e);return void 0===o?a?a[n]:e[i]:void(a?a.scrollTo(r?t.pageXOffset:o,r?o:t.pageYOffset):e[i]=o)},e,i,arguments.length,null)}}),Z.each(["top","left"],function(t,e){Z.cssHooks[e]=x(Q.pixelPosition,function(t,n){return n?(n=w(t,e),_t.test(n)?Z(t).position()[e]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(t,e){Z.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){Z.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return vt(this,function(e,n,r){var i;return Z.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?Z.css(e,n,a):Z.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Re=t.jQuery,Fe=t.$;return Z.noConflict=function(e){return t.$===Z&&(t.$=Fe),e&&t.jQuery===Z&&(t.jQuery=Re),Z},typeof e===St&&(t.jQuery=t.$=Z),Z}),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(t,e,n){"use strict";function r(t,e){return V(new(V(function(){},{prototype:t})),e)}function i(t){return q(arguments,function(e){e!==t&&q(e,function(e,n){t.hasOwnProperty(n)||(t[n]=e)})}),t}function o(t,e){var n=[];for(var r in t.path){if(t.path[r]!==e.path[r])break;n.push(t.path[r])}return n}function a(t){if(Object.keys)return Object.keys(t);var e=[];return q(t,function(t,n){e.push(n)}),e}function s(t,e){if(Array.prototype.indexOf)return t.indexOf(e,Number(arguments[2])||0);var n=t.length>>>0,r=Number(arguments[2])||0;for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=n);n>r;r++)if(r in t&&t[r]===e)return r;return-1}function u(t,e,n,r){var i,u=o(n,r),l={},c=[];for(var f in u)if(u[f].params&&(i=a(u[f].params),i.length))for(var p in i)s(c,i[p])>=0||(c.push(i[p]),l[i[p]]=t[i[p]]);return V({},l,e)}function l(t,e,n){if(!n){n=[];for(var r in t)n.push(r)}for(var i=0;i<n.length;i++){var o=n[i];if(t[o]!=e[o])return!1}return!0}function c(t,e){var n={};return q(t,function(t){n[t]=e[t]}),n}function f(t){var e={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return q(n,function(n){n in t&&(e[n]=t[n])}),e}function p(t){var e={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in t)-1==s(n,r)&&(e[r]=t[r]);return e}function h(t,e){var n=F(t),r=n?[]:{};return q(t,function(t,i){e(t,i)&&(r[n?r.length:i]=t)}),r}function d(t,e){var n=F(t)?[]:{};return q(t,function(t,r){n[r]=e(t,r)}),n}function m(t,e){var r=1,o=2,u={},l=[],c=u,f=V(t.when(u),{$$promises:u,$$values:u});this.study=function(u){function h(t,n){if($[n]!==o){if(g.push(n),$[n]===r)throw g.splice(0,s(g,n)),new Error("Cyclic dependency: "+g.join(" -> "));if($[n]=r,P(t))v.push(n,[function(){return e.get(t)}],l);else{var i=e.annotate(t);q(i,function(t){t!==n&&u.hasOwnProperty(t)&&h(u[t],t)}),v.push(n,t,i)}g.pop(),$[n]=o}}function d(t){return R(t)&&t.then&&t.$$promises}if(!R(u))throw new Error("'invocables' must be an object");var m=a(u||{}),v=[],g=[],$={};return q(u,h),u=g=$=null,function(r,o,a){function s(){--b||(w||i(y,o.$$values),g.$$values=y,g.$$promises=g.$$promises||!0,delete g.$$inheritedValues,h.resolve(y))}function u(t){g.$$failure=t,h.reject(t)}function l(n,i,o){function l(t){f.reject(t),u(t)}function c(){if(!M(g.$$failure))try{f.resolve(e.invoke(i,a,y)),f.promise.then(function(t){y[n]=t,s()},l)}catch(t){l(t)}}var f=t.defer(),p=0;q(o,function(t){$.hasOwnProperty(t)&&!r.hasOwnProperty(t)&&(p++,$[t].then(function(e){y[t]=e,--p||c()},l))}),p||c(),$[n]=f.promise}if(d(r)&&a===n&&(a=o,o=r,r=null),r){if(!R(r))throw new Error("'locals' must be an object")}else r=c;if(o){if(!d(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=f;var h=t.defer(),g=h.promise,$=g.$$promises={},y=V({},r),b=1+v.length/3,w=!1;if(M(o.$$failure))return u(o.$$failure),g;o.$$inheritedValues&&i(y,p(o.$$inheritedValues,m)),V($,o.$$promises),o.$$values?(w=i(y,p(o.$$values,m)),g.$$inheritedValues=p(o.$$values,m),s()):(o.$$inheritedValues&&(g.$$inheritedValues=p(o.$$inheritedValues,m)),o.then(s,u));for(var x=0,C=v.length;C>x;x+=3)r.hasOwnProperty(v[x])?s():l(v[x],v[x+1],v[x+2]);return g}},this.resolve=function(t,e,n,r){return this.study(t)(e,n,r)}}function v(t,e,n){this.fromConfig=function(t,e,n){return M(t.template)?this.fromString(t.template,e):M(t.templateUrl)?this.fromUrl(t.templateUrl,e):M(t.templateProvider)?this.fromProvider(t.templateProvider,e,n):null},this.fromString=function(t,e){return I(t)?t(e):t},this.fromUrl=function(n,r){return I(n)&&(n=n(r)),null==n?null:t.get(n,{cache:e,headers:{Accept:"text/html"}}).then(function(t){return t.data})},this.fromProvider=function(t,e,r){return n.invoke(t,null,r||{params:e})}}function g(t,e,i){function o(e,n,r,i){if(v.push(e),d[e])return d[e];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+t+"'");if(m[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+t+"'");return m[e]=new H.Param(e,n,r,i),m[e]}function a(t,e,n,r){var i=["",""],o=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return o;switch(n){case!1:i=["(",")"+(r?"?":"")];break;case!0:i=["?(",")?"];break;default:i=["("+n+"|",")?"]}return o+i[0]+e+i[1]}function s(i,o){var a,s,u,l,c;return a=i[2]||i[3],c=e.params[a],u=t.substring(p,i.index),s=o?i[4]:i[4]||("*"==i[1]?".*":null),l=H.type(s||"string")||r(H.type("string"),{pattern:new RegExp(s,e.caseInsensitive?"i":n)}),{id:a,regexp:s,segment:u,type:l,cfg:c}}e=V({params:{}},R(e)?e:{});var u,l=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f="^",p=0,h=this.segments=[],d=i?i.params:{},m=this.params=i?i.params.$$new():new H.ParamSet,v=[];this.source=t;for(var g,$,y;(u=l.exec(t))&&(g=s(u,!1),!(g.segment.indexOf("?")>=0));)$=o(g.id,g.type,g.cfg,"path"),f+=a(g.segment,$.type.pattern.source,$.squash,$.isOptional),h.push(g.segment),p=l.lastIndex;y=t.substring(p);var b=y.indexOf("?");if(b>=0){var w=this.sourceSearch=y.substring(b);if(y=y.substring(0,b),this.sourcePath=t.substring(0,p+b),w.length>0)for(p=0;u=c.exec(w);)g=s(u,!0),$=o(g.id,g.type,g.cfg,"search"),p=l.lastIndex}else this.sourcePath=t,this.sourceSearch="";f+=a(y)+(e.strict===!1?"/?":"")+"$",h.push(y),this.regexp=new RegExp(f,e.caseInsensitive?"i":n),this.prefix=h[0],this.$$paramNames=v}function $(t){V(this,t)}function y(){function t(t){return null!=t?t.toString().replace(/\//g,"%2F"):t}function i(t){return null!=t?t.toString().replace(/%2F/g,"/"):t}function o(){return{strict:m,caseInsensitive:p}}function u(t){return I(t)||F(t)&&I(t[t.length-1])}function l(){for(;x.length;){var t=x.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");e.extend(b[t.name],f.invoke(t.def))}}function c(t){V(this,t||{})}H=this;var f,p=!1,m=!0,v=!1,b={},w=!0,x=[],C={string:{encode:t,decode:i,is:function(t){return null==t||!M(t)||"string"==typeof t},pattern:/[^/]*/},"int":{encode:t,decode:function(t){return parseInt(t,10)},is:function(t){return M(t)&&this.decode(t.toString())===t},pattern:/\d+/},bool:{encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:function(t){return t===!0||t===!1},pattern:/0|1/},date:{encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):n},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):n},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return this.is(t)&&this.is(e)&&t.toISOString()===e.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:e.toJson,decode:e.fromJson,is:e.isObject,equals:e.equals,pattern:/[^/]*/},any:{encode:e.identity,decode:e.identity,equals:e.equals,pattern:/.*/}};y.$$getDefaultValue=function(t){if(!u(t.value))return t.value;if(!f)throw new Error("Injectable functions cannot be called at configuration time");return f.invoke(t.value)},this.caseInsensitive=function(t){return M(t)&&(p=t),p},this.strictMode=function(t){return M(t)&&(m=t),m},this.defaultSquashPolicy=function(t){if(!M(t))return v;if(t!==!0&&t!==!1&&!P(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return v=t,t},this.compile=function(t,e){return new g(t,V(o(),e))},this.isMatcher=function(t){if(!R(t))return!1;var e=!0;return q(g.prototype,function(n,r){I(n)&&(e=e&&M(t[r])&&I(t[r]))}),e},this.type=function(t,e,n){if(!M(e))return b[t];if(b.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return b[t]=new $(V({name:t},e)),n&&(x.push({name:t,def:n}),w||l()),this},q(C,function(t,e){b[e]=new $(V({name:e},t))}),b=r(b,{}),this.$get=["$injector",function(t){return f=t,w=!1,l(),q(C,function(t,e){b[e]||(b[e]=new $(t))}),this}],this.Param=function(t,e,r,i){function o(t){var e=R(t)?a(t):[],n=-1===s(e,"value")&&-1===s(e,"type")&&-1===s(e,"squash")&&-1===s(e,"array");return n&&(t={value:t}),t.$$fn=u(t.value)?t.value:function(){return t.value},t}function l(e,n,r){if(e.type&&n)throw new Error("Param '"+t+"' has two type configurations.");return n?n:e.type?e.type instanceof $?e.type:new $(e.type):"config"===r?b.any:b.string}function c(){var e={array:"search"===i?"auto":!1},n=t.match(/\[\]$/)?{array:!0}:{};return V(e,n,r).array}function p(t,e){var n=t.squash;if(!e||n===!1)return!1;if(!M(n)||null==n)return v;if(n===!0||P(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function m(t,e,r,i){var o,a,u=[{from:"",to:r||e?n:""},{from:null,to:r||e?n:""}];return o=F(t.replace)?t.replace:[],P(i)&&o.push({from:i,to:n}),a=d(o,function(t){return t.from}),h(u,function(t){return-1===s(a,t.from)}).concat(o)}function g(){if(!f)throw new Error("Injectable functions cannot be called at configuration time");var t=f.invoke(r.$$fn);if(null!==t&&t!==n&&!x.type.is(t))throw new Error("Default value ("+t+") for parameter '"+x.id+"' is not an instance of Type ("+x.type.name+")");return t}function y(t){function e(t){return function(e){return e.from===t}}function n(t){var n=d(h(x.replace,e(t)),function(t){return t.to});return n.length?n[0]:t}return t=n(t),M(t)?x.type.$normalize(t):g()}function w(){return"{Param:"+t+" "+e+" squash: '"+S+"' optional: "+E+"}"}var x=this;r=o(r),e=l(r,e,i);var C=c();e=C?e.$asArray(C,"search"===i):e,"string"!==e.name||C||"path"!==i||r.value!==n||(r.value="");var E=r.value!==n,S=p(r,E),T=m(r,C,E,S);V(this,{id:t,type:e,location:i,array:C,squash:S,replace:T,isOptional:E,value:y,dynamic:n,config:r,toString:w})},c.prototype={$$new:function(){return r(this,V(new c,{$$parent:this}))},$$keys:function(){for(var t=[],e=[],n=this,r=a(c.prototype);n;)e.push(n),n=n.$$parent;return e.reverse(),q(e,function(e){q(a(e),function(e){-1===s(t,e)&&-1===s(r,e)&&t.push(e)})}),t},$$values:function(t){var e={},n=this;return q(n.$$keys(),function(r){e[r]=n[r].value(t&&t[r])}),e},$$equals:function(t,e){var n=!0,r=this;return q(r.$$keys(),function(i){var o=t&&t[i],a=e&&e[i];r[i].type.equals(o,a)||(n=!1)}),n},$$validates:function(t){var r,i,o,a,s,u=this.$$keys();for(r=0;r<u.length&&(i=this[u[r]],o=t[u[r]],o!==n&&null!==o||!i.isOptional);r++){if(a=i.type.$normalize(o),!i.type.is(a))return!1;if(s=i.type.encode(a),e.isString(s)&&!i.type.pattern.exec(s))return!1}return!0},$$parent:n},this.ParamSet=c}function b(t,r){function i(t){var e=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(t.source);return null!=e?e[1].replace(/\\(.)/g,"$1"):""}function o(t,e){return t.replace(/\$(\$|\d{1,2})/,function(t,n){return e["$"===n?0:Number(n)]})}function a(t,e,n){if(!n)return!1;var r=t.invoke(e,e,{$match:n});return M(r)?r:!0}function s(r,i,o,a){function s(t,e,n){return"/"===m?t:e?m.slice(0,-1)+t:n?m.slice(1)+t:t}function p(t){function e(t){var e=t(o,r);return e?(P(e)&&r.replace().url(e),!0):!1}if(!t||!t.defaultPrevented){d&&r.url()===d;d=n;var i,a=l.length;for(i=0;a>i;i++)if(e(l[i]))return;c&&e(c)}}function h(){return u=u||i.$on("$locationChangeSuccess",p)}var d,m=a.baseHref(),v=r.url();return f||h(),{sync:function(){p()},listen:function(){return h()},update:function(t){return t?void(v=r.url()):void(r.url()!==v&&(r.url(v),r.replace()))},push:function(t,e,i){var o=t.format(e||{});null!==o&&e&&e["#"]&&(o+="#"+e["#"]),r.url(o),d=i&&i.$$avoidResync?r.url():n,i&&i.replace&&r.replace()},href:function(n,i,o){if(!n.validates(i))return null;var a=t.html5Mode();e.isObject(a)&&(a=a.enabled);var u=n.format(i);if(o=o||{},a||null===u||(u="#"+t.hashPrefix()+u),null!==u&&i&&i["#"]&&(u+="#"+i["#"]),u=s(u,a,o.absolute),!o.absolute||!u)return u;var l=!a&&u?"/":"",c=r.port();return c=80===c||443===c?"":":"+c,[r.protocol(),"://",r.host(),c,l,u].join("")}}}var u,l=[],c=null,f=!1;this.rule=function(t){if(!I(t))throw new Error("'rule' must be a function");return l.push(t),this},this.otherwise=function(t){if(P(t)){var e=t;t=function(){return e}}else if(!I(t))throw new Error("'rule' must be a function");return c=t,this},this.when=function(t,e){var n,s=P(e);if(P(t)&&(t=r.compile(t)),!s&&!I(e)&&!F(e))throw new Error("invalid 'handler' in when()");var u={matcher:function(t,e){return s&&(n=r.compile(e),e=["$match",function(t){return n.format(t)}]),V(function(n,r){return a(n,e,t.exec(r.path(),r.search()))},{prefix:P(t.prefix)?t.prefix:""})},regex:function(t,e){if(t.global||t.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(n=e,e=["$match",function(t){return o(n,t)}]),V(function(n,r){return a(n,e,t.exec(r.path()))},{prefix:i(t)})}},l={matcher:r.isMatcher(t),regex:t instanceof RegExp};for(var c in l)if(l[c])return this.rule(u[c](t,e));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(t){t===n&&(t=!0),f=t},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser"]}function w(t,i){function o(t){return 0===t.indexOf(".")||0===t.indexOf("^")}function p(t,e){if(!t)return n;var r=P(t),i=r?t:t.name,a=o(i);if(a){if(!e)throw new Error("No reference point given for path '"+i+"'");e=p(e);for(var s=i.split("."),u=0,l=s.length,c=e;l>u;u++)if(""!==s[u]||0!==u){if("^"!==s[u])break;if(!c.parent)throw new Error("Path '"+i+"' not valid for state '"+e.name+"'");c=c.parent}else c=e;s=s.slice(u).join("."),i=c.name+(c.name&&s?".":"")+s}var f=S[i];return!f||!r&&(r||f!==t&&f.self!==t)?n:f}function h(t,e){T[t]||(T[t]=[]),T[t].push(e)}function m(t){for(var e=T[t]||[];e.length;)v(e.shift())}function v(e){e=r(e,{self:e,resolve:e.resolve||{},toString:function(){return this.name}});var n=e.name;if(!P(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(S.hasOwnProperty(n))throw new Error("State '"+n+"'' is already defined");var i=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):P(e.parent)?e.parent:R(e.parent)&&P(e.parent.name)?e.parent.name:"";if(i&&!S[i])return h(i,e.self);for(var o in A)I(A[o])&&(e[o]=A[o](e,A.$delegates[o]));return S[n]=e,!e[k]&&e.url&&t.when(e.url,["$match","$stateParams",function(t,n){E.$current.navigable==e&&l(t,n)||E.transitionTo(e,t,{inherit:!0,location:!1})}]),m(n),e}function g(t){return t.indexOf("*")>-1}function $(t){for(var e=t.split("."),n=E.$current.name.split("."),r=0,i=e.length;i>r;r++)"*"===e[r]&&(n[r]="*");return"**"===e[0]&&(n=n.slice(s(n,e[1])),n.unshift("**")),"**"===e[e.length-1]&&(n.splice(s(n,e[e.length-2])+1,Number.MAX_VALUE),n.push("**")),e.length!=n.length?!1:n.join("")===e.join("")}function y(t,e){return P(t)&&!M(e)?A[t]:I(e)&&P(t)?(A[t]&&!A.$delegates[t]&&(A.$delegates[t]=A[t]),A[t]=e,this):this}function b(t,e){return R(t)?e=t:e.name=t,v(e),this}function w(t,i,o,s,f,h,m,v,y){function b(e,n,r,o){var a=t.$broadcast("$stateNotFound",e,n,r);if(a.defaultPrevented)return m.update(),N;if(!a.retry)return null;if(o.$retry)return m.update(),O;var s=E.transition=i.when(a.retry);return s.then(function(){return s!==E.transition?T:(e.options.$retry=!0,E.transitionTo(e.to,e.toParams,e.options))},function(){return N}),m.update(),s}function w(t,n,r,a,u,l){function p(){var n=[];return q(t.views,function(r,i){var a=r.resolve&&r.resolve!==t.resolve?r.resolve:{};a.$template=[function(){return o.load(i,{view:r,locals:u.globals,params:h,notify:l.notify})||""}],n.push(f.resolve(a,u.globals,u.resolve,t).then(function(n){if(I(r.controllerProvider)||F(r.controllerProvider)){var o=e.extend({},a,u.globals);n.$$controller=s.invoke(r.controllerProvider,null,o)}else n.$$controller=r.controller;n.$$state=t,n.$$controllerAs=r.controllerAs,u[i]=n}))}),i.all(n).then(function(){return u.globals})}var h=r?n:c(t.params.$$keys(),n),d={$stateParams:h};u.resolve=f.resolve(t.resolve,d,u.resolve,t);var m=[u.resolve.then(function(t){u.globals=t})];return a&&m.push(a),i.all(m).then(p).then(function(t){return u})}var T=i.reject(new Error("transition superseded")),A=i.reject(new Error("transition prevented")),N=i.reject(new Error("transition aborted")),O=i.reject(new Error("transition failed"));return C.locals={resolve:null,globals:{$stateParams:{}}},E={params:{},current:C.self,$current:C,transition:null},E.reload=function(t){return E.transitionTo(E.current,h,{reload:t||!0,inherit:!1,notify:!0})},E.go=function(t,e,n){return E.transitionTo(t,e,V({inherit:!0,relative:E.$current},n))},E.transitionTo=function(e,n,o){n=n||{},o=V({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a,l=E.$current,f=E.params,d=l.path,v=p(e,o.relative),g=n["#"];if(!M(v)){var $={to:e,toParams:n,options:o},y=b($,l.self,f,o);if(y)return y;if(e=$.to,n=$.toParams,o=$.options,v=p(e,o.relative),!M(v)){if(!o.relative)throw new Error("No such state '"+e+"'");throw new Error("Could not resolve '"+e+"' from state '"+o.relative+"'")}}if(v[k])throw new Error("Cannot transition to abstract state '"+e+"'");if(o.inherit&&(n=u(h,n||{},E.$current,v)),!v.params.$$validates(n))return O;n=v.params.$$values(n),e=v;var S=e.path,N=0,D=S[N],j=C.locals,I=[];if(o.reload){if(P(o.reload)||R(o.reload)){if(R(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var F=o.reload===!0?d[0]:p(o.reload);if(o.reload&&!F)throw new Error("No such reload state '"+(P(o.reload)?o.reload:o.reload.name)+"'");for(;D&&D===d[N]&&D!==F;)j=I[N]=D.locals,N++,D=S[N]}}else for(;D&&D===d[N]&&D.ownParams.$$equals(n,f);)j=I[N]=D.locals,N++,D=S[N];if(x(e,n,l,f,j,o))return g&&(n["#"]=g),E.params=n,L(E.params,h),o.location&&e.navigable&&e.navigable.url&&(m.push(e.navigable.url,n,{$$avoidResync:!0,replace:"replace"===o.location}),m.update(!0)),E.transition=null,i.when(E.current);if(n=c(e.params.$$keys(),n||{}),o.notify&&t.$broadcast("$stateChangeStart",e.self,n,l.self,f).defaultPrevented)return t.$broadcast("$stateChangeCancel",e.self,n,l.self,f),m.update(),A;for(var q=i.when(j),H=N;H<S.length;H++,D=S[H])j=I[H]=r(j),q=w(D,n,D===e,q,j,o);var _=E.transition=q.then(function(){var r,i,a;if(E.transition!==_)return T;for(r=d.length-1;r>=N;r--)a=d[r],a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(r=N;r<S.length;r++)i=S[r],i.locals=I[r],i.self.onEnter&&s.invoke(i.self.onEnter,i.self,i.locals.globals);return g&&(n["#"]=g),E.transition!==_?T:(E.$current=e,E.current=e.self,E.params=n,L(E.params,h),E.transition=null,o.location&&e.navigable&&m.push(e.navigable.url,e.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&t.$broadcast("$stateChangeSuccess",e.self,n,l.self,f),m.update(!0),E.current)},function(r){return E.transition!==_?T:(E.transition=null,a=t.$broadcast("$stateChangeError",e.self,n,l.self,f,r),a.defaultPrevented||m.update(),i.reject(r))});return _},E.is=function(t,e,r){r=V({relative:E.$current},r||{});var i=p(t,r.relative);return M(i)?E.$current!==i?!1:e?l(i.params.$$values(e),h):!0:n},E.includes=function(t,e,r){if(r=V({relative:E.$current},r||{}),P(t)&&g(t)){if(!$(t))return!1;t=E.$current.name}var i=p(t,r.relative);return M(i)?M(E.$current.includes[i.name])?e?l(i.params.$$values(e),h,a(e)):!0:!1:n},E.href=function(t,e,r){r=V({lossy:!0,inherit:!0,absolute:!1,relative:E.$current},r||{});var i=p(t,r.relative);if(!M(i))return null;r.inherit&&(e=u(h,e||{},E.$current,i));var o=i&&r.lossy?i.navigable:i;return o&&o.url!==n&&null!==o.url?m.href(o.url,c(i.params.$$keys().concat("#"),e||{}),{[m
[32m+[m[32mabsolute:r.absolute}):null},E.get=function(t,e){if(0===arguments.length)return d(a(S),function(t){return S[t].self});var n=p(t,e||E.$current);return n&&n.self?n.self:null},E}function x(t,e,n,r,i,o){function a(t,e,n){function r(e){return"search"!=t.params[e].location}var i=t.params.$$keys().filter(r),o=f.apply({},[t.params].concat(i)),a=new H.ParamSet(o);return a.$$equals(e,n)}return!o.reload&&t===n&&(i===n.locals||t.self.reloadOnSearch===!1&&a(n,r,e))?!0:void 0}var C,E,S={},T={},k="abstract",A={parent:function(t){if(M(t.parent)&&t.parent)return p(t.parent);var e=/^(.+)\.[^.]+$/.exec(t.name);return e?p(e[1]):C},data:function(t){return t.parent&&t.parent.data&&(t.data=t.self.data=V({},t.parent.data,t.data)),t.data},url:function(t){var e=t.url,n={params:t.params||{}};if(P(e))return"^"==e.charAt(0)?i.compile(e.substring(1),n):(t.parent.navigable||C).url.concat(e,n);if(!e||i.isMatcher(e))return e;throw new Error("Invalid url '"+e+"' in state '"+t+"'")},navigable:function(t){return t.url?t:t.parent?t.parent.navigable:null},ownParams:function(t){var e=t.url&&t.url.params||new H.ParamSet;return q(t.params||{},function(t,n){e[n]||(e[n]=new H.Param(n,null,t,"config"))}),e},params:function(t){return t.parent&&t.parent.params?V(t.parent.params.$$new(),t.ownParams):new H.ParamSet},views:function(t){var e={};return q(M(t.views)?t.views:{"":t},function(n,r){r.indexOf("@")<0&&(r+="@"+t.parent.name),e[r]=n}),e},path:function(t){return t.parent?t.parent.path.concat(t):[]},includes:function(t){var e=t.parent?V({},t.parent.includes):{};return e[t.name]=!0,e},$delegates:{}};C=v({name:"",url:"^",views:null,"abstract":!0}),C.navigable=null,this.decorator=y,this.state=b,this.$get=w,w.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function x(){function t(t,e){return{load:function(n,r){var i,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return r=V(o,r),r.view&&(i=e.fromConfig(r.view,r.params,r.locals)),i&&r.notify&&t.$broadcast("$viewContentLoading",r),i}}}this.$get=t,t.$inject=["$rootScope","$templateFactory"]}function C(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){return n(function(){t[0].scrollIntoView()},0,!1)}}]}function E(t,n,r,i){function o(){return n.has?function(t){return n.has(t)?n.get(t):null}:function(t){try{return n.get(t)}catch(e){return null}}}function a(t,e){var n=function(){return{enter:function(t,e,n){e.after(t),n()},leave:function(t,e){t.remove(),e()}}};if(l)return{enter:function(t,e,n){var r=l.enter(t,null,e,n);r&&r.then&&r.then(n)},leave:function(t,e){var n=l.leave(t,e);n&&n.then&&n.then(e)}};if(u){var r=u&&u(e,t);return{enter:function(t,e,n){r.enter(t,null,e),n()},leave:function(t,e){r.leave(t),e()}}}return n()}var s=o(),u=s("$animator"),l=s("$animate"),c={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,o,s){return function(n,o,u){function l(){f&&(f.remove(),f=null),h&&(h.$destroy(),h=null),p&&(g.leave(p,function(){f=null}),f=p,p=null)}function c(a){var c,f=T(n,u,o,i),$=f&&t.$current&&t.$current.locals[f];if(a||$!==d){c=n.$new(),d=t.$current.locals[f];var y=s(c,function(t){g.enter(t,o,function(){h&&h.$emit("$viewContentAnimationEnded"),(e.isDefined(v)&&!v||n.$eval(v))&&r(t)}),l()});p=y,h=c,h.$emit("$viewContentLoaded"),h.$eval(m)}}var f,p,h,d,m=u.onload||"",v=u.autoscroll,g=a(u,n);n.$on("$stateChangeSuccess",function(){c(!1)}),n.$on("$viewContentLoading",function(){c(!1)}),c(!0)}}};return c}function S(t,e,n,r){return{restrict:"ECA",priority:-400,compile:function(i){var o=i.html();return function(i,a,s){var u=n.$current,l=T(i,s,a,r),c=u&&u.locals[l];if(c){a.data("$uiView",{name:l,state:c.$$state}),a.html(c.$template?c.$template:o);var f=t(a.contents());if(c.$$controller){c.$scope=i,c.$element=a;var p=e(c.$$controller,c);c.$$controllerAs&&(i[c.$$controllerAs]=p),a.data("$ngControllerController",p),a.children().data("$ngControllerController",p)}f(i)}}}}}function T(t,e,n,r){var i=r(e.uiView||e.name||"")(t),o=n.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(o?o.state.name:"")}function k(t,e){var n,r=t.match(/^\s*({[^}]*})\s*$/);if(r&&(t=e+"("+r[1]+")"),n=t.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+t+"'");return{state:n[1],paramExpr:n[3]||null}}function A(t){var e=t.parent().inheritedData("$uiView");return e&&e.state&&e.state.name?e.state:void 0}function N(t,n){var r=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,a,s){var u=k(a.uiSref,t.current.name),l=null,c=A(o)||t.$current,f="[object SVGAnimatedString]"===Object.prototype.toString.call(o.prop("href"))?"xlink:href":"href",p=null,h="A"===o.prop("tagName").toUpperCase(),d="FORM"===o[0].nodeName,m=d?"action":f,v=!0,g={relative:c,inherit:!0},$=i.$eval(a.uiSrefOpts)||{};e.forEach(r,function(t){t in $&&(g[t]=$[t])});var y=function(n){if(n&&(l=e.copy(n)),v){p=t.href(u.state,l,g);var r=s[1]||s[0];return r&&r.$$addStateInfo(u.state,l),null===p?(v=!1,!1):void a.$set(m,p)}};u.paramExpr&&(i.$watch(u.paramExpr,function(t,e){t!==l&&y(t)},!0),l=e.copy(i.$eval(u.paramExpr))),y(),d||o.bind("click",function(e){var r=e.which||e.button;if(!(r>1||e.ctrlKey||e.metaKey||e.shiftKey||o.attr("target"))){var i=n(function(){t.go(u.state,l,g)});e.preventDefault();var a=h&&!p?1:0;e.preventDefault=function(){a--<=0&&n.cancel(i)}}})}}}function O(t,e,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,r,i){function o(){a()?r.addClass(u):r.removeClass(u)}function a(){for(var t=0;t<l.length;t++)if(s(l[t].state,l[t].params))return!0;return!1}function s(e,n){return"undefined"!=typeof i.uiSrefActiveEq?t.is(e.name,n):t.includes(e.name,n)}var u,l=[];u=n(i.uiSrefActiveEq||i.uiSrefActive||"",!1)(e),this.$$addStateInfo=function(e,n){var i=t.get(e,A(r));l.push({state:i||{name:e},params:n}),o()},e.$on("$stateChangeSuccess",o)}]}}function D(t){var e=function(e){return t.is(e)};return e.$stateful=!0,e}function j(t){var e=function(e){return t.includes(e)};return e.$stateful=!0,e}var M=e.isDefined,I=e.isFunction,P=e.isString,R=e.isObject,F=e.isArray,q=e.forEach,V=e.extend,L=e.copy;e.module("ui.router.util",["ng"]),e.module("ui.router.router",["ui.router.util"]),e.module("ui.router.state",["ui.router.router","ui.router.util"]),e.module("ui.router",["ui.router.state"]),e.module("ui.router.compat",["ui.router"]),m.$inject=["$q","$injector"],e.module("ui.router.util").service("$resolve",m),v.$inject=["$http","$templateCache","$injector"],e.module("ui.router.util").service("$templateFactory",v);var H;g.prototype.concat=function(t,e){var n={caseInsensitive:H.caseInsensitive(),strict:H.strictMode(),squash:H.defaultSquashPolicy()};return new g(this.sourcePath+t+this.sourceSearch,V(n,e),this)},g.prototype.toString=function(){return this.source},g.prototype.exec=function(t,e){function n(t){function e(t){return t.split("").reverse().join("")}function n(t){return t.replace(/\\-/g,"-")}var r=e(t).split(/-(?!\\)/),i=d(r,e);return d(i,n).reverse()}var r=this.regexp.exec(t);if(!r)return null;e=e||{};var i,o,a,s=this.parameters(),u=s.length,l=this.segments.length-1,c={};if(l!==r.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;l>i;i++){a=s[i];var f=this.params[a],p=r[i+1];for(o=0;o<f.replace;o++)f.replace[o].from===p&&(p=f.replace[o].to);p&&f.array===!0&&(p=n(p)),c[a]=f.value(p)}for(;u>i;i++)a=s[i],c[a]=this.params[a].value(e[a]);return c},g.prototype.parameters=function(t){return M(t)?this.params[t]||null:this.$$paramNames},g.prototype.validates=function(t){return this.params.$$validates(t)},g.prototype.format=function(t){function e(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})}t=t||{};var n=this.segments,r=this.parameters(),i=this.params;if(!this.validates(t))return null;var o,a=!1,s=n.length-1,u=r.length,l=n[0];for(o=0;u>o;o++){var c=s>o,f=r[o],p=i[f],h=p.value(t[f]),m=p.isOptional&&p.type.equals(p.value(),h),v=m?p.squash:!1,g=p.type.encode(h);if(c){var $=n[o+1];if(v===!1)null!=g&&(l+=F(g)?d(g,e).join("-"):encodeURIComponent(g)),l+=$;else if(v===!0){var y=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=$.match(y)[1]}else P(v)&&(l+=v+$)}else{if(null==g||m&&v!==!1)continue;F(g)||(g=[g]),g=d(g,encodeURIComponent).join("&"+f+"="),l+=(a?"&":"?")+(f+"="+g),a=!0}}return l},$.prototype.is=function(t,e){return!0},$.prototype.encode=function(t,e){return t},$.prototype.decode=function(t,e){return t},$.prototype.equals=function(t,e){return t==e},$.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},$.prototype.pattern=/.*/,$.prototype.toString=function(){return"{Type:"+this.name+"}"},$.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},$.prototype.$asArray=function(t,e){function r(t,e){function r(t,e){return function(){return t[e].apply(t,arguments)}}function i(t){return F(t)?t:M(t)?[t]:[]}function o(t){switch(t.length){case 0:return n;case 1:return"auto"===e?t[0]:t;default:return t}}function a(t){return!t}function s(t,e){return function(n){n=i(n);var r=d(n,t);return e===!0?0===h(r,a).length:o(r)}}function u(t){return function(e,n){var r=i(e),o=i(n);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!t(r[a],o[a]))return!1;return!0}}this.encode=s(r(t,"encode")),this.decode=s(r(t,"decode")),this.is=s(r(t,"is"),!0),this.equals=u(r(t,"equals")),this.pattern=t.pattern,this.$normalize=s(r(t,"$normalize")),this.name=t.name,this.$arrayMode=e}if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new r(this,t)},e.module("ui.router.util").provider("$urlMatcherFactory",y),e.module("ui.router.util").run(["$urlMatcherFactory",function(t){}]),b.$inject=["$locationProvider","$urlMatcherFactoryProvider"],e.module("ui.router.router").provider("$urlRouter",b),w.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],e.module("ui.router.state").value("$stateParams",{}).provider("$state",w),x.$inject=[],e.module("ui.router.state").provider("$view",x),e.module("ui.router.state").provider("$uiViewScroll",C),E.$inject=["$state","$injector","$uiViewScroll","$interpolate"],S.$inject=["$compile","$controller","$state","$interpolate"],e.module("ui.router.state").directive("uiView",E),e.module("ui.router.state").directive("uiView",S),N.$inject=["$state","$timeout"],O.$inject=["$state","$stateParams","$interpolate"],e.module("ui.router.state").directive("uiSref",N).directive("uiSrefActive",O).directive("uiSrefActiveEq",O),D.$inject=["$state"],j.$inject=["$state"],e.module("ui.router.state").filter("isState",D).filter("includedByState",j)}(window,window.angular),angular.module("xeditable",[]).value("editableOptions",{theme:"default",icon_set:"default",buttons:"right",blurElem:"cancel",blurForm:"ignore",activate:"focus",isDisabled:!1,activationEvent:"click"}),angular.module("xeditable").directive("editableBsdate",["editableDirectiveFactory",function(t){return t({directiveName:"editableBsdate",inputTpl:"<div></div>",render:function(){this.parent.render.call(this);var t=angular.element('<input type="text" class="form-control" ng-model="$data"/>'),e=angular.element('<button type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>'),n=angular.element('<span class="input-group-btn"></span>');t.attr("datepicker-popup",this.attrs.eDatepickerPopupXEditable||"yyyy/MM/dd"),t.attr("is-open",this.attrs.eIsOpen),t.attr("date-disabled",this.attrs.eDateDisabled),t.attr("datepicker-popup",this.attrs.eDatepickerPopup),t.attr("datepicker-mode",this.attrs.eDatepickerMode||"day"),t.attr("min-date",this.attrs.eMinDate),t.attr("max-date",this.attrs.eMaxDate),t.attr("show-weeks",this.attrs.eShowWeeks||!0),t.attr("starting-day",this.attrs.eStartingDay||0),t.attr("init-date",this.attrs.eInitDate||new Date),t.attr("min-mode",this.attrs.eMinMode||"day"),t.attr("max-mode",this.attrs.eMaxMode||"year"),t.attr("format-day",this.attrs.eFormatDay||"dd"),t.attr("format-month",this.attrs.eFormatMonth||"MMMM"),t.attr("format-year",this.attrs.eFormatYear||"yyyy"),t.attr("format-day-header",this.attrs.eFormatDayHeader||"EEE"),t.attr("format-day-title",this.attrs.eFormatDayTitle||"MMMM yyyy"),t.attr("format-month-title",this.attrs.eFormatMonthTitle||"yyyy"),t.attr("year-range",this.attrs.eYearRange||20),t.attr("show-button-bar",this.attrs.eShowButtonBar||!0),t.attr("current-text",this.attrs.eCurrentText||"Today"),t.attr("clear-text",this.attrs.eClearText||"Clear"),t.attr("close-text",this.attrs.eCloseText||"Done"),t.attr("close-on-date-selection",this.attrs.eCloseOnDateSelection||!0),t.attr("date-picker-append-to-body",this.attrs.eDatePickerAppendToBody||!1),t.attr("date-disabled",this.attrs.eDateDisabled),e.attr("ng-click",this.attrs.eNgClick),n.append(e),this.inputEl.prepend(t),this.inputEl.append(n),this.inputEl.removeAttr("class"),this.inputEl.attr("class","input-group")}})}]),angular.module("xeditable").directive("editableBstime",["editableDirectiveFactory",function(t){return t({directiveName:"editableBstime",inputTpl:"<timepicker></timepicker>",render:function(){this.parent.render.call(this);var t=angular.element('<div class="well well-small" style="display:inline-block;"></div>');t.attr("ng-model",this.inputEl.attr("ng-model")),this.inputEl.removeAttr("ng-model"),this.attrs.eNgChange&&(t.attr("ng-change",this.inputEl.attr("ng-change")),this.inputEl.removeAttr("ng-change")),this.inputEl.wrap(t)}})}]),angular.module("xeditable").directive("editableCheckbox",["editableDirectiveFactory",function(t){return t({directiveName:"editableCheckbox",inputTpl:'<input type="checkbox">',render:function(){this.parent.render.call(this),this.attrs.eTitle&&(this.inputEl.wrap("<label></label>"),this.inputEl.parent().append(this.attrs.eTitle))},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){setTimeout(function(){t.scope.$apply(function(){t.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableChecklist",["editableDirectiveFactory","editableNgOptionsParser",function(t,e){return t({directiveName:"editableChecklist",inputTpl:"<span></span>",useCopy:!0,render:function(){this.parent.render.call(this);var t=e(this.attrs.eNgOptions),n='<label ng-repeat="'+t.ngRepeat+'"><input type="checkbox" checklist-model="$parent.$data" checklist-value="'+t.locals.valueFn+'"><span ng-bind="'+t.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.html(n)}})}]),angular.module("xeditable").directive("editableCombodate",["editableDirectiveFactory","editableCombodate",function(t,e){return t({directiveName:"editableCombodate",inputTpl:'<input type="text">',render:function(){this.parent.render.call(this);var t=e.getInstance(this.inputEl,{value:new Date(this.scope.$data)}),n=this;t.$widget.find("select").bind("change",function(e){n.scope.$data=new Date(t.getValue()).toISOString()})}})}]),function(){var t="text|password|email|tel|number|url|search|color|date|datetime|time|month|week|file".split("|");angular.forEach(t,function(t){var e="editable"+t.charAt(0).toUpperCase()+t.slice(1);angular.module("xeditable").directive(e,["editableDirectiveFactory",function(n){return n({directiveName:e,inputTpl:'<input type="'+t+'">'})}])}),angular.module("xeditable").directive("editableRange",["editableDirectiveFactory",function(t){return t({directiveName:"editableRange",inputTpl:'<input type="range" id="range" name="range">',render:function(){this.parent.render.call(this),this.inputEl.after("<output>{{$data}}</output>")}})}])}(),angular.module("xeditable").directive("editableRadiolist",["editableDirectiveFactory","editableNgOptionsParser",function(t,e){return t({directiveName:"editableRadiolist",inputTpl:"<span></span>",render:function(){this.parent.render.call(this);var t=e(this.attrs.eNgOptions),n='<label ng-repeat="'+t.ngRepeat+'"><input type="radio" ng-disabled="'+this.attrs.eNgDisabled+'" ng-model="$parent.$data" value="{{'+t.locals.valueFn+'}}"><span ng-bind="'+t.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.html(n)},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){setTimeout(function(){t.scope.$apply(function(){t.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableSelect",["editableDirectiveFactory",function(t){return t({directiveName:"editableSelect",inputTpl:"<select></select>",autosubmit:function(){var t=this;t.inputEl.bind("change",function(){t.scope.$apply(function(){t.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableTextarea",["editableDirectiveFactory",function(t){return t({directiveName:"editableTextarea",inputTpl:"<textarea></textarea>",addListeners:function(){var t=this;t.parent.addListeners.call(t),t.single&&"no"!==t.buttons&&t.autosubmit()},autosubmit:function(){var t=this;t.inputEl.bind("keydown",function(e){(e.ctrlKey||e.metaKey)&&13===e.keyCode&&t.scope.$apply(function(){t.scope.$form.$submit()})})}})}]),angular.module("xeditable").factory("editableController",["$q","editableUtils",function(t,e){function n(t,n,r,i,o,a,s,u,l,c){var f,p,h=this;h.scope=t,h.elem=r,h.attrs=n,h.inputEl=null,h.editorEl=null,h.single=!0,h.error="",h.theme=o[s.theme]||o["default"],h.parent={},h.icon_set="default"===s.icon_set?a["default"][s.theme]:a.external[s.icon_set],h.inputTpl="",h.directiveName="",h.useCopy=!1,h.single=null,h.buttons="right",h.init=function(e){if(h.single=e,h.name=n.eName||n[h.directiveName],!n[h.directiveName])throw"You should provide value for `"+h.directiveName+"` in editable element!";f=i(n[h.directiveName]),h.single?h.buttons=h.attrs.buttons||s.buttons:h.buttons="no",n.eName&&h.scope.$watch("$data",function(t){h.scope.$form.$data[n.eName]=t}),n.onshow&&(h.onshow=function(){return h.catchError(i(n.onshow)(t))}),n.onhide&&(h.onhide=function(){return i(n.onhide)(t)}),n.oncancel&&(h.oncancel=function(){return i(n.oncancel)(t)}),n.onbeforesave&&(h.onbeforesave=function(){return h.catchError(i(n.onbeforesave)(t))}),n.onaftersave&&(h.onaftersave=function(){return h.catchError(i(n.onaftersave)(t))}),t.$parent.$watch(n[h.directiveName],function(t,e){h.setLocalValue(),h.handleEmpty()})},h.render=function(){var t=h.theme;h.inputEl=angular.element(h.inputTpl),h.controlsEl=angular.element(t.controlsTpl),h.controlsEl.append(h.inputEl),"no"!==h.buttons&&(h.buttonsEl=angular.element(t.buttonsTpl),h.submitEl=angular.element(t.submitTpl),h.cancelEl=angular.element(t.cancelTpl),h.icon_set&&(h.submitEl.find("span").addClass(h.icon_set.ok),h.cancelEl.find("span").addClass(h.icon_set.cancel)),h.buttonsEl.append(h.submitEl).append(h.cancelEl),h.controlsEl.append(h.buttonsEl),h.inputEl.addClass("editable-has-buttons")),h.errorEl=angular.element(t.errorTpl),h.controlsEl.append(h.errorEl),h.editorEl=angular.element(h.single?t.formTpl:t.noformTpl),h.editorEl.append(h.controlsEl);for(var r in n.$attr)if(!(r.length<=1)){var i=!1,o=r.substring(1,2);if("e"===r.substring(0,1)&&o===o.toUpperCase()&&(i=r.substring(1),"Form"!==i&&"NgSubmit"!==i)){i=i.substring(0,1).toLowerCase()+e.camelToDash(i.substring(1));var a="value"!==i&&""===n[r]?i:n[r];h.inputEl.attr(i,a)}}h.inputEl.addClass("editable-input"),h.inputEl.attr("ng-model","$data"),h.editorEl.addClass(e.camelToDash(h.directiveName)),h.single&&(h.editorEl.attr("editable-form","$form"),h.editorEl.attr("blur",h.attrs.blur||("no"===h.buttons?"cancel":s.blurElem))),angular.isFunction(t.postrender)&&t.postrender.call(h)},h.setLocalValue=function(){h.scope.$data=h.useCopy?angular.copy(f(t.$parent)):f(t.$parent)},h.show=function(){return h.setLocalValue(),h.render(),r.after(h.editorEl),l(h.editorEl)(t),h.addListeners(),r.addClass("editable-hide"),h.onshow()},h.hide=function(){return h.editorEl.remove(),r.removeClass("editable-hide"),h.onhide()},h.cancel=function(){h.oncancel()},h.addListeners=function(){h.inputEl.bind("keyup",function(t){if(h.single)switch(t.keyCode){case 27:h.scope.$apply(function(){h.scope.$form.$cancel()})}}),h.single&&"no"===h.buttons&&h.autosubmit(),h.editorEl.bind("click",function(t){t.which&&1!==t.which||h.scope.$form.$visible&&(h.scope.$form._clicked=!0)})},h.setWaiting=function(t){t?(p=!h.inputEl.attr("disabled")&&!h.inputEl.attr("ng-disabled")&&!h.inputEl.attr("ng-enabled"),p&&(h.inputEl.attr("disabled","disabled"),h.buttonsEl&&h.buttonsEl.find("button").attr("disabled","disabled"))):p&&(h.inputEl.removeAttr("disabled"),h.buttonsEl&&h.buttonsEl.find("button").removeAttr("disabled"))},h.activate=function(t,e){setTimeout(function(){var n=h.inputEl[0];"focus"===s.activate&&n.focus&&(t&&(e=e||t,n.onfocus=function(){var n=this;setTimeout(function(){n.setSelectionRange(t,e)})}),n.focus()),"select"===s.activate&&n.select&&n.select()},0)},h.setError=function(e){angular.isObject(e)||(t.$error=e,h.error=e)},h.catchError=function(t,e){return angular.isObject(t)&&e!==!0?c.when(t).then(angular.bind(this,function(t){this.catchError(t,!0)}),angular.bind(this,function(t){this.catchError(t,!0)})):e&&angular.isObject(t)&&t.status&&200!==t.status&&t.data&&angular.isString(t.data)?(this.setError(t.data),t=t.data):angular.isString(t)&&this.setError(t),t},h.save=function(){f.assign(t.$parent,h.useCopy?angular.copy(h.scope.$data):h.scope.$data)},h.handleEmpty=function(){var e=f(t.$parent),n=null===e||void 0===e||""===e||angular.isArray(e)&&0===e.length;r.toggleClass("editable-empty",n)},h.autosubmit=angular.noop,h.onshow=angular.noop,h.onhide=angular.noop,h.oncancel=angular.noop,h.onbeforesave=angular.noop,h.onaftersave=angular.noop}return n.$inject=["$scope","$attrs","$element","$parse","editableThemes","editableIcons","editableOptions","$rootScope","$compile","$q"],n}]),angular.module("xeditable").factory("editableDirectiveFactory",["$parse","$compile","editableThemes","$rootScope","$document","editableController","editableFormController","editableOptions",function(t,e,n,r,i,o,a,s){return function(e){return{restrict:"A",scope:!0,require:[e.directiveName,"?^form"],controller:o,link:function(n,o,u,l){var c,f=l[0],p=!1;if(l[1])c=l[1],p=!0;else if(u.eForm){var h=t(u.eForm)(n);if(h)c=h,p=!0;else for(var d=0;d<i[0].forms.length;d++)if(i[0].forms[d].name===u.eForm){c=null,p=!0;break}}angular.forEach(e,function(t,e){void 0!==f[e]&&(f.parent[e]=f[e])}),angular.extend(f,e);var m=angular.isDefined(u.editDisabled)?n.$eval(u.editDisabled):s.isDisabled;if(!m)if(f.init(!p),n.$editable=f,o.addClass("editable"),p)if(c){if(n.$form=c,!n.$form.$addEditable)throw"Form with editable elements should have `editable-form` attribute.";n.$form.$addEditable(f)}else r.$$editableBuffer=r.$$editableBuffer||{},r.$$editableBuffer[u.eForm]=r.$$editableBuffer[u.eForm]||[],r.$$editableBuffer[u.eForm].push(f),n.$form=null;else n.$form=a(),n.$form.$addEditable(f),u.eForm&&(n.$parent[u.eForm]=n.$form),(!u.eForm||u.eClickable)&&(o.addClass("editable-click"),o.bind(s.activationEvent,function(t){t.preventDefault(),t.editable=f,n.$apply(function(){n.$form.$show()})}))}}}}]),angular.module("xeditable").factory("editableFormController",["$parse","$document","$rootScope","editablePromiseCollection","editableUtils",function(t,e,n,r,i){var o=[],a=function(t,e){if(e==t)return!0;for(var n=e.parentNode;null!==n;){if(n==t)return!0;n=n.parentNode}return!1},s=function(t,e){var n=!0,r=t.$editables;return angular.forEach(r,function(t){var r=t.editorEl[0];a(r,e.target)&&(n=!1)}),n};e.bind("click",function(t){if(!(t.which&&1!==t.which||t.isDefaultPrevented())){for(var e=[],r=[],i=0;i<o.length;i++)o[i]._clicked?o[i]._clicked=!1:o[i].$waiting||("cancel"===o[i]._blur&&s(o[i],t)&&e.push(o[i]),"submit"===o[i]._blur&&s(o[i],t)&&r.push(o[i]));(e.length||r.length)&&n.$apply(function(){angular.forEach(e,function(t){t.$cancel()}),angular.forEach(r,function(t){t.$submit()})})}});var u={$addEditable:function(t){this.$editables.push(t),t.elem.bind("$destroy",angular.bind(this,this.$removeEditable,t)),t.scope.$form||(t.scope.$form=this),this.$visible&&t.catchError(t.show())},$removeEditable:function(t){for(var e=0;e<this.$editables.length;e++)if(this.$editables[e]===t)return void this.$editables.splice(e,1)},$show:function(){if(!this.$visible){this.$visible=!0;var t=r();t.when(this.$onshow()),this.$setError(null,""),angular.forEach(this.$editables,function(e){t.when(e.show())}),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$activate),onFalse:angular.bind(this,this.$activate),onString:angular.bind(this,this.$activate)}),setTimeout(angular.bind(this,function(){this._clicked=!1,-1===i.indexOf(o,this)&&o.push(this)}),0)}},$activate:function(t){var e;if(this.$editables.length){if(angular.isString(t))for(e=0;e<this.$editables.length;e++)if(this.$editables[e].name===t)return void this.$editables[e].activate();for(e=0;e<this.$editables.length;e++)if(this.$editables[e].error)return void this.$editables[e].activate();this.$editables[0].activate(this.$editables[0].elem[0].selectionStart,this.$editables[0].elem[0].selectionEnd)}},$hide:function(){this.$visible&&(this.$visible=!1,this.$onhide(),angular.forEach(this.$editables,function(t){t.hide()}),i.arrayRemove(o,this))},$cancel:function(){this.$visible&&(this.$oncancel(),angular.forEach(this.$editables,function(t){t.cancel()}),this.$hide())},$setWaiting:function(t){this.$waiting=!!t,angular.forEach(this.$editables,function(e){e.setWaiting(!!t)})},$setError:function(t,e){angular.forEach(this.$editables,function(n){t&&n.name!==t||n.setError(e)})},$submit:function(){function t(t){var e=r();e.when(this.$onbeforesave()),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:t?angular.bind(this,this.$save):angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})}if(!this.$waiting){this.$setError(null,"");var e=r();angular.forEach(this.$editables,function(t){e.when(t.onbeforesave())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,t,!0),onFalse:angular.bind(this,t,!1),onString:angular.bind(this,this.$activate)})}},$save:function(){angular.forEach(this.$editables,function(t){t.save()});var t=r();t.when(this.$onaftersave()),angular.forEach(this.$editables,function(e){t.when(e.onaftersave())}),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})},$onshow:angular.noop,$oncancel:angular.noop,$onhide:angular.noop,$onbeforesave:angular.noop,$onaftersave:angular.noop};return function(){return angular.extend({$editables:[],$visible:!1,$waiting:!1,$data:{},_clicked:!1,_blur:null},u)}}]),angular.module("xeditable").directive("editableForm",["$rootScope","$parse","editableFormController","editableOptions",function(t,e,n,r){return{restrict:"A",require:["form"],compile:function(){return{pre:function(e,r,i,o){var a,s=o[0];i.editableForm?e[i.editableForm]&&e[i.editableForm].$show?(a=e[i.editableForm],angular.extend(s,a)):(a=n(),e[i.editableForm]=a,angular.extend(a,s)):(a=n(),angular.extend(s,a));var u=t.$$editableBuffer,l=s.$name;l&&u&&u[l]&&(angular.forEach(u[l],function(t){a.$addEditable(t)}),delete u[l])},post:function(t,n,i,o){var a;a=i.editableForm&&t[i.editableForm]&&t[i.editableForm].$show?t[i.editableForm]:o[0],i.onshow&&(a.$onshow=angular.bind(a,e(i.onshow),t)),i.onhide&&(a.$onhide=angular.bind(a,e(i.onhide),t)),i.oncancel&&(a.$oncancel=angular.bind(a,e(i.oncancel),t)),i.shown&&e(i.shown)(t)&&a.$show(),a._blur=i.blur||r.blurForm,i.ngSubmit||i.submit||(i.onbeforesave&&(a.$onbeforesave=function(){return e(i.onbeforesave)(t,{$data:a.$data})}),i.onaftersave&&(a.$onaftersave=function(){return e(i.onaftersave)(t,{$data:a.$data})}),n.bind("submit",function(e){e.preventDefault(),t.$apply(function(){a.$submit()})})),n.bind("click",function(t){t.which&&1!==t.which||a.$visible&&(a._clicked=!0)})}}}}}]),angular.module("xeditable").factory("editablePromiseCollection",["$q",function(t){function e(){return{promises:[],hasFalse:!1,hasString:!1,when:function(e,n){if(e===!1)this.hasFalse=!0;else if(!n&&angular.isObject(e))this.promises.push(t.when(e));else{if(!angular.isString(e))return;this.hasString=!0}},then:function(e){function n(){s.hasString||s.hasFalse?!s.hasString&&s.hasFalse?i():o():r()}e=e||{};var r=e.onTrue||angular.noop,i=e.onFalse||angular.noop,o=e.onString||angular.noop,a=e.onWait||angular.noop,s=this;this.promises.length?(a(!0),t.all(this.promises).then(function(t){a(!1),angular.forEach(t,function(t){s.when(t,!0)}),n()},function(t){a(!1),o()})):n()}}}return e}]),angular.module("xeditable").factory("editableUtils",[function(){return{indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1},arrayRemove:function(t,e){var n=this.indexOf(t,e);return n>=0&&t.splice(n,1),e},camelToDash:function(t){var e=/[A-Z]/g;return t.replace(e,function(t,e){return(e?"-":"")+t.toLowerCase()})},dashToCamel:function(t){var e=/([\:\-\_]+(.))/g,n=/^moz([A-Z])/;return t.replace(e,function(t,e,n,r){return r?n.toUpperCase():n}).replace(n,"Moz$1")}}}]),angular.module("xeditable").factory("editableNgOptionsParser",[function(){function t(t){var n;if(!(n=t.match(e)))throw"ng-options parse error";var r,i=n[2]||n[1],o=n[4]||n[6],a=n[5],s=(n[3]||"",n[2]?n[1]:o),u=n[7],l=n[8],c=l?n[8]:null;return void 0===a?(r=o+" in "+u,void 0!==l&&(r+=" track by "+c)):r="("+a+", "+o+") in "+u,{ngRepeat:r,locals:{valueName:o,keyName:a,valueFn:s,displayFn:i}}}var e=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;return t}]),angular.module("xeditable").factory("editableCombodate",[function(){function t(t,e){if(this.$element=angular.element(t),"INPUT"!=this.$element[0].nodeName)throw"Combodate should be applied to INPUT element";this.defaults={format:"YYYY-MM-DD HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,customClass:"",roundTime:!0,smartDays:!0},this.options=angular.extend({},this.defaults,e),this.init()}return t.prototype={constructor:t,init:function(){if(this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=angular.element('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.options.smartDays){var t=this;this.$widget.find("select").bind("change",function(e){(angular.element(e.target).hasClass("month")||angular.element(e.target).hasClass("year"))&&t.fillCombo("day")})}this.$widget.find("select").css("width","auto"),this.$element.css("display","none").after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template,e=this.options.customClass;return angular.forEach(this.map,function(e,n){e=e[0];var r=new RegExp(e+"+"),i=e.length>1?e.substring(1,2):e;t=t.replace(r,"{"+i+"}")}),t=t.replace(/ /g,"&nbsp;"),angular.forEach(this.map,function(n,r){n=n[0];var i=n.length>1?n.substring(1,2):n;t=t.replace("{"+i+"}",'<select class="'+r+" "+e+'"></select>')}),t},initCombos:function(){for(var t in this.map){var e=this.$widget[0].querySelectorAll("."+t);this["$"+t]=e.length?angular.element(e):null,this.fillCombo(t)}},fillCombo:function(t){var e=this["$"+t];if(e){var n="fill"+t.charAt(0).toUpperCase()+t.slice(1),r=this[n](),i=e.val();e.html("");for(var o=0;o<r.length;o++)e.append('<option value="'+r[o][0]+'">'+r[o][1]+"</option>");e.val(i)}},fillCommon:function(t){var e,n=[];if("name"===this.options.firstItem){e=moment.relativeTime||moment.langData()._relativeTime;var r="function"==typeof e[t]?e[t](1,!0,t,!1):e[t];r=r.split(" ").reverse()[0],n.push(["",r])}else"empty"===this.options.firstItem&&n.push(["",""]);[m
[32m+[m[32mreturn n},fillDay:function(){var t,e,n=this.fillCommon("d"),r=-1!==this.options.template.indexOf("DD"),i=31;if(this.options.smartDays&&this.$month&&this.$year){var o=parseInt(this.$month.val(),10),a=parseInt(this.$year.val(),10);isNaN(o)||isNaN(a)||(i=moment([a,o]).daysInMonth())}for(e=1;i>=e;e++)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillMonth:function(){var t,e,n=this.fillCommon("M"),r=-1!==this.options.template.indexOf("MMMM"),i=-1!==this.options.template.indexOf("MMM"),o=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=r?moment().date(1).month(e).format("MMMM"):i?moment().date(1).month(e).format("MMM"):o?this.leadZero(e+1):e+1,n.push([e,t]);return n},fillYear:function(){var t,e,n=[],r=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=r?e:(e+"").substring(2),n[this.options.yearDescending?"push":"unshift"]([e,t]);return n=this.fillCommon("y").concat(n)},fillHour:function(){var t,e,n=this.fillCommon("h"),r=-1!==this.options.template.indexOf("h"),i=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),o=r?1:0,a=r?12:23;for(e=o;a>=e;e++)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillMinute:function(){var t,e,n=this.fillCommon("m"),r=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillSecond:function(){var t,e,n=this.fillCommon("s"),r=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(t){var e,n={},r=this,i=!1;return angular.forEach(this.map,function(t,e){if("ampm"!==e){var o="day"===e?1:0;return n[e]=r["$"+e]?parseInt(r["$"+e].val(),10):o,isNaN(n[e])?(i=!0,!1):void 0}}),i?"":(this.$ampm&&(12===n.hour?n.hour="am"===this.$ampm.val()?0:12:n.hour="am"===this.$ampm.val()?n.hour:n.hour+12),e=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(e),t=void 0===t?this.options.format:t,null===t?e.isValid()?e:null:e.isValid()?e.format(t):"")},setValue:function(t){function e(t,e){var n={};return angular.forEach(t.children("option"),function(t,r){var i=angular.element(t).attr("value");if(""!==i){var o=Math.abs(i-e);("undefined"==typeof n.distance||o<n.distance)&&(n={value:i,distance:o})}}),n.value}if(t){var n="string"==typeof t?moment(t,this.options.format,!0):moment(t),r=this,i={};n.isValid()&&(angular.forEach(this.map,function(t,e){"ampm"!==e&&(i[e]=n[t[1]]())}),this.$ampm&&(i.hour>=12?(i.ampm="pm",i.hour>12&&(i.hour-=12)):(i.ampm="am",0===i.hour&&(i.hour=12))),angular.forEach(i,function(t,n){r["$"+n]&&("minute"===n&&r.options.minuteStep>1&&r.options.roundTime&&(t=e(r["$"+n],t)),"second"===n&&r.options.secondStep>1&&r.options.roundTime&&(t=e(r["$"+n],t)),r["$"+n].val(t))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(n.format(this.options.format)).triggerHandler("change"))}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},{getInstance:function(e,n){return new t(e,n)}}}]),angular.module("xeditable").factory("editableIcons",function(){var t={"default":{bs2:{ok:"icon-ok icon-white",cancel:"icon-remove"},bs3:{ok:"glyphicon glyphicon-ok",cancel:"glyphicon glyphicon-remove"}},external:{"font-awesome":{ok:"fa fa-check",cancel:"fa fa-times"}}};return t}),angular.module("xeditable").factory("editableThemes",function(){var t={"default":{formTpl:'<form class="editable-wrap"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<span class="editable-controls"></span>',inputTpl:"",errorTpl:'<div class="editable-error" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit">save</button>',cancelTpl:'<button type="button" ng-click="$form.$cancel()">cancel</button>'},bs2:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn" ng-click="$form.$cancel()"><span></span></button>'},bs3:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn btn-default" ng-click="$form.$cancel()"><span></span></button>',buttonsClass:"",inputClass:"",postrender:function(){switch(this.directiveName){case"editableText":case"editableSelect":case"editableTextarea":case"editableEmail":case"editableTel":case"editableNumber":case"editableUrl":case"editableSearch":case"editableDate":case"editableDatetime":case"editableBsdate":case"editableTime":case"editableMonth":case"editableWeek":if(this.inputEl.addClass("form-control"),this.theme.inputClass){if(this.inputEl.attr("multiple")&&("input-sm"===this.theme.inputClass||"input-lg"===this.theme.inputClass))break;this.inputEl.addClass(this.theme.inputClass)}break;case"editableCheckbox":this.editorEl.addClass("checkbox")}this.buttonsEl&&this.theme.buttonsClass&&this.buttonsEl.find("button").addClass(this.theme.buttonsClass)}}};return t}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,r=this;t(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||t(r).trigger(t.support.transition.end)};return setTimeout(i,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof e&&i[e].call(n)})}var n='[data-dismiss="alert"]',r=function(e){t(e).on("click",n,this.close)};r.VERSION="3.3.2",r.TRANSITION_DURATION=150,r.prototype.close=function(e){function n(){a.detach().trigger("closed.bs.alert").remove()}var i=t(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=t(o);e&&e.preventDefault(),a.length||(a=i.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=r,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.button"),o="object"==typeof e&&e;i||r.data("bs.button",i=new n(this,o)),"toggle"==e?i.toggle():e&&i.setState(e)})}var n=function(e,r){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.2",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();e+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(t.proxy(function(){r[i](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var r=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=r,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=t(n.target);r.hasClass("btn")||(r=r.closest(".btn")),e.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.carousel"),o=t.extend({},n.DEFAULTS,r.data(),"object"==typeof e&&e),a="string"==typeof e?e:o.slide;i||r.data("bs.carousel",i=new n(this,o)),"number"==typeof e?i.to(e):a?i[a]():o.interval&&i.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),r="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(r&&!this.options.wrap)return e;var i="prev"==t?-1:1,o=(n+i)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(e,i),a=this.interval,s="next"==e?"left":"right",u=this;if(o.hasClass("active"))return this.sliding=!1;var l=o[0],c=t.Event("slide.bs.carousel",{relatedTarget:l,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var f=t(this.$indicators.children()[this.getItemIndex(o)]);f&&f.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:l,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([e,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(p)),a&&this.cycle(),this}};var r=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=r,this};var i=function(n){var r,i=t(this),o=t(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=t.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(a.interval=!1),e.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,r=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(r)}function n(e){return this.each(function(){var n=t(this),i=n.data("bs.collapse"),o=t.extend({},r.DEFAULTS,n.data(),"object"==typeof e&&e);!i&&o.toggle&&"show"==e&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof e&&i[e]()})}var r=function(e,n){this.$element=t(e),this.options=t.extend({},r.DEFAULTS,n),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.2",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},r.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(e=i.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),e||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var u=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[a](this.$element[0][u])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,r){var i=t(r);this.addAriaAndCollapsedClass(e(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=r,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=t(this);i.attr("data-target")||r.preventDefault();var o=e(i),a=o.data("bs.collapse"),s=a?"toggle":t.extend({},i.data(),{trigger:this});n.call(o,s)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(i).remove(),t(o).each(function(){var r=t(this),i=n(r),o={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&t(n);return r&&r.length?r:e.parent()}function r(e){return this.each(function(){var n=t(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new a(this)),"string"==typeof e&&r[e].call(n)})}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.2",a.prototype.toggle=function(r){var i=t(this);if(!i.is(".disabled, :disabled")){var o=n(i),a=o.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(o.trigger(r=t.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var r=t(this);if(e.preventDefault(),e.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),a=i.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&i.find(o).trigger("focus"),r.trigger("click");var s=" li:not(.divider):visible a",u=i.find('[role="menu"]'+s+', [role="listbox"]'+s);if(u.length){var l=u.index(e.target);38==e.which&&l>0&&l--,40==e.which&&l<u.length-1&&l++,~l||(l=0),u.eq(l).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=r,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,r){return this.each(function(){var i=t(this),o=i.data("bs.modal"),a=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);o||i.data("bs.modal",o=new n(this,a)),"string"==typeof e?o[e](r):a.show&&o.show(r)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var r=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.options.backdrop&&r.adjustBackdrop(),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});i?r.$element.find(".modal-dialog").one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var r=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=r,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=t(this),i=r.attr("href"),o=t(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),e.call(o,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.tooltip"),o="object"==typeof e&&e;(i||"destroy"!=e)&&(i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,r){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",u="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,r){n[t]!=r&&(e[t]=r)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var r=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,l=u.test(s);l&&(s=s.replace(u,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var c=this.getPosition(),f=o[0].offsetWidth,p=o[0].offsetHeight;if(l){var h=s,d=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(d);s="bottom"==s&&c.bottom+p>m.bottom?"top":"top"==s&&c.top-p<m.top?"bottom":"right"==s&&c.right+f>m.width?"left":"left"==s&&c.left-f<m.left?"right":s,o.removeClass(h).addClass(s)}var v=this.getCalculatedOffset(s,c,f,p);this.applyPlacement(v,s);var g=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(e,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top=e.top+a,e.left=e.left+s,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var u=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=o&&(e.top=e.top+o-l);var c=this.getViewportAdjustedDelta(n,e,u,l);c.left?e.left+=c.left:e.top+=c.top;var f=/top|bottom/.test(n),p=f?2*c.left-i+u:2*c.top-o+l,h=f?"offsetWidth":"offsetHeight";r.offset(e),this.replaceArrow(p,r[0][h],f)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function r(){"in"!=i.hoverState&&o.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),e&&e()}var i=this,o=this.tip(),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=t.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=r?{top:0,left:0}:e.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=r?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},i,a,s,o)},n.prototype.getCalculatedOffset=function(t,e,n,r){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-r,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-r/2,left:e.left-n}:{top:e.top+e.height/2-r/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){[m
[32m+[m[32mvar s=e.top-o-a.scroll,u=e.top+o-a.scroll+r;s<a.top?i.top=a.top-s:u>a.top+a.height&&(i.top=a.top+a.height-u)}else{var l=e.left-o,c=e.left+o+n;l<a.left?i.left=a.left-l:c>a.width&&(i.left=a.left+a.width-c)}return i},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var r=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=r,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.popover"),o="object"==typeof e&&e;(i||"destroy"!=e)&&(i||r.data("bs.popover",i=new n(this,o)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.2",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var r=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=r,this}}(jQuery),+function(t){"use strict";function e(n,r){var i=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(n).is("body")?window:n),this.options=t.extend({},e.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",i),this.refresh(),this.process()}function n(n){return this.each(function(){var r=t(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new e(this,o)),"string"==typeof n&&i[n]()})}e.VERSION="3.3.2",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",n=0;t.isWindow(this.$scrollElement[0])||(e="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var r=this;this.$body.find(this.selector).map(function(){var r=t(this),i=r.data("target")||r.attr("href"),o=/^#./.test(i)&&t(i);return o&&o.length&&o.is(":visible")&&[[o[e]().top+n,i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){r.offsets.push(this[0]),r.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=r)return a!=(t=o[o.length-1])&&this.activate(t);if(a&&e<i[0])return this.activeTarget=null,this.clear();for(t=i.length;t--;)a!=o[t]&&e>=i[t]&&(!i[t+1]||e<=i[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',r=t(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=r,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof e&&i[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),r=e.data("target");if(r||(r=e.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),e.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=t(r);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(e,r,i){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var a=r.find("> .active"),s=i&&t.support.transition&&(a.length&&a.hasClass("fade")||!!r.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var r=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=r,this};var i=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.affix"),o="object"==typeof e&&e;i||r.data("bs.affix",i=new n(this,o)),"string"==typeof e&&i[e]()})}var n=function(e,r){this.options=t.extend({},n.DEFAULTS,r),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.2",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i?"top":!1;if("bottom"==this.affixed)return null!=n?i+this.unpin<=o.top?!1:"bottom":t-r>=i+a?!1:"bottom";var s=null==this.affixed,u=s?i:o.top,l=s?a:e;return null!=n&&n>=i?"top":null!=r&&u+l>=t-r?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=t("body").height();"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,e,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var u="affix"+(s?"-"+s:""),l=t.Event(u+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(u).trigger(u.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-e-o})}};var r=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=r,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),e.call(n,r)})})}(jQuery);[m
\ No newline at end of file[m
[1mdiff --git a/dist/notesapp.js b/dist/notesapp.js[m
[1mindex 60b7682..682466a 100644[m
[1m--- a/dist/notesapp.js[m
[1m+++ b/dist/notesapp.js[m
[36m@@ -109,11 +109,12 @@[m
 			return loginservice.loginUser(authUser);[m
 		};[m
 [m
[31m-		[m
[32m+[m
 [m
 	};[m
 [m
 })();[m
[32m+[m
 /**[m
 * Login service Factory[m
 * @namespace Factories[m
[36m@@ -129,7 +130,7 @@[m
 	loginservice.$inject = ['$http', 'api_url', 'sessionData', '$location'];[m
 [m
 	function loginservice($http, api_url, sessionData, $location) {[m
[31m-		[m
[32m+[m
 		return {[m
 			loginUser: loginUser,[m
 		};[m
[36m@@ -137,7 +138,7 @@[m
 [m
 		/////////////////////////[m
 [m
[31m-		[m
[32m+[m
 		/**[m
 		* @name loginUser[m
 		* @param {JSON} user's e_mail&password[m
[36m@@ -162,7 +163,7 @@[m
 				if(response != null){[m
 					authUser.token = response.data;[m
 					sessionData.setCurrentUser(authUser);[m
[31m-					$location.path('profile');[m
[32m+[m					[32m$location.path('home');[m
 				}[m
 			};[m
 [m
[36m@@ -174,6 +175,7 @@[m
 	}[m
 [m
 })();[m
[32m+[m
 /**[m
 * Profile Controller[m
 * @namespace Controllers[m
[1mdiff --git a/gulpfile.js b/gulpfile.js[m
[1mindex 5dde8a9..2a9694f 100644[m
[1m--- a/gulpfile.js[m
[1m+++ b/gulpfile.js[m
[36m@@ -12,8 +12,8 @@[m [mvar gulp = require('gulp'),[m
 [m
 gulp.task('bower', function(){[m
 [m
[31m-	var jsFilter = gulpFilter('*.js'),[m
[31m-		cssFilter = gulpFilter('*.css');[m
[32m+[m	[32mvar jsFilter = gulpFilter('*.js', {restore: true}),[m
[32m+[m		[32mcssFilter = gulpFilter('*.css', {restore: true});[m
 [m
 	return gulp.src(bowerMain())[m
 [m
[36m@@ -25,7 +25,7 @@[m [mgulp.task('bower', function(){[m
 			suffix: ".min"[m
 		}))[m
 		.pipe(gulp.dest('./dist'))[m
[31m-		.pipe(jsFilter.restore())[m
[32m+[m		[32m.pipe(jsFilter.restore)[m
 [m
 		// CSS[m
 		.pipe(cssFilter)[m
[36m@@ -36,9 +36,10 @@[m [mgulp.task('bower', function(){[m
 			suffix: ".min"[m
 		}))[m
 		.pipe(gulp.dest('./dist'))[m
[31m-		.pipe(cssFilter.restore())[m
[32m+[m		[32m.pipe(cssFilter.restore)[m
 });[m
 [m
[32m+[m
 /*[m
 * explicitly listed files, because gulp doesn't pack them in right order[m
 */[m
[36m@@ -46,5 +47,5 @@[m [mgulp.task('concatenate', function () {[m
 	return gulp.src(['./src/app.module.js', './src/app.config.js', './src/auth/auth.module.js', './src/**/*.js'])[m
 		.pipe(concat('notesapp.js'))[m
 		.pipe(gulp.dest('./dist'));[m
[31m-}); [m
[31m-    [m
\ No newline at end of file[m
[32m+[m[32m});[m
[32m+[m
[1mdiff --git a/package.json b/package.json[m
[1mindex 652d527..ea74f69 100644[m
[1m--- a/package.json[m
[1m+++ b/package.json[m
[36m@@ -18,13 +18,16 @@[m
   "homepage": "https://github.com/NTsystems/NoTes-ng#readme",[m
   "devDependencies": {[m
     "gulp": "^3.9.0",[m
[31m-    "gulp-concat": "^2.5.2",[m
[31m-    "gulp-filter": "^2.0.2",[m
[31m-    "gulp-flatten": "0.0.4",[m
[31m-    "gulp-minify-css": "^1.1.6",[m
[31m-    "gulp-rename": "^1.2.2",[m
[31m-    "gulp-sourcemaps": "^1.5.2",[m
[31m-    "gulp-uglify": "^1.2.0",[m
[31m-    "main-bower-files": "^2.8.0"[m
[32m+[m[32m    "gulp-concat": "~2.6.0",[m
[32m+[m[32m    "gulp-filter": "~3.0.1",[m
[32m+[m[32m    "gulp-flatten": "~0.2.0",[m
[32m+[m[32m    "gulp-minify-css": "~1.2.3",[m
[32m+[m[32m    "gulp-rename": "~1.2.2",[m
[32m+[m[32m    "gulp-sourcemaps": "~1.6.0",[m
[32m+[m[32m    "gulp-uglify": "~1.5.1",[m
[32m+[m[32m    "main-bower-files": "~2.11.1"[m
[32m+[m[32m  },[m
[32m+[m[32m  "dependencies": {[m
[32m+[m[32m    "gulp-install": "~0.6.0"[m
   }[m
 }[m
[1mdiff --git a/src/auth/login.controller.js b/src/auth/login.controller.js[m
[1mindex 0835664..eab0560 100644[m
[1m--- a/src/auth/login.controller.js[m
[1m+++ b/src/auth/login.controller.js[m
[36m@@ -29,8 +29,8 @@[m
 			return loginservice.loginUser(authUser);[m
 		};[m
 [m
[31m-		[m
[32m+[m
 [m
 	};[m
 [m
[31m-})();[m
\ No newline at end of file[m
[32m+[m[32m})();[m
[1mdiff --git a/src/auth/login.service.js b/src/auth/login.service.js[m
[1mindex 586164b..c7cd72d 100644[m
[1m--- a/src/auth/login.service.js[m
[1m+++ b/src/auth/login.service.js[m
[36m@@ -13,7 +13,7 @@[m
 	loginservice.$inject = ['$http', 'api_url', 'sessionData', '$location'];[m
 [m
 	function loginservice($http, api_url, sessionData, $location) {[m
[31m-		[m
[32m+[m
 		return {[m
 			loginUser: loginUser,[m
 		};[m
[36m@@ -21,7 +21,7 @@[m
 [m
 		/////////////////////////[m
 [m
[31m-		[m
[32m+[m
 		/**[m
 		* @name loginUser[m
 		* @param {JSON} user's e_mail&password[m
[36m@@ -46,7 +46,7 @@[m
 				if(response != null){[m
 					authUser.token = response.data;[m
 					sessionData.setCurrentUser(authUser);[m
[31m-					$location.path('profile');[m
[32m+[m					[32m$location.path('home');[m
 				}[m
 			};[m
 [m
[36m@@ -57,4 +57,4 @@[m
 		}[m
 	}[m
 [m
[31m-})();[m
\ No newline at end of file[m
[32m+[m[32m})();[m
[1mdiff --git a/src/auth/partials/login.view.html b/src/auth/partials/login.view.html[m
[1mindex e293fd6..be66f8d 100644[m
[1m--- a/src/auth/partials/login.view.html[m
[1m+++ b/src/auth/partials/login.view.html[m
[36m@@ -21,4 +21,4 @@[m
 	</div>[m
 </div>[m
 <!-- Latest compiled and minified CSS -->[m
[31m-<link rel="stylesheet" href="../../../assets/css/auth.css">[m
\ No newline at end of file[m
[32m+[m[32m<link rel="stylesheet" href="../../../assets/css/auth.css">[m
